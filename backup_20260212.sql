--
-- PostgreSQL database dump
--

\restrict uZiVC3jxUInbFt04EeJimgEVveTtdZq1gr00xb6deCZc6HZs1U6h2eFiy6LE3zP

-- Dumped from database version 17.6
-- Dumped by pg_dump version 17.6

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

DROP EVENT TRIGGER IF EXISTS pgrst_drop_watch;
DROP EVENT TRIGGER IF EXISTS pgrst_ddl_watch;
DROP EVENT TRIGGER IF EXISTS issue_pg_net_access;
DROP EVENT TRIGGER IF EXISTS issue_pg_graphql_access;
DROP EVENT TRIGGER IF EXISTS issue_pg_cron_access;
DROP EVENT TRIGGER IF EXISTS issue_graphql_placeholder;
DROP PUBLICATION IF EXISTS supabase_realtime_messages_publication;
DROP PUBLICATION IF EXISTS supabase_realtime;
ALTER TABLE IF EXISTS ONLY storage.vector_indexes DROP CONSTRAINT IF EXISTS vector_indexes_bucket_id_fkey;
ALTER TABLE IF EXISTS ONLY storage.s3_multipart_uploads_parts DROP CONSTRAINT IF EXISTS s3_multipart_uploads_parts_upload_id_fkey;
ALTER TABLE IF EXISTS ONLY storage.s3_multipart_uploads_parts DROP CONSTRAINT IF EXISTS s3_multipart_uploads_parts_bucket_id_fkey;
ALTER TABLE IF EXISTS ONLY storage.s3_multipart_uploads DROP CONSTRAINT IF EXISTS s3_multipart_uploads_bucket_id_fkey;
ALTER TABLE IF EXISTS ONLY storage.objects DROP CONSTRAINT IF EXISTS "objects_bucketId_fkey";
ALTER TABLE IF EXISTS ONLY storage.iceberg_tables DROP CONSTRAINT IF EXISTS iceberg_tables_namespace_id_fkey;
ALTER TABLE IF EXISTS ONLY storage.iceberg_tables DROP CONSTRAINT IF EXISTS iceberg_tables_catalog_id_fkey;
ALTER TABLE IF EXISTS ONLY storage.iceberg_namespaces DROP CONSTRAINT IF EXISTS iceberg_namespaces_catalog_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_types DROP CONSTRAINT IF EXISTS thread_types_supplier_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_types DROP CONSTRAINT IF EXISTS thread_types_color_supplier_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_types DROP CONSTRAINT IF EXISTS thread_types_color_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_type_supplier DROP CONSTRAINT IF EXISTS thread_type_supplier_thread_type_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_type_supplier DROP CONSTRAINT IF EXISTS thread_type_supplier_supplier_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_stock DROP CONSTRAINT IF EXISTS thread_stock_warehouse_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_stock DROP CONSTRAINT IF EXISTS thread_stock_thread_type_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_recovery DROP CONSTRAINT IF EXISTS thread_recovery_cone_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_order_results DROP CONSTRAINT IF EXISTS thread_order_results_week_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_order_items DROP CONSTRAINT IF EXISTS thread_order_items_week_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_order_items DROP CONSTRAINT IF EXISTS thread_order_items_style_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_order_items DROP CONSTRAINT IF EXISTS thread_order_items_po_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_order_items DROP CONSTRAINT IF EXISTS thread_order_items_color_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_order_deliveries DROP CONSTRAINT IF EXISTS thread_order_deliveries_week_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_order_deliveries DROP CONSTRAINT IF EXISTS thread_order_deliveries_warehouse_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_order_deliveries DROP CONSTRAINT IF EXISTS thread_order_deliveries_thread_type_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_order_deliveries DROP CONSTRAINT IF EXISTS thread_order_deliveries_supplier_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_movements DROP CONSTRAINT IF EXISTS thread_movements_cone_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_movements DROP CONSTRAINT IF EXISTS thread_movements_allocation_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_returns DROP CONSTRAINT IF EXISTS thread_issue_returns_issue_item_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_returns DROP CONSTRAINT IF EXISTS thread_issue_returns_cone_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_requests DROP CONSTRAINT IF EXISTS thread_issue_requests_thread_type_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_requests DROP CONSTRAINT IF EXISTS thread_issue_requests_style_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_requests DROP CONSTRAINT IF EXISTS thread_issue_requests_po_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_requests DROP CONSTRAINT IF EXISTS thread_issue_requests_color_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_lines DROP CONSTRAINT IF EXISTS thread_issue_lines_thread_type_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_lines DROP CONSTRAINT IF EXISTS thread_issue_lines_style_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_lines DROP CONSTRAINT IF EXISTS thread_issue_lines_po_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_lines DROP CONSTRAINT IF EXISTS thread_issue_lines_issue_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_lines DROP CONSTRAINT IF EXISTS thread_issue_lines_color_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_items DROP CONSTRAINT IF EXISTS thread_issue_items_issue_request_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_items DROP CONSTRAINT IF EXISTS thread_issue_items_cone_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_items DROP CONSTRAINT IF EXISTS thread_issue_items_allocation_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_inventory DROP CONSTRAINT IF EXISTS thread_inventory_warehouse_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_inventory DROP CONSTRAINT IF EXISTS thread_inventory_thread_type_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_inventory DROP CONSTRAINT IF EXISTS thread_inventory_lot_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_conflicts DROP CONSTRAINT IF EXISTS thread_conflicts_thread_type_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_conflict_allocations DROP CONSTRAINT IF EXISTS thread_conflict_allocations_conflict_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_conflict_allocations DROP CONSTRAINT IF EXISTS thread_conflict_allocations_allocation_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_allocations DROP CONSTRAINT IF EXISTS thread_allocations_thread_type_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_allocations DROP CONSTRAINT IF EXISTS thread_allocations_split_from_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_allocation_cones DROP CONSTRAINT IF EXISTS thread_allocation_cones_cone_id_fkey;
ALTER TABLE IF EXISTS ONLY public.thread_allocation_cones DROP CONSTRAINT IF EXISTS thread_allocation_cones_allocation_id_fkey;
ALTER TABLE IF EXISTS ONLY public.style_thread_specs DROP CONSTRAINT IF EXISTS style_thread_specs_tex_id_fkey;
ALTER TABLE IF EXISTS ONLY public.style_thread_specs DROP CONSTRAINT IF EXISTS style_thread_specs_supplier_id_fkey;
ALTER TABLE IF EXISTS ONLY public.style_thread_specs DROP CONSTRAINT IF EXISTS style_thread_specs_style_id_fkey;
ALTER TABLE IF EXISTS ONLY public.style_color_thread_specs DROP CONSTRAINT IF EXISTS style_color_thread_specs_thread_type_id_fkey;
ALTER TABLE IF EXISTS ONLY public.style_color_thread_specs DROP CONSTRAINT IF EXISTS style_color_thread_specs_style_thread_spec_id_fkey;
ALTER TABLE IF EXISTS ONLY public.style_color_thread_specs DROP CONSTRAINT IF EXISTS style_color_thread_specs_color_id_fkey;
ALTER TABLE IF EXISTS ONLY public.skus DROP CONSTRAINT IF EXISTS skus_po_item_id_fkey;
ALTER TABLE IF EXISTS ONLY public.skus DROP CONSTRAINT IF EXISTS skus_color_id_fkey;
ALTER TABLE IF EXISTS ONLY public.role_permissions DROP CONSTRAINT IF EXISTS role_permissions_role_id_fkey;
ALTER TABLE IF EXISTS ONLY public.role_permissions DROP CONSTRAINT IF EXISTS role_permissions_permission_id_fkey;
ALTER TABLE IF EXISTS ONLY public.po_items DROP CONSTRAINT IF EXISTS po_items_style_id_fkey;
ALTER TABLE IF EXISTS ONLY public.po_items DROP CONSTRAINT IF EXISTS po_items_po_id_fkey;
ALTER TABLE IF EXISTS ONLY public.lots DROP CONSTRAINT IF EXISTS lots_warehouse_id_fkey;
ALTER TABLE IF EXISTS ONLY public.lots DROP CONSTRAINT IF EXISTS lots_thread_type_id_fkey;
ALTER TABLE IF EXISTS ONLY public.lots DROP CONSTRAINT IF EXISTS lots_supplier_id_fkey;
ALTER TABLE IF EXISTS ONLY public.warehouses DROP CONSTRAINT IF EXISTS fk_warehouses_parent;
ALTER TABLE IF EXISTS ONLY public.employee_roles DROP CONSTRAINT IF EXISTS employee_roles_role_id_fkey;
ALTER TABLE IF EXISTS ONLY public.employee_roles DROP CONSTRAINT IF EXISTS employee_roles_employee_id_fkey;
ALTER TABLE IF EXISTS ONLY public.employee_roles DROP CONSTRAINT IF EXISTS employee_roles_assigned_by_fkey;
ALTER TABLE IF EXISTS ONLY public.employee_refresh_tokens DROP CONSTRAINT IF EXISTS employee_refresh_tokens_employee_id_fkey;
ALTER TABLE IF EXISTS ONLY public.employee_permissions DROP CONSTRAINT IF EXISTS employee_permissions_permission_id_fkey;
ALTER TABLE IF EXISTS ONLY public.employee_permissions DROP CONSTRAINT IF EXISTS employee_permissions_employee_id_fkey;
ALTER TABLE IF EXISTS ONLY public.employee_permissions DROP CONSTRAINT IF EXISTS employee_permissions_assigned_by_fkey;
ALTER TABLE IF EXISTS ONLY public.color_supplier DROP CONSTRAINT IF EXISTS color_supplier_supplier_id_fkey;
ALTER TABLE IF EXISTS ONLY public.color_supplier DROP CONSTRAINT IF EXISTS color_supplier_color_id_fkey;
ALTER TABLE IF EXISTS ONLY public.batch_transactions DROP CONSTRAINT IF EXISTS batch_transactions_to_warehouse_id_fkey;
ALTER TABLE IF EXISTS ONLY public.batch_transactions DROP CONSTRAINT IF EXISTS batch_transactions_lot_id_fkey;
ALTER TABLE IF EXISTS ONLY public.batch_transactions DROP CONSTRAINT IF EXISTS batch_transactions_from_warehouse_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.sso_domains DROP CONSTRAINT IF EXISTS sso_domains_sso_provider_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.sessions DROP CONSTRAINT IF EXISTS sessions_user_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.sessions DROP CONSTRAINT IF EXISTS sessions_oauth_client_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.saml_relay_states DROP CONSTRAINT IF EXISTS saml_relay_states_sso_provider_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.saml_relay_states DROP CONSTRAINT IF EXISTS saml_relay_states_flow_state_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.saml_providers DROP CONSTRAINT IF EXISTS saml_providers_sso_provider_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.refresh_tokens DROP CONSTRAINT IF EXISTS refresh_tokens_session_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.one_time_tokens DROP CONSTRAINT IF EXISTS one_time_tokens_user_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.oauth_consents DROP CONSTRAINT IF EXISTS oauth_consents_user_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.oauth_consents DROP CONSTRAINT IF EXISTS oauth_consents_client_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.oauth_authorizations DROP CONSTRAINT IF EXISTS oauth_authorizations_user_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.oauth_authorizations DROP CONSTRAINT IF EXISTS oauth_authorizations_client_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.mfa_factors DROP CONSTRAINT IF EXISTS mfa_factors_user_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.mfa_challenges DROP CONSTRAINT IF EXISTS mfa_challenges_auth_factor_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.mfa_amr_claims DROP CONSTRAINT IF EXISTS mfa_amr_claims_session_id_fkey;
ALTER TABLE IF EXISTS ONLY auth.identities DROP CONSTRAINT IF EXISTS identities_user_id_fkey;
ALTER TABLE IF EXISTS ONLY _realtime.extensions DROP CONSTRAINT IF EXISTS extensions_tenant_external_id_fkey;
DROP TRIGGER IF EXISTS update_objects_updated_at ON storage.objects;
DROP TRIGGER IF EXISTS protect_objects_delete ON storage.objects;
DROP TRIGGER IF EXISTS protect_buckets_delete ON storage.buckets;
DROP TRIGGER IF EXISTS enforce_bucket_name_length_trigger ON storage.buckets;
DROP TRIGGER IF EXISTS tr_check_filters ON realtime.subscription;
DROP TRIGGER IF EXISTS update_warehouses_updated_at ON public.warehouses;
DROP TRIGGER IF EXISTS update_thread_types_updated_at ON public.thread_types;
DROP TRIGGER IF EXISTS update_thread_recovery_updated_at ON public.thread_recovery;
DROP TRIGGER IF EXISTS update_thread_inventory_updated_at ON public.thread_inventory;
DROP TRIGGER IF EXISTS update_thread_conflicts_updated_at ON public.thread_conflicts;
DROP TRIGGER IF EXISTS update_thread_allocations_updated_at ON public.thread_allocations;
DROP TRIGGER IF EXISTS update_employees_updated_at ON public.employees;
DROP TRIGGER IF EXISTS trigger_update_issue_request_status ON public.thread_issue_requests;
DROP TRIGGER IF EXISTS trigger_update_issue_request_issued_meters ON public.thread_issue_items;
DROP TRIGGER IF EXISTS trigger_thread_type_supplier_updated_at ON public.thread_type_supplier;
DROP TRIGGER IF EXISTS trigger_thread_stock_updated_at ON public.thread_stock;
DROP TRIGGER IF EXISTS trigger_thread_order_weeks_updated_at ON public.thread_order_weeks;
DROP TRIGGER IF EXISTS trigger_thread_order_deliveries_updated_at ON public.thread_order_deliveries;
DROP TRIGGER IF EXISTS trigger_thread_issues_updated_at ON public.thread_issues;
DROP TRIGGER IF EXISTS trigger_thread_issue_requests_updated_at ON public.thread_issue_requests;
DROP TRIGGER IF EXISTS trigger_system_settings_updated_at ON public.system_settings;
DROP TRIGGER IF EXISTS trigger_suppliers_updated_at ON public.suppliers;
DROP TRIGGER IF EXISTS trigger_styles_updated_at ON public.styles;
DROP TRIGGER IF EXISTS trigger_style_thread_specs_updated_at ON public.style_thread_specs;
DROP TRIGGER IF EXISTS trigger_style_color_thread_specs_updated_at ON public.style_color_thread_specs;
DROP TRIGGER IF EXISTS trigger_skus_updated_at ON public.skus;
DROP TRIGGER IF EXISTS trigger_purchase_orders_updated_at ON public.purchase_orders;
DROP TRIGGER IF EXISTS trigger_po_items_updated_at ON public.po_items;
DROP TRIGGER IF EXISTS trigger_lots_updated_at ON public.lots;
DROP TRIGGER IF EXISTS trigger_colors_updated_at ON public.colors;
DROP TRIGGER IF EXISTS trigger_color_supplier_updated_at ON public.color_supplier;
DROP TRIGGER IF EXISTS audit_thread_types ON public.thread_types;
DROP TRIGGER IF EXISTS audit_thread_recovery ON public.thread_recovery;
DROP TRIGGER IF EXISTS audit_thread_inventory ON public.thread_inventory;
DROP TRIGGER IF EXISTS audit_thread_allocations ON public.thread_allocations;
DROP INDEX IF EXISTS supabase_functions.supabase_functions_hooks_request_id_idx;
DROP INDEX IF EXISTS supabase_functions.supabase_functions_hooks_h_table_id_h_name_idx;
DROP INDEX IF EXISTS storage.vector_indexes_name_bucket_id_idx;
DROP INDEX IF EXISTS storage.name_prefix_search;
DROP INDEX IF EXISTS storage.idx_objects_bucket_id_name_lower;
DROP INDEX IF EXISTS storage.idx_objects_bucket_id_name;
DROP INDEX IF EXISTS storage.idx_multipart_uploads_list;
DROP INDEX IF EXISTS storage.idx_iceberg_tables_namespace_id;
DROP INDEX IF EXISTS storage.idx_iceberg_tables_location;
DROP INDEX IF EXISTS storage.idx_iceberg_namespaces_bucket_id;
DROP INDEX IF EXISTS storage.buckets_analytics_unique_name_idx;
DROP INDEX IF EXISTS storage.bucketid_objname;
DROP INDEX IF EXISTS storage.bname;
DROP INDEX IF EXISTS realtime.subscription_subscription_id_entity_filters_action_filter_key;
DROP INDEX IF EXISTS realtime.messages_inserted_at_topic_index;
DROP INDEX IF EXISTS realtime.ix_realtime_subscription_entity;
DROP INDEX IF EXISTS public.idx_warehouses_type;
DROP INDEX IF EXISTS public.idx_warehouses_sort;
DROP INDEX IF EXISTS public.idx_warehouses_parent;
DROP INDEX IF EXISTS public.idx_warehouses_code;
DROP INDEX IF EXISTS public.idx_warehouses_active;
DROP INDEX IF EXISTS public.idx_thread_types_supplier_id;
DROP INDEX IF EXISTS public.idx_thread_types_supplier;
DROP INDEX IF EXISTS public.idx_thread_types_material;
DROP INDEX IF EXISTS public.idx_thread_types_color_supplier_id;
DROP INDEX IF EXISTS public.idx_thread_types_color_id;
DROP INDEX IF EXISTS public.idx_thread_types_color;
DROP INDEX IF EXISTS public.idx_thread_types_code;
DROP INDEX IF EXISTS public.idx_thread_types_active;
DROP INDEX IF EXISTS public.idx_thread_type_supplier_thread_type_id;
DROP INDEX IF EXISTS public.idx_thread_type_supplier_supplier_id;
DROP INDEX IF EXISTS public.idx_thread_type_supplier_item_code;
DROP INDEX IF EXISTS public.idx_thread_type_supplier_is_active;
DROP INDEX IF EXISTS public.idx_thread_stock_warehouse_id;
DROP INDEX IF EXISTS public.idx_thread_stock_thread_type_id;
DROP INDEX IF EXISTS public.idx_thread_stock_lot_number;
DROP INDEX IF EXISTS public.idx_thread_stock_expiry_date;
DROP INDEX IF EXISTS public.idx_thread_order_weeks_status;
DROP INDEX IF EXISTS public.idx_thread_order_items_week_id;
DROP INDEX IF EXISTS public.idx_thread_order_items_style_id;
DROP INDEX IF EXISTS public.idx_thread_order_items_po_id;
DROP INDEX IF EXISTS public.idx_thread_order_deliveries_week_id;
DROP INDEX IF EXISTS public.idx_thread_order_deliveries_status;
DROP INDEX IF EXISTS public.idx_thread_order_deliveries_inventory_status;
DROP INDEX IF EXISTS public.idx_thread_order_deliveries_delivery_date;
DROP INDEX IF EXISTS public.idx_thread_issues_status;
DROP INDEX IF EXISTS public.idx_thread_issues_issue_code;
DROP INDEX IF EXISTS public.idx_thread_issues_department;
DROP INDEX IF EXISTS public.idx_thread_issues_created_at;
DROP INDEX IF EXISTS public.idx_thread_issue_lines_thread_type_id;
DROP INDEX IF EXISTS public.idx_thread_issue_lines_style_id;
DROP INDEX IF EXISTS public.idx_thread_issue_lines_po_id;
DROP INDEX IF EXISTS public.idx_thread_issue_lines_issue_id;
DROP INDEX IF EXISTS public.idx_thread_issue_lines_color_id;
DROP INDEX IF EXISTS public.idx_thread_inventory_warehouse;
DROP INDEX IF EXISTS public.idx_thread_inventory_thread_type;
DROP INDEX IF EXISTS public.idx_thread_inventory_status;
DROP INDEX IF EXISTS public.idx_thread_inventory_lot_id;
DROP INDEX IF EXISTS public.idx_thread_inventory_is_partial;
DROP INDEX IF EXISTS public.idx_thread_inventory_fefo;
DROP INDEX IF EXISTS public.idx_thread_inventory_expiry;
DROP INDEX IF EXISTS public.idx_thread_inventory_cone_id;
DROP INDEX IF EXISTS public.idx_thread_inventory_available;
DROP INDEX IF EXISTS public.idx_suppliers_name;
DROP INDEX IF EXISTS public.idx_suppliers_is_active;
DROP INDEX IF EXISTS public.idx_suppliers_code;
DROP INDEX IF EXISTS public.idx_styles_style_name;
DROP INDEX IF EXISTS public.idx_styles_style_code;
DROP INDEX IF EXISTS public.idx_style_thread_specs_tex_id;
DROP INDEX IF EXISTS public.idx_style_thread_specs_supplier_id;
DROP INDEX IF EXISTS public.idx_style_thread_specs_style_id;
DROP INDEX IF EXISTS public.idx_style_thread_specs_display_order;
DROP INDEX IF EXISTS public.idx_style_color_thread_specs_thread_type_id;
DROP INDEX IF EXISTS public.idx_style_color_thread_specs_spec_id;
DROP INDEX IF EXISTS public.idx_style_color_thread_specs_color_id;
DROP INDEX IF EXISTS public.idx_skus_po_item_id;
DROP INDEX IF EXISTS public.idx_skus_color_id;
DROP INDEX IF EXISTS public.idx_role_permissions_role;
DROP INDEX IF EXISTS public.idx_role_permissions_permission;
DROP INDEX IF EXISTS public.idx_refresh_tokens_expires;
DROP INDEX IF EXISTS public.idx_refresh_tokens_employee;
DROP INDEX IF EXISTS public.idx_recovery_status;
DROP INDEX IF EXISTS public.idx_recovery_pending;
DROP INDEX IF EXISTS public.idx_recovery_created;
DROP INDEX IF EXISTS public.idx_recovery_cone;
DROP INDEX IF EXISTS public.idx_purchase_orders_status;
DROP INDEX IF EXISTS public.idx_purchase_orders_po_number;
DROP INDEX IF EXISTS public.idx_purchase_orders_order_date;
DROP INDEX IF EXISTS public.idx_purchase_orders_customer_name;
DROP INDEX IF EXISTS public.idx_po_items_style_id;
DROP INDEX IF EXISTS public.idx_po_items_po_id;
DROP INDEX IF EXISTS public.idx_permissions_route;
DROP INDEX IF EXISTS public.idx_permissions_module;
DROP INDEX IF EXISTS public.idx_permissions_code;
DROP INDEX IF EXISTS public.idx_movements_type;
DROP INDEX IF EXISTS public.idx_movements_reference;
DROP INDEX IF EXISTS public.idx_movements_created;
DROP INDEX IF EXISTS public.idx_movements_cone;
DROP INDEX IF EXISTS public.idx_movements_allocation;
DROP INDEX IF EXISTS public.idx_lots_warehouse_id;
DROP INDEX IF EXISTS public.idx_lots_thread_type_id;
DROP INDEX IF EXISTS public.idx_lots_supplier_id;
DROP INDEX IF EXISTS public.idx_lots_status;
DROP INDEX IF EXISTS public.idx_lots_lot_number;
DROP INDEX IF EXISTS public.idx_lots_created_at;
DROP INDEX IF EXISTS public.idx_issue_returns_item;
DROP INDEX IF EXISTS public.idx_issue_requests_status;
DROP INDEX IF EXISTS public.idx_issue_requests_po_style_color_thread;
DROP INDEX IF EXISTS public.idx_issue_requests_issue_code;
DROP INDEX IF EXISTS public.idx_issue_requests_created_at;
DROP INDEX IF EXISTS public.idx_issue_items_request;
DROP INDEX IF EXISTS public.idx_issue_items_cone;
DROP INDEX IF EXISTS public.idx_employees_refresh_token;
DROP INDEX IF EXISTS public.idx_employees_is_active;
DROP INDEX IF EXISTS public.idx_employees_employee_id;
DROP INDEX IF EXISTS public.idx_employees_department;
DROP INDEX IF EXISTS public.idx_employee_roles_role;
DROP INDEX IF EXISTS public.idx_employee_roles_employee;
DROP INDEX IF EXISTS public.idx_employee_permissions_permission;
DROP INDEX IF EXISTS public.idx_employee_permissions_employee;
DROP INDEX IF EXISTS public.idx_conflicts_thread_type;
DROP INDEX IF EXISTS public.idx_conflicts_status;
DROP INDEX IF EXISTS public.idx_conflicts_pending;
DROP INDEX IF EXISTS public.idx_conflicts_created;
DROP INDEX IF EXISTS public.idx_conflict_allocations_conflict;
DROP INDEX IF EXISTS public.idx_conflict_allocations_allocation;
DROP INDEX IF EXISTS public.idx_colors_name;
DROP INDEX IF EXISTS public.idx_colors_is_active;
DROP INDEX IF EXISTS public.idx_color_supplier_supplier_id;
DROP INDEX IF EXISTS public.idx_color_supplier_is_active;
DROP INDEX IF EXISTS public.idx_color_supplier_color_id;
DROP INDEX IF EXISTS public.idx_batch_transactions_to_warehouse;
DROP INDEX IF EXISTS public.idx_batch_transactions_reference;
DROP INDEX IF EXISTS public.idx_batch_transactions_performed_at;
DROP INDEX IF EXISTS public.idx_batch_transactions_operation_type;
DROP INDEX IF EXISTS public.idx_batch_transactions_lot_id;
DROP INDEX IF EXISTS public.idx_batch_transactions_from_warehouse;
DROP INDEX IF EXISTS public.idx_audit_table;
DROP INDEX IF EXISTS public.idx_audit_record;
DROP INDEX IF EXISTS public.idx_audit_created;
DROP INDEX IF EXISTS public.idx_audit_action;
DROP INDEX IF EXISTS public.idx_allocations_thread_type;
DROP INDEX IF EXISTS public.idx_allocations_status;
DROP INDEX IF EXISTS public.idx_allocations_split_from;
DROP INDEX IF EXISTS public.idx_allocations_priority_score;
DROP INDEX IF EXISTS public.idx_allocations_priority;
DROP INDEX IF EXISTS public.idx_allocations_pending;
DROP INDEX IF EXISTS public.idx_allocations_order_id;
DROP INDEX IF EXISTS public.idx_allocations_due_date;
DROP INDEX IF EXISTS public.idx_allocation_cones_cone;
DROP INDEX IF EXISTS public.idx_allocation_cones_allocation;
DROP INDEX IF EXISTS auth.users_is_anonymous_idx;
DROP INDEX IF EXISTS auth.users_instance_id_idx;
DROP INDEX IF EXISTS auth.users_instance_id_email_idx;
DROP INDEX IF EXISTS auth.users_email_partial_key;
DROP INDEX IF EXISTS auth.user_id_created_at_idx;
DROP INDEX IF EXISTS auth.unique_phone_factor_per_user;
DROP INDEX IF EXISTS auth.sso_providers_resource_id_pattern_idx;
DROP INDEX IF EXISTS auth.sso_providers_resource_id_idx;
DROP INDEX IF EXISTS auth.sso_domains_sso_provider_id_idx;
DROP INDEX IF EXISTS auth.sso_domains_domain_idx;
DROP INDEX IF EXISTS auth.sessions_user_id_idx;
DROP INDEX IF EXISTS auth.sessions_oauth_client_id_idx;
DROP INDEX IF EXISTS auth.sessions_not_after_idx;
DROP INDEX IF EXISTS auth.saml_relay_states_sso_provider_id_idx;
DROP INDEX IF EXISTS auth.saml_relay_states_for_email_idx;
DROP INDEX IF EXISTS auth.saml_relay_states_created_at_idx;
DROP INDEX IF EXISTS auth.saml_providers_sso_provider_id_idx;
DROP INDEX IF EXISTS auth.refresh_tokens_updated_at_idx;
DROP INDEX IF EXISTS auth.refresh_tokens_session_id_revoked_idx;
DROP INDEX IF EXISTS auth.refresh_tokens_parent_idx;
DROP INDEX IF EXISTS auth.refresh_tokens_instance_id_user_id_idx;
DROP INDEX IF EXISTS auth.refresh_tokens_instance_id_idx;
DROP INDEX IF EXISTS auth.recovery_token_idx;
DROP INDEX IF EXISTS auth.reauthentication_token_idx;
DROP INDEX IF EXISTS auth.one_time_tokens_user_id_token_type_key;
DROP INDEX IF EXISTS auth.one_time_tokens_token_hash_hash_idx;
DROP INDEX IF EXISTS auth.one_time_tokens_relates_to_hash_idx;
DROP INDEX IF EXISTS auth.oauth_consents_user_order_idx;
DROP INDEX IF EXISTS auth.oauth_consents_active_user_client_idx;
DROP INDEX IF EXISTS auth.oauth_consents_active_client_idx;
DROP INDEX IF EXISTS auth.oauth_clients_deleted_at_idx;
DROP INDEX IF EXISTS auth.oauth_auth_pending_exp_idx;
DROP INDEX IF EXISTS auth.mfa_factors_user_id_idx;
DROP INDEX IF EXISTS auth.mfa_factors_user_friendly_name_unique;
DROP INDEX IF EXISTS auth.mfa_challenge_created_at_idx;
DROP INDEX IF EXISTS auth.idx_user_id_auth_method;
DROP INDEX IF EXISTS auth.idx_oauth_client_states_created_at;
DROP INDEX IF EXISTS auth.idx_auth_code;
DROP INDEX IF EXISTS auth.identities_user_id_idx;
DROP INDEX IF EXISTS auth.identities_email_idx;
DROP INDEX IF EXISTS auth.flow_state_created_at_idx;
DROP INDEX IF EXISTS auth.factor_id_created_at_idx;
DROP INDEX IF EXISTS auth.email_change_token_new_idx;
DROP INDEX IF EXISTS auth.email_change_token_current_idx;
DROP INDEX IF EXISTS auth.confirmation_token_idx;
DROP INDEX IF EXISTS auth.audit_logs_instance_id_idx;
DROP INDEX IF EXISTS _realtime.tenants_external_id_index;
DROP INDEX IF EXISTS _realtime.extensions_tenant_external_id_type_index;
DROP INDEX IF EXISTS _realtime.extensions_tenant_external_id_index;
ALTER TABLE IF EXISTS ONLY supabase_migrations.schema_migrations DROP CONSTRAINT IF EXISTS schema_migrations_pkey;
ALTER TABLE IF EXISTS ONLY supabase_functions.migrations DROP CONSTRAINT IF EXISTS migrations_pkey;
ALTER TABLE IF EXISTS ONLY supabase_functions.hooks DROP CONSTRAINT IF EXISTS hooks_pkey;
ALTER TABLE IF EXISTS ONLY storage.vector_indexes DROP CONSTRAINT IF EXISTS vector_indexes_pkey;
ALTER TABLE IF EXISTS ONLY storage.s3_multipart_uploads DROP CONSTRAINT IF EXISTS s3_multipart_uploads_pkey;
ALTER TABLE IF EXISTS ONLY storage.s3_multipart_uploads_parts DROP CONSTRAINT IF EXISTS s3_multipart_uploads_parts_pkey;
ALTER TABLE IF EXISTS ONLY storage.objects DROP CONSTRAINT IF EXISTS objects_pkey;
ALTER TABLE IF EXISTS ONLY storage.migrations DROP CONSTRAINT IF EXISTS migrations_pkey;
ALTER TABLE IF EXISTS ONLY storage.migrations DROP CONSTRAINT IF EXISTS migrations_name_key;
ALTER TABLE IF EXISTS ONLY storage.iceberg_tables DROP CONSTRAINT IF EXISTS iceberg_tables_pkey;
ALTER TABLE IF EXISTS ONLY storage.iceberg_namespaces DROP CONSTRAINT IF EXISTS iceberg_namespaces_pkey;
ALTER TABLE IF EXISTS ONLY storage.buckets_vectors DROP CONSTRAINT IF EXISTS buckets_vectors_pkey;
ALTER TABLE IF EXISTS ONLY storage.buckets DROP CONSTRAINT IF EXISTS buckets_pkey;
ALTER TABLE IF EXISTS ONLY storage.buckets_analytics DROP CONSTRAINT IF EXISTS buckets_analytics_pkey;
ALTER TABLE IF EXISTS ONLY realtime.schema_migrations DROP CONSTRAINT IF EXISTS schema_migrations_pkey;
ALTER TABLE IF EXISTS ONLY realtime.subscription DROP CONSTRAINT IF EXISTS pk_subscription;
ALTER TABLE IF EXISTS ONLY realtime.messages_2026_02_15 DROP CONSTRAINT IF EXISTS messages_2026_02_15_pkey;
ALTER TABLE IF EXISTS ONLY realtime.messages_2026_02_14 DROP CONSTRAINT IF EXISTS messages_2026_02_14_pkey;
ALTER TABLE IF EXISTS ONLY realtime.messages_2026_02_13 DROP CONSTRAINT IF EXISTS messages_2026_02_13_pkey;
ALTER TABLE IF EXISTS ONLY realtime.messages_2026_02_12 DROP CONSTRAINT IF EXISTS messages_2026_02_12_pkey;
ALTER TABLE IF EXISTS ONLY realtime.messages_2026_02_11 DROP CONSTRAINT IF EXISTS messages_2026_02_11_pkey;
ALTER TABLE IF EXISTS ONLY realtime.messages_2026_02_10 DROP CONSTRAINT IF EXISTS messages_2026_02_10_pkey;
ALTER TABLE IF EXISTS ONLY realtime.messages_2026_02_09 DROP CONSTRAINT IF EXISTS messages_2026_02_09_pkey;
ALTER TABLE IF EXISTS ONLY realtime.messages DROP CONSTRAINT IF EXISTS messages_pkey;
ALTER TABLE IF EXISTS ONLY public.warehouses DROP CONSTRAINT IF EXISTS warehouses_pkey;
ALTER TABLE IF EXISTS ONLY public.warehouses DROP CONSTRAINT IF EXISTS warehouses_code_key;
ALTER TABLE IF EXISTS ONLY public.thread_stock DROP CONSTRAINT IF EXISTS uq_thread_stock_type_warehouse_lot;
ALTER TABLE IF EXISTS ONLY public.thread_types DROP CONSTRAINT IF EXISTS thread_types_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_types DROP CONSTRAINT IF EXISTS thread_types_code_key;
ALTER TABLE IF EXISTS ONLY public.thread_type_supplier DROP CONSTRAINT IF EXISTS thread_type_supplier_thread_type_id_supplier_id_key;
ALTER TABLE IF EXISTS ONLY public.thread_type_supplier DROP CONSTRAINT IF EXISTS thread_type_supplier_supplier_id_supplier_item_code_key;
ALTER TABLE IF EXISTS ONLY public.thread_type_supplier DROP CONSTRAINT IF EXISTS thread_type_supplier_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_stock DROP CONSTRAINT IF EXISTS thread_stock_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_recovery DROP CONSTRAINT IF EXISTS thread_recovery_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_order_weeks DROP CONSTRAINT IF EXISTS thread_order_weeks_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_order_results DROP CONSTRAINT IF EXISTS thread_order_results_week_id_key;
ALTER TABLE IF EXISTS ONLY public.thread_order_results DROP CONSTRAINT IF EXISTS thread_order_results_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_order_items DROP CONSTRAINT IF EXISTS thread_order_items_week_po_style_color_key;
ALTER TABLE IF EXISTS ONLY public.thread_order_items DROP CONSTRAINT IF EXISTS thread_order_items_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_order_deliveries DROP CONSTRAINT IF EXISTS thread_order_deliveries_week_id_thread_type_id_key;
ALTER TABLE IF EXISTS ONLY public.thread_order_deliveries DROP CONSTRAINT IF EXISTS thread_order_deliveries_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_movements DROP CONSTRAINT IF EXISTS thread_movements_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_issues DROP CONSTRAINT IF EXISTS thread_issues_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_issues DROP CONSTRAINT IF EXISTS thread_issues_issue_code_key;
ALTER TABLE IF EXISTS ONLY public.thread_issue_returns DROP CONSTRAINT IF EXISTS thread_issue_returns_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_requests DROP CONSTRAINT IF EXISTS thread_issue_requests_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_requests DROP CONSTRAINT IF EXISTS thread_issue_requests_issue_code_key;
ALTER TABLE IF EXISTS ONLY public.thread_issue_lines DROP CONSTRAINT IF EXISTS thread_issue_lines_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_issue_items DROP CONSTRAINT IF EXISTS thread_issue_items_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_inventory DROP CONSTRAINT IF EXISTS thread_inventory_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_inventory DROP CONSTRAINT IF EXISTS thread_inventory_cone_id_key;
ALTER TABLE IF EXISTS ONLY public.thread_conflicts DROP CONSTRAINT IF EXISTS thread_conflicts_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_conflict_allocations DROP CONSTRAINT IF EXISTS thread_conflict_allocations_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_conflict_allocations DROP CONSTRAINT IF EXISTS thread_conflict_allocations_conflict_id_allocation_id_key;
ALTER TABLE IF EXISTS ONLY public.thread_audit_log DROP CONSTRAINT IF EXISTS thread_audit_log_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_allocations DROP CONSTRAINT IF EXISTS thread_allocations_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_allocation_cones DROP CONSTRAINT IF EXISTS thread_allocation_cones_pkey;
ALTER TABLE IF EXISTS ONLY public.thread_allocation_cones DROP CONSTRAINT IF EXISTS thread_allocation_cones_allocation_id_cone_id_key;
ALTER TABLE IF EXISTS ONLY public.system_settings DROP CONSTRAINT IF EXISTS system_settings_pkey;
ALTER TABLE IF EXISTS ONLY public.system_settings DROP CONSTRAINT IF EXISTS system_settings_key_key;
ALTER TABLE IF EXISTS ONLY public.suppliers DROP CONSTRAINT IF EXISTS suppliers_pkey;
ALTER TABLE IF EXISTS ONLY public.suppliers DROP CONSTRAINT IF EXISTS suppliers_code_key;
ALTER TABLE IF EXISTS ONLY public.styles DROP CONSTRAINT IF EXISTS styles_style_code_key;
ALTER TABLE IF EXISTS ONLY public.styles DROP CONSTRAINT IF EXISTS styles_pkey;
ALTER TABLE IF EXISTS ONLY public.style_thread_specs DROP CONSTRAINT IF EXISTS style_thread_specs_pkey;
ALTER TABLE IF EXISTS ONLY public.style_color_thread_specs DROP CONSTRAINT IF EXISTS style_color_thread_specs_style_thread_spec_id_color_id_key;
ALTER TABLE IF EXISTS ONLY public.style_color_thread_specs DROP CONSTRAINT IF EXISTS style_color_thread_specs_pkey;
ALTER TABLE IF EXISTS ONLY public.skus DROP CONSTRAINT IF EXISTS skus_pkey;
ALTER TABLE IF EXISTS ONLY public.roles DROP CONSTRAINT IF EXISTS roles_pkey;
ALTER TABLE IF EXISTS ONLY public.roles DROP CONSTRAINT IF EXISTS roles_code_key;
ALTER TABLE IF EXISTS ONLY public.role_permissions DROP CONSTRAINT IF EXISTS role_permissions_role_id_permission_id_key;
ALTER TABLE IF EXISTS ONLY public.role_permissions DROP CONSTRAINT IF EXISTS role_permissions_pkey;
ALTER TABLE IF EXISTS ONLY public.purchase_orders DROP CONSTRAINT IF EXISTS purchase_orders_po_number_key;
ALTER TABLE IF EXISTS ONLY public.purchase_orders DROP CONSTRAINT IF EXISTS purchase_orders_pkey;
ALTER TABLE IF EXISTS ONLY public.po_items DROP CONSTRAINT IF EXISTS po_items_pkey;
ALTER TABLE IF EXISTS ONLY public.permissions DROP CONSTRAINT IF EXISTS permissions_pkey;
ALTER TABLE IF EXISTS ONLY public.permissions DROP CONSTRAINT IF EXISTS permissions_code_key;
ALTER TABLE IF EXISTS ONLY public.lots DROP CONSTRAINT IF EXISTS lots_pkey;
ALTER TABLE IF EXISTS ONLY public.lots DROP CONSTRAINT IF EXISTS lots_lot_number_key;
ALTER TABLE IF EXISTS ONLY public.employees DROP CONSTRAINT IF EXISTS employees_pkey;
ALTER TABLE IF EXISTS ONLY public.employees DROP CONSTRAINT IF EXISTS employees_employee_id_key;
ALTER TABLE IF EXISTS ONLY public.employee_roles DROP CONSTRAINT IF EXISTS employee_roles_pkey;
ALTER TABLE IF EXISTS ONLY public.employee_roles DROP CONSTRAINT IF EXISTS employee_roles_employee_id_role_id_key;
ALTER TABLE IF EXISTS ONLY public.employee_refresh_tokens DROP CONSTRAINT IF EXISTS employee_refresh_tokens_pkey;
ALTER TABLE IF EXISTS ONLY public.employee_permissions DROP CONSTRAINT IF EXISTS employee_permissions_pkey;
ALTER TABLE IF EXISTS ONLY public.employee_permissions DROP CONSTRAINT IF EXISTS employee_permissions_employee_id_permission_id_key;
ALTER TABLE IF EXISTS ONLY public.colors DROP CONSTRAINT IF EXISTS colors_pkey;
ALTER TABLE IF EXISTS ONLY public.colors DROP CONSTRAINT IF EXISTS colors_name_key;
ALTER TABLE IF EXISTS ONLY public.color_supplier DROP CONSTRAINT IF EXISTS color_supplier_pkey;
ALTER TABLE IF EXISTS ONLY public.color_supplier DROP CONSTRAINT IF EXISTS color_supplier_color_id_supplier_id_key;
ALTER TABLE IF EXISTS ONLY public.batch_transactions DROP CONSTRAINT IF EXISTS batch_transactions_pkey;
ALTER TABLE IF EXISTS ONLY auth.users DROP CONSTRAINT IF EXISTS users_pkey;
ALTER TABLE IF EXISTS ONLY auth.users DROP CONSTRAINT IF EXISTS users_phone_key;
ALTER TABLE IF EXISTS ONLY auth.sso_providers DROP CONSTRAINT IF EXISTS sso_providers_pkey;
ALTER TABLE IF EXISTS ONLY auth.sso_domains DROP CONSTRAINT IF EXISTS sso_domains_pkey;
ALTER TABLE IF EXISTS ONLY auth.sessions DROP CONSTRAINT IF EXISTS sessions_pkey;
ALTER TABLE IF EXISTS ONLY auth.schema_migrations DROP CONSTRAINT IF EXISTS schema_migrations_pkey;
ALTER TABLE IF EXISTS ONLY auth.saml_relay_states DROP CONSTRAINT IF EXISTS saml_relay_states_pkey;
ALTER TABLE IF EXISTS ONLY auth.saml_providers DROP CONSTRAINT IF EXISTS saml_providers_pkey;
ALTER TABLE IF EXISTS ONLY auth.saml_providers DROP CONSTRAINT IF EXISTS saml_providers_entity_id_key;
ALTER TABLE IF EXISTS ONLY auth.refresh_tokens DROP CONSTRAINT IF EXISTS refresh_tokens_token_unique;
ALTER TABLE IF EXISTS ONLY auth.refresh_tokens DROP CONSTRAINT IF EXISTS refresh_tokens_pkey;
ALTER TABLE IF EXISTS ONLY auth.one_time_tokens DROP CONSTRAINT IF EXISTS one_time_tokens_pkey;
ALTER TABLE IF EXISTS ONLY auth.oauth_consents DROP CONSTRAINT IF EXISTS oauth_consents_user_client_unique;
ALTER TABLE IF EXISTS ONLY auth.oauth_consents DROP CONSTRAINT IF EXISTS oauth_consents_pkey;
ALTER TABLE IF EXISTS ONLY auth.oauth_clients DROP CONSTRAINT IF EXISTS oauth_clients_pkey;
ALTER TABLE IF EXISTS ONLY auth.oauth_client_states DROP CONSTRAINT IF EXISTS oauth_client_states_pkey;
ALTER TABLE IF EXISTS ONLY auth.oauth_authorizations DROP CONSTRAINT IF EXISTS oauth_authorizations_pkey;
ALTER TABLE IF EXISTS ONLY auth.oauth_authorizations DROP CONSTRAINT IF EXISTS oauth_authorizations_authorization_id_key;
ALTER TABLE IF EXISTS ONLY auth.oauth_authorizations DROP CONSTRAINT IF EXISTS oauth_authorizations_authorization_code_key;
ALTER TABLE IF EXISTS ONLY auth.mfa_factors DROP CONSTRAINT IF EXISTS mfa_factors_pkey;
ALTER TABLE IF EXISTS ONLY auth.mfa_factors DROP CONSTRAINT IF EXISTS mfa_factors_last_challenged_at_key;
ALTER TABLE IF EXISTS ONLY auth.mfa_challenges DROP CONSTRAINT IF EXISTS mfa_challenges_pkey;
ALTER TABLE IF EXISTS ONLY auth.mfa_amr_claims DROP CONSTRAINT IF EXISTS mfa_amr_claims_session_id_authentication_method_pkey;
ALTER TABLE IF EXISTS ONLY auth.instances DROP CONSTRAINT IF EXISTS instances_pkey;
ALTER TABLE IF EXISTS ONLY auth.identities DROP CONSTRAINT IF EXISTS identities_provider_id_provider_unique;
ALTER TABLE IF EXISTS ONLY auth.identities DROP CONSTRAINT IF EXISTS identities_pkey;
ALTER TABLE IF EXISTS ONLY auth.flow_state DROP CONSTRAINT IF EXISTS flow_state_pkey;
ALTER TABLE IF EXISTS ONLY auth.audit_log_entries DROP CONSTRAINT IF EXISTS audit_log_entries_pkey;
ALTER TABLE IF EXISTS ONLY auth.mfa_amr_claims DROP CONSTRAINT IF EXISTS amr_id_pk;
ALTER TABLE IF EXISTS ONLY _realtime.tenants DROP CONSTRAINT IF EXISTS tenants_pkey;
ALTER TABLE IF EXISTS ONLY _realtime.schema_migrations DROP CONSTRAINT IF EXISTS schema_migrations_pkey;
ALTER TABLE IF EXISTS ONLY _realtime.extensions DROP CONSTRAINT IF EXISTS extensions_pkey;
ALTER TABLE IF EXISTS supabase_functions.hooks ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.warehouses ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_types ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_type_supplier ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_stock ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_recovery ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_order_weeks ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_order_results ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_order_items ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_order_deliveries ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_movements ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_issues ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_issue_returns ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_issue_requests ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_issue_lines ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_issue_items ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_inventory ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_conflicts ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_conflict_allocations ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_audit_log ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_allocations ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.thread_allocation_cones ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.system_settings ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.suppliers ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.styles ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.style_thread_specs ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.style_color_thread_specs ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.skus ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.roles ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.role_permissions ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.purchase_orders ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.po_items ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.permissions ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.lots ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.employees ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.employee_roles ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.employee_refresh_tokens ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.employee_permissions ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.colors ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.color_supplier ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS public.batch_transactions ALTER COLUMN id DROP DEFAULT;
ALTER TABLE IF EXISTS auth.refresh_tokens ALTER COLUMN id DROP DEFAULT;
DROP TABLE IF EXISTS supabase_migrations.schema_migrations;
DROP TABLE IF EXISTS supabase_functions.migrations;
DROP SEQUENCE IF EXISTS supabase_functions.hooks_id_seq;
DROP TABLE IF EXISTS supabase_functions.hooks;
DROP TABLE IF EXISTS storage.vector_indexes;
DROP TABLE IF EXISTS storage.s3_multipart_uploads_parts;
DROP TABLE IF EXISTS storage.s3_multipart_uploads;
DROP TABLE IF EXISTS storage.objects;
DROP TABLE IF EXISTS storage.migrations;
DROP TABLE IF EXISTS storage.iceberg_tables;
DROP TABLE IF EXISTS storage.iceberg_namespaces;
DROP TABLE IF EXISTS storage.buckets_vectors;
DROP TABLE IF EXISTS storage.buckets_analytics;
DROP TABLE IF EXISTS storage.buckets;
DROP TABLE IF EXISTS realtime.subscription;
DROP TABLE IF EXISTS realtime.schema_migrations;
DROP TABLE IF EXISTS realtime.messages_2026_02_15;
DROP TABLE IF EXISTS realtime.messages_2026_02_14;
DROP TABLE IF EXISTS realtime.messages_2026_02_13;
DROP TABLE IF EXISTS realtime.messages_2026_02_12;
DROP TABLE IF EXISTS realtime.messages_2026_02_11;
DROP TABLE IF EXISTS realtime.messages_2026_02_10;
DROP TABLE IF EXISTS realtime.messages_2026_02_09;
DROP TABLE IF EXISTS realtime.messages;
DROP SEQUENCE IF EXISTS public.warehouses_id_seq;
DROP VIEW IF EXISTS public.v_stock_summary;
DROP TABLE IF EXISTS public.warehouses;
DROP VIEW IF EXISTS public.v_issue_reconciliation_v2;
DROP VIEW IF EXISTS public.v_issue_reconciliation;
DROP SEQUENCE IF EXISTS public.thread_types_id_seq;
DROP TABLE IF EXISTS public.thread_types;
DROP SEQUENCE IF EXISTS public.thread_type_supplier_id_seq;
DROP TABLE IF EXISTS public.thread_type_supplier;
DROP SEQUENCE IF EXISTS public.thread_stock_id_seq;
DROP TABLE IF EXISTS public.thread_stock;
DROP SEQUENCE IF EXISTS public.thread_recovery_id_seq;
DROP TABLE IF EXISTS public.thread_recovery;
DROP SEQUENCE IF EXISTS public.thread_order_weeks_id_seq;
DROP TABLE IF EXISTS public.thread_order_weeks;
DROP SEQUENCE IF EXISTS public.thread_order_results_id_seq;
DROP TABLE IF EXISTS public.thread_order_results;
DROP SEQUENCE IF EXISTS public.thread_order_items_id_seq;
DROP TABLE IF EXISTS public.thread_order_items;
DROP SEQUENCE IF EXISTS public.thread_order_deliveries_id_seq;
DROP TABLE IF EXISTS public.thread_order_deliveries;
DROP SEQUENCE IF EXISTS public.thread_movements_id_seq;
DROP TABLE IF EXISTS public.thread_movements;
DROP SEQUENCE IF EXISTS public.thread_issues_id_seq;
DROP TABLE IF EXISTS public.thread_issues;
DROP SEQUENCE IF EXISTS public.thread_issue_returns_id_seq;
DROP TABLE IF EXISTS public.thread_issue_returns;
DROP SEQUENCE IF EXISTS public.thread_issue_requests_id_seq;
DROP TABLE IF EXISTS public.thread_issue_requests;
DROP SEQUENCE IF EXISTS public.thread_issue_lines_id_seq;
DROP TABLE IF EXISTS public.thread_issue_lines;
DROP SEQUENCE IF EXISTS public.thread_issue_items_id_seq;
DROP TABLE IF EXISTS public.thread_issue_items;
DROP SEQUENCE IF EXISTS public.thread_inventory_id_seq;
DROP TABLE IF EXISTS public.thread_inventory;
DROP SEQUENCE IF EXISTS public.thread_conflicts_id_seq;
DROP TABLE IF EXISTS public.thread_conflicts;
DROP SEQUENCE IF EXISTS public.thread_conflict_allocations_id_seq;
DROP TABLE IF EXISTS public.thread_conflict_allocations;
DROP SEQUENCE IF EXISTS public.thread_audit_log_id_seq;
DROP TABLE IF EXISTS public.thread_audit_log;
DROP SEQUENCE IF EXISTS public.thread_allocations_id_seq;
DROP TABLE IF EXISTS public.thread_allocations;
DROP SEQUENCE IF EXISTS public.thread_allocation_cones_id_seq;
DROP TABLE IF EXISTS public.thread_allocation_cones;
DROP SEQUENCE IF EXISTS public.system_settings_id_seq;
DROP TABLE IF EXISTS public.system_settings;
DROP SEQUENCE IF EXISTS public.suppliers_id_seq;
DROP TABLE IF EXISTS public.suppliers;
DROP SEQUENCE IF EXISTS public.styles_id_seq;
DROP TABLE IF EXISTS public.styles;
DROP SEQUENCE IF EXISTS public.style_thread_specs_id_seq;
DROP TABLE IF EXISTS public.style_thread_specs;
DROP SEQUENCE IF EXISTS public.style_color_thread_specs_id_seq;
DROP TABLE IF EXISTS public.style_color_thread_specs;
DROP SEQUENCE IF EXISTS public.skus_id_seq;
DROP TABLE IF EXISTS public.skus;
DROP SEQUENCE IF EXISTS public.roles_id_seq;
DROP TABLE IF EXISTS public.roles;
DROP SEQUENCE IF EXISTS public.role_permissions_id_seq;
DROP TABLE IF EXISTS public.role_permissions;
DROP SEQUENCE IF EXISTS public.purchase_orders_id_seq;
DROP TABLE IF EXISTS public.purchase_orders;
DROP SEQUENCE IF EXISTS public.po_items_id_seq;
DROP TABLE IF EXISTS public.po_items;
DROP SEQUENCE IF EXISTS public.permissions_id_seq;
DROP TABLE IF EXISTS public.permissions;
DROP SEQUENCE IF EXISTS public.lots_id_seq;
DROP TABLE IF EXISTS public.lots;
DROP SEQUENCE IF EXISTS public.employees_id_seq;
DROP TABLE IF EXISTS public.employees;
DROP SEQUENCE IF EXISTS public.employee_roles_id_seq;
DROP TABLE IF EXISTS public.employee_roles;
DROP SEQUENCE IF EXISTS public.employee_refresh_tokens_id_seq;
DROP TABLE IF EXISTS public.employee_refresh_tokens;
DROP SEQUENCE IF EXISTS public.employee_permissions_id_seq;
DROP TABLE IF EXISTS public.employee_permissions;
DROP SEQUENCE IF EXISTS public.colors_id_seq;
DROP TABLE IF EXISTS public.colors;
DROP SEQUENCE IF EXISTS public.color_supplier_id_seq;
DROP TABLE IF EXISTS public.color_supplier;
DROP SEQUENCE IF EXISTS public.batch_transactions_id_seq;
DROP TABLE IF EXISTS public.batch_transactions;
DROP TABLE IF EXISTS auth.users;
DROP TABLE IF EXISTS auth.sso_providers;
DROP TABLE IF EXISTS auth.sso_domains;
DROP TABLE IF EXISTS auth.sessions;
DROP TABLE IF EXISTS auth.schema_migrations;
DROP TABLE IF EXISTS auth.saml_relay_states;
DROP TABLE IF EXISTS auth.saml_providers;
DROP SEQUENCE IF EXISTS auth.refresh_tokens_id_seq;
DROP TABLE IF EXISTS auth.refresh_tokens;
DROP TABLE IF EXISTS auth.one_time_tokens;
DROP TABLE IF EXISTS auth.oauth_consents;
DROP TABLE IF EXISTS auth.oauth_clients;
DROP TABLE IF EXISTS auth.oauth_client_states;
DROP TABLE IF EXISTS auth.oauth_authorizations;
DROP TABLE IF EXISTS auth.mfa_factors;
DROP TABLE IF EXISTS auth.mfa_challenges;
DROP TABLE IF EXISTS auth.mfa_amr_claims;
DROP TABLE IF EXISTS auth.instances;
DROP TABLE IF EXISTS auth.identities;
DROP TABLE IF EXISTS auth.flow_state;
DROP TABLE IF EXISTS auth.audit_log_entries;
DROP TABLE IF EXISTS _realtime.tenants;
DROP TABLE IF EXISTS _realtime.schema_migrations;
DROP TABLE IF EXISTS _realtime.extensions;
DROP FUNCTION IF EXISTS supabase_functions.http_request();
DROP FUNCTION IF EXISTS storage.update_updated_at_column();
DROP FUNCTION IF EXISTS storage.search_v2(prefix text, bucket_name text, limits integer, levels integer, start_after text, sort_order text, sort_column text, sort_column_after text);
DROP FUNCTION IF EXISTS storage.search_by_timestamp(p_prefix text, p_bucket_id text, p_limit integer, p_level integer, p_start_after text, p_sort_order text, p_sort_column text, p_sort_column_after text);
DROP FUNCTION IF EXISTS storage.search(prefix text, bucketname text, limits integer, levels integer, offsets integer, search text, sortcolumn text, sortorder text);
DROP FUNCTION IF EXISTS storage.protect_delete();
DROP FUNCTION IF EXISTS storage.operation();
DROP FUNCTION IF EXISTS storage.list_objects_with_delimiter(_bucket_id text, prefix_param text, delimiter_param text, max_keys integer, start_after text, next_token text, sort_order text);
DROP FUNCTION IF EXISTS storage.list_multipart_uploads_with_delimiter(bucket_id text, prefix_param text, delimiter_param text, max_keys integer, next_key_token text, next_upload_token text);
DROP FUNCTION IF EXISTS storage.get_size_by_bucket();
DROP FUNCTION IF EXISTS storage.get_common_prefix(p_key text, p_prefix text, p_delimiter text);
DROP FUNCTION IF EXISTS storage.foldername(name text);
DROP FUNCTION IF EXISTS storage.filename(name text);
DROP FUNCTION IF EXISTS storage.extension(name text);
DROP FUNCTION IF EXISTS storage.enforce_bucket_name_length();
DROP FUNCTION IF EXISTS storage.can_insert_object(bucketid text, name text, owner uuid, metadata jsonb);
DROP FUNCTION IF EXISTS realtime.topic();
DROP FUNCTION IF EXISTS realtime.to_regrole(role_name text);
DROP FUNCTION IF EXISTS realtime.subscription_check_filters();
DROP FUNCTION IF EXISTS realtime.send(payload jsonb, event text, topic text, private boolean);
DROP FUNCTION IF EXISTS realtime.quote_wal2json(entity regclass);
DROP FUNCTION IF EXISTS realtime.list_changes(publication name, slot_name name, max_changes integer, max_record_bytes integer);
DROP FUNCTION IF EXISTS realtime.is_visible_through_filters(columns realtime.wal_column[], filters realtime.user_defined_filter[]);
DROP FUNCTION IF EXISTS realtime.check_equality_op(op realtime.equality_op, type_ regtype, val_1 text, val_2 text);
DROP FUNCTION IF EXISTS realtime."cast"(val text, type_ regtype);
DROP FUNCTION IF EXISTS realtime.build_prepared_statement_sql(prepared_statement_name text, entity regclass, columns realtime.wal_column[]);
DROP FUNCTION IF EXISTS realtime.broadcast_changes(topic_name text, event_name text, operation text, table_name text, table_schema text, new record, old record, level text);
DROP FUNCTION IF EXISTS realtime.apply_rls(wal jsonb, max_record_bytes integer);
DROP FUNCTION IF EXISTS public.update_updated_at_column();
DROP FUNCTION IF EXISTS public.update_lots_updated_at();
DROP FUNCTION IF EXISTS public.thread_audit_trigger_func();
DROP FUNCTION IF EXISTS public.split_allocation(p_allocation_id integer, p_split_meters numeric, p_split_reason text);
DROP FUNCTION IF EXISTS public.recover_cone(p_cone_id integer, p_returned_weight_grams numeric, p_tare_weight_grams numeric, p_notes text, p_weighed_by character varying, p_confirmed_by character varying);
DROP FUNCTION IF EXISTS public.issue_cone(p_allocation_id integer, p_confirmed_by character varying);
DROP FUNCTION IF EXISTS public.is_root(p_employee_id integer);
DROP FUNCTION IF EXISTS public.is_admin(p_employee_id integer);
DROP FUNCTION IF EXISTS public.has_permission(p_employee_id integer, requested_permission text);
DROP FUNCTION IF EXISTS public.has_any_permission(p_employee_id integer, requested_permissions text[]);
DROP FUNCTION IF EXISTS public.get_employee_roles(p_employee_id integer);
DROP FUNCTION IF EXISTS public.get_employee_permissions(p_employee_id integer);
DROP FUNCTION IF EXISTS public.fn_update_system_settings_timestamp();
DROP FUNCTION IF EXISTS public.fn_update_issue_request_status();
DROP FUNCTION IF EXISTS public.fn_update_issue_request_issued_meters();
DROP FUNCTION IF EXISTS public.fn_migrate_inventory_to_stock();
DROP FUNCTION IF EXISTS public.fn_get_partial_cone_ratio();
DROP FUNCTION IF EXISTS public.fn_generate_issue_code();
DROP FUNCTION IF EXISTS public.fn_check_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer);
DROP FUNCTION IF EXISTS public.fn_calculate_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer);
DROP FUNCTION IF EXISTS public.cleanup_expired_refresh_tokens();
DROP FUNCTION IF EXISTS public.can_manage_employee(actor_id integer, target_id integer);
DROP FUNCTION IF EXISTS public.allocate_thread(p_order_id character varying, p_order_reference character varying, p_thread_type_id integer, p_requested_meters numeric, p_priority public.allocation_priority, p_due_date date, p_notes text, p_created_by character varying);
DROP FUNCTION IF EXISTS pgbouncer.get_auth(p_usename text);
DROP FUNCTION IF EXISTS extensions.set_graphql_placeholder();
DROP FUNCTION IF EXISTS extensions.pgrst_drop_watch();
DROP FUNCTION IF EXISTS extensions.pgrst_ddl_watch();
DROP FUNCTION IF EXISTS extensions.grant_pg_net_access();
DROP FUNCTION IF EXISTS extensions.grant_pg_graphql_access();
DROP FUNCTION IF EXISTS extensions.grant_pg_cron_access();
DROP FUNCTION IF EXISTS auth.uid();
DROP FUNCTION IF EXISTS auth.role();
DROP FUNCTION IF EXISTS auth.jwt();
DROP FUNCTION IF EXISTS auth.email();
DROP TYPE IF EXISTS storage.buckettype;
DROP TYPE IF EXISTS realtime.wal_rls;
DROP TYPE IF EXISTS realtime.wal_column;
DROP TYPE IF EXISTS realtime.user_defined_filter;
DROP TYPE IF EXISTS realtime.equality_op;
DROP TYPE IF EXISTS realtime.action;
DROP TYPE IF EXISTS public.thread_material;
DROP TYPE IF EXISTS public.recovery_status;
DROP TYPE IF EXISTS public.permission_action;
DROP TYPE IF EXISTS public.movement_type;
DROP TYPE IF EXISTS public.lot_status;
DROP TYPE IF EXISTS public.issue_status;
DROP TYPE IF EXISTS public.issue_request_status;
DROP TYPE IF EXISTS public.cone_status;
DROP TYPE IF EXISTS public.batch_operation_type;
DROP TYPE IF EXISTS public.allocation_status;
DROP TYPE IF EXISTS public.allocation_priority;
DROP TYPE IF EXISTS auth.one_time_token_type;
DROP TYPE IF EXISTS auth.oauth_response_type;
DROP TYPE IF EXISTS auth.oauth_registration_type;
DROP TYPE IF EXISTS auth.oauth_client_type;
DROP TYPE IF EXISTS auth.oauth_authorization_status;
DROP TYPE IF EXISTS auth.factor_type;
DROP TYPE IF EXISTS auth.factor_status;
DROP TYPE IF EXISTS auth.code_challenge_method;
DROP TYPE IF EXISTS auth.aal_level;
DROP EXTENSION IF EXISTS "uuid-ossp";
DROP EXTENSION IF EXISTS supabase_vault;
DROP EXTENSION IF EXISTS pgcrypto;
DROP EXTENSION IF EXISTS pg_stat_statements;
DROP EXTENSION IF EXISTS pg_graphql;
DROP SCHEMA IF EXISTS vault;
DROP SCHEMA IF EXISTS supabase_migrations;
DROP SCHEMA IF EXISTS supabase_functions;
DROP SCHEMA IF EXISTS storage;
DROP SCHEMA IF EXISTS realtime;
DROP SCHEMA IF EXISTS pgbouncer;
DROP EXTENSION IF EXISTS pg_net;
DROP SCHEMA IF EXISTS graphql_public;
DROP SCHEMA IF EXISTS graphql;
DROP SCHEMA IF EXISTS extensions;
DROP SCHEMA IF EXISTS auth;
DROP SCHEMA IF EXISTS _realtime;
--
-- Name: _realtime; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA _realtime;


ALTER SCHEMA _realtime OWNER TO postgres;

--
-- Name: auth; Type: SCHEMA; Schema: -; Owner: supabase_admin
--

CREATE SCHEMA auth;


ALTER SCHEMA auth OWNER TO supabase_admin;

--
-- Name: extensions; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA extensions;


ALTER SCHEMA extensions OWNER TO postgres;

--
-- Name: graphql; Type: SCHEMA; Schema: -; Owner: supabase_admin
--

CREATE SCHEMA graphql;


ALTER SCHEMA graphql OWNER TO supabase_admin;

--
-- Name: graphql_public; Type: SCHEMA; Schema: -; Owner: supabase_admin
--

CREATE SCHEMA graphql_public;


ALTER SCHEMA graphql_public OWNER TO supabase_admin;

--
-- Name: pg_net; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS pg_net WITH SCHEMA extensions;


--
-- Name: EXTENSION pg_net; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION pg_net IS 'Async HTTP';


--
-- Name: pgbouncer; Type: SCHEMA; Schema: -; Owner: pgbouncer
--

CREATE SCHEMA pgbouncer;


ALTER SCHEMA pgbouncer OWNER TO pgbouncer;

--
-- Name: realtime; Type: SCHEMA; Schema: -; Owner: supabase_admin
--

CREATE SCHEMA realtime;


ALTER SCHEMA realtime OWNER TO supabase_admin;

--
-- Name: storage; Type: SCHEMA; Schema: -; Owner: supabase_admin
--

CREATE SCHEMA storage;


ALTER SCHEMA storage OWNER TO supabase_admin;

--
-- Name: supabase_functions; Type: SCHEMA; Schema: -; Owner: supabase_admin
--

CREATE SCHEMA supabase_functions;


ALTER SCHEMA supabase_functions OWNER TO supabase_admin;

--
-- Name: supabase_migrations; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA supabase_migrations;


ALTER SCHEMA supabase_migrations OWNER TO postgres;

--
-- Name: vault; Type: SCHEMA; Schema: -; Owner: supabase_admin
--

CREATE SCHEMA vault;


ALTER SCHEMA vault OWNER TO supabase_admin;

--
-- Name: pg_graphql; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS pg_graphql WITH SCHEMA graphql;


--
-- Name: EXTENSION pg_graphql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION pg_graphql IS 'pg_graphql: GraphQL support';


--
-- Name: pg_stat_statements; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS pg_stat_statements WITH SCHEMA extensions;


--
-- Name: EXTENSION pg_stat_statements; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION pg_stat_statements IS 'track planning and execution statistics of all SQL statements executed';


--
-- Name: pgcrypto; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS pgcrypto WITH SCHEMA extensions;


--
-- Name: EXTENSION pgcrypto; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION pgcrypto IS 'cryptographic functions';


--
-- Name: supabase_vault; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS supabase_vault WITH SCHEMA vault;


--
-- Name: EXTENSION supabase_vault; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION supabase_vault IS 'Supabase Vault Extension';


--
-- Name: uuid-ossp; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS "uuid-ossp" WITH SCHEMA extensions;


--
-- Name: EXTENSION "uuid-ossp"; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION "uuid-ossp" IS 'generate universally unique identifiers (UUIDs)';


--
-- Name: aal_level; Type: TYPE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TYPE auth.aal_level AS ENUM (
    'aal1',
    'aal2',
    'aal3'
);


ALTER TYPE auth.aal_level OWNER TO supabase_auth_admin;

--
-- Name: code_challenge_method; Type: TYPE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TYPE auth.code_challenge_method AS ENUM (
    's256',
    'plain'
);


ALTER TYPE auth.code_challenge_method OWNER TO supabase_auth_admin;

--
-- Name: factor_status; Type: TYPE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TYPE auth.factor_status AS ENUM (
    'unverified',
    'verified'
);


ALTER TYPE auth.factor_status OWNER TO supabase_auth_admin;

--
-- Name: factor_type; Type: TYPE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TYPE auth.factor_type AS ENUM (
    'totp',
    'webauthn',
    'phone'
);


ALTER TYPE auth.factor_type OWNER TO supabase_auth_admin;

--
-- Name: oauth_authorization_status; Type: TYPE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TYPE auth.oauth_authorization_status AS ENUM (
    'pending',
    'approved',
    'denied',
    'expired'
);


ALTER TYPE auth.oauth_authorization_status OWNER TO supabase_auth_admin;

--
-- Name: oauth_client_type; Type: TYPE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TYPE auth.oauth_client_type AS ENUM (
    'public',
    'confidential'
);


ALTER TYPE auth.oauth_client_type OWNER TO supabase_auth_admin;

--
-- Name: oauth_registration_type; Type: TYPE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TYPE auth.oauth_registration_type AS ENUM (
    'dynamic',
    'manual'
);


ALTER TYPE auth.oauth_registration_type OWNER TO supabase_auth_admin;

--
-- Name: oauth_response_type; Type: TYPE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TYPE auth.oauth_response_type AS ENUM (
    'code'
);


ALTER TYPE auth.oauth_response_type OWNER TO supabase_auth_admin;

--
-- Name: one_time_token_type; Type: TYPE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TYPE auth.one_time_token_type AS ENUM (
    'confirmation_token',
    'reauthentication_token',
    'recovery_token',
    'email_change_token_new',
    'email_change_token_current',
    'phone_change_token'
);


ALTER TYPE auth.one_time_token_type OWNER TO supabase_auth_admin;

--
-- Name: allocation_priority; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.allocation_priority AS ENUM (
    'LOW',
    'NORMAL',
    'HIGH',
    'URGENT'
);


ALTER TYPE public.allocation_priority OWNER TO postgres;

--
-- Name: TYPE allocation_priority; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TYPE public.allocation_priority IS 'Priority levels for allocation ordering - Muc do uu tien phan bo';


--
-- Name: allocation_status; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.allocation_status AS ENUM (
    'PENDING',
    'SOFT',
    'HARD',
    'ISSUED',
    'CANCELLED',
    'WAITLISTED'
);


ALTER TYPE public.allocation_status OWNER TO postgres;

--
-- Name: TYPE allocation_status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TYPE public.allocation_status IS 'Lifecycle states for allocation requests - Trang thai vong doi yeu cau phan bo';


--
-- Name: batch_operation_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.batch_operation_type AS ENUM (
    'RECEIVE',
    'TRANSFER',
    'ISSUE',
    'RETURN'
);


ALTER TYPE public.batch_operation_type OWNER TO postgres;

--
-- Name: TYPE batch_operation_type; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TYPE public.batch_operation_type IS 'Types of batch operations - Loi thao tc hng lot';


--
-- Name: cone_status; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.cone_status AS ENUM (
    'RECEIVED',
    'INSPECTED',
    'AVAILABLE',
    'SOFT_ALLOCATED',
    'HARD_ALLOCATED',
    'IN_PRODUCTION',
    'PARTIAL_RETURN',
    'PENDING_WEIGH',
    'CONSUMED',
    'WRITTEN_OFF',
    'QUARANTINE'
);


ALTER TYPE public.cone_status OWNER TO postgres;

--
-- Name: TYPE cone_status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TYPE public.cone_status IS 'Lifecycle states for thread cones - Trang thai vong doi cua cuon chi';


--
-- Name: issue_request_status; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.issue_request_status AS ENUM (
    'PENDING',
    'PARTIAL',
    'COMPLETED',
    'CANCELLED'
);


ALTER TYPE public.issue_request_status OWNER TO postgres;

--
-- Name: TYPE issue_request_status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TYPE public.issue_request_status IS 'Trang thai yeu cau xuat kho - Issue request lifecycle states';


--
-- Name: issue_status; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.issue_status AS ENUM (
    'DRAFT',
    'CONFIRMED',
    'RETURNED'
);


ALTER TYPE public.issue_status OWNER TO postgres;

--
-- Name: TYPE issue_status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TYPE public.issue_status IS 'Trang thai phieu xuat kho v2 - Issue status for v2 process';


--
-- Name: lot_status; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.lot_status AS ENUM (
    'ACTIVE',
    'DEPLETED',
    'EXPIRED',
    'QUARANTINE'
);


ALTER TYPE public.lot_status OWNER TO postgres;

--
-- Name: TYPE lot_status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TYPE public.lot_status IS 'Lifecycle states for lots - Trng thi vng i ca l hng';


--
-- Name: movement_type; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.movement_type AS ENUM (
    'RECEIVE',
    'ISSUE',
    'RETURN',
    'TRANSFER',
    'ADJUSTMENT',
    'WRITE_OFF'
);


ALTER TYPE public.movement_type OWNER TO postgres;

--
-- Name: TYPE movement_type; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TYPE public.movement_type IS 'Types of inventory movements - Cac loai di chuyen ton kho';


--
-- Name: permission_action; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.permission_action AS ENUM (
    'view',
    'create',
    'edit',
    'delete',
    'manage'
);


ALTER TYPE public.permission_action OWNER TO postgres;

--
-- Name: recovery_status; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.recovery_status AS ENUM (
    'INITIATED',
    'PENDING_WEIGH',
    'WEIGHED',
    'CONFIRMED',
    'WRITTEN_OFF',
    'REJECTED'
);


ALTER TYPE public.recovery_status OWNER TO postgres;

--
-- Name: TYPE recovery_status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TYPE public.recovery_status IS 'Recovery workflow states - Trang thai quy trinh thu hoi cuon le';


--
-- Name: thread_material; Type: TYPE; Schema: public; Owner: postgres
--

CREATE TYPE public.thread_material AS ENUM (
    'polyester',
    'cotton',
    'nylon',
    'silk',
    'rayon',
    'mixed'
);


ALTER TYPE public.thread_material OWNER TO postgres;

--
-- Name: action; Type: TYPE; Schema: realtime; Owner: supabase_admin
--

CREATE TYPE realtime.action AS ENUM (
    'INSERT',
    'UPDATE',
    'DELETE',
    'TRUNCATE',
    'ERROR'
);


ALTER TYPE realtime.action OWNER TO supabase_admin;

--
-- Name: equality_op; Type: TYPE; Schema: realtime; Owner: supabase_admin
--

CREATE TYPE realtime.equality_op AS ENUM (
    'eq',
    'neq',
    'lt',
    'lte',
    'gt',
    'gte',
    'in'
);


ALTER TYPE realtime.equality_op OWNER TO supabase_admin;

--
-- Name: user_defined_filter; Type: TYPE; Schema: realtime; Owner: supabase_admin
--

CREATE TYPE realtime.user_defined_filter AS (
	column_name text,
	op realtime.equality_op,
	value text
);


ALTER TYPE realtime.user_defined_filter OWNER TO supabase_admin;

--
-- Name: wal_column; Type: TYPE; Schema: realtime; Owner: supabase_admin
--

CREATE TYPE realtime.wal_column AS (
	name text,
	type_name text,
	type_oid oid,
	value jsonb,
	is_pkey boolean,
	is_selectable boolean
);


ALTER TYPE realtime.wal_column OWNER TO supabase_admin;

--
-- Name: wal_rls; Type: TYPE; Schema: realtime; Owner: supabase_admin
--

CREATE TYPE realtime.wal_rls AS (
	wal jsonb,
	is_rls_enabled boolean,
	subscription_ids uuid[],
	errors text[]
);


ALTER TYPE realtime.wal_rls OWNER TO supabase_admin;

--
-- Name: buckettype; Type: TYPE; Schema: storage; Owner: supabase_storage_admin
--

CREATE TYPE storage.buckettype AS ENUM (
    'STANDARD',
    'ANALYTICS',
    'VECTOR'
);


ALTER TYPE storage.buckettype OWNER TO supabase_storage_admin;

--
-- Name: email(); Type: FUNCTION; Schema: auth; Owner: supabase_auth_admin
--

CREATE FUNCTION auth.email() RETURNS text
    LANGUAGE sql STABLE
    AS $$
  select 
  coalesce(
    nullif(current_setting('request.jwt.claim.email', true), ''),
    (nullif(current_setting('request.jwt.claims', true), '')::jsonb ->> 'email')
  )::text
$$;


ALTER FUNCTION auth.email() OWNER TO supabase_auth_admin;

--
-- Name: FUNCTION email(); Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON FUNCTION auth.email() IS 'Deprecated. Use auth.jwt() -> ''email'' instead.';


--
-- Name: jwt(); Type: FUNCTION; Schema: auth; Owner: supabase_auth_admin
--

CREATE FUNCTION auth.jwt() RETURNS jsonb
    LANGUAGE sql STABLE
    AS $$
  select 
    coalesce(
        nullif(current_setting('request.jwt.claim', true), ''),
        nullif(current_setting('request.jwt.claims', true), '')
    )::jsonb
$$;


ALTER FUNCTION auth.jwt() OWNER TO supabase_auth_admin;

--
-- Name: role(); Type: FUNCTION; Schema: auth; Owner: supabase_auth_admin
--

CREATE FUNCTION auth.role() RETURNS text
    LANGUAGE sql STABLE
    AS $$
  select 
  coalesce(
    nullif(current_setting('request.jwt.claim.role', true), ''),
    (nullif(current_setting('request.jwt.claims', true), '')::jsonb ->> 'role')
  )::text
$$;


ALTER FUNCTION auth.role() OWNER TO supabase_auth_admin;

--
-- Name: FUNCTION role(); Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON FUNCTION auth.role() IS 'Deprecated. Use auth.jwt() -> ''role'' instead.';


--
-- Name: uid(); Type: FUNCTION; Schema: auth; Owner: supabase_auth_admin
--

CREATE FUNCTION auth.uid() RETURNS uuid
    LANGUAGE sql STABLE
    AS $$
  select 
  coalesce(
    nullif(current_setting('request.jwt.claim.sub', true), ''),
    (nullif(current_setting('request.jwt.claims', true), '')::jsonb ->> 'sub')
  )::uuid
$$;


ALTER FUNCTION auth.uid() OWNER TO supabase_auth_admin;

--
-- Name: FUNCTION uid(); Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON FUNCTION auth.uid() IS 'Deprecated. Use auth.jwt() -> ''sub'' instead.';


--
-- Name: grant_pg_cron_access(); Type: FUNCTION; Schema: extensions; Owner: supabase_admin
--

CREATE FUNCTION extensions.grant_pg_cron_access() RETURNS event_trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
  IF EXISTS (
    SELECT
    FROM pg_event_trigger_ddl_commands() AS ev
    JOIN pg_extension AS ext
    ON ev.objid = ext.oid
    WHERE ext.extname = 'pg_cron'
  )
  THEN
    grant usage on schema cron to postgres with grant option;

    alter default privileges in schema cron grant all on tables to postgres with grant option;
    alter default privileges in schema cron grant all on functions to postgres with grant option;
    alter default privileges in schema cron grant all on sequences to postgres with grant option;

    alter default privileges for user supabase_admin in schema cron grant all
        on sequences to postgres with grant option;
    alter default privileges for user supabase_admin in schema cron grant all
        on tables to postgres with grant option;
    alter default privileges for user supabase_admin in schema cron grant all
        on functions to postgres with grant option;

    grant all privileges on all tables in schema cron to postgres with grant option;
    revoke all on table cron.job from postgres;
    grant select on table cron.job to postgres with grant option;
  END IF;
END;
$$;


ALTER FUNCTION extensions.grant_pg_cron_access() OWNER TO supabase_admin;

--
-- Name: FUNCTION grant_pg_cron_access(); Type: COMMENT; Schema: extensions; Owner: supabase_admin
--

COMMENT ON FUNCTION extensions.grant_pg_cron_access() IS 'Grants access to pg_cron';


--
-- Name: grant_pg_graphql_access(); Type: FUNCTION; Schema: extensions; Owner: supabase_admin
--

CREATE FUNCTION extensions.grant_pg_graphql_access() RETURNS event_trigger
    LANGUAGE plpgsql
    AS $_$
DECLARE
    func_is_graphql_resolve bool;
BEGIN
    func_is_graphql_resolve = (
        SELECT n.proname = 'resolve'
        FROM pg_event_trigger_ddl_commands() AS ev
        LEFT JOIN pg_catalog.pg_proc AS n
        ON ev.objid = n.oid
    );

    IF func_is_graphql_resolve
    THEN
        -- Update public wrapper to pass all arguments through to the pg_graphql resolve func
        DROP FUNCTION IF EXISTS graphql_public.graphql;
        create or replace function graphql_public.graphql(
            "operationName" text default null,
            query text default null,
            variables jsonb default null,
            extensions jsonb default null
        )
            returns jsonb
            language sql
        as $$
            select graphql.resolve(
                query := query,
                variables := coalesce(variables, '{}'),
                "operationName" := "operationName",
                extensions := extensions
            );
        $$;

        -- This hook executes when `graphql.resolve` is created. That is not necessarily the last
        -- function in the extension so we need to grant permissions on existing entities AND
        -- update default permissions to any others that are created after `graphql.resolve`
        grant usage on schema graphql to postgres, anon, authenticated, service_role;
        grant select on all tables in schema graphql to postgres, anon, authenticated, service_role;
        grant execute on all functions in schema graphql to postgres, anon, authenticated, service_role;
        grant all on all sequences in schema graphql to postgres, anon, authenticated, service_role;
        alter default privileges in schema graphql grant all on tables to postgres, anon, authenticated, service_role;
        alter default privileges in schema graphql grant all on functions to postgres, anon, authenticated, service_role;
        alter default privileges in schema graphql grant all on sequences to postgres, anon, authenticated, service_role;

        -- Allow postgres role to allow granting usage on graphql and graphql_public schemas to custom roles
        grant usage on schema graphql_public to postgres with grant option;
        grant usage on schema graphql to postgres with grant option;
    END IF;

END;
$_$;


ALTER FUNCTION extensions.grant_pg_graphql_access() OWNER TO supabase_admin;

--
-- Name: FUNCTION grant_pg_graphql_access(); Type: COMMENT; Schema: extensions; Owner: supabase_admin
--

COMMENT ON FUNCTION extensions.grant_pg_graphql_access() IS 'Grants access to pg_graphql';


--
-- Name: grant_pg_net_access(); Type: FUNCTION; Schema: extensions; Owner: supabase_admin
--

CREATE FUNCTION extensions.grant_pg_net_access() RETURNS event_trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
  IF EXISTS (
    SELECT 1
    FROM pg_event_trigger_ddl_commands() AS ev
    JOIN pg_extension AS ext
    ON ev.objid = ext.oid
    WHERE ext.extname = 'pg_net'
  )
  THEN
    GRANT USAGE ON SCHEMA net TO supabase_functions_admin, postgres, anon, authenticated, service_role;

    ALTER function net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) SECURITY DEFINER;
    ALTER function net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) SECURITY DEFINER;

    ALTER function net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) SET search_path = net;
    ALTER function net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) SET search_path = net;

    REVOKE ALL ON FUNCTION net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) FROM PUBLIC;
    REVOKE ALL ON FUNCTION net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) FROM PUBLIC;

    GRANT EXECUTE ON FUNCTION net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) TO supabase_functions_admin, postgres, anon, authenticated, service_role;
    GRANT EXECUTE ON FUNCTION net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) TO supabase_functions_admin, postgres, anon, authenticated, service_role;
  END IF;
END;
$$;


ALTER FUNCTION extensions.grant_pg_net_access() OWNER TO supabase_admin;

--
-- Name: FUNCTION grant_pg_net_access(); Type: COMMENT; Schema: extensions; Owner: supabase_admin
--

COMMENT ON FUNCTION extensions.grant_pg_net_access() IS 'Grants access to pg_net';


--
-- Name: pgrst_ddl_watch(); Type: FUNCTION; Schema: extensions; Owner: supabase_admin
--

CREATE FUNCTION extensions.pgrst_ddl_watch() RETURNS event_trigger
    LANGUAGE plpgsql
    AS $$
DECLARE
  cmd record;
BEGIN
  FOR cmd IN SELECT * FROM pg_event_trigger_ddl_commands()
  LOOP
    IF cmd.command_tag IN (
      'CREATE SCHEMA', 'ALTER SCHEMA'
    , 'CREATE TABLE', 'CREATE TABLE AS', 'SELECT INTO', 'ALTER TABLE'
    , 'CREATE FOREIGN TABLE', 'ALTER FOREIGN TABLE'
    , 'CREATE VIEW', 'ALTER VIEW'
    , 'CREATE MATERIALIZED VIEW', 'ALTER MATERIALIZED VIEW'
    , 'CREATE FUNCTION', 'ALTER FUNCTION'
    , 'CREATE TRIGGER'
    , 'CREATE TYPE', 'ALTER TYPE'
    , 'CREATE RULE'
    , 'COMMENT'
    )
    -- don't notify in case of CREATE TEMP table or other objects created on pg_temp
    AND cmd.schema_name is distinct from 'pg_temp'
    THEN
      NOTIFY pgrst, 'reload schema';
    END IF;
  END LOOP;
END; $$;


ALTER FUNCTION extensions.pgrst_ddl_watch() OWNER TO supabase_admin;

--
-- Name: pgrst_drop_watch(); Type: FUNCTION; Schema: extensions; Owner: supabase_admin
--

CREATE FUNCTION extensions.pgrst_drop_watch() RETURNS event_trigger
    LANGUAGE plpgsql
    AS $$
DECLARE
  obj record;
BEGIN
  FOR obj IN SELECT * FROM pg_event_trigger_dropped_objects()
  LOOP
    IF obj.object_type IN (
      'schema'
    , 'table'
    , 'foreign table'
    , 'view'
    , 'materialized view'
    , 'function'
    , 'trigger'
    , 'type'
    , 'rule'
    )
    AND obj.is_temporary IS false -- no pg_temp objects
    THEN
      NOTIFY pgrst, 'reload schema';
    END IF;
  END LOOP;
END; $$;


ALTER FUNCTION extensions.pgrst_drop_watch() OWNER TO supabase_admin;

--
-- Name: set_graphql_placeholder(); Type: FUNCTION; Schema: extensions; Owner: supabase_admin
--

CREATE FUNCTION extensions.set_graphql_placeholder() RETURNS event_trigger
    LANGUAGE plpgsql
    AS $_$
    DECLARE
    graphql_is_dropped bool;
    BEGIN
    graphql_is_dropped = (
        SELECT ev.schema_name = 'graphql_public'
        FROM pg_event_trigger_dropped_objects() AS ev
        WHERE ev.schema_name = 'graphql_public'
    );

    IF graphql_is_dropped
    THEN
        create or replace function graphql_public.graphql(
            "operationName" text default null,
            query text default null,
            variables jsonb default null,
            extensions jsonb default null
        )
            returns jsonb
            language plpgsql
        as $$
            DECLARE
                server_version float;
            BEGIN
                server_version = (SELECT (SPLIT_PART((select version()), ' ', 2))::float);

                IF server_version >= 14 THEN
                    RETURN jsonb_build_object(
                        'errors', jsonb_build_array(
                            jsonb_build_object(
                                'message', 'pg_graphql extension is not enabled.'
                            )
                        )
                    );
                ELSE
                    RETURN jsonb_build_object(
                        'errors', jsonb_build_array(
                            jsonb_build_object(
                                'message', 'pg_graphql is only available on projects running Postgres 14 onwards.'
                            )
                        )
                    );
                END IF;
            END;
        $$;
    END IF;

    END;
$_$;


ALTER FUNCTION extensions.set_graphql_placeholder() OWNER TO supabase_admin;

--
-- Name: FUNCTION set_graphql_placeholder(); Type: COMMENT; Schema: extensions; Owner: supabase_admin
--

COMMENT ON FUNCTION extensions.set_graphql_placeholder() IS 'Reintroduces placeholder function for graphql_public.graphql';


--
-- Name: get_auth(text); Type: FUNCTION; Schema: pgbouncer; Owner: supabase_admin
--

CREATE FUNCTION pgbouncer.get_auth(p_usename text) RETURNS TABLE(username text, password text)
    LANGUAGE plpgsql SECURITY DEFINER
    SET search_path TO ''
    AS $_$
begin
    raise debug 'PgBouncer auth request: %', p_usename;

    return query
    select 
        rolname::text, 
        case when rolvaliduntil < now() 
            then null 
            else rolpassword::text 
        end 
    from pg_authid 
    where rolname=$1 and rolcanlogin;
end;
$_$;


ALTER FUNCTION pgbouncer.get_auth(p_usename text) OWNER TO supabase_admin;

--
-- Name: allocate_thread(character varying, character varying, integer, numeric, public.allocation_priority, date, text, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.allocate_thread(p_order_id character varying, p_order_reference character varying, p_thread_type_id integer, p_requested_meters numeric, p_priority public.allocation_priority, p_due_date date DEFAULT NULL::date, p_notes text DEFAULT NULL::text, p_created_by character varying DEFAULT NULL::character varying) RETURNS json
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_allocation_id INTEGER;
    v_allocated_meters DECIMAL := 0;
    v_remaining_meters DECIMAL;
    v_priority_score INTEGER;
    v_available_total DECIMAL;
    v_cone RECORD;
    v_cone_allocate_meters DECIMAL;
    v_conflict_id INTEGER := NULL;
    v_status allocation_status;
BEGIN
    -- =========================================================================
    -- STEP 1: Calculate priority score
    -- Priority score = priority_level * 10 + age_days (age is 0 for new allocation)
    -- Priority levels: LOW=10, NORMAL=20, HIGH=30, URGENT=40
    -- =========================================================================
    v_priority_score := CASE p_priority
        WHEN 'URGENT' THEN 40
        WHEN 'HIGH' THEN 30
        WHEN 'NORMAL' THEN 20
        WHEN 'LOW' THEN 10
    END;
    
    -- =========================================================================
    -- STEP 2: Check total available meters for this thread type
    -- This is used for conflict detection later
    -- =========================================================================
    SELECT COALESCE(SUM(quantity_meters), 0) INTO v_available_total
    FROM thread_inventory
    WHERE thread_type_id = p_thread_type_id
      AND status = 'AVAILABLE';
    
    -- =========================================================================
    -- STEP 3: Create allocation record with PENDING status
    -- We'll update the status after allocation attempt
    -- =========================================================================
    INSERT INTO thread_allocations (
        order_id, 
        order_reference, 
        thread_type_id,
        requested_meters, 
        allocated_meters,
        status, 
        priority, 
        priority_score,
        due_date, 
        notes, 
        created_by
    ) VALUES (
        p_order_id, 
        p_order_reference, 
        p_thread_type_id,
        p_requested_meters, 
        0,
        'PENDING', 
        p_priority, 
        v_priority_score,
        p_due_date, 
        p_notes, 
        p_created_by
    ) RETURNING id INTO v_allocation_id;
    
    v_remaining_meters := p_requested_meters;
    
    -- =========================================================================
    -- STEP 4: FEFO allocation with row-level locks
    -- 
    -- Allocation Order:
    --   1. is_partial DESC: Partial cones first (use up remnants before full cones)
    --   2. expiry_date ASC NULLS LAST: Earliest expiry first (no expiry = lowest priority)
    --   3. received_date ASC: Oldest received first (FIFO as tiebreaker)
    --
    -- FOR UPDATE SKIP LOCKED:
    --   - Locks selected rows to prevent concurrent modification
    --   - SKIP LOCKED skips rows already locked by other transactions
    --   - This prevents race conditions in concurrent allocation scenarios
    -- =========================================================================
    FOR v_cone IN
        SELECT id, quantity_meters
        FROM thread_inventory
        WHERE thread_type_id = p_thread_type_id
          AND status = 'AVAILABLE'
        ORDER BY 
            is_partial DESC,              -- Partial cones first
            expiry_date ASC NULLS LAST,   -- FEFO (First Expired First Out)
            received_date ASC             -- Oldest received first
        FOR UPDATE SKIP LOCKED            -- Lock rows, skip already locked
    LOOP
        -- Exit when we've allocated enough
        EXIT WHEN v_remaining_meters <= 0;
        
        -- Calculate how much to allocate from this cone
        -- Take the minimum of what's available and what's remaining to allocate
        v_cone_allocate_meters := LEAST(v_cone.quantity_meters, v_remaining_meters);
        
        -- Update cone status to SOFT_ALLOCATED
        UPDATE thread_inventory
        SET status = 'SOFT_ALLOCATED',
            updated_at = NOW()
        WHERE id = v_cone.id;
        
        -- Create allocation-cone junction record
        -- This links the allocation to the specific cone with the allocated amount
        INSERT INTO thread_allocation_cones (
            allocation_id, 
            cone_id, 
            allocated_meters
        ) VALUES (
            v_allocation_id, 
            v_cone.id, 
            v_cone_allocate_meters
        );
        
        -- Update running totals
        v_allocated_meters := v_allocated_meters + v_cone_allocate_meters;
        v_remaining_meters := v_remaining_meters - v_cone_allocate_meters;
    END LOOP;
    
    -- =========================================================================
    -- STEP 5: Determine final status and handle conflicts
    -- =========================================================================
    IF v_allocated_meters >= p_requested_meters THEN
        -- Fully allocated
        v_status := 'SOFT';
    ELSIF v_allocated_meters > 0 THEN
        -- Partial allocation - some stock available but not enough
        v_status := 'SOFT';
        
        -- Create conflict record for shortage
        INSERT INTO thread_conflicts (
            thread_type_id, 
            total_requested_meters, 
            total_available_meters, 
            shortage_meters,
            status
        ) VALUES (
            p_thread_type_id, 
            p_requested_meters, 
            v_available_total, 
            p_requested_meters - v_allocated_meters,
            'PENDING'
        ) RETURNING id INTO v_conflict_id;
        
        -- Link allocation to conflict for tracking
        INSERT INTO thread_conflict_allocations (
            conflict_id, 
            allocation_id, 
            original_priority_score
        ) VALUES (
            v_conflict_id, 
            v_allocation_id, 
            v_priority_score
        );
    ELSE
        -- No stock available at all - add to waitlist
        v_status := 'WAITLISTED';
        
        -- Create conflict record for complete shortage
        INSERT INTO thread_conflicts (
            thread_type_id, 
            total_requested_meters, 
            total_available_meters, 
            shortage_meters,
            status
        ) VALUES (
            p_thread_type_id, 
            p_requested_meters, 
            v_available_total, 
            p_requested_meters,
            'PENDING'
        ) RETURNING id INTO v_conflict_id;
        
        -- Link allocation to conflict
        INSERT INTO thread_conflict_allocations (
            conflict_id, 
            allocation_id, 
            original_priority_score
        ) VALUES (
            v_conflict_id, 
            v_allocation_id, 
            v_priority_score
        );
    END IF;
    
    -- =========================================================================
    -- STEP 6: Update allocation with final values
    -- =========================================================================
    UPDATE thread_allocations
    SET allocated_meters = v_allocated_meters,
        status = v_status,
        updated_at = NOW()
    WHERE id = v_allocation_id;
    
    -- =========================================================================
    -- STEP 7: Return result with Vietnamese messages
    -- =========================================================================
    RETURN json_build_object(
        'success', true,
        'allocation_id', v_allocation_id,
        'allocated_meters', v_allocated_meters,
        'waitlisted_meters', GREATEST(0, p_requested_meters - v_allocated_meters),
        'conflict_id', v_conflict_id,
        'message', CASE
            WHEN v_allocated_meters >= p_requested_meters THEN 'Phn b thnh cng'
            WHEN v_allocated_meters > 0 THEN 'Phn b mt phn - thiu hng'
            ELSE 'Khng c hng -  thm vo danh sch ch'
        END
    );
    
EXCEPTION WHEN OTHERS THEN
    -- =========================================================================
    -- ERROR HANDLING
    -- Return error information with Vietnamese message
    -- =========================================================================
    RETURN json_build_object(
        'success', false,
        'allocation_id', NULL,
        'allocated_meters', 0,
        'waitlisted_meters', 0,
        'conflict_id', NULL,
        'message', 'Li: ' || SQLERRM
    );
END;
$$;


ALTER FUNCTION public.allocate_thread(p_order_id character varying, p_order_reference character varying, p_thread_type_id integer, p_requested_meters numeric, p_priority public.allocation_priority, p_due_date date, p_notes text, p_created_by character varying) OWNER TO postgres;

--
-- Name: FUNCTION allocate_thread(p_order_id character varying, p_order_reference character varying, p_thread_type_id integer, p_requested_meters numeric, p_priority public.allocation_priority, p_due_date date, p_notes text, p_created_by character varying); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.allocate_thread(p_order_id character varying, p_order_reference character varying, p_thread_type_id integer, p_requested_meters numeric, p_priority public.allocation_priority, p_due_date date, p_notes text, p_created_by character varying) IS 'Atomic soft allocation with FEFO logic - Phan bo mem voi logic FEFO';


--
-- Name: can_manage_employee(integer, integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.can_manage_employee(actor_id integer, target_id integer) RETURNS boolean
    LANGUAGE plpgsql STABLE SECURITY DEFINER
    AS $$
DECLARE
  actor_min_level INTEGER;
  target_min_level INTEGER;
BEGIN
  -- Cannot manage yourself
  IF actor_id = target_id THEN
    RETURN false;
  END IF;
  
  -- Get actor's minimum (highest privilege) level
  SELECT MIN(r.level) INTO actor_min_level
  FROM employee_roles er
  JOIN roles r ON er.role_id = r.id
  WHERE er.employee_id = actor_id;
  
  -- Get target's minimum level
  SELECT MIN(r.level) INTO target_min_level
  FROM employee_roles er
  JOIN roles r ON er.role_id = r.id
  WHERE er.employee_id = target_id;
  
  -- No roles = level 99 (lowest privilege)
  actor_min_level := COALESCE(actor_min_level, 99);
  target_min_level := COALESCE(target_min_level, 99);
  
  -- Can manage if actor's level is strictly lower (higher privilege)
  -- Exception: ROOT (level 0) can manage anyone including other ROOTs
  IF actor_min_level = 0 THEN
    RETURN true;
  END IF;
  
  RETURN actor_min_level < target_min_level;
END;
$$;


ALTER FUNCTION public.can_manage_employee(actor_id integer, target_id integer) OWNER TO postgres;

--
-- Name: cleanup_expired_refresh_tokens(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.cleanup_expired_refresh_tokens() RETURNS integer
    LANGUAGE plpgsql SECURITY DEFINER
    AS $$
DECLARE
  deleted_count INTEGER;
BEGIN
  DELETE FROM employee_refresh_tokens WHERE expires_at < NOW();
  GET DIAGNOSTICS deleted_count = ROW_COUNT;
  RETURN deleted_count;
END;
$$;


ALTER FUNCTION public.cleanup_expired_refresh_tokens() OWNER TO postgres;

--
-- Name: fn_calculate_quota(integer, integer, integer, integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.fn_calculate_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer) RETURNS numeric
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_order_quantity INTEGER;
    v_meters_per_unit DECIMAL(10,2);
    v_quota DECIMAL(12,4);
BEGIN
    -- Get order quantity from thread_order_items for this PO/style/color
    SELECT COALESCE(SUM(quantity), 0) INTO v_order_quantity
    FROM thread_order_items
    WHERE po_id = p_po_id
      AND style_id = p_style_id
      AND color_id = p_color_id;

    -- If no order found, return 0
    IF v_order_quantity = 0 THEN
        RETURN 0;
    END IF;

    -- Get meters_per_unit from style_thread_specs for this style/thread_type
    -- Join with style_color_thread_specs to get the thread_type mapping
    SELECT COALESCE(sts.meters_per_unit, 0) INTO v_meters_per_unit
    FROM style_thread_specs sts
    JOIN style_color_thread_specs scts ON scts.style_thread_spec_id = sts.id
    WHERE sts.style_id = p_style_id
      AND scts.thread_type_id = p_thread_type_id
    LIMIT 1;

    -- If no spec found, return 0
    IF v_meters_per_unit IS NULL OR v_meters_per_unit = 0 THEN
        RETURN 0;
    END IF;

    -- Calculate quota: order_quantity * meters_per_unit
    v_quota := v_order_quantity * v_meters_per_unit;

    RETURN v_quota;
END;
$$;


ALTER FUNCTION public.fn_calculate_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer) OWNER TO postgres;

--
-- Name: FUNCTION fn_calculate_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.fn_calculate_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer) IS 'Tinh dinh muc chi (met) tu style_thread_specs - Calculate quota from BOM';


--
-- Name: fn_check_quota(integer, integer, integer, integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.fn_check_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer) RETURNS json
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_quota_meters DECIMAL(12,4);
    v_issued_meters DECIMAL(12,4);
    v_remaining_meters DECIMAL(12,4);
    v_is_over_quota BOOLEAN;
BEGIN
    -- Get quota from fn_calculate_quota
    v_quota_meters := fn_calculate_quota(p_po_id, p_style_id, p_color_id, p_thread_type_id);

    -- Get total issued meters from all thread_issue_requests for same combination
    SELECT COALESCE(SUM(issued_meters), 0) INTO v_issued_meters
    FROM thread_issue_requests
    WHERE po_id = p_po_id
      AND style_id = p_style_id
      AND color_id = p_color_id
      AND thread_type_id = p_thread_type_id
      AND status != 'CANCELLED';

    -- Calculate remaining
    v_remaining_meters := v_quota_meters - v_issued_meters;

    -- Check if over quota
    v_is_over_quota := v_remaining_meters < 0;

    RETURN json_build_object(
        'quota_meters', v_quota_meters,
        'issued_meters', v_issued_meters,
        'remaining_meters', v_remaining_meters,
        'is_over_quota', v_is_over_quota
    );
END;
$$;


ALTER FUNCTION public.fn_check_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer) OWNER TO postgres;

--
-- Name: FUNCTION fn_check_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.fn_check_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer) IS 'Kiem tra dinh muc con lai - Check remaining quota for issuance';


--
-- Name: fn_generate_issue_code(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.fn_generate_issue_code() RETURNS character varying
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_date_part VARCHAR(8);
    v_sequence INTEGER;
    v_code VARCHAR(50);
BEGIN
    -- Lay ngay hien tai theo format YYYYMMDD
    v_date_part := TO_CHAR(CURRENT_DATE, 'YYYYMMDD');

    -- Dem so phieu trong ngay hom nay
    SELECT COUNT(*) + 1 INTO v_sequence
    FROM thread_issues
    WHERE issue_code LIKE 'XK2-' || v_date_part || '-%';

    -- Tao ma phieu
    v_code := 'XK2-' || v_date_part || '-' || LPAD(v_sequence::TEXT, 3, '0');

    RETURN v_code;
END;
$$;


ALTER FUNCTION public.fn_generate_issue_code() OWNER TO postgres;

--
-- Name: FUNCTION fn_generate_issue_code(); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.fn_generate_issue_code() IS 'Tao ma phieu xuat tu dong (format: XK2-YYYYMMDD-NNN)';


--
-- Name: fn_get_partial_cone_ratio(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.fn_get_partial_cone_ratio() RETURNS numeric
    LANGUAGE plpgsql STABLE
    AS $$
BEGIN
    RETURN COALESCE(
        (SELECT (value)::numeric FROM system_settings WHERE key = 'partial_cone_ratio'),
        0.3  -- Gia tri mac dinh
    );
END;
$$;


ALTER FUNCTION public.fn_get_partial_cone_ratio() OWNER TO postgres;

--
-- Name: FUNCTION fn_get_partial_cone_ratio(); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.fn_get_partial_cone_ratio() IS 'Lay ty le quy doi cuon le tu cau hinh he thong';


--
-- Name: fn_migrate_inventory_to_stock(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.fn_migrate_inventory_to_stock() RETURNS TABLE(migrated_count integer, skipped_count integer, error_message text)
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_migrated_count INTEGER := 0;
    v_skipped_count INTEGER := 0;
BEGIN
    -- Insert/Update thread_stock tu thread_inventory
    -- Chi lay cac cuon co status = 'RECEIVED' hoac 'ALLOCATED'
    INSERT INTO thread_stock (
        thread_type_id,
        warehouse_id,
        lot_number,
        qty_full_cones,
        qty_partial_cones,
        received_date,
        expiry_date,
        created_at,
        updated_at
    )
    SELECT
        ti.thread_type_id,
        ti.warehouse_id,
        ti.lot_number,
        -- Dem cuon nguyen (is_partial = false)
        COUNT(CASE WHEN ti.is_partial = false THEN 1 END)::INTEGER AS qty_full,
        -- Dem cuon le (is_partial = true)
        COUNT(CASE WHEN ti.is_partial = true THEN 1 END)::INTEGER AS qty_partial,
        -- Lay ngay nhap som nhat trong nhom
        MIN(ti.received_date) AS received_date,
        -- Lay ngay het han gan nhat (FEFO)
        MIN(ti.expiry_date) AS expiry_date,
        NOW() AS created_at,
        NOW() AS updated_at
    FROM thread_inventory ti
    WHERE ti.status IN ('RECEIVED', 'ALLOCATED')
      AND ti.quantity_cones > 0
    GROUP BY
        ti.thread_type_id,
        ti.warehouse_id,
        ti.lot_number
    ON CONFLICT (thread_type_id, warehouse_id, lot_number)
    DO UPDATE SET
        qty_full_cones = thread_stock.qty_full_cones + EXCLUDED.qty_full_cones,
        qty_partial_cones = thread_stock.qty_partial_cones + EXCLUDED.qty_partial_cones,
        -- Cap nhat expiry_date neu co gia tri moi som hon
        expiry_date = LEAST(thread_stock.expiry_date, EXCLUDED.expiry_date),
        updated_at = NOW();

    -- Dem so ban ghi da migrate
    GET DIAGNOSTICS v_migrated_count = ROW_COUNT;

    -- Tra ve ket qua
    RETURN QUERY SELECT
        v_migrated_count,
        v_skipped_count,
        NULL::TEXT;

EXCEPTION WHEN OTHERS THEN
    RETURN QUERY SELECT
        v_migrated_count,
        v_skipped_count,
        SQLERRM::TEXT;
END;
$$;


ALTER FUNCTION public.fn_migrate_inventory_to_stock() OWNER TO postgres;

--
-- Name: FUNCTION fn_migrate_inventory_to_stock(); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.fn_migrate_inventory_to_stock() IS 'Migrate du lieu tu thread_inventory sang thread_stock';


--
-- Name: fn_update_issue_request_issued_meters(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.fn_update_issue_request_issued_meters() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_request_id INTEGER;
    v_total_meters DECIMAL(12,4);
BEGIN
    -- Determine which request_id to update
    IF TG_OP = 'DELETE' THEN
        v_request_id := OLD.issue_request_id;
    ELSE
        v_request_id := NEW.issue_request_id;
    END IF;

    -- Calculate sum of all items for this request
    SELECT COALESCE(SUM(quantity_meters), 0) INTO v_total_meters
    FROM thread_issue_items
    WHERE issue_request_id = v_request_id;

    -- Update the request
    UPDATE thread_issue_requests
    SET issued_meters = v_total_meters,
        updated_at = NOW()
    WHERE id = v_request_id;

    RETURN NULL; -- AFTER trigger returns NULL
END;
$$;


ALTER FUNCTION public.fn_update_issue_request_issued_meters() OWNER TO postgres;

--
-- Name: FUNCTION fn_update_issue_request_issued_meters(); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.fn_update_issue_request_issued_meters() IS 'Cap nhat so met da xuat khi them/xoa item - Update issued_meters on item changes';


--
-- Name: fn_update_issue_request_status(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.fn_update_issue_request_status() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Don't change if status is CANCELLED
    IF NEW.status = 'CANCELLED' THEN
        RETURN NEW;
    END IF;

    -- Only process if issued_meters changed
    IF OLD.issued_meters IS DISTINCT FROM NEW.issued_meters THEN
        IF NEW.issued_meters = 0 THEN
            -- No items issued yet
            NEW.status := 'PENDING';
        ELSIF NEW.issued_meters > 0 AND NEW.issued_meters < NEW.requested_meters THEN
            -- Partially issued
            NEW.status := 'PARTIAL';
        ELSIF NEW.issued_meters >= NEW.requested_meters THEN
            -- Fully issued (or over-issued)
            NEW.status := 'COMPLETED';
        END IF;
    END IF;

    RETURN NEW;
END;
$$;


ALTER FUNCTION public.fn_update_issue_request_status() OWNER TO postgres;

--
-- Name: FUNCTION fn_update_issue_request_status(); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.fn_update_issue_request_status() IS 'Tu dong cap nhat trang thai yeu cau xuat - Auto-update request status based on issued_meters';


--
-- Name: fn_update_system_settings_timestamp(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.fn_update_system_settings_timestamp() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.fn_update_system_settings_timestamp() OWNER TO postgres;

--
-- Name: get_employee_permissions(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_employee_permissions(p_employee_id integer) RETURNS TABLE(permission_code text, granted boolean)
    LANGUAGE plpgsql STABLE SECURITY DEFINER
    AS $$
BEGIN
  -- ROOT has ALL permissions (return special indicator)
  IF public.is_root(p_employee_id) THEN
    RETURN QUERY SELECT '*'::TEXT, true;
    RETURN;
  END IF;
  
  -- Combine role permissions + direct permissions
  RETURN QUERY
  WITH role_perms AS (
    SELECT DISTINCT p.code, true as granted
    FROM employee_roles er
    JOIN role_permissions rp ON er.role_id = rp.role_id
    JOIN permissions p ON rp.permission_id = p.id
    WHERE er.employee_id = p_employee_id
  ),
  direct_perms AS (
    SELECT p.code, ep.granted
    FROM employee_permissions ep
    JOIN permissions p ON ep.permission_id = p.id
    WHERE ep.employee_id = p_employee_id
      AND (ep.expires_at IS NULL OR ep.expires_at > NOW())
  )
  SELECT COALESCE(dp.code, rp.code), COALESCE(dp.granted, rp.granted)
  FROM role_perms rp
  FULL OUTER JOIN direct_perms dp ON rp.code = dp.code
  WHERE COALESCE(dp.granted, rp.granted) = true;
END;
$$;


ALTER FUNCTION public.get_employee_permissions(p_employee_id integer) OWNER TO postgres;

--
-- Name: get_employee_roles(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.get_employee_roles(p_employee_id integer) RETURNS TABLE(role_code text, role_name text, role_level integer)
    LANGUAGE plpgsql STABLE SECURITY DEFINER
    AS $$
BEGIN
  RETURN QUERY
  SELECT r.code, r.name, r.level
  FROM employee_roles er
  JOIN roles r ON er.role_id = r.id
  WHERE er.employee_id = p_employee_id
    AND r.is_active = true
  ORDER BY r.level;
END;
$$;


ALTER FUNCTION public.get_employee_roles(p_employee_id integer) OWNER TO postgres;

--
-- Name: has_any_permission(integer, text[]); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.has_any_permission(p_employee_id integer, requested_permissions text[]) RETURNS boolean
    LANGUAGE plpgsql STABLE SECURITY DEFINER
    AS $$
BEGIN
  -- ROOT bypasses ALL permission checks
  IF public.is_root(p_employee_id) THEN
    RETURN true;
  END IF;

  RETURN EXISTS (
    SELECT 1 FROM unnest(requested_permissions) AS perm
    WHERE public.has_permission(p_employee_id, perm)
  );
END;
$$;


ALTER FUNCTION public.has_any_permission(p_employee_id integer, requested_permissions text[]) OWNER TO postgres;

--
-- Name: has_permission(integer, text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.has_permission(p_employee_id integer, requested_permission text) RETURNS boolean
    LANGUAGE plpgsql STABLE SECURITY DEFINER
    AS $$
DECLARE
  has_perm BOOLEAN := false;
BEGIN
  -- ROOT bypasses ALL permission checks
  IF public.is_root(p_employee_id) THEN
    RETURN true;
  END IF;
  
  -- Check direct employee permission (explicit grant/deny)
  SELECT granted INTO has_perm
  FROM employee_permissions ep
  JOIN permissions p ON ep.permission_id = p.id
  WHERE ep.employee_id = p_employee_id 
    AND p.code = requested_permission
    AND (ep.expires_at IS NULL OR ep.expires_at > NOW());
  
  IF has_perm IS NOT NULL THEN
    RETURN has_perm;  -- Return explicit grant/deny
  END IF;
  
  -- Check role-based permission
  SELECT EXISTS (
    SELECT 1 
    FROM employee_roles er
    JOIN role_permissions rp ON er.role_id = rp.role_id
    JOIN permissions p ON rp.permission_id = p.id
    WHERE er.employee_id = p_employee_id 
      AND p.code = requested_permission
  ) INTO has_perm;
  
  RETURN COALESCE(has_perm, false);
END;
$$;


ALTER FUNCTION public.has_permission(p_employee_id integer, requested_permission text) OWNER TO postgres;

--
-- Name: is_admin(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.is_admin(p_employee_id integer) RETURNS boolean
    LANGUAGE plpgsql STABLE SECURITY DEFINER
    AS $$
BEGIN
  RETURN EXISTS (
    SELECT 1 FROM employee_roles er
    JOIN roles r ON er.role_id = r.id
    WHERE er.employee_id = p_employee_id
      AND r.code IN ('root', 'admin')  -- ROOT is also considered admin
  );
END;
$$;


ALTER FUNCTION public.is_admin(p_employee_id integer) OWNER TO postgres;

--
-- Name: is_root(integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.is_root(p_employee_id integer) RETURNS boolean
    LANGUAGE plpgsql STABLE SECURITY DEFINER
    AS $$
BEGIN
  RETURN EXISTS (
    SELECT 1 FROM employee_roles er
    JOIN roles r ON er.role_id = r.id
    WHERE er.employee_id = p_employee_id
      AND r.code = 'root'
  );
END;
$$;


ALTER FUNCTION public.is_root(p_employee_id integer) OWNER TO postgres;

--
-- Name: issue_cone(integer, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.issue_cone(p_allocation_id integer, p_confirmed_by character varying DEFAULT NULL::character varying) RETURNS json
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_allocation RECORD;
    v_cone RECORD;
    v_movement_ids INTEGER[] := '{}';
    v_movement_id INTEGER;
    v_cone_ids INTEGER[] := '{}';
    v_cones_processed INTEGER := 0;
BEGIN
    -- =========================================================================
    -- STEP 1: Get allocation with lock to prevent concurrent modifications
    -- =========================================================================
    SELECT * INTO v_allocation
    FROM thread_allocations
    WHERE id = p_allocation_id
    FOR UPDATE;
    
    IF NOT FOUND THEN
        RETURN json_build_object(
            'success', false,
            'movement_id', NULL,
            'cone_ids', '{}',
            'message', 'Khng tm thy phn b'
        );
    END IF;
    
    -- =========================================================================
    -- STEP 2: Validate allocation status is SOFT
    -- Only SOFT allocations can be issued (converted to HARD/ISSUED)
    -- =========================================================================
    IF v_allocation.status != 'SOFT' THEN
        RETURN json_build_object(
            'success', false,
            'movement_id', NULL,
            'cone_ids', '{}',
            'message', 'Phn b phi  trng thi " gi ch"  xut kho. Trng thi hin ti: ' || v_allocation.status::TEXT
        );
    END IF;
    
    -- =========================================================================
    -- STEP 3: Process each allocated cone
    -- Lock cones to prevent concurrent modifications
    -- Update status and create movement records
    -- =========================================================================
    FOR v_cone IN
        SELECT 
            ac.cone_id,
            ac.allocated_meters,
            ti.status AS current_status,
            ti.quantity_meters
        FROM thread_allocation_cones ac
        JOIN thread_inventory ti ON ti.id = ac.cone_id
        WHERE ac.allocation_id = p_allocation_id
        FOR UPDATE OF ti
    LOOP
        -- Validate cone status (should be SOFT_ALLOCATED or AVAILABLE)
        IF v_cone.current_status NOT IN ('SOFT_ALLOCATED', 'AVAILABLE') THEN
            -- Skip cones that are not in valid state (might have been modified concurrently)
            CONTINUE;
        END IF;
        
        -- Update cone status to IN_PRODUCTION
        UPDATE thread_inventory
        SET status = 'IN_PRODUCTION',
            updated_at = NOW()
        WHERE id = v_cone.cone_id;
        
        -- Create movement record for this cone
        INSERT INTO thread_movements (
            cone_id,
            allocation_id,
            movement_type,
            quantity_meters,
            from_status,
            to_status,
            reference_type,
            reference_id,
            performed_by
        ) VALUES (
            v_cone.cone_id,
            p_allocation_id,
            'ISSUE',
            v_cone.allocated_meters,
            v_cone.current_status::VARCHAR,
            'IN_PRODUCTION',
            'ALLOCATION',
            p_allocation_id::VARCHAR,
            p_confirmed_by
        ) RETURNING id INTO v_movement_id;
        
        -- Collect IDs for response
        v_movement_ids := array_append(v_movement_ids, v_movement_id);
        v_cone_ids := array_append(v_cone_ids, v_cone.cone_id);
        v_cones_processed := v_cones_processed + 1;
    END LOOP;
    
    -- =========================================================================
    -- STEP 4: Check if any cones were processed
    -- =========================================================================
    IF v_cones_processed = 0 THEN
        RETURN json_build_object(
            'success', false,
            'movement_id', NULL,
            'cone_ids', '{}',
            'message', 'Khng c cun ch no c xut kho - kim tra trng thi cun'
        );
    END IF;
    
    -- =========================================================================
    -- STEP 5: Update allocation status to ISSUED
    -- =========================================================================
    UPDATE thread_allocations
    SET status = 'ISSUED',
        updated_at = NOW()
    WHERE id = p_allocation_id;
    
    -- =========================================================================
    -- STEP 6: Return success result with Vietnamese message
    -- =========================================================================
    RETURN json_build_object(
        'success', true,
        'movement_id', v_movement_ids[1],  -- First movement ID for reference
        'cone_ids', v_cone_ids,
        'message', 'Xut kho thnh cng - ' || v_cones_processed || ' cun'
    );

EXCEPTION WHEN OTHERS THEN
    -- =========================================================================
    -- ERROR HANDLING
    -- Return error information with Vietnamese message
    -- Transaction will be rolled back by caller
    -- =========================================================================
    RETURN json_build_object(
        'success', false,
        'movement_id', NULL,
        'cone_ids', '{}',
        'message', 'Li: ' || SQLERRM
    );
END;
$$;


ALTER FUNCTION public.issue_cone(p_allocation_id integer, p_confirmed_by character varying) OWNER TO postgres;

--
-- Name: FUNCTION issue_cone(p_allocation_id integer, p_confirmed_by character varying); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.issue_cone(p_allocation_id integer, p_confirmed_by character varying) IS 'Convert soft allocation to issued status - Xuat kho tu phan bo mem';


--
-- Name: recover_cone(integer, numeric, numeric, text, character varying, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.recover_cone(p_cone_id integer, p_returned_weight_grams numeric, p_tare_weight_grams numeric DEFAULT 10, p_notes text DEFAULT NULL::text, p_weighed_by character varying DEFAULT NULL::character varying, p_confirmed_by character varying DEFAULT NULL::character varying) RETURNS json
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_cone RECORD;
    v_thread_type RECORD;
    v_recovery_id INTEGER;
    v_calculated_meters DECIMAL;
    v_consumption_meters DECIMAL;
    v_net_weight DECIMAL;
    v_is_write_off BOOLEAN := FALSE;
    v_new_status VARCHAR;
    v_recovery_status recovery_status;
BEGIN
    -- =========================================================================
    -- STEP 1: Get cone with lock to prevent concurrent modifications
    -- FOR UPDATE ensures exclusive access during the recovery process
    -- =========================================================================
    SELECT * INTO v_cone
    FROM thread_inventory
    WHERE id = p_cone_id
    FOR UPDATE;
    
    -- Check if cone exists
    IF NOT FOUND THEN
        RETURN json_build_object(
            'success', false,
            'recovery_id', NULL,
            'calculated_meters', 0,
            'is_write_off', false,
            'message', 'Khng tm thy cun ch'
        );
    END IF;
    
    -- =========================================================================
    -- STEP 2: Validate cone status
    -- Only cones IN_PRODUCTION or PARTIAL_RETURN can be recovered
    -- =========================================================================
    IF v_cone.status NOT IN ('IN_PRODUCTION', 'PARTIAL_RETURN') THEN
        RETURN json_build_object(
            'success', false,
            'recovery_id', NULL,
            'calculated_meters', 0,
            'is_write_off', false,
            'message', 'Cun ch phi ang trong sn xut hoc ang thu hi'
        );
    END IF;
    
    -- =========================================================================
    -- STEP 3: Get thread type for density factor
    -- Density factor is used to convert weight to meters
    -- Formula: meters = net_weight_grams / density_grams_per_meter
    -- =========================================================================
    SELECT * INTO v_thread_type
    FROM thread_types
    WHERE id = v_cone.thread_type_id;
    
    IF NOT FOUND THEN
        RETURN json_build_object(
            'success', false,
            'recovery_id', NULL,
            'calculated_meters', 0,
            'is_write_off', false,
            'message', 'Khng tm thy loi ch'
        );
    END IF;
    
    -- Validate density factor exists and is positive
    IF v_thread_type.density_grams_per_meter IS NULL OR v_thread_type.density_grams_per_meter <= 0 THEN
        RETURN json_build_object(
            'success', false,
            'recovery_id', NULL,
            'calculated_meters', 0,
            'is_write_off', false,
            'message', 'H s mt  cha c cu hnh cho loi ch ny'
        );
    END IF;
    
    -- =========================================================================
    -- STEP 4: Calculate net weight (subtract tare/empty cone weight)
    -- Ensure net weight is never negative
    -- =========================================================================
    v_net_weight := GREATEST(0, p_returned_weight_grams - p_tare_weight_grams);
    
    -- =========================================================================
    -- STEP 5: Calculate meters from weight using density factor
    -- Formula: meters = net_weight_grams / density_grams_per_meter
    -- Round to 4 decimal places for consistency with other quantity_meters columns
    -- =========================================================================
    v_calculated_meters := ROUND(
        v_net_weight / v_thread_type.density_grams_per_meter,
        4
    );
    
    -- =========================================================================
    -- STEP 6: Calculate consumption (how much thread was used)
    -- Consumption = Original meters - Calculated remaining meters
    -- =========================================================================
    v_consumption_meters := v_cone.quantity_meters - v_calculated_meters;
    
    -- =========================================================================
    -- STEP 7: Check for write-off condition
    -- If net weight < 50g, cone is written off (too little to reuse)
    -- =========================================================================
    IF v_net_weight < 50 THEN
        v_is_write_off := TRUE;
        v_new_status := 'WRITTEN_OFF';
        v_recovery_status := 'WRITTEN_OFF';
    ELSE
        v_new_status := 'AVAILABLE';
        v_recovery_status := 'CONFIRMED';
    END IF;
    
    -- =========================================================================
    -- STEP 8: Create recovery record
    -- This tracks the full recovery details for audit and reporting
    -- =========================================================================
    INSERT INTO thread_recovery (
        cone_id,
        original_meters,
        returned_weight_grams,
        calculated_meters,
        tare_weight_grams,
        consumption_meters,
        status,
        weighed_by,
        confirmed_by,
        notes
    ) VALUES (
        p_cone_id,
        v_cone.quantity_meters,
        p_returned_weight_grams,
        v_calculated_meters,
        p_tare_weight_grams,
        v_consumption_meters,
        v_recovery_status,
        p_weighed_by,
        p_confirmed_by,
        p_notes
    ) RETURNING id INTO v_recovery_id;
    
    -- =========================================================================
    -- STEP 9: Update cone inventory
    -- - Update status to AVAILABLE or WRITTEN_OFF
    -- - Set new quantity_meters based on calculated value
    -- - Set weight_grams to net weight
    -- - Mark as partial (is_partial = TRUE)
    -- =========================================================================
    UPDATE thread_inventory
    SET status = v_new_status::cone_status,
        quantity_meters = v_calculated_meters,
        weight_grams = v_net_weight,
        is_partial = TRUE,
        updated_at = NOW()
    WHERE id = p_cone_id;
    
    -- =========================================================================
    -- STEP 10: Create movement record for audit trail
    -- Movement type: RETURN for normal recovery, WRITE_OFF for write-offs
    -- Quantity is the consumption (how much was used)
    -- =========================================================================
    INSERT INTO thread_movements (
        cone_id,
        movement_type,
        quantity_meters,
        from_status,
        to_status,
        performed_by,
        notes
    ) VALUES (
        p_cone_id,
        CASE WHEN v_is_write_off THEN 'WRITE_OFF'::movement_type ELSE 'RETURN'::movement_type END,
        v_consumption_meters,
        v_cone.status::VARCHAR,
        v_new_status,
        p_confirmed_by,
        CASE 
            WHEN v_is_write_off THEN 'Xa s - di 50g (' || v_net_weight || 'g)'
            ELSE 'Thu hi cun l - ' || v_calculated_meters || ' mt cn li'
        END
    );
    
    -- =========================================================================
    -- STEP 11: Return success response with Vietnamese messages
    -- =========================================================================
    RETURN json_build_object(
        'success', true,
        'recovery_id', v_recovery_id,
        'calculated_meters', v_calculated_meters,
        'is_write_off', v_is_write_off,
        'message', CASE
            WHEN v_is_write_off THEN 'Xa s thnh cng - di 50g cn li'
            ELSE 'Thu hi thnh cng - ' || v_calculated_meters || ' mt cn li'
        END
    );

EXCEPTION WHEN OTHERS THEN
    -- =========================================================================
    -- ERROR HANDLING
    -- Return error information with Vietnamese message
    -- Transaction will be rolled back automatically
    -- =========================================================================
    RETURN json_build_object(
        'success', false,
        'recovery_id', NULL,
        'calculated_meters', 0,
        'is_write_off', false,
        'message', 'Li: ' || SQLERRM
    );
END;
$$;


ALTER FUNCTION public.recover_cone(p_cone_id integer, p_returned_weight_grams numeric, p_tare_weight_grams numeric, p_notes text, p_weighed_by character varying, p_confirmed_by character varying) OWNER TO postgres;

--
-- Name: FUNCTION recover_cone(p_cone_id integer, p_returned_weight_grams numeric, p_tare_weight_grams numeric, p_notes text, p_weighed_by character varying, p_confirmed_by character varying); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.recover_cone(p_cone_id integer, p_returned_weight_grams numeric, p_tare_weight_grams numeric, p_notes text, p_weighed_by character varying, p_confirmed_by character varying) IS 'Process partial cone recovery with weight-to-meters conversion - X l thu hi cun l vi chuyn i khi lng sang mt';


--
-- Name: split_allocation(integer, numeric, text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.split_allocation(p_allocation_id integer, p_split_meters numeric, p_split_reason text DEFAULT NULL::text) RETURNS json
    LANGUAGE plpgsql
    AS $$
DECLARE
    v_allocation RECORD;
    v_new_allocation_id INTEGER;
    v_remaining_meters DECIMAL;
    v_cone_ids INTEGER[];
    v_notes TEXT;
BEGIN
    -- =========================================================================
    -- STEP 1: Lock and fetch the original allocation
    -- =========================================================================
    SELECT 
        id, 
        order_id, 
        order_reference, 
        thread_type_id,
        requested_meters, 
        allocated_meters,
        status, 
        priority, 
        priority_score,
        due_date, 
        notes, 
        created_by
    INTO v_allocation
    FROM thread_allocations
    WHERE id = p_allocation_id
    FOR UPDATE;
    
    IF NOT FOUND THEN
        RETURN json_build_object(
            'success', false,
            'original_allocation_id', p_allocation_id,
            'new_allocation_id', NULL,
            'original_meters', 0,
            'split_meters', 0,
            'message', 'Khng tm thy phn b'
        );
    END IF;
    
    -- =========================================================================
    -- STEP 2: Validate split parameters
    -- =========================================================================
    
    -- Check status - only allow split for PENDING, SOFT, WAITLISTED
    IF v_allocation.status NOT IN ('PENDING', 'SOFT', 'WAITLISTED') THEN
        RETURN json_build_object(
            'success', false,
            'original_allocation_id', p_allocation_id,
            'new_allocation_id', NULL,
            'original_meters', v_allocation.requested_meters,
            'split_meters', 0,
            'message', 'Ch c th chia nh phn b ang ch x l,  phn b mm hoc trong danh sch ch'
        );
    END IF;
    
    -- Validate split_meters > 0
    IF p_split_meters <= 0 THEN
        RETURN json_build_object(
            'success', false,
            'original_allocation_id', p_allocation_id,
            'new_allocation_id', NULL,
            'original_meters', v_allocation.requested_meters,
            'split_meters', 0,
            'message', 'S mt chia phi ln hn 0'
        );
    END IF;
    
    -- Validate split_meters < requested_meters
    IF p_split_meters >= v_allocation.requested_meters THEN
        RETURN json_build_object(
            'success', false,
            'original_allocation_id', p_allocation_id,
            'new_allocation_id', NULL,
            'original_meters', v_allocation.requested_meters,
            'split_meters', 0,
            'message', 'S mt chia phi nh hn s mt yu cu ban u'
        );
    END IF;
    
    -- =========================================================================
    -- STEP 3: Release all allocated cones back to AVAILABLE
    -- =========================================================================
    
    -- Get cone IDs for this allocation
    SELECT ARRAY_AGG(cone_id) INTO v_cone_ids
    FROM thread_allocation_cones
    WHERE allocation_id = p_allocation_id;
    
    -- Release cones if any exist
    IF v_cone_ids IS NOT NULL AND array_length(v_cone_ids, 1) > 0 THEN
        UPDATE thread_inventory
        SET status = 'AVAILABLE',
            updated_at = NOW()
        WHERE id = ANY(v_cone_ids)
          AND status IN ('SOFT_ALLOCATED', 'HARD_ALLOCATED');
        
        -- Delete cone allocation records
        DELETE FROM thread_allocation_cones
        WHERE allocation_id = p_allocation_id;
    END IF;
    
    -- =========================================================================
    -- STEP 4: Calculate remaining meters for original allocation
    -- =========================================================================
    v_remaining_meters := v_allocation.requested_meters - p_split_meters;
    
    -- =========================================================================
    -- STEP 5: Update original allocation
    -- =========================================================================
    v_notes := COALESCE(v_allocation.notes, '');
    IF p_split_reason IS NOT NULL THEN
        v_notes := v_notes || E'\n[Chia nh]: ' || p_split_reason;
    ELSE
        v_notes := v_notes || E'\n[Chia nh]:  chia ' || p_split_meters || ' mt thnh phn b mi';
    END IF;
    
    UPDATE thread_allocations
    SET requested_meters = v_remaining_meters,
        allocated_meters = 0,
        status = 'PENDING',
        notes = TRIM(v_notes),
        updated_at = NOW()
    WHERE id = p_allocation_id;
    
    -- =========================================================================
    -- STEP 6: Create new allocation with split meters
    -- =========================================================================
    INSERT INTO thread_allocations (
        order_id,
        order_reference,
        thread_type_id,
        requested_meters,
        allocated_meters,
        status,
        priority,
        priority_score,
        due_date,
        notes,
        created_by,
        split_from_id
    ) VALUES (
        v_allocation.order_id,
        v_allocation.order_reference,
        v_allocation.thread_type_id,
        p_split_meters,
        0,
        'PENDING',
        v_allocation.priority,
        v_allocation.priority_score,
        v_allocation.due_date,
        CASE 
            WHEN p_split_reason IS NOT NULL THEN '[T phn b #' || p_allocation_id || ']: ' || p_split_reason
            ELSE '[T phn b #' || p_allocation_id || ']: c tch ra t phn b gc'
        END,
        v_allocation.created_by,
        p_allocation_id
    ) RETURNING id INTO v_new_allocation_id;
    
    -- =========================================================================
    -- STEP 7: Return success result
    -- =========================================================================
    RETURN json_build_object(
        'success', true,
        'original_allocation_id', p_allocation_id,
        'new_allocation_id', v_new_allocation_id,
        'original_meters', v_remaining_meters,
        'split_meters', p_split_meters,
        'message', ' chia nh phn b thnh cng'
    );
    
EXCEPTION WHEN OTHERS THEN
    -- =========================================================================
    -- ERROR HANDLING
    -- =========================================================================
    RETURN json_build_object(
        'success', false,
        'original_allocation_id', p_allocation_id,
        'new_allocation_id', NULL,
        'original_meters', 0,
        'split_meters', 0,
        'message', 'Li: ' || SQLERRM
    );
END;
$$;


ALTER FUNCTION public.split_allocation(p_allocation_id integer, p_split_meters numeric, p_split_reason text) OWNER TO postgres;

--
-- Name: FUNCTION split_allocation(p_allocation_id integer, p_split_meters numeric, p_split_reason text); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.split_allocation(p_allocation_id integer, p_split_meters numeric, p_split_reason text) IS 'Split an allocation into two separate allocations - Chia nho phan bo thanh hai phan bo rieng';


--
-- Name: thread_audit_trigger_func(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.thread_audit_trigger_func() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF TG_OP = 'DELETE' THEN
        -- Log DELETE operation with old values only
        INSERT INTO thread_audit_log (
            table_name, 
            record_id, 
            action, 
            old_values
        )
        VALUES (
            TG_TABLE_NAME, 
            OLD.id, 
            'DELETE', 
            to_jsonb(OLD)
        );
        RETURN OLD;
        
    ELSIF TG_OP = 'UPDATE' THEN
        -- Log UPDATE operation with old values, new values, and changed fields
        INSERT INTO thread_audit_log (
            table_name, 
            record_id, 
            action, 
            old_values, 
            new_values, 
            changed_fields
        )
        VALUES (
            TG_TABLE_NAME,
            NEW.id,
            'UPDATE',
            to_jsonb(OLD),
            to_jsonb(NEW),
            -- Calculate which fields changed using JSON comparison
            ARRAY(
                SELECT key
                FROM jsonb_each(to_jsonb(OLD)) old_kv
                FULL OUTER JOIN jsonb_each(to_jsonb(NEW)) new_kv USING (key)
                WHERE old_kv.value IS DISTINCT FROM new_kv.value
            )
        );
        RETURN NEW;
        
    ELSIF TG_OP = 'INSERT' THEN
        -- Log INSERT operation with new values only
        INSERT INTO thread_audit_log (
            table_name, 
            record_id, 
            action, 
            new_values
        )
        VALUES (
            TG_TABLE_NAME, 
            NEW.id, 
            'INSERT', 
            to_jsonb(NEW)
        );
        RETURN NEW;
    END IF;
    
    RETURN NULL;
END;
$$;


ALTER FUNCTION public.thread_audit_trigger_func() OWNER TO postgres;

--
-- Name: FUNCTION thread_audit_trigger_func(); Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON FUNCTION public.thread_audit_trigger_func() IS 'Generic audit trigger function for thread tables - Ham trigger kiem toan chung cho cac bang chi';


--
-- Name: update_lots_updated_at(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_lots_updated_at() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_lots_updated_at() OWNER TO postgres;

--
-- Name: update_updated_at_column(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.update_updated_at_column() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$;


ALTER FUNCTION public.update_updated_at_column() OWNER TO postgres;

--
-- Name: apply_rls(jsonb, integer); Type: FUNCTION; Schema: realtime; Owner: supabase_admin
--

CREATE FUNCTION realtime.apply_rls(wal jsonb, max_record_bytes integer DEFAULT (1024 * 1024)) RETURNS SETOF realtime.wal_rls
    LANGUAGE plpgsql
    AS $$
declare
-- Regclass of the table e.g. public.notes
entity_ regclass = (quote_ident(wal ->> 'schema') || '.' || quote_ident(wal ->> 'table'))::regclass;

-- I, U, D, T: insert, update ...
action realtime.action = (
    case wal ->> 'action'
        when 'I' then 'INSERT'
        when 'U' then 'UPDATE'
        when 'D' then 'DELETE'
        else 'ERROR'
    end
);

-- Is row level security enabled for the table
is_rls_enabled bool = relrowsecurity from pg_class where oid = entity_;

subscriptions realtime.subscription[] = array_agg(subs)
    from
        realtime.subscription subs
    where
        subs.entity = entity_
        -- Filter by action early - only get subscriptions interested in this action
        -- action_filter column can be: '*' (all), 'INSERT', 'UPDATE', or 'DELETE'
        and (subs.action_filter = '*' or subs.action_filter = action::text);

-- Subscription vars
roles regrole[] = array_agg(distinct us.claims_role::text)
    from
        unnest(subscriptions) us;

working_role regrole;
claimed_role regrole;
claims jsonb;

subscription_id uuid;
subscription_has_access bool;
visible_to_subscription_ids uuid[] = '{}';

-- structured info for wal's columns
columns realtime.wal_column[];
-- previous identity values for update/delete
old_columns realtime.wal_column[];

error_record_exceeds_max_size boolean = octet_length(wal::text) > max_record_bytes;

-- Primary jsonb output for record
output jsonb;

begin
perform set_config('role', null, true);

columns =
    array_agg(
        (
            x->>'name',
            x->>'type',
            x->>'typeoid',
            realtime.cast(
                (x->'value') #>> '{}',
                coalesce(
                    (x->>'typeoid')::regtype, -- null when wal2json version <= 2.4
                    (x->>'type')::regtype
                )
            ),
            (pks ->> 'name') is not null,
            true
        )::realtime.wal_column
    )
    from
        jsonb_array_elements(wal -> 'columns') x
        left join jsonb_array_elements(wal -> 'pk') pks
            on (x ->> 'name') = (pks ->> 'name');

old_columns =
    array_agg(
        (
            x->>'name',
            x->>'type',
            x->>'typeoid',
            realtime.cast(
                (x->'value') #>> '{}',
                coalesce(
                    (x->>'typeoid')::regtype, -- null when wal2json version <= 2.4
                    (x->>'type')::regtype
                )
            ),
            (pks ->> 'name') is not null,
            true
        )::realtime.wal_column
    )
    from
        jsonb_array_elements(wal -> 'identity') x
        left join jsonb_array_elements(wal -> 'pk') pks
            on (x ->> 'name') = (pks ->> 'name');

for working_role in select * from unnest(roles) loop

    -- Update `is_selectable` for columns and old_columns
    columns =
        array_agg(
            (
                c.name,
                c.type_name,
                c.type_oid,
                c.value,
                c.is_pkey,
                pg_catalog.has_column_privilege(working_role, entity_, c.name, 'SELECT')
            )::realtime.wal_column
        )
        from
            unnest(columns) c;

    old_columns =
            array_agg(
                (
                    c.name,
                    c.type_name,
                    c.type_oid,
                    c.value,
                    c.is_pkey,
                    pg_catalog.has_column_privilege(working_role, entity_, c.name, 'SELECT')
                )::realtime.wal_column
            )
            from
                unnest(old_columns) c;

    if action <> 'DELETE' and count(1) = 0 from unnest(columns) c where c.is_pkey then
        return next (
            jsonb_build_object(
                'schema', wal ->> 'schema',
                'table', wal ->> 'table',
                'type', action
            ),
            is_rls_enabled,
            -- subscriptions is already filtered by entity
            (select array_agg(s.subscription_id) from unnest(subscriptions) as s where claims_role = working_role),
            array['Error 400: Bad Request, no primary key']
        )::realtime.wal_rls;

    -- The claims role does not have SELECT permission to the primary key of entity
    elsif action <> 'DELETE' and sum(c.is_selectable::int) <> count(1) from unnest(columns) c where c.is_pkey then
        return next (
            jsonb_build_object(
                'schema', wal ->> 'schema',
                'table', wal ->> 'table',
                'type', action
            ),
            is_rls_enabled,
            (select array_agg(s.subscription_id) from unnest(subscriptions) as s where claims_role = working_role),
            array['Error 401: Unauthorized']
        )::realtime.wal_rls;

    else
        output = jsonb_build_object(
            'schema', wal ->> 'schema',
            'table', wal ->> 'table',
            'type', action,
            'commit_timestamp', to_char(
                ((wal ->> 'timestamp')::timestamptz at time zone 'utc'),
                'YYYY-MM-DD"T"HH24:MI:SS.MS"Z"'
            ),
            'columns', (
                select
                    jsonb_agg(
                        jsonb_build_object(
                            'name', pa.attname,
                            'type', pt.typname
                        )
                        order by pa.attnum asc
                    )
                from
                    pg_attribute pa
                    join pg_type pt
                        on pa.atttypid = pt.oid
                where
                    attrelid = entity_
                    and attnum > 0
                    and pg_catalog.has_column_privilege(working_role, entity_, pa.attname, 'SELECT')
            )
        )
        -- Add "record" key for insert and update
        || case
            when action in ('INSERT', 'UPDATE') then
                jsonb_build_object(
                    'record',
                    (
                        select
                            jsonb_object_agg(
                                -- if unchanged toast, get column name and value from old record
                                coalesce((c).name, (oc).name),
                                case
                                    when (c).name is null then (oc).value
                                    else (c).value
                                end
                            )
                        from
                            unnest(columns) c
                            full outer join unnest(old_columns) oc
                                on (c).name = (oc).name
                        where
                            coalesce((c).is_selectable, (oc).is_selectable)
                            and ( not error_record_exceeds_max_size or (octet_length((c).value::text) <= 64))
                    )
                )
            else '{}'::jsonb
        end
        -- Add "old_record" key for update and delete
        || case
            when action = 'UPDATE' then
                jsonb_build_object(
                        'old_record',
                        (
                            select jsonb_object_agg((c).name, (c).value)
                            from unnest(old_columns) c
                            where
                                (c).is_selectable
                                and ( not error_record_exceeds_max_size or (octet_length((c).value::text) <= 64))
                        )
                    )
            when action = 'DELETE' then
                jsonb_build_object(
                    'old_record',
                    (
                        select jsonb_object_agg((c).name, (c).value)
                        from unnest(old_columns) c
                        where
                            (c).is_selectable
                            and ( not error_record_exceeds_max_size or (octet_length((c).value::text) <= 64))
                            and ( not is_rls_enabled or (c).is_pkey ) -- if RLS enabled, we can't secure deletes so filter to pkey
                    )
                )
            else '{}'::jsonb
        end;

        -- Create the prepared statement
        if is_rls_enabled and action <> 'DELETE' then
            if (select 1 from pg_prepared_statements where name = 'walrus_rls_stmt' limit 1) > 0 then
                deallocate walrus_rls_stmt;
            end if;
            execute realtime.build_prepared_statement_sql('walrus_rls_stmt', entity_, columns);
        end if;

        visible_to_subscription_ids = '{}';

        for subscription_id, claims in (
                select
                    subs.subscription_id,
                    subs.claims
                from
                    unnest(subscriptions) subs
                where
                    subs.entity = entity_
                    and subs.claims_role = working_role
                    and (
                        realtime.is_visible_through_filters(columns, subs.filters)
                        or (
                          action = 'DELETE'
                          and realtime.is_visible_through_filters(old_columns, subs.filters)
                        )
                    )
        ) loop

            if not is_rls_enabled or action = 'DELETE' then
                visible_to_subscription_ids = visible_to_subscription_ids || subscription_id;
            else
                -- Check if RLS allows the role to see the record
                perform
                    -- Trim leading and trailing quotes from working_role because set_config
                    -- doesn't recognize the role as valid if they are included
                    set_config('role', trim(both '"' from working_role::text), true),
                    set_config('request.jwt.claims', claims::text, true);

                execute 'execute walrus_rls_stmt' into subscription_has_access;

                if subscription_has_access then
                    visible_to_subscription_ids = visible_to_subscription_ids || subscription_id;
                end if;
            end if;
        end loop;

        perform set_config('role', null, true);

        return next (
            output,
            is_rls_enabled,
            visible_to_subscription_ids,
            case
                when error_record_exceeds_max_size then array['Error 413: Payload Too Large']
                else '{}'
            end
        )::realtime.wal_rls;

    end if;
end loop;

perform set_config('role', null, true);
end;
$$;


ALTER FUNCTION realtime.apply_rls(wal jsonb, max_record_bytes integer) OWNER TO supabase_admin;

--
-- Name: broadcast_changes(text, text, text, text, text, record, record, text); Type: FUNCTION; Schema: realtime; Owner: supabase_admin
--

CREATE FUNCTION realtime.broadcast_changes(topic_name text, event_name text, operation text, table_name text, table_schema text, new record, old record, level text DEFAULT 'ROW'::text) RETURNS void
    LANGUAGE plpgsql
    AS $$
DECLARE
    -- Declare a variable to hold the JSONB representation of the row
    row_data jsonb := '{}'::jsonb;
BEGIN
    IF level = 'STATEMENT' THEN
        RAISE EXCEPTION 'function can only be triggered for each row, not for each statement';
    END IF;
    -- Check the operation type and handle accordingly
    IF operation = 'INSERT' OR operation = 'UPDATE' OR operation = 'DELETE' THEN
        row_data := jsonb_build_object('old_record', OLD, 'record', NEW, 'operation', operation, 'table', table_name, 'schema', table_schema);
        PERFORM realtime.send (row_data, event_name, topic_name);
    ELSE
        RAISE EXCEPTION 'Unexpected operation type: %', operation;
    END IF;
EXCEPTION
    WHEN OTHERS THEN
        RAISE EXCEPTION 'Failed to process the row: %', SQLERRM;
END;

$$;


ALTER FUNCTION realtime.broadcast_changes(topic_name text, event_name text, operation text, table_name text, table_schema text, new record, old record, level text) OWNER TO supabase_admin;

--
-- Name: build_prepared_statement_sql(text, regclass, realtime.wal_column[]); Type: FUNCTION; Schema: realtime; Owner: supabase_admin
--

CREATE FUNCTION realtime.build_prepared_statement_sql(prepared_statement_name text, entity regclass, columns realtime.wal_column[]) RETURNS text
    LANGUAGE sql
    AS $$
      /*
      Builds a sql string that, if executed, creates a prepared statement to
      tests retrive a row from *entity* by its primary key columns.
      Example
          select realtime.build_prepared_statement_sql('public.notes', '{"id"}'::text[], '{"bigint"}'::text[])
      */
          select
      'prepare ' || prepared_statement_name || ' as
          select
              exists(
                  select
                      1
                  from
                      ' || entity || '
                  where
                      ' || string_agg(quote_ident(pkc.name) || '=' || quote_nullable(pkc.value #>> '{}') , ' and ') || '
              )'
          from
              unnest(columns) pkc
          where
              pkc.is_pkey
          group by
              entity
      $$;


ALTER FUNCTION realtime.build_prepared_statement_sql(prepared_statement_name text, entity regclass, columns realtime.wal_column[]) OWNER TO supabase_admin;

--
-- Name: cast(text, regtype); Type: FUNCTION; Schema: realtime; Owner: supabase_admin
--

CREATE FUNCTION realtime."cast"(val text, type_ regtype) RETURNS jsonb
    LANGUAGE plpgsql IMMUTABLE
    AS $$
    declare
      res jsonb;
    begin
      execute format('select to_jsonb(%L::'|| type_::text || ')', val)  into res;
      return res;
    end
    $$;


ALTER FUNCTION realtime."cast"(val text, type_ regtype) OWNER TO supabase_admin;

--
-- Name: check_equality_op(realtime.equality_op, regtype, text, text); Type: FUNCTION; Schema: realtime; Owner: supabase_admin
--

CREATE FUNCTION realtime.check_equality_op(op realtime.equality_op, type_ regtype, val_1 text, val_2 text) RETURNS boolean
    LANGUAGE plpgsql IMMUTABLE
    AS $$
      /*
      Casts *val_1* and *val_2* as type *type_* and check the *op* condition for truthiness
      */
      declare
          op_symbol text = (
              case
                  when op = 'eq' then '='
                  when op = 'neq' then '!='
                  when op = 'lt' then '<'
                  when op = 'lte' then '<='
                  when op = 'gt' then '>'
                  when op = 'gte' then '>='
                  when op = 'in' then '= any'
                  else 'UNKNOWN OP'
              end
          );
          res boolean;
      begin
          execute format(
              'select %L::'|| type_::text || ' ' || op_symbol
              || ' ( %L::'
              || (
                  case
                      when op = 'in' then type_::text || '[]'
                      else type_::text end
              )
              || ')', val_1, val_2) into res;
          return res;
      end;
      $$;


ALTER FUNCTION realtime.check_equality_op(op realtime.equality_op, type_ regtype, val_1 text, val_2 text) OWNER TO supabase_admin;

--
-- Name: is_visible_through_filters(realtime.wal_column[], realtime.user_defined_filter[]); Type: FUNCTION; Schema: realtime; Owner: supabase_admin
--

CREATE FUNCTION realtime.is_visible_through_filters(columns realtime.wal_column[], filters realtime.user_defined_filter[]) RETURNS boolean
    LANGUAGE sql IMMUTABLE
    AS $_$
    /*
    Should the record be visible (true) or filtered out (false) after *filters* are applied
    */
        select
            -- Default to allowed when no filters present
            $2 is null -- no filters. this should not happen because subscriptions has a default
            or array_length($2, 1) is null -- array length of an empty array is null
            or bool_and(
                coalesce(
                    realtime.check_equality_op(
                        op:=f.op,
                        type_:=coalesce(
                            col.type_oid::regtype, -- null when wal2json version <= 2.4
                            col.type_name::regtype
                        ),
                        -- cast jsonb to text
                        val_1:=col.value #>> '{}',
                        val_2:=f.value
                    ),
                    false -- if null, filter does not match
                )
            )
        from
            unnest(filters) f
            join unnest(columns) col
                on f.column_name = col.name;
    $_$;


ALTER FUNCTION realtime.is_visible_through_filters(columns realtime.wal_column[], filters realtime.user_defined_filter[]) OWNER TO supabase_admin;

--
-- Name: list_changes(name, name, integer, integer); Type: FUNCTION; Schema: realtime; Owner: supabase_admin
--

CREATE FUNCTION realtime.list_changes(publication name, slot_name name, max_changes integer, max_record_bytes integer) RETURNS SETOF realtime.wal_rls
    LANGUAGE sql
    SET log_min_messages TO 'fatal'
    AS $$
      with pub as (
        select
          concat_ws(
            ',',
            case when bool_or(pubinsert) then 'insert' else null end,
            case when bool_or(pubupdate) then 'update' else null end,
            case when bool_or(pubdelete) then 'delete' else null end
          ) as w2j_actions,
          coalesce(
            string_agg(
              realtime.quote_wal2json(format('%I.%I', schemaname, tablename)::regclass),
              ','
            ) filter (where ppt.tablename is not null and ppt.tablename not like '% %'),
            ''
          ) w2j_add_tables
        from
          pg_publication pp
          left join pg_publication_tables ppt
            on pp.pubname = ppt.pubname
        where
          pp.pubname = publication
        group by
          pp.pubname
        limit 1
      ),
      w2j as (
        select
          x.*, pub.w2j_add_tables
        from
          pub,
          pg_logical_slot_get_changes(
            slot_name, null, max_changes,
            'include-pk', 'true',
            'include-transaction', 'false',
            'include-timestamp', 'true',
            'include-type-oids', 'true',
            'format-version', '2',
            'actions', pub.w2j_actions,
            'add-tables', pub.w2j_add_tables
          ) x
      )
      select
        xyz.wal,
        xyz.is_rls_enabled,
        xyz.subscription_ids,
        xyz.errors
      from
        w2j,
        realtime.apply_rls(
          wal := w2j.data::jsonb,
          max_record_bytes := max_record_bytes
        ) xyz(wal, is_rls_enabled, subscription_ids, errors)
      where
        w2j.w2j_add_tables <> ''
        and xyz.subscription_ids[1] is not null
    $$;


ALTER FUNCTION realtime.list_changes(publication name, slot_name name, max_changes integer, max_record_bytes integer) OWNER TO supabase_admin;

--
-- Name: quote_wal2json(regclass); Type: FUNCTION; Schema: realtime; Owner: supabase_admin
--

CREATE FUNCTION realtime.quote_wal2json(entity regclass) RETURNS text
    LANGUAGE sql IMMUTABLE STRICT
    AS $$
      select
        (
          select string_agg('' || ch,'')
          from unnest(string_to_array(nsp.nspname::text, null)) with ordinality x(ch, idx)
          where
            not (x.idx = 1 and x.ch = '"')
            and not (
              x.idx = array_length(string_to_array(nsp.nspname::text, null), 1)
              and x.ch = '"'
            )
        )
        || '.'
        || (
          select string_agg('' || ch,'')
          from unnest(string_to_array(pc.relname::text, null)) with ordinality x(ch, idx)
          where
            not (x.idx = 1 and x.ch = '"')
            and not (
              x.idx = array_length(string_to_array(nsp.nspname::text, null), 1)
              and x.ch = '"'
            )
          )
      from
        pg_class pc
        join pg_namespace nsp
          on pc.relnamespace = nsp.oid
      where
        pc.oid = entity
    $$;


ALTER FUNCTION realtime.quote_wal2json(entity regclass) OWNER TO supabase_admin;

--
-- Name: send(jsonb, text, text, boolean); Type: FUNCTION; Schema: realtime; Owner: supabase_admin
--

CREATE FUNCTION realtime.send(payload jsonb, event text, topic text, private boolean DEFAULT true) RETURNS void
    LANGUAGE plpgsql
    AS $$
DECLARE
  generated_id uuid;
  final_payload jsonb;
BEGIN
  BEGIN
    -- Generate a new UUID for the id
    generated_id := gen_random_uuid();

    -- Check if payload has an 'id' key, if not, add the generated UUID
    IF payload ? 'id' THEN
      final_payload := payload;
    ELSE
      final_payload := jsonb_set(payload, '{id}', to_jsonb(generated_id));
    END IF;

    -- Set the topic configuration
    EXECUTE format('SET LOCAL realtime.topic TO %L', topic);

    -- Attempt to insert the message
    INSERT INTO realtime.messages (id, payload, event, topic, private, extension)
    VALUES (generated_id, final_payload, event, topic, private, 'broadcast');
  EXCEPTION
    WHEN OTHERS THEN
      -- Capture and notify the error
      RAISE WARNING 'ErrorSendingBroadcastMessage: %', SQLERRM;
  END;
END;
$$;


ALTER FUNCTION realtime.send(payload jsonb, event text, topic text, private boolean) OWNER TO supabase_admin;

--
-- Name: subscription_check_filters(); Type: FUNCTION; Schema: realtime; Owner: supabase_admin
--

CREATE FUNCTION realtime.subscription_check_filters() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
    /*
    Validates that the user defined filters for a subscription:
    - refer to valid columns that the claimed role may access
    - values are coercable to the correct column type
    */
    declare
        col_names text[] = coalesce(
                array_agg(c.column_name order by c.ordinal_position),
                '{}'::text[]
            )
            from
                information_schema.columns c
            where
                format('%I.%I', c.table_schema, c.table_name)::regclass = new.entity
                and pg_catalog.has_column_privilege(
                    (new.claims ->> 'role'),
                    format('%I.%I', c.table_schema, c.table_name)::regclass,
                    c.column_name,
                    'SELECT'
                );
        filter realtime.user_defined_filter;
        col_type regtype;

        in_val jsonb;
    begin
        for filter in select * from unnest(new.filters) loop
            -- Filtered column is valid
            if not filter.column_name = any(col_names) then
                raise exception 'invalid column for filter %', filter.column_name;
            end if;

            -- Type is sanitized and safe for string interpolation
            col_type = (
                select atttypid::regtype
                from pg_catalog.pg_attribute
                where attrelid = new.entity
                      and attname = filter.column_name
            );
            if col_type is null then
                raise exception 'failed to lookup type for column %', filter.column_name;
            end if;

            -- Set maximum number of entries for in filter
            if filter.op = 'in'::realtime.equality_op then
                in_val = realtime.cast(filter.value, (col_type::text || '[]')::regtype);
                if coalesce(jsonb_array_length(in_val), 0) > 100 then
                    raise exception 'too many values for `in` filter. Maximum 100';
                end if;
            else
                -- raises an exception if value is not coercable to type
                perform realtime.cast(filter.value, col_type);
            end if;

        end loop;

        -- Apply consistent order to filters so the unique constraint on
        -- (subscription_id, entity, filters) can't be tricked by a different filter order
        new.filters = coalesce(
            array_agg(f order by f.column_name, f.op, f.value),
            '{}'
        ) from unnest(new.filters) f;

        return new;
    end;
    $$;


ALTER FUNCTION realtime.subscription_check_filters() OWNER TO supabase_admin;

--
-- Name: to_regrole(text); Type: FUNCTION; Schema: realtime; Owner: supabase_admin
--

CREATE FUNCTION realtime.to_regrole(role_name text) RETURNS regrole
    LANGUAGE sql IMMUTABLE
    AS $$ select role_name::regrole $$;


ALTER FUNCTION realtime.to_regrole(role_name text) OWNER TO supabase_admin;

--
-- Name: topic(); Type: FUNCTION; Schema: realtime; Owner: supabase_realtime_admin
--

CREATE FUNCTION realtime.topic() RETURNS text
    LANGUAGE sql STABLE
    AS $$
select nullif(current_setting('realtime.topic', true), '')::text;
$$;


ALTER FUNCTION realtime.topic() OWNER TO supabase_realtime_admin;

--
-- Name: can_insert_object(text, text, uuid, jsonb); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.can_insert_object(bucketid text, name text, owner uuid, metadata jsonb) RETURNS void
    LANGUAGE plpgsql
    AS $$
BEGIN
  INSERT INTO "storage"."objects" ("bucket_id", "name", "owner", "metadata") VALUES (bucketid, name, owner, metadata);
  -- hack to rollback the successful insert
  RAISE sqlstate 'PT200' using
  message = 'ROLLBACK',
  detail = 'rollback successful insert';
END
$$;


ALTER FUNCTION storage.can_insert_object(bucketid text, name text, owner uuid, metadata jsonb) OWNER TO supabase_storage_admin;

--
-- Name: enforce_bucket_name_length(); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.enforce_bucket_name_length() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
begin
    if length(new.name) > 100 then
        raise exception 'bucket name "%" is too long (% characters). Max is 100.', new.name, length(new.name);
    end if;
    return new;
end;
$$;


ALTER FUNCTION storage.enforce_bucket_name_length() OWNER TO supabase_storage_admin;

--
-- Name: extension(text); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.extension(name text) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
_parts text[];
_filename text;
BEGIN
	select string_to_array(name, '/') into _parts;
	select _parts[array_length(_parts,1)] into _filename;
	-- @todo return the last part instead of 2
	return reverse(split_part(reverse(_filename), '.', 1));
END
$$;


ALTER FUNCTION storage.extension(name text) OWNER TO supabase_storage_admin;

--
-- Name: filename(text); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.filename(name text) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
_parts text[];
BEGIN
	select string_to_array(name, '/') into _parts;
	return _parts[array_length(_parts,1)];
END
$$;


ALTER FUNCTION storage.filename(name text) OWNER TO supabase_storage_admin;

--
-- Name: foldername(text); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.foldername(name text) RETURNS text[]
    LANGUAGE plpgsql
    AS $$
DECLARE
_parts text[];
BEGIN
	select string_to_array(name, '/') into _parts;
	return _parts[1:array_length(_parts,1)-1];
END
$$;


ALTER FUNCTION storage.foldername(name text) OWNER TO supabase_storage_admin;

--
-- Name: get_common_prefix(text, text, text); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.get_common_prefix(p_key text, p_prefix text, p_delimiter text) RETURNS text
    LANGUAGE sql IMMUTABLE
    AS $$
SELECT CASE
    WHEN position(p_delimiter IN substring(p_key FROM length(p_prefix) + 1)) > 0
    THEN left(p_key, length(p_prefix) + position(p_delimiter IN substring(p_key FROM length(p_prefix) + 1)))
    ELSE NULL
END;
$$;


ALTER FUNCTION storage.get_common_prefix(p_key text, p_prefix text, p_delimiter text) OWNER TO supabase_storage_admin;

--
-- Name: get_size_by_bucket(); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.get_size_by_bucket() RETURNS TABLE(size bigint, bucket_id text)
    LANGUAGE plpgsql
    AS $$
BEGIN
    return query
        select sum((metadata->>'size')::int) as size, obj.bucket_id
        from "storage".objects as obj
        group by obj.bucket_id;
END
$$;


ALTER FUNCTION storage.get_size_by_bucket() OWNER TO supabase_storage_admin;

--
-- Name: list_multipart_uploads_with_delimiter(text, text, text, integer, text, text); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.list_multipart_uploads_with_delimiter(bucket_id text, prefix_param text, delimiter_param text, max_keys integer DEFAULT 100, next_key_token text DEFAULT ''::text, next_upload_token text DEFAULT ''::text) RETURNS TABLE(key text, id text, created_at timestamp with time zone)
    LANGUAGE plpgsql
    AS $_$
BEGIN
    RETURN QUERY EXECUTE
        'SELECT DISTINCT ON(key COLLATE "C") * from (
            SELECT
                CASE
                    WHEN position($2 IN substring(key from length($1) + 1)) > 0 THEN
                        substring(key from 1 for length($1) + position($2 IN substring(key from length($1) + 1)))
                    ELSE
                        key
                END AS key, id, created_at
            FROM
                storage.s3_multipart_uploads
            WHERE
                bucket_id = $5 AND
                key ILIKE $1 || ''%'' AND
                CASE
                    WHEN $4 != '''' AND $6 = '''' THEN
                        CASE
                            WHEN position($2 IN substring(key from length($1) + 1)) > 0 THEN
                                substring(key from 1 for length($1) + position($2 IN substring(key from length($1) + 1))) COLLATE "C" > $4
                            ELSE
                                key COLLATE "C" > $4
                            END
                    ELSE
                        true
                END AND
                CASE
                    WHEN $6 != '''' THEN
                        id COLLATE "C" > $6
                    ELSE
                        true
                    END
            ORDER BY
                key COLLATE "C" ASC, created_at ASC) as e order by key COLLATE "C" LIMIT $3'
        USING prefix_param, delimiter_param, max_keys, next_key_token, bucket_id, next_upload_token;
END;
$_$;


ALTER FUNCTION storage.list_multipart_uploads_with_delimiter(bucket_id text, prefix_param text, delimiter_param text, max_keys integer, next_key_token text, next_upload_token text) OWNER TO supabase_storage_admin;

--
-- Name: list_objects_with_delimiter(text, text, text, integer, text, text, text); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.list_objects_with_delimiter(_bucket_id text, prefix_param text, delimiter_param text, max_keys integer DEFAULT 100, start_after text DEFAULT ''::text, next_token text DEFAULT ''::text, sort_order text DEFAULT 'asc'::text) RETURNS TABLE(name text, id uuid, metadata jsonb, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone)
    LANGUAGE plpgsql STABLE
    AS $_$
DECLARE
    v_peek_name TEXT;
    v_current RECORD;
    v_common_prefix TEXT;

    -- Configuration
    v_is_asc BOOLEAN;
    v_prefix TEXT;
    v_start TEXT;
    v_upper_bound TEXT;
    v_file_batch_size INT;

    -- Seek state
    v_next_seek TEXT;
    v_count INT := 0;

    -- Dynamic SQL for batch query only
    v_batch_query TEXT;

BEGIN
    -- ========================================================================
    -- INITIALIZATION
    -- ========================================================================
    v_is_asc := lower(coalesce(sort_order, 'asc')) = 'asc';
    v_prefix := coalesce(prefix_param, '');
    v_start := CASE WHEN coalesce(next_token, '') <> '' THEN next_token ELSE coalesce(start_after, '') END;
    v_file_batch_size := LEAST(GREATEST(max_keys * 2, 100), 1000);

    -- Calculate upper bound for prefix filtering (bytewise, using COLLATE "C")
    IF v_prefix = '' THEN
        v_upper_bound := NULL;
    ELSIF right(v_prefix, 1) = delimiter_param THEN
        v_upper_bound := left(v_prefix, -1) || chr(ascii(delimiter_param) + 1);
    ELSE
        v_upper_bound := left(v_prefix, -1) || chr(ascii(right(v_prefix, 1)) + 1);
    END IF;

    -- Build batch query (dynamic SQL - called infrequently, amortized over many rows)
    IF v_is_asc THEN
        IF v_upper_bound IS NOT NULL THEN
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND o.name COLLATE "C" >= $2 ' ||
                'AND o.name COLLATE "C" < $3 ORDER BY o.name COLLATE "C" ASC LIMIT $4';
        ELSE
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND o.name COLLATE "C" >= $2 ' ||
                'ORDER BY o.name COLLATE "C" ASC LIMIT $4';
        END IF;
    ELSE
        IF v_upper_bound IS NOT NULL THEN
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND o.name COLLATE "C" < $2 ' ||
                'AND o.name COLLATE "C" >= $3 ORDER BY o.name COLLATE "C" DESC LIMIT $4';
        ELSE
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND o.name COLLATE "C" < $2 ' ||
                'ORDER BY o.name COLLATE "C" DESC LIMIT $4';
        END IF;
    END IF;

    -- ========================================================================
    -- SEEK INITIALIZATION: Determine starting position
    -- ========================================================================
    IF v_start = '' THEN
        IF v_is_asc THEN
            v_next_seek := v_prefix;
        ELSE
            -- DESC without cursor: find the last item in range
            IF v_upper_bound IS NOT NULL THEN
                SELECT o.name INTO v_next_seek FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE "C" >= v_prefix AND o.name COLLATE "C" < v_upper_bound
                ORDER BY o.name COLLATE "C" DESC LIMIT 1;
            ELSIF v_prefix <> '' THEN
                SELECT o.name INTO v_next_seek FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE "C" >= v_prefix
                ORDER BY o.name COLLATE "C" DESC LIMIT 1;
            ELSE
                SELECT o.name INTO v_next_seek FROM storage.objects o
                WHERE o.bucket_id = _bucket_id
                ORDER BY o.name COLLATE "C" DESC LIMIT 1;
            END IF;

            IF v_next_seek IS NOT NULL THEN
                v_next_seek := v_next_seek || delimiter_param;
            ELSE
                RETURN;
            END IF;
        END IF;
    ELSE
        -- Cursor provided: determine if it refers to a folder or leaf
        IF EXISTS (
            SELECT 1 FROM storage.objects o
            WHERE o.bucket_id = _bucket_id
              AND o.name COLLATE "C" LIKE v_start || delimiter_param || '%'
            LIMIT 1
        ) THEN
            -- Cursor refers to a folder
            IF v_is_asc THEN
                v_next_seek := v_start || chr(ascii(delimiter_param) + 1);
            ELSE
                v_next_seek := v_start || delimiter_param;
            END IF;
        ELSE
            -- Cursor refers to a leaf object
            IF v_is_asc THEN
                v_next_seek := v_start || delimiter_param;
            ELSE
                v_next_seek := v_start;
            END IF;
        END IF;
    END IF;

    -- ========================================================================
    -- MAIN LOOP: Hybrid peek-then-batch algorithm
    -- Uses STATIC SQL for peek (hot path) and DYNAMIC SQL for batch
    -- ========================================================================
    LOOP
        EXIT WHEN v_count >= max_keys;

        -- STEP 1: PEEK using STATIC SQL (plan cached, very fast)
        IF v_is_asc THEN
            IF v_upper_bound IS NOT NULL THEN
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE "C" >= v_next_seek AND o.name COLLATE "C" < v_upper_bound
                ORDER BY o.name COLLATE "C" ASC LIMIT 1;
            ELSE
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE "C" >= v_next_seek
                ORDER BY o.name COLLATE "C" ASC LIMIT 1;
            END IF;
        ELSE
            IF v_upper_bound IS NOT NULL THEN
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE "C" < v_next_seek AND o.name COLLATE "C" >= v_prefix
                ORDER BY o.name COLLATE "C" DESC LIMIT 1;
            ELSIF v_prefix <> '' THEN
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE "C" < v_next_seek AND o.name COLLATE "C" >= v_prefix
                ORDER BY o.name COLLATE "C" DESC LIMIT 1;
            ELSE
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = _bucket_id AND o.name COLLATE "C" < v_next_seek
                ORDER BY o.name COLLATE "C" DESC LIMIT 1;
            END IF;
        END IF;

        EXIT WHEN v_peek_name IS NULL;

        -- STEP 2: Check if this is a FOLDER or FILE
        v_common_prefix := storage.get_common_prefix(v_peek_name, v_prefix, delimiter_param);

        IF v_common_prefix IS NOT NULL THEN
            -- FOLDER: Emit and skip to next folder (no heap access needed)
            name := rtrim(v_common_prefix, delimiter_param);
            id := NULL;
            updated_at := NULL;
            created_at := NULL;
            last_accessed_at := NULL;
            metadata := NULL;
            RETURN NEXT;
            v_count := v_count + 1;

            -- Advance seek past the folder range
            IF v_is_asc THEN
                v_next_seek := left(v_common_prefix, -1) || chr(ascii(delimiter_param) + 1);
            ELSE
                v_next_seek := v_common_prefix;
            END IF;
        ELSE
            -- FILE: Batch fetch using DYNAMIC SQL (overhead amortized over many rows)
            -- For ASC: upper_bound is the exclusive upper limit (< condition)
            -- For DESC: prefix is the inclusive lower limit (>= condition)
            FOR v_current IN EXECUTE v_batch_query USING _bucket_id, v_next_seek,
                CASE WHEN v_is_asc THEN COALESCE(v_upper_bound, v_prefix) ELSE v_prefix END, v_file_batch_size
            LOOP
                v_common_prefix := storage.get_common_prefix(v_current.name, v_prefix, delimiter_param);

                IF v_common_prefix IS NOT NULL THEN
                    -- Hit a folder: exit batch, let peek handle it
                    v_next_seek := v_current.name;
                    EXIT;
                END IF;

                -- Emit file
                name := v_current.name;
                id := v_current.id;
                updated_at := v_current.updated_at;
                created_at := v_current.created_at;
                last_accessed_at := v_current.last_accessed_at;
                metadata := v_current.metadata;
                RETURN NEXT;
                v_count := v_count + 1;

                -- Advance seek past this file
                IF v_is_asc THEN
                    v_next_seek := v_current.name || delimiter_param;
                ELSE
                    v_next_seek := v_current.name;
                END IF;

                EXIT WHEN v_count >= max_keys;
            END LOOP;
        END IF;
    END LOOP;
END;
$_$;


ALTER FUNCTION storage.list_objects_with_delimiter(_bucket_id text, prefix_param text, delimiter_param text, max_keys integer, start_after text, next_token text, sort_order text) OWNER TO supabase_storage_admin;

--
-- Name: operation(); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.operation() RETURNS text
    LANGUAGE plpgsql STABLE
    AS $$
BEGIN
    RETURN current_setting('storage.operation', true);
END;
$$;


ALTER FUNCTION storage.operation() OWNER TO supabase_storage_admin;

--
-- Name: protect_delete(); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.protect_delete() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    -- Check if storage.allow_delete_query is set to 'true'
    IF COALESCE(current_setting('storage.allow_delete_query', true), 'false') != 'true' THEN
        RAISE EXCEPTION 'Direct deletion from storage tables is not allowed. Use the Storage API instead.'
            USING HINT = 'This prevents accidental data loss from orphaned objects.',
                  ERRCODE = '42501';
    END IF;
    RETURN NULL;
END;
$$;


ALTER FUNCTION storage.protect_delete() OWNER TO supabase_storage_admin;

--
-- Name: search(text, text, integer, integer, integer, text, text, text); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.search(prefix text, bucketname text, limits integer DEFAULT 100, levels integer DEFAULT 1, offsets integer DEFAULT 0, search text DEFAULT ''::text, sortcolumn text DEFAULT 'name'::text, sortorder text DEFAULT 'asc'::text) RETURNS TABLE(name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)
    LANGUAGE plpgsql STABLE
    AS $_$
DECLARE
    v_peek_name TEXT;
    v_current RECORD;
    v_common_prefix TEXT;
    v_delimiter CONSTANT TEXT := '/';

    -- Configuration
    v_limit INT;
    v_prefix TEXT;
    v_prefix_lower TEXT;
    v_is_asc BOOLEAN;
    v_order_by TEXT;
    v_sort_order TEXT;
    v_upper_bound TEXT;
    v_file_batch_size INT;

    -- Dynamic SQL for batch query only
    v_batch_query TEXT;

    -- Seek state
    v_next_seek TEXT;
    v_count INT := 0;
    v_skipped INT := 0;
BEGIN
    -- ========================================================================
    -- INITIALIZATION
    -- ========================================================================
    v_limit := LEAST(coalesce(limits, 100), 1500);
    v_prefix := coalesce(prefix, '') || coalesce(search, '');
    v_prefix_lower := lower(v_prefix);
    v_is_asc := lower(coalesce(sortorder, 'asc')) = 'asc';
    v_file_batch_size := LEAST(GREATEST(v_limit * 2, 100), 1000);

    -- Validate sort column
    CASE lower(coalesce(sortcolumn, 'name'))
        WHEN 'name' THEN v_order_by := 'name';
        WHEN 'updated_at' THEN v_order_by := 'updated_at';
        WHEN 'created_at' THEN v_order_by := 'created_at';
        WHEN 'last_accessed_at' THEN v_order_by := 'last_accessed_at';
        ELSE v_order_by := 'name';
    END CASE;

    v_sort_order := CASE WHEN v_is_asc THEN 'asc' ELSE 'desc' END;

    -- ========================================================================
    -- NON-NAME SORTING: Use path_tokens approach (unchanged)
    -- ========================================================================
    IF v_order_by != 'name' THEN
        RETURN QUERY EXECUTE format(
            $sql$
            WITH folders AS (
                SELECT path_tokens[$1] AS folder
                FROM storage.objects
                WHERE objects.name ILIKE $2 || '%%'
                  AND bucket_id = $3
                  AND array_length(objects.path_tokens, 1) <> $1
                GROUP BY folder
                ORDER BY folder %s
            )
            (SELECT folder AS "name",
                   NULL::uuid AS id,
                   NULL::timestamptz AS updated_at,
                   NULL::timestamptz AS created_at,
                   NULL::timestamptz AS last_accessed_at,
                   NULL::jsonb AS metadata FROM folders)
            UNION ALL
            (SELECT path_tokens[$1] AS "name",
                   id, updated_at, created_at, last_accessed_at, metadata
             FROM storage.objects
             WHERE objects.name ILIKE $2 || '%%'
               AND bucket_id = $3
               AND array_length(objects.path_tokens, 1) = $1
             ORDER BY %I %s)
            LIMIT $4 OFFSET $5
            $sql$, v_sort_order, v_order_by, v_sort_order
        ) USING levels, v_prefix, bucketname, v_limit, offsets;
        RETURN;
    END IF;

    -- ========================================================================
    -- NAME SORTING: Hybrid skip-scan with batch optimization
    -- ========================================================================

    -- Calculate upper bound for prefix filtering
    IF v_prefix_lower = '' THEN
        v_upper_bound := NULL;
    ELSIF right(v_prefix_lower, 1) = v_delimiter THEN
        v_upper_bound := left(v_prefix_lower, -1) || chr(ascii(v_delimiter) + 1);
    ELSE
        v_upper_bound := left(v_prefix_lower, -1) || chr(ascii(right(v_prefix_lower, 1)) + 1);
    END IF;

    -- Build batch query (dynamic SQL - called infrequently, amortized over many rows)
    IF v_is_asc THEN
        IF v_upper_bound IS NOT NULL THEN
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND lower(o.name) COLLATE "C" >= $2 ' ||
                'AND lower(o.name) COLLATE "C" < $3 ORDER BY lower(o.name) COLLATE "C" ASC LIMIT $4';
        ELSE
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND lower(o.name) COLLATE "C" >= $2 ' ||
                'ORDER BY lower(o.name) COLLATE "C" ASC LIMIT $4';
        END IF;
    ELSE
        IF v_upper_bound IS NOT NULL THEN
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND lower(o.name) COLLATE "C" < $2 ' ||
                'AND lower(o.name) COLLATE "C" >= $3 ORDER BY lower(o.name) COLLATE "C" DESC LIMIT $4';
        ELSE
            v_batch_query := 'SELECT o.name, o.id, o.updated_at, o.created_at, o.last_accessed_at, o.metadata ' ||
                'FROM storage.objects o WHERE o.bucket_id = $1 AND lower(o.name) COLLATE "C" < $2 ' ||
                'ORDER BY lower(o.name) COLLATE "C" DESC LIMIT $4';
        END IF;
    END IF;

    -- Initialize seek position
    IF v_is_asc THEN
        v_next_seek := v_prefix_lower;
    ELSE
        -- DESC: find the last item in range first (static SQL)
        IF v_upper_bound IS NOT NULL THEN
            SELECT o.name INTO v_peek_name FROM storage.objects o
            WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE "C" >= v_prefix_lower AND lower(o.name) COLLATE "C" < v_upper_bound
            ORDER BY lower(o.name) COLLATE "C" DESC LIMIT 1;
        ELSIF v_prefix_lower <> '' THEN
            SELECT o.name INTO v_peek_name FROM storage.objects o
            WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE "C" >= v_prefix_lower
            ORDER BY lower(o.name) COLLATE "C" DESC LIMIT 1;
        ELSE
            SELECT o.name INTO v_peek_name FROM storage.objects o
            WHERE o.bucket_id = bucketname
            ORDER BY lower(o.name) COLLATE "C" DESC LIMIT 1;
        END IF;

        IF v_peek_name IS NOT NULL THEN
            v_next_seek := lower(v_peek_name) || v_delimiter;
        ELSE
            RETURN;
        END IF;
    END IF;

    -- ========================================================================
    -- MAIN LOOP: Hybrid peek-then-batch algorithm
    -- Uses STATIC SQL for peek (hot path) and DYNAMIC SQL for batch
    -- ========================================================================
    LOOP
        EXIT WHEN v_count >= v_limit;

        -- STEP 1: PEEK using STATIC SQL (plan cached, very fast)
        IF v_is_asc THEN
            IF v_upper_bound IS NOT NULL THEN
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE "C" >= v_next_seek AND lower(o.name) COLLATE "C" < v_upper_bound
                ORDER BY lower(o.name) COLLATE "C" ASC LIMIT 1;
            ELSE
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE "C" >= v_next_seek
                ORDER BY lower(o.name) COLLATE "C" ASC LIMIT 1;
            END IF;
        ELSE
            IF v_upper_bound IS NOT NULL THEN
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE "C" < v_next_seek AND lower(o.name) COLLATE "C" >= v_prefix_lower
                ORDER BY lower(o.name) COLLATE "C" DESC LIMIT 1;
            ELSIF v_prefix_lower <> '' THEN
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE "C" < v_next_seek AND lower(o.name) COLLATE "C" >= v_prefix_lower
                ORDER BY lower(o.name) COLLATE "C" DESC LIMIT 1;
            ELSE
                SELECT o.name INTO v_peek_name FROM storage.objects o
                WHERE o.bucket_id = bucketname AND lower(o.name) COLLATE "C" < v_next_seek
                ORDER BY lower(o.name) COLLATE "C" DESC LIMIT 1;
            END IF;
        END IF;

        EXIT WHEN v_peek_name IS NULL;

        -- STEP 2: Check if this is a FOLDER or FILE
        v_common_prefix := storage.get_common_prefix(lower(v_peek_name), v_prefix_lower, v_delimiter);

        IF v_common_prefix IS NOT NULL THEN
            -- FOLDER: Handle offset, emit if needed, skip to next folder
            IF v_skipped < offsets THEN
                v_skipped := v_skipped + 1;
            ELSE
                name := split_part(rtrim(storage.get_common_prefix(v_peek_name, v_prefix, v_delimiter), v_delimiter), v_delimiter, levels);
                id := NULL;
                updated_at := NULL;
                created_at := NULL;
                last_accessed_at := NULL;
                metadata := NULL;
                RETURN NEXT;
                v_count := v_count + 1;
            END IF;

            -- Advance seek past the folder range
            IF v_is_asc THEN
                v_next_seek := lower(left(v_common_prefix, -1)) || chr(ascii(v_delimiter) + 1);
            ELSE
                v_next_seek := lower(v_common_prefix);
            END IF;
        ELSE
            -- FILE: Batch fetch using DYNAMIC SQL (overhead amortized over many rows)
            -- For ASC: upper_bound is the exclusive upper limit (< condition)
            -- For DESC: prefix_lower is the inclusive lower limit (>= condition)
            FOR v_current IN EXECUTE v_batch_query
                USING bucketname, v_next_seek,
                    CASE WHEN v_is_asc THEN COALESCE(v_upper_bound, v_prefix_lower) ELSE v_prefix_lower END, v_file_batch_size
            LOOP
                v_common_prefix := storage.get_common_prefix(lower(v_current.name), v_prefix_lower, v_delimiter);

                IF v_common_prefix IS NOT NULL THEN
                    -- Hit a folder: exit batch, let peek handle it
                    v_next_seek := lower(v_current.name);
                    EXIT;
                END IF;

                -- Handle offset skipping
                IF v_skipped < offsets THEN
                    v_skipped := v_skipped + 1;
                ELSE
                    -- Emit file
                    name := split_part(v_current.name, v_delimiter, levels);
                    id := v_current.id;
                    updated_at := v_current.updated_at;
                    created_at := v_current.created_at;
                    last_accessed_at := v_current.last_accessed_at;
                    metadata := v_current.metadata;
                    RETURN NEXT;
                    v_count := v_count + 1;
                END IF;

                -- Advance seek past this file
                IF v_is_asc THEN
                    v_next_seek := lower(v_current.name) || v_delimiter;
                ELSE
                    v_next_seek := lower(v_current.name);
                END IF;

                EXIT WHEN v_count >= v_limit;
            END LOOP;
        END IF;
    END LOOP;
END;
$_$;


ALTER FUNCTION storage.search(prefix text, bucketname text, limits integer, levels integer, offsets integer, search text, sortcolumn text, sortorder text) OWNER TO supabase_storage_admin;

--
-- Name: search_by_timestamp(text, text, integer, integer, text, text, text, text); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.search_by_timestamp(p_prefix text, p_bucket_id text, p_limit integer, p_level integer, p_start_after text, p_sort_order text, p_sort_column text, p_sort_column_after text) RETURNS TABLE(key text, name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)
    LANGUAGE plpgsql STABLE
    AS $_$
DECLARE
    v_cursor_op text;
    v_query text;
    v_prefix text;
BEGIN
    v_prefix := coalesce(p_prefix, '');

    IF p_sort_order = 'asc' THEN
        v_cursor_op := '>';
    ELSE
        v_cursor_op := '<';
    END IF;

    v_query := format($sql$
        WITH raw_objects AS (
            SELECT
                o.name AS obj_name,
                o.id AS obj_id,
                o.updated_at AS obj_updated_at,
                o.created_at AS obj_created_at,
                o.last_accessed_at AS obj_last_accessed_at,
                o.metadata AS obj_metadata,
                storage.get_common_prefix(o.name, $1, '/') AS common_prefix
            FROM storage.objects o
            WHERE o.bucket_id = $2
              AND o.name COLLATE "C" LIKE $1 || '%%'
        ),
        -- Aggregate common prefixes (folders)
        -- Both created_at and updated_at use MIN(obj_created_at) to match the old prefixes table behavior
        aggregated_prefixes AS (
            SELECT
                rtrim(common_prefix, '/') AS name,
                NULL::uuid AS id,
                MIN(obj_created_at) AS updated_at,
                MIN(obj_created_at) AS created_at,
                NULL::timestamptz AS last_accessed_at,
                NULL::jsonb AS metadata,
                TRUE AS is_prefix
            FROM raw_objects
            WHERE common_prefix IS NOT NULL
            GROUP BY common_prefix
        ),
        leaf_objects AS (
            SELECT
                obj_name AS name,
                obj_id AS id,
                obj_updated_at AS updated_at,
                obj_created_at AS created_at,
                obj_last_accessed_at AS last_accessed_at,
                obj_metadata AS metadata,
                FALSE AS is_prefix
            FROM raw_objects
            WHERE common_prefix IS NULL
        ),
        combined AS (
            SELECT * FROM aggregated_prefixes
            UNION ALL
            SELECT * FROM leaf_objects
        ),
        filtered AS (
            SELECT *
            FROM combined
            WHERE (
                $5 = ''
                OR ROW(
                    date_trunc('milliseconds', %I),
                    name COLLATE "C"
                ) %s ROW(
                    COALESCE(NULLIF($6, '')::timestamptz, 'epoch'::timestamptz),
                    $5
                )
            )
        )
        SELECT
            split_part(name, '/', $3) AS key,
            name,
            id,
            updated_at,
            created_at,
            last_accessed_at,
            metadata
        FROM filtered
        ORDER BY
            COALESCE(date_trunc('milliseconds', %I), 'epoch'::timestamptz) %s,
            name COLLATE "C" %s
        LIMIT $4
    $sql$,
        p_sort_column,
        v_cursor_op,
        p_sort_column,
        p_sort_order,
        p_sort_order
    );

    RETURN QUERY EXECUTE v_query
    USING v_prefix, p_bucket_id, p_level, p_limit, p_start_after, p_sort_column_after;
END;
$_$;


ALTER FUNCTION storage.search_by_timestamp(p_prefix text, p_bucket_id text, p_limit integer, p_level integer, p_start_after text, p_sort_order text, p_sort_column text, p_sort_column_after text) OWNER TO supabase_storage_admin;

--
-- Name: search_v2(text, text, integer, integer, text, text, text, text); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.search_v2(prefix text, bucket_name text, limits integer DEFAULT 100, levels integer DEFAULT 1, start_after text DEFAULT ''::text, sort_order text DEFAULT 'asc'::text, sort_column text DEFAULT 'name'::text, sort_column_after text DEFAULT ''::text) RETURNS TABLE(key text, name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)
    LANGUAGE plpgsql STABLE
    AS $$
DECLARE
    v_sort_col text;
    v_sort_ord text;
    v_limit int;
BEGIN
    -- Cap limit to maximum of 1500 records
    v_limit := LEAST(coalesce(limits, 100), 1500);

    -- Validate and normalize sort_order
    v_sort_ord := lower(coalesce(sort_order, 'asc'));
    IF v_sort_ord NOT IN ('asc', 'desc') THEN
        v_sort_ord := 'asc';
    END IF;

    -- Validate and normalize sort_column
    v_sort_col := lower(coalesce(sort_column, 'name'));
    IF v_sort_col NOT IN ('name', 'updated_at', 'created_at') THEN
        v_sort_col := 'name';
    END IF;

    -- Route to appropriate implementation
    IF v_sort_col = 'name' THEN
        -- Use list_objects_with_delimiter for name sorting (most efficient: O(k * log n))
        RETURN QUERY
        SELECT
            split_part(l.name, '/', levels) AS key,
            l.name AS name,
            l.id,
            l.updated_at,
            l.created_at,
            l.last_accessed_at,
            l.metadata
        FROM storage.list_objects_with_delimiter(
            bucket_name,
            coalesce(prefix, ''),
            '/',
            v_limit,
            start_after,
            '',
            v_sort_ord
        ) l;
    ELSE
        -- Use aggregation approach for timestamp sorting
        -- Not efficient for large datasets but supports correct pagination
        RETURN QUERY SELECT * FROM storage.search_by_timestamp(
            prefix, bucket_name, v_limit, levels, start_after,
            v_sort_ord, v_sort_col, sort_column_after
        );
    END IF;
END;
$$;


ALTER FUNCTION storage.search_v2(prefix text, bucket_name text, limits integer, levels integer, start_after text, sort_order text, sort_column text, sort_column_after text) OWNER TO supabase_storage_admin;

--
-- Name: update_updated_at_column(); Type: FUNCTION; Schema: storage; Owner: supabase_storage_admin
--

CREATE FUNCTION storage.update_updated_at_column() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    NEW.updated_at = now();
    RETURN NEW; 
END;
$$;


ALTER FUNCTION storage.update_updated_at_column() OWNER TO supabase_storage_admin;

--
-- Name: http_request(); Type: FUNCTION; Schema: supabase_functions; Owner: supabase_functions_admin
--

CREATE FUNCTION supabase_functions.http_request() RETURNS trigger
    LANGUAGE plpgsql SECURITY DEFINER
    SET search_path TO 'supabase_functions'
    AS $$
  DECLARE
    request_id bigint;
    payload jsonb;
    url text := TG_ARGV[0]::text;
    method text := TG_ARGV[1]::text;
    headers jsonb DEFAULT '{}'::jsonb;
    params jsonb DEFAULT '{}'::jsonb;
    timeout_ms integer DEFAULT 1000;
  BEGIN
    IF url IS NULL OR url = 'null' THEN
      RAISE EXCEPTION 'url argument is missing';
    END IF;

    IF method IS NULL OR method = 'null' THEN
      RAISE EXCEPTION 'method argument is missing';
    END IF;

    IF TG_ARGV[2] IS NULL OR TG_ARGV[2] = 'null' THEN
      headers = '{"Content-Type": "application/json"}'::jsonb;
    ELSE
      headers = TG_ARGV[2]::jsonb;
    END IF;

    IF TG_ARGV[3] IS NULL OR TG_ARGV[3] = 'null' THEN
      params = '{}'::jsonb;
    ELSE
      params = TG_ARGV[3]::jsonb;
    END IF;

    IF TG_ARGV[4] IS NULL OR TG_ARGV[4] = 'null' THEN
      timeout_ms = 1000;
    ELSE
      timeout_ms = TG_ARGV[4]::integer;
    END IF;

    CASE
      WHEN method = 'GET' THEN
        SELECT http_get INTO request_id FROM net.http_get(
          url,
          params,
          headers,
          timeout_ms
        );
      WHEN method = 'POST' THEN
        payload = jsonb_build_object(
          'old_record', OLD,
          'record', NEW,
          'type', TG_OP,
          'table', TG_TABLE_NAME,
          'schema', TG_TABLE_SCHEMA
        );

        SELECT http_post INTO request_id FROM net.http_post(
          url,
          payload,
          params,
          headers,
          timeout_ms
        );
      ELSE
        RAISE EXCEPTION 'method argument % is invalid', method;
    END CASE;

    INSERT INTO supabase_functions.hooks
      (hook_table_id, hook_name, request_id)
    VALUES
      (TG_RELID, TG_NAME, request_id);

    RETURN NEW;
  END
$$;


ALTER FUNCTION supabase_functions.http_request() OWNER TO supabase_functions_admin;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: extensions; Type: TABLE; Schema: _realtime; Owner: supabase_admin
--

CREATE TABLE _realtime.extensions (
    id uuid NOT NULL,
    type text,
    settings jsonb,
    tenant_external_id text,
    inserted_at timestamp(0) without time zone NOT NULL,
    updated_at timestamp(0) without time zone NOT NULL
);


ALTER TABLE _realtime.extensions OWNER TO supabase_admin;

--
-- Name: schema_migrations; Type: TABLE; Schema: _realtime; Owner: supabase_admin
--

CREATE TABLE _realtime.schema_migrations (
    version bigint NOT NULL,
    inserted_at timestamp(0) without time zone
);


ALTER TABLE _realtime.schema_migrations OWNER TO supabase_admin;

--
-- Name: tenants; Type: TABLE; Schema: _realtime; Owner: supabase_admin
--

CREATE TABLE _realtime.tenants (
    id uuid NOT NULL,
    name text,
    external_id text,
    jwt_secret text,
    max_concurrent_users integer DEFAULT 200 NOT NULL,
    inserted_at timestamp(0) without time zone NOT NULL,
    updated_at timestamp(0) without time zone NOT NULL,
    max_events_per_second integer DEFAULT 100 NOT NULL,
    postgres_cdc_default text DEFAULT 'postgres_cdc_rls'::text,
    max_bytes_per_second integer DEFAULT 100000 NOT NULL,
    max_channels_per_client integer DEFAULT 100 NOT NULL,
    max_joins_per_second integer DEFAULT 500 NOT NULL,
    suspend boolean DEFAULT false,
    jwt_jwks jsonb,
    notify_private_alpha boolean DEFAULT false,
    private_only boolean DEFAULT false NOT NULL,
    migrations_ran integer DEFAULT 0,
    broadcast_adapter character varying(255) DEFAULT 'gen_rpc'::character varying,
    max_presence_events_per_second integer DEFAULT 1000,
    max_payload_size_in_kb integer DEFAULT 3000,
    CONSTRAINT jwt_secret_or_jwt_jwks_required CHECK (((jwt_secret IS NOT NULL) OR (jwt_jwks IS NOT NULL)))
);


ALTER TABLE _realtime.tenants OWNER TO supabase_admin;

--
-- Name: audit_log_entries; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.audit_log_entries (
    instance_id uuid,
    id uuid NOT NULL,
    payload json,
    created_at timestamp with time zone,
    ip_address character varying(64) DEFAULT ''::character varying NOT NULL
);


ALTER TABLE auth.audit_log_entries OWNER TO supabase_auth_admin;

--
-- Name: TABLE audit_log_entries; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.audit_log_entries IS 'Auth: Audit trail for user actions.';


--
-- Name: flow_state; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.flow_state (
    id uuid NOT NULL,
    user_id uuid,
    auth_code text,
    code_challenge_method auth.code_challenge_method,
    code_challenge text,
    provider_type text NOT NULL,
    provider_access_token text,
    provider_refresh_token text,
    created_at timestamp with time zone,
    updated_at timestamp with time zone,
    authentication_method text NOT NULL,
    auth_code_issued_at timestamp with time zone,
    invite_token text,
    referrer text,
    oauth_client_state_id uuid,
    linking_target_id uuid,
    email_optional boolean DEFAULT false NOT NULL
);


ALTER TABLE auth.flow_state OWNER TO supabase_auth_admin;

--
-- Name: TABLE flow_state; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.flow_state IS 'Stores metadata for all OAuth/SSO login flows';


--
-- Name: identities; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.identities (
    provider_id text NOT NULL,
    user_id uuid NOT NULL,
    identity_data jsonb NOT NULL,
    provider text NOT NULL,
    last_sign_in_at timestamp with time zone,
    created_at timestamp with time zone,
    updated_at timestamp with time zone,
    email text GENERATED ALWAYS AS (lower((identity_data ->> 'email'::text))) STORED,
    id uuid DEFAULT gen_random_uuid() NOT NULL
);


ALTER TABLE auth.identities OWNER TO supabase_auth_admin;

--
-- Name: TABLE identities; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.identities IS 'Auth: Stores identities associated to a user.';


--
-- Name: COLUMN identities.email; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON COLUMN auth.identities.email IS 'Auth: Email is a generated column that references the optional email property in the identity_data';


--
-- Name: instances; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.instances (
    id uuid NOT NULL,
    uuid uuid,
    raw_base_config text,
    created_at timestamp with time zone,
    updated_at timestamp with time zone
);


ALTER TABLE auth.instances OWNER TO supabase_auth_admin;

--
-- Name: TABLE instances; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.instances IS 'Auth: Manages users across multiple sites.';


--
-- Name: mfa_amr_claims; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.mfa_amr_claims (
    session_id uuid NOT NULL,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    authentication_method text NOT NULL,
    id uuid NOT NULL
);


ALTER TABLE auth.mfa_amr_claims OWNER TO supabase_auth_admin;

--
-- Name: TABLE mfa_amr_claims; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.mfa_amr_claims IS 'auth: stores authenticator method reference claims for multi factor authentication';


--
-- Name: mfa_challenges; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.mfa_challenges (
    id uuid NOT NULL,
    factor_id uuid NOT NULL,
    created_at timestamp with time zone NOT NULL,
    verified_at timestamp with time zone,
    ip_address inet NOT NULL,
    otp_code text,
    web_authn_session_data jsonb
);


ALTER TABLE auth.mfa_challenges OWNER TO supabase_auth_admin;

--
-- Name: TABLE mfa_challenges; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.mfa_challenges IS 'auth: stores metadata about challenge requests made';


--
-- Name: mfa_factors; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.mfa_factors (
    id uuid NOT NULL,
    user_id uuid NOT NULL,
    friendly_name text,
    factor_type auth.factor_type NOT NULL,
    status auth.factor_status NOT NULL,
    created_at timestamp with time zone NOT NULL,
    updated_at timestamp with time zone NOT NULL,
    secret text,
    phone text,
    last_challenged_at timestamp with time zone,
    web_authn_credential jsonb,
    web_authn_aaguid uuid,
    last_webauthn_challenge_data jsonb
);


ALTER TABLE auth.mfa_factors OWNER TO supabase_auth_admin;

--
-- Name: TABLE mfa_factors; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.mfa_factors IS 'auth: stores metadata about factors';


--
-- Name: COLUMN mfa_factors.last_webauthn_challenge_data; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON COLUMN auth.mfa_factors.last_webauthn_challenge_data IS 'Stores the latest WebAuthn challenge data including attestation/assertion for customer verification';


--
-- Name: oauth_authorizations; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.oauth_authorizations (
    id uuid NOT NULL,
    authorization_id text NOT NULL,
    client_id uuid NOT NULL,
    user_id uuid,
    redirect_uri text NOT NULL,
    scope text NOT NULL,
    state text,
    resource text,
    code_challenge text,
    code_challenge_method auth.code_challenge_method,
    response_type auth.oauth_response_type DEFAULT 'code'::auth.oauth_response_type NOT NULL,
    status auth.oauth_authorization_status DEFAULT 'pending'::auth.oauth_authorization_status NOT NULL,
    authorization_code text,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    expires_at timestamp with time zone DEFAULT (now() + '00:03:00'::interval) NOT NULL,
    approved_at timestamp with time zone,
    nonce text,
    CONSTRAINT oauth_authorizations_authorization_code_length CHECK ((char_length(authorization_code) <= 255)),
    CONSTRAINT oauth_authorizations_code_challenge_length CHECK ((char_length(code_challenge) <= 128)),
    CONSTRAINT oauth_authorizations_expires_at_future CHECK ((expires_at > created_at)),
    CONSTRAINT oauth_authorizations_nonce_length CHECK ((char_length(nonce) <= 255)),
    CONSTRAINT oauth_authorizations_redirect_uri_length CHECK ((char_length(redirect_uri) <= 2048)),
    CONSTRAINT oauth_authorizations_resource_length CHECK ((char_length(resource) <= 2048)),
    CONSTRAINT oauth_authorizations_scope_length CHECK ((char_length(scope) <= 4096)),
    CONSTRAINT oauth_authorizations_state_length CHECK ((char_length(state) <= 4096))
);


ALTER TABLE auth.oauth_authorizations OWNER TO supabase_auth_admin;

--
-- Name: oauth_client_states; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.oauth_client_states (
    id uuid NOT NULL,
    provider_type text NOT NULL,
    code_verifier text,
    created_at timestamp with time zone NOT NULL
);


ALTER TABLE auth.oauth_client_states OWNER TO supabase_auth_admin;

--
-- Name: TABLE oauth_client_states; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.oauth_client_states IS 'Stores OAuth states for third-party provider authentication flows where Supabase acts as the OAuth client.';


--
-- Name: oauth_clients; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.oauth_clients (
    id uuid NOT NULL,
    client_secret_hash text,
    registration_type auth.oauth_registration_type NOT NULL,
    redirect_uris text NOT NULL,
    grant_types text NOT NULL,
    client_name text,
    client_uri text,
    logo_uri text,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL,
    deleted_at timestamp with time zone,
    client_type auth.oauth_client_type DEFAULT 'confidential'::auth.oauth_client_type NOT NULL,
    token_endpoint_auth_method text NOT NULL,
    CONSTRAINT oauth_clients_client_name_length CHECK ((char_length(client_name) <= 1024)),
    CONSTRAINT oauth_clients_client_uri_length CHECK ((char_length(client_uri) <= 2048)),
    CONSTRAINT oauth_clients_logo_uri_length CHECK ((char_length(logo_uri) <= 2048)),
    CONSTRAINT oauth_clients_token_endpoint_auth_method_check CHECK ((token_endpoint_auth_method = ANY (ARRAY['client_secret_basic'::text, 'client_secret_post'::text, 'none'::text])))
);


ALTER TABLE auth.oauth_clients OWNER TO supabase_auth_admin;

--
-- Name: oauth_consents; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.oauth_consents (
    id uuid NOT NULL,
    user_id uuid NOT NULL,
    client_id uuid NOT NULL,
    scopes text NOT NULL,
    granted_at timestamp with time zone DEFAULT now() NOT NULL,
    revoked_at timestamp with time zone,
    CONSTRAINT oauth_consents_revoked_after_granted CHECK (((revoked_at IS NULL) OR (revoked_at >= granted_at))),
    CONSTRAINT oauth_consents_scopes_length CHECK ((char_length(scopes) <= 2048)),
    CONSTRAINT oauth_consents_scopes_not_empty CHECK ((char_length(TRIM(BOTH FROM scopes)) > 0))
);


ALTER TABLE auth.oauth_consents OWNER TO supabase_auth_admin;

--
-- Name: one_time_tokens; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.one_time_tokens (
    id uuid NOT NULL,
    user_id uuid NOT NULL,
    token_type auth.one_time_token_type NOT NULL,
    token_hash text NOT NULL,
    relates_to text NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT one_time_tokens_token_hash_check CHECK ((char_length(token_hash) > 0))
);


ALTER TABLE auth.one_time_tokens OWNER TO supabase_auth_admin;

--
-- Name: refresh_tokens; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.refresh_tokens (
    instance_id uuid,
    id bigint NOT NULL,
    token character varying(255),
    user_id character varying(255),
    revoked boolean,
    created_at timestamp with time zone,
    updated_at timestamp with time zone,
    parent character varying(255),
    session_id uuid
);


ALTER TABLE auth.refresh_tokens OWNER TO supabase_auth_admin;

--
-- Name: TABLE refresh_tokens; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.refresh_tokens IS 'Auth: Store of tokens used to refresh JWT tokens once they expire.';


--
-- Name: refresh_tokens_id_seq; Type: SEQUENCE; Schema: auth; Owner: supabase_auth_admin
--

CREATE SEQUENCE auth.refresh_tokens_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE auth.refresh_tokens_id_seq OWNER TO supabase_auth_admin;

--
-- Name: refresh_tokens_id_seq; Type: SEQUENCE OWNED BY; Schema: auth; Owner: supabase_auth_admin
--

ALTER SEQUENCE auth.refresh_tokens_id_seq OWNED BY auth.refresh_tokens.id;


--
-- Name: saml_providers; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.saml_providers (
    id uuid NOT NULL,
    sso_provider_id uuid NOT NULL,
    entity_id text NOT NULL,
    metadata_xml text NOT NULL,
    metadata_url text,
    attribute_mapping jsonb,
    created_at timestamp with time zone,
    updated_at timestamp with time zone,
    name_id_format text,
    CONSTRAINT "entity_id not empty" CHECK ((char_length(entity_id) > 0)),
    CONSTRAINT "metadata_url not empty" CHECK (((metadata_url = NULL::text) OR (char_length(metadata_url) > 0))),
    CONSTRAINT "metadata_xml not empty" CHECK ((char_length(metadata_xml) > 0))
);


ALTER TABLE auth.saml_providers OWNER TO supabase_auth_admin;

--
-- Name: TABLE saml_providers; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.saml_providers IS 'Auth: Manages SAML Identity Provider connections.';


--
-- Name: saml_relay_states; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.saml_relay_states (
    id uuid NOT NULL,
    sso_provider_id uuid NOT NULL,
    request_id text NOT NULL,
    for_email text,
    redirect_to text,
    created_at timestamp with time zone,
    updated_at timestamp with time zone,
    flow_state_id uuid,
    CONSTRAINT "request_id not empty" CHECK ((char_length(request_id) > 0))
);


ALTER TABLE auth.saml_relay_states OWNER TO supabase_auth_admin;

--
-- Name: TABLE saml_relay_states; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.saml_relay_states IS 'Auth: Contains SAML Relay State information for each Service Provider initiated login.';


--
-- Name: schema_migrations; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.schema_migrations (
    version character varying(255) NOT NULL
);


ALTER TABLE auth.schema_migrations OWNER TO supabase_auth_admin;

--
-- Name: TABLE schema_migrations; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.schema_migrations IS 'Auth: Manages updates to the auth system.';


--
-- Name: sessions; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.sessions (
    id uuid NOT NULL,
    user_id uuid NOT NULL,
    created_at timestamp with time zone,
    updated_at timestamp with time zone,
    factor_id uuid,
    aal auth.aal_level,
    not_after timestamp with time zone,
    refreshed_at timestamp without time zone,
    user_agent text,
    ip inet,
    tag text,
    oauth_client_id uuid,
    refresh_token_hmac_key text,
    refresh_token_counter bigint,
    scopes text,
    CONSTRAINT sessions_scopes_length CHECK ((char_length(scopes) <= 4096))
);


ALTER TABLE auth.sessions OWNER TO supabase_auth_admin;

--
-- Name: TABLE sessions; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.sessions IS 'Auth: Stores session data associated to a user.';


--
-- Name: COLUMN sessions.not_after; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON COLUMN auth.sessions.not_after IS 'Auth: Not after is a nullable column that contains a timestamp after which the session should be regarded as expired.';


--
-- Name: COLUMN sessions.refresh_token_hmac_key; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON COLUMN auth.sessions.refresh_token_hmac_key IS 'Holds a HMAC-SHA256 key used to sign refresh tokens for this session.';


--
-- Name: COLUMN sessions.refresh_token_counter; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON COLUMN auth.sessions.refresh_token_counter IS 'Holds the ID (counter) of the last issued refresh token.';


--
-- Name: sso_domains; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.sso_domains (
    id uuid NOT NULL,
    sso_provider_id uuid NOT NULL,
    domain text NOT NULL,
    created_at timestamp with time zone,
    updated_at timestamp with time zone,
    CONSTRAINT "domain not empty" CHECK ((char_length(domain) > 0))
);


ALTER TABLE auth.sso_domains OWNER TO supabase_auth_admin;

--
-- Name: TABLE sso_domains; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.sso_domains IS 'Auth: Manages SSO email address domain mapping to an SSO Identity Provider.';


--
-- Name: sso_providers; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.sso_providers (
    id uuid NOT NULL,
    resource_id text,
    created_at timestamp with time zone,
    updated_at timestamp with time zone,
    disabled boolean,
    CONSTRAINT "resource_id not empty" CHECK (((resource_id = NULL::text) OR (char_length(resource_id) > 0)))
);


ALTER TABLE auth.sso_providers OWNER TO supabase_auth_admin;

--
-- Name: TABLE sso_providers; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.sso_providers IS 'Auth: Manages SSO identity provider information; see saml_providers for SAML.';


--
-- Name: COLUMN sso_providers.resource_id; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON COLUMN auth.sso_providers.resource_id IS 'Auth: Uniquely identifies a SSO provider according to a user-chosen resource ID (case insensitive), useful in infrastructure as code.';


--
-- Name: users; Type: TABLE; Schema: auth; Owner: supabase_auth_admin
--

CREATE TABLE auth.users (
    instance_id uuid,
    id uuid NOT NULL,
    aud character varying(255),
    role character varying(255),
    email character varying(255),
    encrypted_password character varying(255),
    email_confirmed_at timestamp with time zone,
    invited_at timestamp with time zone,
    confirmation_token character varying(255),
    confirmation_sent_at timestamp with time zone,
    recovery_token character varying(255),
    recovery_sent_at timestamp with time zone,
    email_change_token_new character varying(255),
    email_change character varying(255),
    email_change_sent_at timestamp with time zone,
    last_sign_in_at timestamp with time zone,
    raw_app_meta_data jsonb,
    raw_user_meta_data jsonb,
    is_super_admin boolean,
    created_at timestamp with time zone,
    updated_at timestamp with time zone,
    phone text DEFAULT NULL::character varying,
    phone_confirmed_at timestamp with time zone,
    phone_change text DEFAULT ''::character varying,
    phone_change_token character varying(255) DEFAULT ''::character varying,
    phone_change_sent_at timestamp with time zone,
    confirmed_at timestamp with time zone GENERATED ALWAYS AS (LEAST(email_confirmed_at, phone_confirmed_at)) STORED,
    email_change_token_current character varying(255) DEFAULT ''::character varying,
    email_change_confirm_status smallint DEFAULT 0,
    banned_until timestamp with time zone,
    reauthentication_token character varying(255) DEFAULT ''::character varying,
    reauthentication_sent_at timestamp with time zone,
    is_sso_user boolean DEFAULT false NOT NULL,
    deleted_at timestamp with time zone,
    is_anonymous boolean DEFAULT false NOT NULL,
    CONSTRAINT users_email_change_confirm_status_check CHECK (((email_change_confirm_status >= 0) AND (email_change_confirm_status <= 2)))
);


ALTER TABLE auth.users OWNER TO supabase_auth_admin;

--
-- Name: TABLE users; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON TABLE auth.users IS 'Auth: Stores user login data within a secure schema.';


--
-- Name: COLUMN users.is_sso_user; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON COLUMN auth.users.is_sso_user IS 'Auth: Set this column to true when the account comes from SSO. These accounts can have duplicate emails.';


--
-- Name: batch_transactions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.batch_transactions (
    id integer NOT NULL,
    operation_type public.batch_operation_type NOT NULL,
    lot_id integer,
    from_warehouse_id integer,
    to_warehouse_id integer,
    cone_ids integer[] NOT NULL,
    cone_count integer NOT NULL,
    reference_number character varying(50),
    recipient character varying(200),
    notes text,
    performed_by character varying(100),
    performed_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.batch_transactions OWNER TO postgres;

--
-- Name: TABLE batch_transactions; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.batch_transactions IS 'Bng lu lch s cc thao tc hng lot (nhp/xut/chuyn kho)';


--
-- Name: COLUMN batch_transactions.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.batch_transactions.id IS 'Kha chnh t tng';


--
-- Name: COLUMN batch_transactions.operation_type; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.batch_transactions.operation_type IS 'Loi thao tc: RECEIVE=nhp kho, TRANSFER=chuyn kho, ISSUE=xut kho, RETURN=tr li';


--
-- Name: COLUMN batch_transactions.lot_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.batch_transactions.lot_id IS 'L hng lin quan (nu c)';


--
-- Name: COLUMN batch_transactions.from_warehouse_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.batch_transactions.from_warehouse_id IS 'Kho ngun (cho chuyn/xut kho)';


--
-- Name: COLUMN batch_transactions.to_warehouse_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.batch_transactions.to_warehouse_id IS 'Kho ch (cho nhp/chuyn kho)';


--
-- Name: COLUMN batch_transactions.cone_ids; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.batch_transactions.cone_ids IS 'Mng ID cc cun trong thao tc ny';


--
-- Name: COLUMN batch_transactions.cone_count; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.batch_transactions.cone_count IS 'S lng cun ( truy vn nhanh)';


--
-- Name: COLUMN batch_transactions.reference_number; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.batch_transactions.reference_number IS 'S tham chiu bn ngoi (s PO, phiu xut kho, v.v.)';


--
-- Name: COLUMN batch_transactions.recipient; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.batch_transactions.recipient IS 'Ngi nhn hng (cho thao tc xut kho)';


--
-- Name: COLUMN batch_transactions.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.batch_transactions.notes IS 'Ghi ch thm v thao tc';


--
-- Name: COLUMN batch_transactions.performed_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.batch_transactions.performed_by IS 'Ngi thc hin thao tc';


--
-- Name: COLUMN batch_transactions.performed_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.batch_transactions.performed_at IS 'Thi im thc hin thao tc';


--
-- Name: batch_transactions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.batch_transactions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.batch_transactions_id_seq OWNER TO postgres;

--
-- Name: batch_transactions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.batch_transactions_id_seq OWNED BY public.batch_transactions.id;


--
-- Name: color_supplier; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.color_supplier (
    id integer NOT NULL,
    color_id integer NOT NULL,
    supplier_id integer NOT NULL,
    price_per_kg numeric(10,2),
    min_order_qty integer,
    is_active boolean DEFAULT true NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.color_supplier OWNER TO postgres;

--
-- Name: TABLE color_supplier; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.color_supplier IS 'Bng lin kt mu-nh cung cp vi thng tin gi - Color-Supplier junction with pricing';


--
-- Name: COLUMN color_supplier.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.color_supplier.id IS 'Kha chnh t tng';


--
-- Name: COLUMN color_supplier.color_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.color_supplier.color_id IS 'FK n bng colors - m mu';


--
-- Name: COLUMN color_supplier.supplier_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.color_supplier.supplier_id IS 'FK n bng suppliers - m nh cung cp';


--
-- Name: COLUMN color_supplier.price_per_kg; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.color_supplier.price_per_kg IS 'Gi mi kg (VND)';


--
-- Name: COLUMN color_supplier.min_order_qty; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.color_supplier.min_order_qty IS 'S lng t ti thiu (kg)';


--
-- Name: COLUMN color_supplier.is_active; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.color_supplier.is_active IS 'Trng thi hot ng - TRUE=ang cung cp, FALSE=ngng cung cp';


--
-- Name: COLUMN color_supplier.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.color_supplier.created_at IS 'Thi im to bn ghi';


--
-- Name: COLUMN color_supplier.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.color_supplier.updated_at IS 'Thi im cp nht gn nht';


--
-- Name: color_supplier_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.color_supplier_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.color_supplier_id_seq OWNER TO postgres;

--
-- Name: color_supplier_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.color_supplier_id_seq OWNED BY public.color_supplier.id;


--
-- Name: colors; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.colors (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    hex_code character varying(7) NOT NULL,
    pantone_code character varying(20),
    ral_code character varying(20),
    is_active boolean DEFAULT true NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.colors OWNER TO postgres;

--
-- Name: TABLE colors; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.colors IS 'Bng danh mc mu sc chun - Colors master data';


--
-- Name: COLUMN colors.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.colors.id IS 'Kha chnh t tng';


--
-- Name: COLUMN colors.name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.colors.name IS 'Tn mu (unique) - VD: , Xanh dng';


--
-- Name: COLUMN colors.hex_code; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.colors.hex_code IS 'M mu Hex (#RRGGBB) - VD: #FF0000';


--
-- Name: COLUMN colors.pantone_code; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.colors.pantone_code IS 'M mu Pantone (ty chn) - VD: 186C';


--
-- Name: COLUMN colors.ral_code; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.colors.ral_code IS 'M mu RAL (ty chn) - VD: RAL 3020';


--
-- Name: COLUMN colors.is_active; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.colors.is_active IS 'Trng thi hot ng - TRUE=ang dng, FALSE=ngng dng';


--
-- Name: COLUMN colors.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.colors.created_at IS 'Thi im to bn ghi';


--
-- Name: COLUMN colors.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.colors.updated_at IS 'Thi im cp nht gn nht';


--
-- Name: colors_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.colors_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.colors_id_seq OWNER TO postgres;

--
-- Name: colors_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.colors_id_seq OWNED BY public.colors.id;


--
-- Name: employee_permissions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.employee_permissions (
    id integer NOT NULL,
    employee_id integer NOT NULL,
    permission_id integer NOT NULL,
    granted boolean DEFAULT true,
    assigned_by integer,
    assigned_at timestamp with time zone DEFAULT now(),
    expires_at timestamp with time zone
);


ALTER TABLE public.employee_permissions OWNER TO postgres;

--
-- Name: employee_permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.employee_permissions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.employee_permissions_id_seq OWNER TO postgres;

--
-- Name: employee_permissions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.employee_permissions_id_seq OWNED BY public.employee_permissions.id;


--
-- Name: employee_refresh_tokens; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.employee_refresh_tokens (
    id integer NOT NULL,
    employee_id integer NOT NULL,
    token_hash text NOT NULL,
    expires_at timestamp with time zone NOT NULL,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.employee_refresh_tokens OWNER TO postgres;

--
-- Name: employee_refresh_tokens_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.employee_refresh_tokens_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.employee_refresh_tokens_id_seq OWNER TO postgres;

--
-- Name: employee_refresh_tokens_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.employee_refresh_tokens_id_seq OWNED BY public.employee_refresh_tokens.id;


--
-- Name: employee_roles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.employee_roles (
    id integer NOT NULL,
    employee_id integer NOT NULL,
    role_id integer NOT NULL,
    assigned_by integer,
    assigned_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.employee_roles OWNER TO postgres;

--
-- Name: employee_roles_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.employee_roles_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.employee_roles_id_seq OWNER TO postgres;

--
-- Name: employee_roles_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.employee_roles_id_seq OWNED BY public.employee_roles.id;


--
-- Name: employees; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.employees (
    id integer NOT NULL,
    employee_id character varying(50) NOT NULL,
    full_name character varying(255) NOT NULL,
    department character varying(100),
    chuc_vu character varying(50) DEFAULT 'nhan_vien'::character varying,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    password_hash text,
    must_change_password boolean DEFAULT false,
    password_changed_at timestamp with time zone,
    failed_login_attempts integer DEFAULT 0,
    locked_until timestamp with time zone,
    last_login_at timestamp with time zone,
    refresh_token text,
    refresh_token_expires_at timestamp with time zone
);


ALTER TABLE public.employees OWNER TO postgres;

--
-- Name: employees_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.employees_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.employees_id_seq OWNER TO postgres;

--
-- Name: employees_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.employees_id_seq OWNED BY public.employees.id;


--
-- Name: lots; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.lots (
    id integer NOT NULL,
    lot_number character varying(50) NOT NULL,
    thread_type_id integer NOT NULL,
    warehouse_id integer NOT NULL,
    production_date date,
    expiry_date date,
    supplier character varying(200),
    total_cones integer DEFAULT 0 NOT NULL,
    available_cones integer DEFAULT 0 NOT NULL,
    status public.lot_status DEFAULT 'ACTIVE'::public.lot_status NOT NULL,
    notes text,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL,
    supplier_id integer
);


ALTER TABLE public.lots OWNER TO postgres;

--
-- Name: TABLE lots; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.lots IS 'Bng qun l l hng ch - theo di vng i t nhp n xut kho';


--
-- Name: COLUMN lots.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.id IS 'Kha chnh t tng';


--
-- Name: COLUMN lots.lot_number; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.lot_number IS 'M l duy nht (VD: LOT-2026-001)';


--
-- Name: COLUMN lots.thread_type_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.thread_type_id IS 'Tham chiu n loi ch trong bng thread_types';


--
-- Name: COLUMN lots.warehouse_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.warehouse_id IS 'Kho hin ti ang cha l hng';


--
-- Name: COLUMN lots.production_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.production_date IS 'Ngy sn xut ca l hng';


--
-- Name: COLUMN lots.expiry_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.expiry_date IS 'Ngy ht hn s dng';


--
-- Name: COLUMN lots.supplier; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.supplier IS 'Tn nh cung cp';


--
-- Name: COLUMN lots.total_cones; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.total_cones IS 'Tng s cun trong l (denormalized  tng hiu sut)';


--
-- Name: COLUMN lots.available_cones; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.available_cones IS 'S cun cn sn sng s dng (cha xut kho)';


--
-- Name: COLUMN lots.status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.status IS 'Trng thi l: ACTIVE=ang dng, DEPLETED= ht, EXPIRED=ht hn, QUARANTINE=cch ly';


--
-- Name: COLUMN lots.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.notes IS 'Ghi ch thm v l hng';


--
-- Name: COLUMN lots.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.created_at IS 'Thi im to bn ghi';


--
-- Name: COLUMN lots.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.updated_at IS 'Thi im cp nht gn nht';


--
-- Name: COLUMN lots.supplier_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.lots.supplier_id IS 'FK n bng suppliers (normalized) - nullable trong giai on migration';


--
-- Name: lots_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.lots_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.lots_id_seq OWNER TO postgres;

--
-- Name: lots_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.lots_id_seq OWNED BY public.lots.id;


--
-- Name: permissions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.permissions (
    id integer NOT NULL,
    code character varying(100) NOT NULL,
    name character varying(255) NOT NULL,
    description text,
    module character varying(50) NOT NULL,
    resource character varying(50) NOT NULL,
    action public.permission_action NOT NULL,
    route_path character varying(255),
    is_page_access boolean DEFAULT false,
    sort_order integer DEFAULT 0,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.permissions OWNER TO postgres;

--
-- Name: permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.permissions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.permissions_id_seq OWNER TO postgres;

--
-- Name: permissions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.permissions_id_seq OWNED BY public.permissions.id;


--
-- Name: po_items; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.po_items (
    id integer NOT NULL,
    po_id integer NOT NULL,
    style_id integer NOT NULL,
    quantity integer DEFAULT 0 NOT NULL,
    notes text,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.po_items OWNER TO postgres;

--
-- Name: TABLE po_items; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.po_items IS 'Bang chi tiet don hang - Lien ket PO va Style - PO Items junction table';


--
-- Name: COLUMN po_items.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.po_items.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN po_items.po_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.po_items.po_id IS 'FK den bang purchase_orders - Ma don hang';


--
-- Name: COLUMN po_items.style_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.po_items.style_id IS 'FK den bang styles - Ma hang san pham';


--
-- Name: COLUMN po_items.quantity; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.po_items.quantity IS 'So luong dat hang';


--
-- Name: COLUMN po_items.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.po_items.notes IS 'Ghi chu';


--
-- Name: COLUMN po_items.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.po_items.created_at IS 'Thoi diem tao ban ghi';


--
-- Name: COLUMN po_items.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.po_items.updated_at IS 'Thoi diem cap nhat gan nhat';


--
-- Name: po_items_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.po_items_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.po_items_id_seq OWNER TO postgres;

--
-- Name: po_items_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.po_items_id_seq OWNED BY public.po_items.id;


--
-- Name: purchase_orders; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.purchase_orders (
    id integer NOT NULL,
    po_number character varying(50) NOT NULL,
    customer_name character varying(255),
    order_date timestamp with time zone,
    delivery_date timestamp with time zone,
    status character varying(20) DEFAULT 'pending'::character varying,
    priority character varying(10) DEFAULT 'normal'::character varying,
    notes text,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.purchase_orders OWNER TO postgres;

--
-- Name: TABLE purchase_orders; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.purchase_orders IS 'Bang don hang tu khach hang - Purchase Orders from customers';


--
-- Name: COLUMN purchase_orders.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.purchase_orders.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN purchase_orders.po_number; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.purchase_orders.po_number IS 'So hieu don hang - PO Number';


--
-- Name: COLUMN purchase_orders.customer_name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.purchase_orders.customer_name IS 'Ten khach hang - Customer Name';


--
-- Name: COLUMN purchase_orders.order_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.purchase_orders.order_date IS 'Ngay dat hang - Order Date';


--
-- Name: COLUMN purchase_orders.delivery_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.purchase_orders.delivery_date IS 'Ngay giao hang du kien - Expected Delivery Date';


--
-- Name: COLUMN purchase_orders.status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.purchase_orders.status IS 'Trang thai don hang - Order Status';


--
-- Name: COLUMN purchase_orders.priority; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.purchase_orders.priority IS 'Muc do uu tien - Priority Level';


--
-- Name: COLUMN purchase_orders.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.purchase_orders.notes IS 'Ghi chu - Notes';


--
-- Name: COLUMN purchase_orders.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.purchase_orders.created_at IS 'Thoi diem tao ban ghi';


--
-- Name: COLUMN purchase_orders.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.purchase_orders.updated_at IS 'Thoi diem cap nhat gan nhat';


--
-- Name: purchase_orders_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.purchase_orders_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.purchase_orders_id_seq OWNER TO postgres;

--
-- Name: purchase_orders_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.purchase_orders_id_seq OWNED BY public.purchase_orders.id;


--
-- Name: role_permissions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.role_permissions (
    id integer NOT NULL,
    role_id integer NOT NULL,
    permission_id integer NOT NULL,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.role_permissions OWNER TO postgres;

--
-- Name: role_permissions_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.role_permissions_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.role_permissions_id_seq OWNER TO postgres;

--
-- Name: role_permissions_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.role_permissions_id_seq OWNED BY public.role_permissions.id;


--
-- Name: roles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.roles (
    id integer NOT NULL,
    code character varying(50) NOT NULL,
    name character varying(100) NOT NULL,
    description text,
    level integer DEFAULT 99,
    is_system boolean DEFAULT false,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.roles OWNER TO postgres;

--
-- Name: roles_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.roles_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.roles_id_seq OWNER TO postgres;

--
-- Name: roles_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.roles_id_seq OWNED BY public.roles.id;


--
-- Name: skus; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.skus (
    id integer NOT NULL,
    po_item_id integer NOT NULL,
    color_id integer NOT NULL,
    size character varying(50),
    quantity integer DEFAULT 0 NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.skus OWNER TO postgres;

--
-- Name: TABLE skus; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.skus IS 'Bang SKU - Chi tiet Style + Mau + Size - SKU details table';


--
-- Name: COLUMN skus.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.skus.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN skus.po_item_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.skus.po_item_id IS 'FK den bang po_items - Ma chi tiet don hang';


--
-- Name: COLUMN skus.color_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.skus.color_id IS 'FK den bang colors - Ma mau sac';


--
-- Name: COLUMN skus.size; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.skus.size IS 'Kich thuoc (Size)';


--
-- Name: COLUMN skus.quantity; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.skus.quantity IS 'So luong';


--
-- Name: COLUMN skus.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.skus.created_at IS 'Thoi diem tao ban ghi';


--
-- Name: COLUMN skus.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.skus.updated_at IS 'Thoi diem cap nhat gan nhat';


--
-- Name: skus_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.skus_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.skus_id_seq OWNER TO postgres;

--
-- Name: skus_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.skus_id_seq OWNED BY public.skus.id;


--
-- Name: style_color_thread_specs; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.style_color_thread_specs (
    id integer NOT NULL,
    style_thread_spec_id integer NOT NULL,
    color_id integer NOT NULL,
    thread_type_id integer NOT NULL,
    notes text,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.style_color_thread_specs OWNER TO postgres;

--
-- Name: TABLE style_color_thread_specs; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.style_color_thread_specs IS 'Bang dinh muc chi chi tiet theo mau - Color-specific thread specs';


--
-- Name: COLUMN style_color_thread_specs.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_color_thread_specs.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN style_color_thread_specs.style_thread_spec_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_color_thread_specs.style_thread_spec_id IS 'FK den bang style_thread_specs - Template dinh muc';


--
-- Name: COLUMN style_color_thread_specs.color_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_color_thread_specs.color_id IS 'FK den bang colors - Ma mau chi cu the';


--
-- Name: COLUMN style_color_thread_specs.thread_type_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_color_thread_specs.thread_type_id IS 'FK den bang thread_types - Loai chi day du (NCC + Tex + Mau)';


--
-- Name: COLUMN style_color_thread_specs.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_color_thread_specs.notes IS 'Ghi chu';


--
-- Name: COLUMN style_color_thread_specs.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_color_thread_specs.created_at IS 'Thoi diem tao ban ghi';


--
-- Name: COLUMN style_color_thread_specs.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_color_thread_specs.updated_at IS 'Thoi diem cap nhat gan nhat';


--
-- Name: style_color_thread_specs_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.style_color_thread_specs_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.style_color_thread_specs_id_seq OWNER TO postgres;

--
-- Name: style_color_thread_specs_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.style_color_thread_specs_id_seq OWNED BY public.style_color_thread_specs.id;


--
-- Name: style_thread_specs; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.style_thread_specs (
    id integer NOT NULL,
    style_id integer NOT NULL,
    supplier_id integer NOT NULL,
    process_name character varying(255) NOT NULL,
    tex_id integer,
    meters_per_unit numeric(10,2) DEFAULT 0 NOT NULL,
    notes text,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL,
    display_order integer DEFAULT 0 NOT NULL
);


ALTER TABLE public.style_thread_specs OWNER TO postgres;

--
-- Name: TABLE style_thread_specs; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.style_thread_specs IS 'Bang dinh muc chi template - Template thread specs per style';


--
-- Name: COLUMN style_thread_specs.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_thread_specs.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN style_thread_specs.style_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_thread_specs.style_id IS 'FK den bang styles - Ma hang san pham';


--
-- Name: COLUMN style_thread_specs.supplier_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_thread_specs.supplier_id IS 'FK den bang suppliers - Ma nha cung cap';


--
-- Name: COLUMN style_thread_specs.process_name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_thread_specs.process_name IS 'Ten cong doan (vd: May than, May tay, v.v.)';


--
-- Name: COLUMN style_thread_specs.tex_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_thread_specs.tex_id IS 'FK den bang thread_types - Loai chi (Tex)';


--
-- Name: COLUMN style_thread_specs.meters_per_unit; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_thread_specs.meters_per_unit IS 'Dinh muc met chi / 1 san pham';


--
-- Name: COLUMN style_thread_specs.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_thread_specs.notes IS 'Ghi chu';


--
-- Name: COLUMN style_thread_specs.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_thread_specs.created_at IS 'Thoi diem tao ban ghi';


--
-- Name: COLUMN style_thread_specs.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_thread_specs.updated_at IS 'Thoi diem cap nhat gan nhat';


--
-- Name: COLUMN style_thread_specs.display_order; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.style_thread_specs.display_order IS 'Display order within same style (lower = higher in list, 0 = first)';


--
-- Name: style_thread_specs_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.style_thread_specs_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.style_thread_specs_id_seq OWNER TO postgres;

--
-- Name: style_thread_specs_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.style_thread_specs_id_seq OWNED BY public.style_thread_specs.id;


--
-- Name: styles; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.styles (
    id integer NOT NULL,
    style_code character varying(50) NOT NULL,
    style_name character varying(255) NOT NULL,
    description text,
    fabric_type character varying(100),
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.styles OWNER TO postgres;

--
-- Name: TABLE styles; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.styles IS 'Bang ma hang san pham - Product Style Master Data';


--
-- Name: COLUMN styles.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.styles.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN styles.style_code; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.styles.style_code IS 'Ma hang (unique) - Style Code';


--
-- Name: COLUMN styles.style_name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.styles.style_name IS 'Ten ma hang - Style Name';


--
-- Name: COLUMN styles.description; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.styles.description IS 'Mo ta ma hang - Description';


--
-- Name: COLUMN styles.fabric_type; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.styles.fabric_type IS 'Loai vai - Fabric Type';


--
-- Name: COLUMN styles.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.styles.created_at IS 'Thoi diem tao ban ghi';


--
-- Name: COLUMN styles.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.styles.updated_at IS 'Thoi diem cap nhat gan nhat';


--
-- Name: styles_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.styles_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.styles_id_seq OWNER TO postgres;

--
-- Name: styles_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.styles_id_seq OWNED BY public.styles.id;


--
-- Name: suppliers; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.suppliers (
    id integer NOT NULL,
    code character varying(50) NOT NULL,
    name character varying(200) NOT NULL,
    contact_name character varying(100),
    phone character varying(20),
    email character varying(100),
    address text,
    lead_time_days integer DEFAULT 7,
    is_active boolean DEFAULT true NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.suppliers OWNER TO postgres;

--
-- Name: TABLE suppliers; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.suppliers IS 'Bng danh mc nh cung cp - Suppliers master data';


--
-- Name: COLUMN suppliers.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.suppliers.id IS 'Kha chnh t tng';


--
-- Name: COLUMN suppliers.code; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.suppliers.code IS 'M nh cung cp (unique) - VD: SUP-001, NCC-ABC';


--
-- Name: COLUMN suppliers.name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.suppliers.name IS 'Tn y  nh cung cp';


--
-- Name: COLUMN suppliers.contact_name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.suppliers.contact_name IS 'Tn ngi lin h';


--
-- Name: COLUMN suppliers.phone; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.suppliers.phone IS 'S in thoi lin h';


--
-- Name: COLUMN suppliers.email; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.suppliers.email IS 'Email lin h';


--
-- Name: COLUMN suppliers.address; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.suppliers.address IS 'a ch nh cung cp';


--
-- Name: COLUMN suppliers.lead_time_days; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.suppliers.lead_time_days IS 'Thi gian giao hng tiu chun (ngy)';


--
-- Name: COLUMN suppliers.is_active; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.suppliers.is_active IS 'Trng thi hot ng - TRUE=ang hp tc, FALSE=ngng hp tc';


--
-- Name: COLUMN suppliers.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.suppliers.created_at IS 'Thi im to bn ghi';


--
-- Name: COLUMN suppliers.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.suppliers.updated_at IS 'Thi im cp nht gn nht';


--
-- Name: suppliers_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.suppliers_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.suppliers_id_seq OWNER TO postgres;

--
-- Name: suppliers_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.suppliers_id_seq OWNED BY public.suppliers.id;


--
-- Name: system_settings; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.system_settings (
    id integer NOT NULL,
    key character varying(100) NOT NULL,
    value jsonb NOT NULL,
    description text,
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.system_settings OWNER TO postgres;

--
-- Name: TABLE system_settings; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.system_settings IS 'Bang cau hinh he thong - System configuration settings';


--
-- Name: COLUMN system_settings.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.system_settings.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN system_settings.key; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.system_settings.key IS 'Khoa cau hinh - duy nhat (vd: partial_cone_ratio)';


--
-- Name: COLUMN system_settings.value; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.system_settings.value IS 'Gia tri cau hinh dang JSONB';


--
-- Name: COLUMN system_settings.description; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.system_settings.description IS 'Mo ta y nghia cau hinh';


--
-- Name: COLUMN system_settings.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.system_settings.updated_at IS 'Thoi diem cap nhat gan nhat';


--
-- Name: system_settings_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.system_settings_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.system_settings_id_seq OWNER TO postgres;

--
-- Name: system_settings_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.system_settings_id_seq OWNED BY public.system_settings.id;


--
-- Name: thread_allocation_cones; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_allocation_cones (
    id integer NOT NULL,
    allocation_id integer NOT NULL,
    cone_id integer NOT NULL,
    allocated_meters numeric(12,4) NOT NULL,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT chk_allocation_cones_meters_positive CHECK ((allocated_meters > (0)::numeric))
);


ALTER TABLE public.thread_allocation_cones OWNER TO postgres;

--
-- Name: TABLE thread_allocation_cones; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_allocation_cones IS 'Junction table linking allocations to inventory cones - Bang lien ket phan bo va cuon chi';


--
-- Name: COLUMN thread_allocation_cones.allocation_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocation_cones.allocation_id IS 'Reference to allocation request - Tham chieu yeu cau phan bo';


--
-- Name: COLUMN thread_allocation_cones.cone_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocation_cones.cone_id IS 'Reference to inventory cone - Tham chieu cuon chi trong kho';


--
-- Name: COLUMN thread_allocation_cones.allocated_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocation_cones.allocated_meters IS 'Meters allocated from this cone - So met phan bo tu cuon nay';


--
-- Name: thread_allocation_cones_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_allocation_cones_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_allocation_cones_id_seq OWNER TO postgres;

--
-- Name: thread_allocation_cones_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_allocation_cones_id_seq OWNED BY public.thread_allocation_cones.id;


--
-- Name: thread_allocations; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_allocations (
    id integer NOT NULL,
    order_id character varying(50) NOT NULL,
    order_reference character varying(200),
    thread_type_id integer NOT NULL,
    requested_meters numeric(12,4) NOT NULL,
    allocated_meters numeric(12,4) DEFAULT 0,
    status public.allocation_status DEFAULT 'PENDING'::public.allocation_status,
    priority public.allocation_priority DEFAULT 'NORMAL'::public.allocation_priority,
    priority_score integer DEFAULT 0,
    requested_date timestamp with time zone DEFAULT now(),
    due_date date,
    notes text,
    created_by character varying(100),
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    split_from_id integer,
    CONSTRAINT chk_allocations_allocated_valid CHECK (((allocated_meters >= (0)::numeric) AND (allocated_meters <= requested_meters))),
    CONSTRAINT chk_allocations_requested_positive CHECK ((requested_meters > (0)::numeric))
);


ALTER TABLE public.thread_allocations OWNER TO postgres;

--
-- Name: TABLE thread_allocations; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_allocations IS 'Realtime enabled for allocation tracking';


--
-- Name: COLUMN thread_allocations.order_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocations.order_id IS 'Production order ID - Ma lenh san xuat';


--
-- Name: COLUMN thread_allocations.order_reference; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocations.order_reference IS 'Order description or reference - Mo ta don hang';


--
-- Name: COLUMN thread_allocations.thread_type_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocations.thread_type_id IS 'Reference to thread type - Tham chieu loai chi';


--
-- Name: COLUMN thread_allocations.requested_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocations.requested_meters IS 'Total meters requested - Tong so met yeu cau';


--
-- Name: COLUMN thread_allocations.allocated_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocations.allocated_meters IS 'Meters successfully allocated - So met da phan bo';


--
-- Name: COLUMN thread_allocations.status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocations.status IS 'Current allocation status - Trang thai phan bo hien tai';


--
-- Name: COLUMN thread_allocations.priority; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocations.priority IS 'Allocation priority level - Muc do uu tien';


--
-- Name: COLUMN thread_allocations.priority_score; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocations.priority_score IS 'Calculated priority score (priority_level * 10 + age_days) - Diem uu tien tinh toan';


--
-- Name: COLUMN thread_allocations.requested_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocations.requested_date IS 'Date allocation was requested - Ngay yeu cau phan bo';


--
-- Name: COLUMN thread_allocations.due_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocations.due_date IS 'Due date for production - Ngay can cho san xuat';


--
-- Name: COLUMN thread_allocations.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocations.notes IS 'Additional notes - Ghi chu them';


--
-- Name: COLUMN thread_allocations.created_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocations.created_by IS 'User who created the allocation - Nguoi tao phan bo';


--
-- Name: COLUMN thread_allocations.split_from_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_allocations.split_from_id IS 'Reference to original allocation if this was created from a split - Tham chieu phan bo goc neu la ket qua chia nho';


--
-- Name: thread_allocations_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_allocations_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_allocations_id_seq OWNER TO postgres;

--
-- Name: thread_allocations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_allocations_id_seq OWNED BY public.thread_allocations.id;


--
-- Name: thread_audit_log; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_audit_log (
    id integer NOT NULL,
    table_name character varying(50) NOT NULL,
    record_id integer NOT NULL,
    action character varying(10) NOT NULL,
    old_values jsonb,
    new_values jsonb,
    changed_fields text[],
    performed_by character varying(100),
    ip_address character varying(45),
    user_agent text,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.thread_audit_log OWNER TO postgres;

--
-- Name: TABLE thread_audit_log; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_audit_log IS 'Audit log for thread management tables - Nhat ky kiem toan cho cac bang quan ly chi';


--
-- Name: COLUMN thread_audit_log.table_name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_audit_log.table_name IS 'Name of the table that was changed - Ten bang bi thay doi';


--
-- Name: COLUMN thread_audit_log.record_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_audit_log.record_id IS 'ID of the record that was changed - ID ban ghi bi thay doi';


--
-- Name: COLUMN thread_audit_log.action; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_audit_log.action IS 'Type of action: INSERT, UPDATE, DELETE - Loai thao tac';


--
-- Name: COLUMN thread_audit_log.old_values; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_audit_log.old_values IS 'Previous state as JSONB - Trang thai truoc dang JSONB';


--
-- Name: COLUMN thread_audit_log.new_values; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_audit_log.new_values IS 'New state as JSONB - Trang thai moi dang JSONB';


--
-- Name: COLUMN thread_audit_log.changed_fields; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_audit_log.changed_fields IS 'Array of column names that changed - Mang ten cot da thay doi';


--
-- Name: COLUMN thread_audit_log.performed_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_audit_log.performed_by IS 'User who performed the action - Nguoi thuc hien thao tac';


--
-- Name: COLUMN thread_audit_log.ip_address; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_audit_log.ip_address IS 'IP address of the actor (IPv4 or IPv6) - Dia chi IP';


--
-- Name: COLUMN thread_audit_log.user_agent; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_audit_log.user_agent IS 'Browser or application user agent - Trinh duyet/ung dung';


--
-- Name: thread_audit_log_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_audit_log_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_audit_log_id_seq OWNER TO postgres;

--
-- Name: thread_audit_log_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_audit_log_id_seq OWNED BY public.thread_audit_log.id;


--
-- Name: thread_conflict_allocations; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_conflict_allocations (
    id integer NOT NULL,
    conflict_id integer NOT NULL,
    allocation_id integer NOT NULL,
    original_priority_score integer,
    adjusted_priority_score integer,
    created_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.thread_conflict_allocations OWNER TO postgres;

--
-- Name: TABLE thread_conflict_allocations; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_conflict_allocations IS 'Junction table linking conflicts to allocations - Bang lien ket xung dot va phan bo';


--
-- Name: COLUMN thread_conflict_allocations.conflict_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_conflict_allocations.conflict_id IS 'Reference to the conflict - Tham chieu xung dot';


--
-- Name: COLUMN thread_conflict_allocations.allocation_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_conflict_allocations.allocation_id IS 'Reference to affected allocation - Tham chieu phan bo bi anh huong';


--
-- Name: COLUMN thread_conflict_allocations.original_priority_score; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_conflict_allocations.original_priority_score IS 'Priority score at conflict detection - Diem uu tien ban dau';


--
-- Name: COLUMN thread_conflict_allocations.adjusted_priority_score; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_conflict_allocations.adjusted_priority_score IS 'Priority score after resolution - Diem uu tien sau dieu chinh';


--
-- Name: thread_conflict_allocations_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_conflict_allocations_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_conflict_allocations_id_seq OWNER TO postgres;

--
-- Name: thread_conflict_allocations_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_conflict_allocations_id_seq OWNED BY public.thread_conflict_allocations.id;


--
-- Name: thread_conflicts; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_conflicts (
    id integer NOT NULL,
    thread_type_id integer NOT NULL,
    total_requested_meters numeric(12,4) NOT NULL,
    total_available_meters numeric(12,4) NOT NULL,
    shortage_meters numeric(12,4) NOT NULL,
    status character varying(20) DEFAULT 'PENDING'::character varying,
    resolution_notes text,
    resolved_by character varying(100),
    resolved_at timestamp with time zone,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    CONSTRAINT chk_conflicts_available_non_negative CHECK ((total_available_meters >= (0)::numeric)),
    CONSTRAINT chk_conflicts_requested_positive CHECK ((total_requested_meters > (0)::numeric)),
    CONSTRAINT chk_conflicts_shortage_positive CHECK ((shortage_meters > (0)::numeric)),
    CONSTRAINT chk_conflicts_status_valid CHECK (((status)::text = ANY ((ARRAY['PENDING'::character varying, 'RESOLVED'::character varying, 'ESCALATED'::character varying])::text[])))
);


ALTER TABLE public.thread_conflicts OWNER TO postgres;

--
-- Name: TABLE thread_conflicts; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_conflicts IS 'Allocation conflicts when demand exceeds supply - Xung dot phan bo khi nhu cau vuot nguon cung';


--
-- Name: COLUMN thread_conflicts.thread_type_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_conflicts.thread_type_id IS 'Thread type with insufficient stock - Loai chi thieu ton';


--
-- Name: COLUMN thread_conflicts.total_requested_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_conflicts.total_requested_meters IS 'Total meters requested - Tong so met yeu cau';


--
-- Name: COLUMN thread_conflicts.total_available_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_conflicts.total_available_meters IS 'Total meters available - Tong so met co san';


--
-- Name: COLUMN thread_conflicts.shortage_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_conflicts.shortage_meters IS 'Shortage amount (requested - available) - So met thieu';


--
-- Name: COLUMN thread_conflicts.status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_conflicts.status IS 'Resolution status (PENDING/RESOLVED/ESCALATED) - Trang thai xu ly';


--
-- Name: COLUMN thread_conflicts.resolution_notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_conflicts.resolution_notes IS 'Notes on how conflict was resolved - Ghi chu giai quyet';


--
-- Name: COLUMN thread_conflicts.resolved_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_conflicts.resolved_by IS 'User who resolved the conflict - Nguoi giai quyet';


--
-- Name: COLUMN thread_conflicts.resolved_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_conflicts.resolved_at IS 'When conflict was resolved - Thoi gian giai quyet';


--
-- Name: thread_conflicts_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_conflicts_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_conflicts_id_seq OWNER TO postgres;

--
-- Name: thread_conflicts_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_conflicts_id_seq OWNED BY public.thread_conflicts.id;


--
-- Name: thread_inventory; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_inventory (
    id integer NOT NULL,
    cone_id character varying(50) NOT NULL,
    thread_type_id integer NOT NULL,
    warehouse_id integer NOT NULL,
    quantity_cones integer DEFAULT 1 NOT NULL,
    quantity_meters numeric(12,4) NOT NULL,
    weight_grams numeric(10,2),
    is_partial boolean DEFAULT false,
    status public.cone_status DEFAULT 'RECEIVED'::public.cone_status,
    lot_number character varying(50),
    expiry_date date,
    received_date date DEFAULT CURRENT_DATE,
    location character varying(100),
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    lot_id integer,
    CONSTRAINT chk_thread_inventory_quantity_positive CHECK ((quantity_meters >= (0)::numeric)),
    CONSTRAINT chk_thread_inventory_weight_positive CHECK (((weight_grams IS NULL) OR (weight_grams >= (0)::numeric)))
);


ALTER TABLE public.thread_inventory OWNER TO postgres;

--
-- Name: TABLE thread_inventory; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_inventory IS 'Realtime enabled for live stock updates';


--
-- Name: COLUMN thread_inventory.cone_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_inventory.cone_id IS 'Barcode ID for cone (auto-generated or scanned) - Ma vach cuon chi';


--
-- Name: COLUMN thread_inventory.thread_type_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_inventory.thread_type_id IS 'Reference to thread type - Tham chieu loai chi';


--
-- Name: COLUMN thread_inventory.warehouse_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_inventory.warehouse_id IS 'Reference to warehouse location - Tham chieu kho';


--
-- Name: COLUMN thread_inventory.quantity_cones; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_inventory.quantity_cones IS 'Number of cones (always 1 for individual tracking) - So cuon';


--
-- Name: COLUMN thread_inventory.quantity_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_inventory.quantity_meters IS 'Remaining meters on cone (high precision) - So met con lai';


--
-- Name: COLUMN thread_inventory.weight_grams; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_inventory.weight_grams IS 'Current weight in grams (for partial cone calculations) - Khoi luong hien tai';


--
-- Name: COLUMN thread_inventory.is_partial; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_inventory.is_partial IS 'Flag indicating partial cone (previously used) - Co danh dau cuon le';


--
-- Name: COLUMN thread_inventory.status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_inventory.status IS 'Current lifecycle status - Trang thai hien tai';


--
-- Name: COLUMN thread_inventory.lot_number; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_inventory.lot_number IS 'Supplier batch/lot number - So lo nha cung cap';


--
-- Name: COLUMN thread_inventory.expiry_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_inventory.expiry_date IS 'Expiry date for FEFO allocation - Ngay het han';


--
-- Name: COLUMN thread_inventory.received_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_inventory.received_date IS 'Date received into warehouse - Ngay nhap kho';


--
-- Name: COLUMN thread_inventory.location; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_inventory.location IS 'Physical location in warehouse (e.g., A-1-2) - Vi tri kho';


--
-- Name: COLUMN thread_inventory.lot_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_inventory.lot_id IS 'Tham chiu n l hng trong bng lots (nullable  h tr d liu c)';


--
-- Name: thread_inventory_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_inventory_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_inventory_id_seq OWNER TO postgres;

--
-- Name: thread_inventory_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_inventory_id_seq OWNED BY public.thread_inventory.id;


--
-- Name: thread_issue_items; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_issue_items (
    id integer NOT NULL,
    issue_request_id integer NOT NULL,
    cone_id integer NOT NULL,
    allocation_id integer,
    quantity_meters numeric(12,4) NOT NULL,
    batch_number integer DEFAULT 1,
    over_limit_notes text,
    issued_by character varying(100),
    issued_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.thread_issue_items OWNER TO postgres;

--
-- Name: TABLE thread_issue_items; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_issue_items IS 'Bang chi tiet cuon chi da xuat - Thread issue item details';


--
-- Name: COLUMN thread_issue_items.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_items.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN thread_issue_items.issue_request_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_items.issue_request_id IS 'Ma yeu cau xuat (FK -> thread_issue_requests)';


--
-- Name: COLUMN thread_issue_items.cone_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_items.cone_id IS 'Ma cuon chi (FK -> thread_inventory)';


--
-- Name: COLUMN thread_issue_items.allocation_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_items.allocation_id IS 'Ma phan bo (FK -> thread_allocations) - tuy chon';


--
-- Name: COLUMN thread_issue_items.quantity_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_items.quantity_meters IS 'So met xuat tu cuon chi nay';


--
-- Name: COLUMN thread_issue_items.batch_number; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_items.batch_number IS 'So dot xuat - cho tracking xuat nhieu lan';


--
-- Name: COLUMN thread_issue_items.over_limit_notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_items.over_limit_notes IS 'Ghi chu bat buoc khi xuat vuot dinh muc quota';


--
-- Name: COLUMN thread_issue_items.issued_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_items.issued_by IS 'Nguoi thuc hien viec xuat kho';


--
-- Name: COLUMN thread_issue_items.issued_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_items.issued_at IS 'Thoi diem xuat kho';


--
-- Name: thread_issue_items_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_issue_items_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_issue_items_id_seq OWNER TO postgres;

--
-- Name: thread_issue_items_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_issue_items_id_seq OWNED BY public.thread_issue_items.id;


--
-- Name: thread_issue_lines; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_issue_lines (
    id integer NOT NULL,
    issue_id integer NOT NULL,
    po_id integer,
    style_id integer,
    color_id integer,
    thread_type_id integer NOT NULL,
    quota_cones numeric(8,2),
    issued_full integer DEFAULT 0 NOT NULL,
    issued_partial integer DEFAULT 0 NOT NULL,
    returned_full integer DEFAULT 0 NOT NULL,
    returned_partial integer DEFAULT 0 NOT NULL,
    over_quota_notes text,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT chk_issue_lines_issued_full_positive CHECK ((issued_full >= 0)),
    CONSTRAINT chk_issue_lines_issued_partial_positive CHECK ((issued_partial >= 0)),
    CONSTRAINT chk_issue_lines_returned_full_positive CHECK ((returned_full >= 0)),
    CONSTRAINT chk_issue_lines_returned_not_exceed_issued CHECK (((returned_full <= issued_full) AND (returned_partial <= issued_partial))),
    CONSTRAINT chk_issue_lines_returned_partial_positive CHECK ((returned_partial >= 0))
);


ALTER TABLE public.thread_issue_lines OWNER TO postgres;

--
-- Name: TABLE thread_issue_lines; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_issue_lines IS 'Chi tiet phieu xuat kho v2 - Thread issue line items';


--
-- Name: COLUMN thread_issue_lines.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_lines.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN thread_issue_lines.issue_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_lines.issue_id IS 'FK den thread_issues - Phieu xuat';


--
-- Name: COLUMN thread_issue_lines.po_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_lines.po_id IS 'FK den purchase_orders - Don hang (tuy chon)';


--
-- Name: COLUMN thread_issue_lines.style_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_lines.style_id IS 'FK den styles - Ma hang (tuy chon)';


--
-- Name: COLUMN thread_issue_lines.color_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_lines.color_id IS 'FK den colors - Mau (tuy chon)';


--
-- Name: COLUMN thread_issue_lines.thread_type_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_lines.thread_type_id IS 'FK den thread_types - Loai chi';


--
-- Name: COLUMN thread_issue_lines.quota_cones; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_lines.quota_cones IS 'Dinh muc cuon (NULL = khong gioi han)';


--
-- Name: COLUMN thread_issue_lines.issued_full; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_lines.issued_full IS 'So cuon nguyen da xuat';


--
-- Name: COLUMN thread_issue_lines.issued_partial; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_lines.issued_partial IS 'So cuon le da xuat';


--
-- Name: COLUMN thread_issue_lines.returned_full; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_lines.returned_full IS 'So cuon nguyen da tra lai';


--
-- Name: COLUMN thread_issue_lines.returned_partial; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_lines.returned_partial IS 'So cuon le da tra lai';


--
-- Name: COLUMN thread_issue_lines.over_quota_notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_lines.over_quota_notes IS 'Ghi chu ly do xuat vuot dinh muc';


--
-- Name: COLUMN thread_issue_lines.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_lines.created_at IS 'Thoi diem tao dong';


--
-- Name: thread_issue_lines_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_issue_lines_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_issue_lines_id_seq OWNER TO postgres;

--
-- Name: thread_issue_lines_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_issue_lines_id_seq OWNED BY public.thread_issue_lines.id;


--
-- Name: thread_issue_requests; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_issue_requests (
    id integer NOT NULL,
    issue_code character varying(50) NOT NULL,
    po_id integer,
    style_id integer,
    color_id integer,
    thread_type_id integer,
    department character varying(100) NOT NULL,
    quota_meters numeric(12,4) DEFAULT 0,
    requested_meters numeric(12,4) NOT NULL,
    issued_meters numeric(12,4) DEFAULT 0,
    status public.issue_request_status DEFAULT 'PENDING'::public.issue_request_status,
    notes text,
    created_by character varying(100),
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.thread_issue_requests OWNER TO postgres;

--
-- Name: TABLE thread_issue_requests; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_issue_requests IS 'Bang yeu cau xuat kho chi - Thread issue requests for production';


--
-- Name: COLUMN thread_issue_requests.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN thread_issue_requests.issue_code; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.issue_code IS 'Ma phieu xuat (format: XK-YYYYMMDD-NNN)';


--
-- Name: COLUMN thread_issue_requests.po_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.po_id IS 'Ma don hang (FK -> purchase_orders)';


--
-- Name: COLUMN thread_issue_requests.style_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.style_id IS 'Ma hang san pham (FK -> styles)';


--
-- Name: COLUMN thread_issue_requests.color_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.color_id IS 'Ma mau san pham (FK -> colors)';


--
-- Name: COLUMN thread_issue_requests.thread_type_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.thread_type_id IS 'Ma loai chi (FK -> thread_types)';


--
-- Name: COLUMN thread_issue_requests.department; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.department IS 'Bo phan nhan chi - tu employees.department';


--
-- Name: COLUMN thread_issue_requests.quota_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.quota_meters IS 'Dinh muc met tu BOM - quota from Bill of Materials';


--
-- Name: COLUMN thread_issue_requests.requested_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.requested_meters IS 'So met yeu cau xuat';


--
-- Name: COLUMN thread_issue_requests.issued_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.issued_meters IS 'So met da xuat thuc te (denormalized)';


--
-- Name: COLUMN thread_issue_requests.status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.status IS 'Trang thai phieu xuat: PENDING, PARTIAL, COMPLETED, CANCELLED';


--
-- Name: COLUMN thread_issue_requests.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.notes IS 'Ghi chu phieu xuat';


--
-- Name: COLUMN thread_issue_requests.created_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.created_by IS 'Nguoi tao phieu xuat';


--
-- Name: COLUMN thread_issue_requests.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.created_at IS 'Thoi diem tao phieu';


--
-- Name: COLUMN thread_issue_requests.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_requests.updated_at IS 'Thoi diem cap nhat gan nhat';


--
-- Name: thread_issue_requests_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_issue_requests_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_issue_requests_id_seq OWNER TO postgres;

--
-- Name: thread_issue_requests_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_issue_requests_id_seq OWNED BY public.thread_issue_requests.id;


--
-- Name: thread_issue_returns; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_issue_returns (
    id integer NOT NULL,
    issue_item_id integer NOT NULL,
    cone_id integer NOT NULL,
    original_meters numeric(12,4) NOT NULL,
    remaining_percentage integer NOT NULL,
    calculated_remaining_meters numeric(12,4) NOT NULL,
    notes text,
    returned_by character varying(100),
    returned_at timestamp with time zone DEFAULT now(),
    CONSTRAINT thread_issue_returns_remaining_percentage_check CHECK (((remaining_percentage >= 10) AND (remaining_percentage <= 100)))
);


ALTER TABLE public.thread_issue_returns OWNER TO postgres;

--
-- Name: TABLE thread_issue_returns; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_issue_returns IS 'Bang tra lai chi chua dung het - Thread return records';


--
-- Name: COLUMN thread_issue_returns.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_returns.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN thread_issue_returns.issue_item_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_returns.issue_item_id IS 'Ma item da xuat (FK -> thread_issue_items)';


--
-- Name: COLUMN thread_issue_returns.cone_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_returns.cone_id IS 'Ma cuon chi tra lai (FK -> thread_inventory)';


--
-- Name: COLUMN thread_issue_returns.original_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_returns.original_meters IS 'So met ban dau khi xuat cho cong nhan';


--
-- Name: COLUMN thread_issue_returns.remaining_percentage; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_returns.remaining_percentage IS 'Phan tram con lai (10-100%)';


--
-- Name: COLUMN thread_issue_returns.calculated_remaining_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_returns.calculated_remaining_meters IS 'So met con lai = original * percentage / 100';


--
-- Name: COLUMN thread_issue_returns.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_returns.notes IS 'Ghi chu khi tra chi';


--
-- Name: COLUMN thread_issue_returns.returned_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_returns.returned_by IS 'Nguoi thuc hien tra chi';


--
-- Name: COLUMN thread_issue_returns.returned_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issue_returns.returned_at IS 'Thoi diem tra chi';


--
-- Name: thread_issue_returns_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_issue_returns_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_issue_returns_id_seq OWNER TO postgres;

--
-- Name: thread_issue_returns_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_issue_returns_id_seq OWNED BY public.thread_issue_returns.id;


--
-- Name: thread_issues; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_issues (
    id integer NOT NULL,
    issue_code character varying(50) NOT NULL,
    department character varying(100) NOT NULL,
    status public.issue_status DEFAULT 'DRAFT'::public.issue_status,
    created_by character varying(100),
    notes text,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now()
);


ALTER TABLE public.thread_issues OWNER TO postgres;

--
-- Name: TABLE thread_issues; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_issues IS 'Phieu xuat kho v2 (header) - Thread issue header';


--
-- Name: COLUMN thread_issues.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issues.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN thread_issues.issue_code; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issues.issue_code IS 'Ma phieu xuat (format: XK2-YYYYMMDD-NNN)';


--
-- Name: COLUMN thread_issues.department; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issues.department IS 'Bo phan nhan chi';


--
-- Name: COLUMN thread_issues.status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issues.status IS 'Trang thai: DRAFT, CONFIRMED, RETURNED';


--
-- Name: COLUMN thread_issues.created_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issues.created_by IS 'Nguoi tao phieu';


--
-- Name: COLUMN thread_issues.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issues.notes IS 'Ghi chu chung';


--
-- Name: COLUMN thread_issues.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issues.created_at IS 'Thoi diem tao phieu';


--
-- Name: COLUMN thread_issues.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_issues.updated_at IS 'Thoi diem cap nhat gan nhat';


--
-- Name: thread_issues_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_issues_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_issues_id_seq OWNER TO postgres;

--
-- Name: thread_issues_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_issues_id_seq OWNED BY public.thread_issues.id;


--
-- Name: thread_movements; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_movements (
    id integer NOT NULL,
    cone_id integer NOT NULL,
    allocation_id integer,
    movement_type public.movement_type NOT NULL,
    quantity_meters numeric(12,4) NOT NULL,
    from_status character varying(50),
    to_status character varying(50),
    reference_id character varying(50),
    reference_type character varying(50),
    performed_by character varying(100),
    notes text,
    created_at timestamp with time zone DEFAULT now(),
    CONSTRAINT chk_thread_movements_quantity_not_zero CHECK ((quantity_meters <> (0)::numeric))
);


ALTER TABLE public.thread_movements OWNER TO postgres;

--
-- Name: TABLE thread_movements; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_movements IS 'Transaction log for inventory movements - Nhat ky giao dich di chuyen ton kho';


--
-- Name: COLUMN thread_movements.cone_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_movements.cone_id IS 'Reference to the affected cone - Cuon chi bi anh huong';


--
-- Name: COLUMN thread_movements.allocation_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_movements.allocation_id IS 'Reference to allocation (for ISSUE/RETURN) - Lien ket phan bo';


--
-- Name: COLUMN thread_movements.movement_type; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_movements.movement_type IS 'Type of movement - Loai di chuyen';


--
-- Name: COLUMN thread_movements.quantity_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_movements.quantity_meters IS 'Meters involved in movement - So met di chuyen';


--
-- Name: COLUMN thread_movements.from_status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_movements.from_status IS 'Cone status before movement - Trang thai truoc';


--
-- Name: COLUMN thread_movements.to_status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_movements.to_status IS 'Cone status after movement - Trang thai sau';


--
-- Name: COLUMN thread_movements.reference_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_movements.reference_id IS 'External document reference ID - Ma tham chieu ben ngoai';


--
-- Name: COLUMN thread_movements.reference_type; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_movements.reference_type IS 'Type of external reference - Loai tham chieu';


--
-- Name: COLUMN thread_movements.performed_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_movements.performed_by IS 'User who performed the movement - Nguoi thuc hien';


--
-- Name: COLUMN thread_movements.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_movements.notes IS 'Additional notes - Ghi chu';


--
-- Name: thread_movements_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_movements_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_movements_id_seq OWNER TO postgres;

--
-- Name: thread_movements_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_movements_id_seq OWNED BY public.thread_movements.id;


--
-- Name: thread_order_deliveries; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_order_deliveries (
    id integer NOT NULL,
    week_id integer NOT NULL,
    thread_type_id integer NOT NULL,
    supplier_id integer NOT NULL,
    delivery_date date NOT NULL,
    actual_delivery_date date,
    status character varying(20) DEFAULT 'pending'::character varying NOT NULL,
    notes text,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL,
    received_quantity integer DEFAULT 0 NOT NULL,
    inventory_status character varying(20) DEFAULT 'pending'::character varying NOT NULL,
    warehouse_id integer,
    received_by character varying(100),
    received_at timestamp with time zone,
    CONSTRAINT chk_inventory_status CHECK (((inventory_status)::text = ANY ((ARRAY['pending'::character varying, 'partial'::character varying, 'received'::character varying])::text[])))
);


ALTER TABLE public.thread_order_deliveries OWNER TO postgres;

--
-- Name: TABLE thread_order_deliveries; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_order_deliveries IS 'Theo di ngy giao hng ca NCC cho tng tun t ch';


--
-- Name: COLUMN thread_order_deliveries.delivery_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_deliveries.delivery_date IS 'Ngy giao d kin (tnh t lead_time_days ca NCC)';


--
-- Name: COLUMN thread_order_deliveries.actual_delivery_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_deliveries.actual_delivery_date IS 'Ngy giao thc t';


--
-- Name: COLUMN thread_order_deliveries.status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_deliveries.status IS 'Trng thi: pending, delivered';


--
-- Name: COLUMN thread_order_deliveries.received_quantity; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_deliveries.received_quantity IS 'S cun  nhp kho';


--
-- Name: COLUMN thread_order_deliveries.inventory_status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_deliveries.inventory_status IS 'Trng thi nhp kho: pending (cha nhp), partial (nhp mt phn), received ( nhp )';


--
-- Name: COLUMN thread_order_deliveries.warehouse_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_deliveries.warehouse_id IS 'Kho nhp cui cng';


--
-- Name: COLUMN thread_order_deliveries.received_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_deliveries.received_by IS 'Ngi nhp kho cui cng';


--
-- Name: COLUMN thread_order_deliveries.received_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_deliveries.received_at IS 'Thi im nhp kho cui cng';


--
-- Name: thread_order_deliveries_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_order_deliveries_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_order_deliveries_id_seq OWNER TO postgres;

--
-- Name: thread_order_deliveries_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_order_deliveries_id_seq OWNED BY public.thread_order_deliveries.id;


--
-- Name: thread_order_items; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_order_items (
    id integer NOT NULL,
    week_id integer NOT NULL,
    style_id integer NOT NULL,
    color_id integer NOT NULL,
    quantity integer NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    po_id integer,
    quota_cones numeric(8,2),
    CONSTRAINT thread_order_items_quantity_check CHECK ((quantity > 0))
);


ALTER TABLE public.thread_order_items OWNER TO postgres;

--
-- Name: TABLE thread_order_items; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_order_items IS 'Chi tiet don dat chi - Order items per week (style + color + quantity)';


--
-- Name: COLUMN thread_order_items.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_items.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN thread_order_items.week_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_items.week_id IS 'FK den bang thread_order_weeks - Tuan dat chi';


--
-- Name: COLUMN thread_order_items.style_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_items.style_id IS 'FK den bang styles - Ma hang san pham';


--
-- Name: COLUMN thread_order_items.color_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_items.color_id IS 'FK den bang colors - Mau sac';


--
-- Name: COLUMN thread_order_items.quantity; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_items.quantity IS 'So luong san pham can dat chi (phai > 0)';


--
-- Name: COLUMN thread_order_items.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_items.created_at IS 'Thoi diem tao ban ghi';


--
-- Name: COLUMN thread_order_items.po_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_items.po_id IS 'FK den bang purchase_orders - Don hang (PO)';


--
-- Name: COLUMN thread_order_items.quota_cones; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_items.quota_cones IS 'Dinh muc cuon cho don dat hang nay (tinh tu BOM)';


--
-- Name: thread_order_items_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_order_items_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_order_items_id_seq OWNER TO postgres;

--
-- Name: thread_order_items_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_order_items_id_seq OWNED BY public.thread_order_items.id;


--
-- Name: thread_order_results; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_order_results (
    id integer NOT NULL,
    week_id integer NOT NULL,
    calculation_data jsonb NOT NULL,
    summary_data jsonb NOT NULL,
    calculated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.thread_order_results OWNER TO postgres;

--
-- Name: TABLE thread_order_results; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_order_results IS 'Ket qua tinh toan chi - Thread calculation results per week';


--
-- Name: COLUMN thread_order_results.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_results.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN thread_order_results.week_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_results.week_id IS 'FK den bang thread_order_weeks - Tuan dat chi';


--
-- Name: COLUMN thread_order_results.calculation_data; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_results.calculation_data IS 'Du lieu tinh toan chi tiet (JSONB)';


--
-- Name: COLUMN thread_order_results.summary_data; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_results.summary_data IS 'Du lieu tong hop (JSONB)';


--
-- Name: COLUMN thread_order_results.calculated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_results.calculated_at IS 'Thoi diem tinh toan';


--
-- Name: thread_order_results_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_order_results_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_order_results_id_seq OWNER TO postgres;

--
-- Name: thread_order_results_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_order_results_id_seq OWNED BY public.thread_order_results.id;


--
-- Name: thread_order_weeks; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_order_weeks (
    id integer NOT NULL,
    week_name character varying(50) NOT NULL,
    start_date date,
    end_date date,
    status character varying(20) DEFAULT 'draft'::character varying NOT NULL,
    notes text,
    created_by character varying(50),
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.thread_order_weeks OWNER TO postgres;

--
-- Name: TABLE thread_order_weeks; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_order_weeks IS 'Tuan dat chi - Weekly thread order periods';


--
-- Name: COLUMN thread_order_weeks.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_weeks.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN thread_order_weeks.week_name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_weeks.week_name IS 'Ten tuan (vd: Tuan 6 - 2026)';


--
-- Name: COLUMN thread_order_weeks.start_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_weeks.start_date IS 'Ngay bat dau tuan';


--
-- Name: COLUMN thread_order_weeks.end_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_weeks.end_date IS 'Ngay ket thuc tuan';


--
-- Name: COLUMN thread_order_weeks.status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_weeks.status IS 'Trang thai: draft, confirmed, calculated, closed';


--
-- Name: COLUMN thread_order_weeks.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_weeks.notes IS 'Ghi chu';


--
-- Name: COLUMN thread_order_weeks.created_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_weeks.created_by IS 'Nguoi tao';


--
-- Name: COLUMN thread_order_weeks.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_weeks.created_at IS 'Thoi diem tao ban ghi';


--
-- Name: COLUMN thread_order_weeks.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_order_weeks.updated_at IS 'Thoi diem cap nhat gan nhat';


--
-- Name: thread_order_weeks_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_order_weeks_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_order_weeks_id_seq OWNER TO postgres;

--
-- Name: thread_order_weeks_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_order_weeks_id_seq OWNED BY public.thread_order_weeks.id;


--
-- Name: thread_recovery; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_recovery (
    id integer NOT NULL,
    cone_id integer NOT NULL,
    original_meters numeric(12,4) NOT NULL,
    returned_weight_grams numeric(10,2),
    calculated_meters numeric(12,4),
    tare_weight_grams numeric(10,2) DEFAULT 10,
    consumption_meters numeric(12,4),
    status public.recovery_status DEFAULT 'INITIATED'::public.recovery_status,
    initiated_by character varying(100),
    weighed_by character varying(100),
    confirmed_by character varying(100),
    notes text,
    photo_url text,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    CONSTRAINT chk_thread_recovery_original_meters_positive CHECK ((original_meters > (0)::numeric)),
    CONSTRAINT chk_thread_recovery_tare_non_negative CHECK ((tare_weight_grams >= (0)::numeric)),
    CONSTRAINT chk_thread_recovery_weight_non_negative CHECK (((returned_weight_grams IS NULL) OR (returned_weight_grams >= (0)::numeric)))
);


ALTER TABLE public.thread_recovery OWNER TO postgres;

--
-- Name: TABLE thread_recovery; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_recovery IS 'Realtime enabled for recovery workflow';


--
-- Name: COLUMN thread_recovery.cone_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_recovery.cone_id IS 'Reference to recovered cone - Cuon chi duoc thu hoi';


--
-- Name: COLUMN thread_recovery.original_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_recovery.original_meters IS 'Meters on cone when issued to production - So met khi xuat san xuat';


--
-- Name: COLUMN thread_recovery.returned_weight_grams; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_recovery.returned_weight_grams IS 'Actual weight when returned (measured) - Khoi luong thuc te khi tra';


--
-- Name: COLUMN thread_recovery.calculated_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_recovery.calculated_meters IS 'Meters calculated from weight using density factor - So met tinh tu khoi luong';


--
-- Name: COLUMN thread_recovery.tare_weight_grams; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_recovery.tare_weight_grams IS 'Empty cone weight (default 10g) - Khoi luong vo cuon';


--
-- Name: COLUMN thread_recovery.consumption_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_recovery.consumption_meters IS 'Meters consumed (original - calculated) - So met da su dung';


--
-- Name: COLUMN thread_recovery.status; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_recovery.status IS 'Current recovery status - Trang thai thu hoi';


--
-- Name: COLUMN thread_recovery.initiated_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_recovery.initiated_by IS 'Production worker who initiated return - Cong nhan khoi tao tra';


--
-- Name: COLUMN thread_recovery.weighed_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_recovery.weighed_by IS 'Warehouse keeper who weighed - Nguoi can';


--
-- Name: COLUMN thread_recovery.confirmed_by; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_recovery.confirmed_by IS 'Supervisor who confirmed - Nguoi xac nhan';


--
-- Name: COLUMN thread_recovery.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_recovery.notes IS 'Additional notes or write-off reason - Ghi chu';


--
-- Name: COLUMN thread_recovery.photo_url; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_recovery.photo_url IS 'Verification photo URL - Anh xac nhan';


--
-- Name: thread_recovery_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_recovery_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_recovery_id_seq OWNER TO postgres;

--
-- Name: thread_recovery_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_recovery_id_seq OWNED BY public.thread_recovery.id;


--
-- Name: thread_stock; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_stock (
    id integer NOT NULL,
    thread_type_id integer NOT NULL,
    warehouse_id integer NOT NULL,
    lot_number character varying(50),
    qty_full_cones integer DEFAULT 0 NOT NULL,
    qty_partial_cones integer DEFAULT 0 NOT NULL,
    received_date date DEFAULT CURRENT_DATE,
    expiry_date date,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    CONSTRAINT chk_thread_stock_qty_full_positive CHECK ((qty_full_cones >= 0)),
    CONSTRAINT chk_thread_stock_qty_partial_positive CHECK ((qty_partial_cones >= 0))
);


ALTER TABLE public.thread_stock OWNER TO postgres;

--
-- Name: TABLE thread_stock; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_stock IS 'Ton kho chi - Thread stock by full/partial cones';


--
-- Name: COLUMN thread_stock.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_stock.id IS 'Khoa chinh tu tang';


--
-- Name: COLUMN thread_stock.thread_type_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_stock.thread_type_id IS 'FK den thread_types - Loai chi';


--
-- Name: COLUMN thread_stock.warehouse_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_stock.warehouse_id IS 'FK den warehouses - Kho chua';


--
-- Name: COLUMN thread_stock.lot_number; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_stock.lot_number IS 'So lo hang (tuy chon)';


--
-- Name: COLUMN thread_stock.qty_full_cones; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_stock.qty_full_cones IS 'So luong cuon nguyen (chua mo/su dung)';


--
-- Name: COLUMN thread_stock.qty_partial_cones; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_stock.qty_partial_cones IS 'So luong cuon le (da mo/su dung mot phan)';


--
-- Name: COLUMN thread_stock.received_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_stock.received_date IS 'Ngay nhap kho';


--
-- Name: COLUMN thread_stock.expiry_date; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_stock.expiry_date IS 'Ngay het han (neu co)';


--
-- Name: COLUMN thread_stock.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_stock.created_at IS 'Thoi diem tao ban ghi';


--
-- Name: COLUMN thread_stock.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_stock.updated_at IS 'Thoi diem cap nhat gan nhat';


--
-- Name: thread_stock_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_stock_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_stock_id_seq OWNER TO postgres;

--
-- Name: thread_stock_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_stock_id_seq OWNED BY public.thread_stock.id;


--
-- Name: thread_type_supplier; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_type_supplier (
    id integer NOT NULL,
    thread_type_id integer NOT NULL,
    supplier_id integer NOT NULL,
    supplier_item_code character varying(100) NOT NULL,
    unit_price numeric(12,4),
    is_active boolean DEFAULT true NOT NULL,
    notes text,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.thread_type_supplier OWNER TO postgres;

--
-- Name: TABLE thread_type_supplier; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_type_supplier IS 'Bng lin kt loi ch - nh cung cp vi m hng v gi ring - Thread Type-Supplier junction with supplier-specific item codes and pricing';


--
-- Name: COLUMN thread_type_supplier.id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_type_supplier.id IS 'Kha chnh t tng';


--
-- Name: COLUMN thread_type_supplier.thread_type_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_type_supplier.thread_type_id IS 'FK n bng thread_types - m loi ch';


--
-- Name: COLUMN thread_type_supplier.supplier_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_type_supplier.supplier_id IS 'FK n bng suppliers - m nh cung cp';


--
-- Name: COLUMN thread_type_supplier.supplier_item_code; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_type_supplier.supplier_item_code IS 'M hng ring ca NCC (vd: Astra-9700, Perma-9700) - Supplier-specific item code';


--
-- Name: COLUMN thread_type_supplier.unit_price; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_type_supplier.unit_price IS 'Gi mi n v theo NCC ny - Unit price from this supplier';


--
-- Name: COLUMN thread_type_supplier.is_active; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_type_supplier.is_active IS 'Trng thi hot ng - TRUE=ang cung cp, FALSE=ngng cung cp';


--
-- Name: COLUMN thread_type_supplier.notes; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_type_supplier.notes IS 'Ghi ch thm v mi quan h NCC-loi ch ny';


--
-- Name: COLUMN thread_type_supplier.created_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_type_supplier.created_at IS 'Thi im to bn ghi';


--
-- Name: COLUMN thread_type_supplier.updated_at; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_type_supplier.updated_at IS 'Thi im cp nht gn nht';


--
-- Name: thread_type_supplier_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_type_supplier_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_type_supplier_id_seq OWNER TO postgres;

--
-- Name: thread_type_supplier_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_type_supplier_id_seq OWNED BY public.thread_type_supplier.id;


--
-- Name: thread_types; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.thread_types (
    id integer NOT NULL,
    code character varying(50) NOT NULL,
    name character varying(200) NOT NULL,
    color character varying(50),
    color_code character varying(7),
    material public.thread_material DEFAULT 'polyester'::public.thread_material,
    tex_number numeric(8,2),
    density_grams_per_meter numeric(10,6) NOT NULL,
    meters_per_cone numeric(12,2),
    supplier character varying(200),
    reorder_level_meters numeric(12,2) DEFAULT 1000,
    lead_time_days integer DEFAULT 7,
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    color_id integer,
    supplier_id integer,
    color_supplier_id integer
);


ALTER TABLE public.thread_types OWNER TO postgres;

--
-- Name: TABLE thread_types; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.thread_types IS 'Master data for thread specifications - Bng d liu ch v thng s ch may';


--
-- Name: COLUMN thread_types.code; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.code IS 'Thread SKU code - M SKU ch (unique)';


--
-- Name: COLUMN thread_types.name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.name IS 'Display name - Tn hin th';


--
-- Name: COLUMN thread_types.color; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.color IS 'Color name - Tn mu sc';


--
-- Name: COLUMN thread_types.color_code; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.color_code IS 'Hex color code - M mu Hex (#RRGGBB)';


--
-- Name: COLUMN thread_types.material; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.material IS 'Thread material type - Loi cht liu ch';


--
-- Name: COLUMN thread_types.tex_number; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.tex_number IS 'TEX number (thread thickness) -  mnh TEX';


--
-- Name: COLUMN thread_types.density_grams_per_meter; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.density_grams_per_meter IS 'Weight-to-length conversion factor - H s chuyn i khi lng sang chiu di';


--
-- Name: COLUMN thread_types.meters_per_cone; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.meters_per_cone IS 'Standard meters per full cone - S mt tiu chun mi cun y';


--
-- Name: COLUMN thread_types.supplier; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.supplier IS 'Supplier name - Tn nh cung cp';


--
-- Name: COLUMN thread_types.reorder_level_meters; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.reorder_level_meters IS 'Reorder alert threshold in meters - Ngng cnh bo t hng li (mt)';


--
-- Name: COLUMN thread_types.lead_time_days; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.lead_time_days IS 'Supplier lead time in days - Thi gian giao hng NCC (ngy)';


--
-- Name: COLUMN thread_types.is_active; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.is_active IS 'Active status - Trng thi hot ng';


--
-- Name: COLUMN thread_types.color_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.color_id IS 'FK n bng colors (normalized) - nullable trong giai on migration';


--
-- Name: COLUMN thread_types.supplier_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.supplier_id IS 'FK n bng suppliers (normalized) - nullable trong giai on migration';


--
-- Name: COLUMN thread_types.color_supplier_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.thread_types.color_supplier_id IS 'FK n bng color_supplier - tham chiu gi mu-NCC (ty chn)';


--
-- Name: thread_types_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.thread_types_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.thread_types_id_seq OWNER TO postgres;

--
-- Name: thread_types_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.thread_types_id_seq OWNED BY public.thread_types.id;


--
-- Name: v_issue_reconciliation; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.v_issue_reconciliation AS
 SELECT ir.po_id,
    po.po_number,
    ir.style_id,
    s.style_code,
    ir.color_id,
    c.name AS color_name,
    ir.thread_type_id,
    tt.name AS thread_name,
    ir.quota_meters,
    COALESCE(sum(ii.quantity_meters), (0)::numeric) AS total_issued_meters,
    COALESCE(sum(ret.calculated_remaining_meters), (0)::numeric) AS total_returned_meters,
    (COALESCE(sum(ii.quantity_meters), (0)::numeric) - COALESCE(sum(ret.calculated_remaining_meters), (0)::numeric)) AS consumed_meters,
        CASE
            WHEN (ir.quota_meters > (0)::numeric) THEN round((((COALESCE(sum(ii.quantity_meters), (0)::numeric) - COALESCE(sum(ret.calculated_remaining_meters), (0)::numeric)) / ir.quota_meters) * (100)::numeric), 2)
            ELSE (0)::numeric
        END AS consumption_percentage,
    count(
        CASE
            WHEN ((ii.over_limit_notes IS NOT NULL) AND (ii.over_limit_notes <> ''::text)) THEN 1
            ELSE NULL::integer
        END) AS over_limit_count
   FROM ((((((public.thread_issue_requests ir
     LEFT JOIN public.purchase_orders po ON ((ir.po_id = po.id)))
     LEFT JOIN public.styles s ON ((ir.style_id = s.id)))
     LEFT JOIN public.colors c ON ((ir.color_id = c.id)))
     LEFT JOIN public.thread_types tt ON ((ir.thread_type_id = tt.id)))
     LEFT JOIN public.thread_issue_items ii ON ((ir.id = ii.issue_request_id)))
     LEFT JOIN public.thread_issue_returns ret ON ((ii.id = ret.issue_item_id)))
  GROUP BY ir.po_id, po.po_number, ir.style_id, s.style_code, ir.color_id, c.name, ir.thread_type_id, tt.name, ir.quota_meters;


ALTER VIEW public.v_issue_reconciliation OWNER TO postgres;

--
-- Name: VIEW v_issue_reconciliation; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON VIEW public.v_issue_reconciliation IS 'View doi soat xuat kho - Issue reconciliation view comparing quota vs issued vs returned';


--
-- Name: v_issue_reconciliation_v2; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.v_issue_reconciliation_v2 AS
 WITH partial_ratio AS (
         SELECT COALESCE(( SELECT (system_settings.value)::numeric AS value
                   FROM public.system_settings
                  WHERE ((system_settings.key)::text = 'partial_cone_ratio'::text)), 0.3) AS ratio
        )
 SELECT ti.id AS issue_id,
    ti.issue_code,
    ti.department,
    ti.status AS issue_status,
    ti.created_by,
    ti.created_at AS issue_date,
    til.id AS line_id,
    til.po_id,
    po.po_number,
    til.style_id,
    s.style_code,
    til.color_id,
    c.name AS color_name,
    til.thread_type_id,
    tt.code AS thread_code,
    tt.name AS thread_name,
    tt.color AS thread_color,
    til.quota_cones,
    til.issued_full,
    til.issued_partial,
    til.returned_full,
    til.returned_partial,
    (((til.issued_full - til.returned_full))::numeric + (((til.issued_partial - til.returned_partial))::numeric * pr.ratio)) AS consumed_equivalent_cones,
    (til.issued_full - til.returned_full) AS consumed_full_cones,
    (til.issued_partial - til.returned_partial) AS consumed_partial_cones,
        CASE
            WHEN ((til.quota_cones IS NOT NULL) AND (til.quota_cones > (0)::numeric)) THEN round((((((til.issued_full - til.returned_full))::numeric + (((til.issued_partial - til.returned_partial))::numeric * pr.ratio)) / til.quota_cones) * (100)::numeric), 2)
            ELSE NULL::numeric
        END AS consumption_percentage,
        CASE
            WHEN ((til.quota_cones IS NOT NULL) AND (til.quota_cones > (0)::numeric)) THEN ((((til.issued_full - til.returned_full))::numeric + (((til.issued_partial - til.returned_partial))::numeric * pr.ratio)) > til.quota_cones)
            ELSE false
        END AS is_over_quota,
    til.over_quota_notes,
    pr.ratio AS partial_cone_ratio
   FROM ((((((public.thread_issues ti
     JOIN public.thread_issue_lines til ON ((ti.id = til.issue_id)))
     CROSS JOIN partial_ratio pr)
     LEFT JOIN public.purchase_orders po ON ((til.po_id = po.id)))
     LEFT JOIN public.styles s ON ((til.style_id = s.id)))
     LEFT JOIN public.colors c ON ((til.color_id = c.id)))
     LEFT JOIN public.thread_types tt ON ((til.thread_type_id = tt.id)));


ALTER VIEW public.v_issue_reconciliation_v2 OWNER TO postgres;

--
-- Name: VIEW v_issue_reconciliation_v2; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON VIEW public.v_issue_reconciliation_v2 IS 'View doi soat xuat kho v2 - Issue reconciliation with cone-based tracking';


--
-- Name: warehouses; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.warehouses (
    id integer NOT NULL,
    code character varying(20) NOT NULL,
    name character varying(100) NOT NULL,
    location character varying(200),
    is_active boolean DEFAULT true,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    parent_id integer,
    type character varying(20) DEFAULT 'STORAGE'::character varying,
    sort_order integer DEFAULT 0,
    CONSTRAINT chk_warehouses_no_self_parent CHECK (((parent_id IS NULL) OR (parent_id <> id))),
    CONSTRAINT chk_warehouses_type CHECK (((type)::text = ANY ((ARRAY['LOCATION'::character varying, 'STORAGE'::character varying])::text[])))
);


ALTER TABLE public.warehouses OWNER TO postgres;

--
-- Name: TABLE warehouses; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TABLE public.warehouses IS 'Storage locations for thread inventory management';


--
-- Name: COLUMN warehouses.code; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.warehouses.code IS 'Unique warehouse code (e.g., WH-01, WH-MAIN)';


--
-- Name: COLUMN warehouses.name; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.warehouses.name IS 'Display name for the warehouse';


--
-- Name: COLUMN warehouses.location; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.warehouses.location IS 'Physical address or location description';


--
-- Name: COLUMN warehouses.is_active; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.warehouses.is_active IS 'Whether the warehouse is currently active';


--
-- Name: COLUMN warehouses.parent_id; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.warehouses.parent_id IS 'Parent warehouse ID. NULL for LOCATION (top-level), references LOCATION for STORAGE';


--
-- Name: COLUMN warehouses.type; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.warehouses.type IS 'Warehouse type: LOCATION (site/a im) or STORAGE (kho lu tr thc t)';


--
-- Name: COLUMN warehouses.sort_order; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON COLUMN public.warehouses.sort_order IS 'Display order within same parent level (lower = first)';


--
-- Name: v_stock_summary; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.v_stock_summary AS
 SELECT ts.thread_type_id,
    tt.code AS thread_code,
    tt.name AS thread_name,
    tt.color AS thread_color,
    ts.warehouse_id,
    w.code AS warehouse_code,
    w.name AS warehouse_name,
    sum(ts.qty_full_cones) AS total_full_cones,
    sum(ts.qty_partial_cones) AS total_partial_cones,
    ((sum(ts.qty_full_cones))::numeric + ((sum(ts.qty_partial_cones))::numeric * COALESCE(( SELECT (system_settings.value)::numeric AS value
           FROM public.system_settings
          WHERE ((system_settings.key)::text = 'partial_cone_ratio'::text)), 0.3))) AS total_equivalent_cones
   FROM ((public.thread_stock ts
     JOIN public.thread_types tt ON ((ts.thread_type_id = tt.id)))
     JOIN public.warehouses w ON ((ts.warehouse_id = w.id)))
  GROUP BY ts.thread_type_id, tt.code, tt.name, tt.color, ts.warehouse_id, w.code, w.name;


ALTER VIEW public.v_stock_summary OWNER TO postgres;

--
-- Name: VIEW v_stock_summary; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON VIEW public.v_stock_summary IS 'View tong hop ton kho - Stock summary by thread type and warehouse';


--
-- Name: warehouses_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.warehouses_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.warehouses_id_seq OWNER TO postgres;

--
-- Name: warehouses_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.warehouses_id_seq OWNED BY public.warehouses.id;


--
-- Name: messages; Type: TABLE; Schema: realtime; Owner: supabase_realtime_admin
--

CREATE TABLE realtime.messages (
    topic text NOT NULL,
    extension text NOT NULL,
    payload jsonb,
    event text,
    private boolean DEFAULT false,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    inserted_at timestamp without time zone DEFAULT now() NOT NULL,
    id uuid DEFAULT gen_random_uuid() NOT NULL
)
PARTITION BY RANGE (inserted_at);


ALTER TABLE realtime.messages OWNER TO supabase_realtime_admin;

--
-- Name: messages_2026_02_09; Type: TABLE; Schema: realtime; Owner: supabase_admin
--

CREATE TABLE realtime.messages_2026_02_09 (
    topic text NOT NULL,
    extension text NOT NULL,
    payload jsonb,
    event text,
    private boolean DEFAULT false,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    inserted_at timestamp without time zone DEFAULT now() NOT NULL,
    id uuid DEFAULT gen_random_uuid() NOT NULL
);


ALTER TABLE realtime.messages_2026_02_09 OWNER TO supabase_admin;

--
-- Name: messages_2026_02_10; Type: TABLE; Schema: realtime; Owner: supabase_admin
--

CREATE TABLE realtime.messages_2026_02_10 (
    topic text NOT NULL,
    extension text NOT NULL,
    payload jsonb,
    event text,
    private boolean DEFAULT false,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    inserted_at timestamp without time zone DEFAULT now() NOT NULL,
    id uuid DEFAULT gen_random_uuid() NOT NULL
);


ALTER TABLE realtime.messages_2026_02_10 OWNER TO supabase_admin;

--
-- Name: messages_2026_02_11; Type: TABLE; Schema: realtime; Owner: supabase_admin
--

CREATE TABLE realtime.messages_2026_02_11 (
    topic text NOT NULL,
    extension text NOT NULL,
    payload jsonb,
    event text,
    private boolean DEFAULT false,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    inserted_at timestamp without time zone DEFAULT now() NOT NULL,
    id uuid DEFAULT gen_random_uuid() NOT NULL
);


ALTER TABLE realtime.messages_2026_02_11 OWNER TO supabase_admin;

--
-- Name: messages_2026_02_12; Type: TABLE; Schema: realtime; Owner: supabase_admin
--

CREATE TABLE realtime.messages_2026_02_12 (
    topic text NOT NULL,
    extension text NOT NULL,
    payload jsonb,
    event text,
    private boolean DEFAULT false,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    inserted_at timestamp without time zone DEFAULT now() NOT NULL,
    id uuid DEFAULT gen_random_uuid() NOT NULL
);


ALTER TABLE realtime.messages_2026_02_12 OWNER TO supabase_admin;

--
-- Name: messages_2026_02_13; Type: TABLE; Schema: realtime; Owner: supabase_admin
--

CREATE TABLE realtime.messages_2026_02_13 (
    topic text NOT NULL,
    extension text NOT NULL,
    payload jsonb,
    event text,
    private boolean DEFAULT false,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    inserted_at timestamp without time zone DEFAULT now() NOT NULL,
    id uuid DEFAULT gen_random_uuid() NOT NULL
);


ALTER TABLE realtime.messages_2026_02_13 OWNER TO supabase_admin;

--
-- Name: messages_2026_02_14; Type: TABLE; Schema: realtime; Owner: supabase_admin
--

CREATE TABLE realtime.messages_2026_02_14 (
    topic text NOT NULL,
    extension text NOT NULL,
    payload jsonb,
    event text,
    private boolean DEFAULT false,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    inserted_at timestamp without time zone DEFAULT now() NOT NULL,
    id uuid DEFAULT gen_random_uuid() NOT NULL
);


ALTER TABLE realtime.messages_2026_02_14 OWNER TO supabase_admin;

--
-- Name: messages_2026_02_15; Type: TABLE; Schema: realtime; Owner: supabase_admin
--

CREATE TABLE realtime.messages_2026_02_15 (
    topic text NOT NULL,
    extension text NOT NULL,
    payload jsonb,
    event text,
    private boolean DEFAULT false,
    updated_at timestamp without time zone DEFAULT now() NOT NULL,
    inserted_at timestamp without time zone DEFAULT now() NOT NULL,
    id uuid DEFAULT gen_random_uuid() NOT NULL
);


ALTER TABLE realtime.messages_2026_02_15 OWNER TO supabase_admin;

--
-- Name: schema_migrations; Type: TABLE; Schema: realtime; Owner: supabase_admin
--

CREATE TABLE realtime.schema_migrations (
    version bigint NOT NULL,
    inserted_at timestamp(0) without time zone
);


ALTER TABLE realtime.schema_migrations OWNER TO supabase_admin;

--
-- Name: subscription; Type: TABLE; Schema: realtime; Owner: supabase_admin
--

CREATE TABLE realtime.subscription (
    id bigint NOT NULL,
    subscription_id uuid NOT NULL,
    entity regclass NOT NULL,
    filters realtime.user_defined_filter[] DEFAULT '{}'::realtime.user_defined_filter[] NOT NULL,
    claims jsonb NOT NULL,
    claims_role regrole GENERATED ALWAYS AS (realtime.to_regrole((claims ->> 'role'::text))) STORED NOT NULL,
    created_at timestamp without time zone DEFAULT timezone('utc'::text, now()) NOT NULL,
    action_filter text DEFAULT '*'::text,
    CONSTRAINT subscription_action_filter_check CHECK ((action_filter = ANY (ARRAY['*'::text, 'INSERT'::text, 'UPDATE'::text, 'DELETE'::text])))
);


ALTER TABLE realtime.subscription OWNER TO supabase_admin;

--
-- Name: subscription_id_seq; Type: SEQUENCE; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE realtime.subscription ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME realtime.subscription_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: buckets; Type: TABLE; Schema: storage; Owner: supabase_storage_admin
--

CREATE TABLE storage.buckets (
    id text NOT NULL,
    name text NOT NULL,
    owner uuid,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    public boolean DEFAULT false,
    avif_autodetection boolean DEFAULT false,
    file_size_limit bigint,
    allowed_mime_types text[],
    owner_id text,
    type storage.buckettype DEFAULT 'STANDARD'::storage.buckettype NOT NULL
);


ALTER TABLE storage.buckets OWNER TO supabase_storage_admin;

--
-- Name: COLUMN buckets.owner; Type: COMMENT; Schema: storage; Owner: supabase_storage_admin
--

COMMENT ON COLUMN storage.buckets.owner IS 'Field is deprecated, use owner_id instead';


--
-- Name: buckets_analytics; Type: TABLE; Schema: storage; Owner: supabase_storage_admin
--

CREATE TABLE storage.buckets_analytics (
    name text NOT NULL,
    type storage.buckettype DEFAULT 'ANALYTICS'::storage.buckettype NOT NULL,
    format text DEFAULT 'ICEBERG'::text NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL,
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    deleted_at timestamp with time zone
);


ALTER TABLE storage.buckets_analytics OWNER TO supabase_storage_admin;

--
-- Name: buckets_vectors; Type: TABLE; Schema: storage; Owner: supabase_storage_admin
--

CREATE TABLE storage.buckets_vectors (
    id text NOT NULL,
    type storage.buckettype DEFAULT 'VECTOR'::storage.buckettype NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE storage.buckets_vectors OWNER TO supabase_storage_admin;

--
-- Name: iceberg_namespaces; Type: TABLE; Schema: storage; Owner: supabase_storage_admin
--

CREATE TABLE storage.iceberg_namespaces (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    bucket_name text NOT NULL,
    name text NOT NULL COLLATE pg_catalog."C",
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL,
    metadata jsonb DEFAULT '{}'::jsonb NOT NULL,
    catalog_id uuid NOT NULL
);


ALTER TABLE storage.iceberg_namespaces OWNER TO supabase_storage_admin;

--
-- Name: iceberg_tables; Type: TABLE; Schema: storage; Owner: supabase_storage_admin
--

CREATE TABLE storage.iceberg_tables (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    namespace_id uuid NOT NULL,
    bucket_name text NOT NULL,
    name text NOT NULL COLLATE pg_catalog."C",
    location text NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL,
    remote_table_id text,
    shard_key text,
    shard_id text,
    catalog_id uuid NOT NULL
);


ALTER TABLE storage.iceberg_tables OWNER TO supabase_storage_admin;

--
-- Name: migrations; Type: TABLE; Schema: storage; Owner: supabase_storage_admin
--

CREATE TABLE storage.migrations (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    hash character varying(40) NOT NULL,
    executed_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);


ALTER TABLE storage.migrations OWNER TO supabase_storage_admin;

--
-- Name: objects; Type: TABLE; Schema: storage; Owner: supabase_storage_admin
--

CREATE TABLE storage.objects (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    bucket_id text,
    name text,
    owner uuid,
    created_at timestamp with time zone DEFAULT now(),
    updated_at timestamp with time zone DEFAULT now(),
    last_accessed_at timestamp with time zone DEFAULT now(),
    metadata jsonb,
    path_tokens text[] GENERATED ALWAYS AS (string_to_array(name, '/'::text)) STORED,
    version text,
    owner_id text,
    user_metadata jsonb
);


ALTER TABLE storage.objects OWNER TO supabase_storage_admin;

--
-- Name: COLUMN objects.owner; Type: COMMENT; Schema: storage; Owner: supabase_storage_admin
--

COMMENT ON COLUMN storage.objects.owner IS 'Field is deprecated, use owner_id instead';


--
-- Name: s3_multipart_uploads; Type: TABLE; Schema: storage; Owner: supabase_storage_admin
--

CREATE TABLE storage.s3_multipart_uploads (
    id text NOT NULL,
    in_progress_size bigint DEFAULT 0 NOT NULL,
    upload_signature text NOT NULL,
    bucket_id text NOT NULL,
    key text NOT NULL COLLATE pg_catalog."C",
    version text NOT NULL,
    owner_id text,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    user_metadata jsonb
);


ALTER TABLE storage.s3_multipart_uploads OWNER TO supabase_storage_admin;

--
-- Name: s3_multipart_uploads_parts; Type: TABLE; Schema: storage; Owner: supabase_storage_admin
--

CREATE TABLE storage.s3_multipart_uploads_parts (
    id uuid DEFAULT gen_random_uuid() NOT NULL,
    upload_id text NOT NULL,
    size bigint DEFAULT 0 NOT NULL,
    part_number integer NOT NULL,
    bucket_id text NOT NULL,
    key text NOT NULL COLLATE pg_catalog."C",
    etag text NOT NULL,
    owner_id text,
    version text NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE storage.s3_multipart_uploads_parts OWNER TO supabase_storage_admin;

--
-- Name: vector_indexes; Type: TABLE; Schema: storage; Owner: supabase_storage_admin
--

CREATE TABLE storage.vector_indexes (
    id text DEFAULT gen_random_uuid() NOT NULL,
    name text NOT NULL COLLATE pg_catalog."C",
    bucket_id text NOT NULL,
    data_type text NOT NULL,
    dimension integer NOT NULL,
    distance_metric text NOT NULL,
    metadata_configuration jsonb,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE storage.vector_indexes OWNER TO supabase_storage_admin;

--
-- Name: hooks; Type: TABLE; Schema: supabase_functions; Owner: supabase_functions_admin
--

CREATE TABLE supabase_functions.hooks (
    id bigint NOT NULL,
    hook_table_id integer NOT NULL,
    hook_name text NOT NULL,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    request_id bigint
);


ALTER TABLE supabase_functions.hooks OWNER TO supabase_functions_admin;

--
-- Name: TABLE hooks; Type: COMMENT; Schema: supabase_functions; Owner: supabase_functions_admin
--

COMMENT ON TABLE supabase_functions.hooks IS 'Supabase Functions Hooks: Audit trail for triggered hooks.';


--
-- Name: hooks_id_seq; Type: SEQUENCE; Schema: supabase_functions; Owner: supabase_functions_admin
--

CREATE SEQUENCE supabase_functions.hooks_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE supabase_functions.hooks_id_seq OWNER TO supabase_functions_admin;

--
-- Name: hooks_id_seq; Type: SEQUENCE OWNED BY; Schema: supabase_functions; Owner: supabase_functions_admin
--

ALTER SEQUENCE supabase_functions.hooks_id_seq OWNED BY supabase_functions.hooks.id;


--
-- Name: migrations; Type: TABLE; Schema: supabase_functions; Owner: supabase_functions_admin
--

CREATE TABLE supabase_functions.migrations (
    version text NOT NULL,
    inserted_at timestamp with time zone DEFAULT now() NOT NULL
);


ALTER TABLE supabase_functions.migrations OWNER TO supabase_functions_admin;

--
-- Name: schema_migrations; Type: TABLE; Schema: supabase_migrations; Owner: postgres
--

CREATE TABLE supabase_migrations.schema_migrations (
    version text NOT NULL,
    statements text[],
    name text
);


ALTER TABLE supabase_migrations.schema_migrations OWNER TO postgres;

--
-- Name: messages_2026_02_09; Type: TABLE ATTACH; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages ATTACH PARTITION realtime.messages_2026_02_09 FOR VALUES FROM ('2026-02-09 00:00:00') TO ('2026-02-10 00:00:00');


--
-- Name: messages_2026_02_10; Type: TABLE ATTACH; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages ATTACH PARTITION realtime.messages_2026_02_10 FOR VALUES FROM ('2026-02-10 00:00:00') TO ('2026-02-11 00:00:00');


--
-- Name: messages_2026_02_11; Type: TABLE ATTACH; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages ATTACH PARTITION realtime.messages_2026_02_11 FOR VALUES FROM ('2026-02-11 00:00:00') TO ('2026-02-12 00:00:00');


--
-- Name: messages_2026_02_12; Type: TABLE ATTACH; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages ATTACH PARTITION realtime.messages_2026_02_12 FOR VALUES FROM ('2026-02-12 00:00:00') TO ('2026-02-13 00:00:00');


--
-- Name: messages_2026_02_13; Type: TABLE ATTACH; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages ATTACH PARTITION realtime.messages_2026_02_13 FOR VALUES FROM ('2026-02-13 00:00:00') TO ('2026-02-14 00:00:00');


--
-- Name: messages_2026_02_14; Type: TABLE ATTACH; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages ATTACH PARTITION realtime.messages_2026_02_14 FOR VALUES FROM ('2026-02-14 00:00:00') TO ('2026-02-15 00:00:00');


--
-- Name: messages_2026_02_15; Type: TABLE ATTACH; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages ATTACH PARTITION realtime.messages_2026_02_15 FOR VALUES FROM ('2026-02-15 00:00:00') TO ('2026-02-16 00:00:00');


--
-- Name: refresh_tokens id; Type: DEFAULT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.refresh_tokens ALTER COLUMN id SET DEFAULT nextval('auth.refresh_tokens_id_seq'::regclass);


--
-- Name: batch_transactions id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.batch_transactions ALTER COLUMN id SET DEFAULT nextval('public.batch_transactions_id_seq'::regclass);


--
-- Name: color_supplier id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.color_supplier ALTER COLUMN id SET DEFAULT nextval('public.color_supplier_id_seq'::regclass);


--
-- Name: colors id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.colors ALTER COLUMN id SET DEFAULT nextval('public.colors_id_seq'::regclass);


--
-- Name: employee_permissions id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_permissions ALTER COLUMN id SET DEFAULT nextval('public.employee_permissions_id_seq'::regclass);


--
-- Name: employee_refresh_tokens id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_refresh_tokens ALTER COLUMN id SET DEFAULT nextval('public.employee_refresh_tokens_id_seq'::regclass);


--
-- Name: employee_roles id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_roles ALTER COLUMN id SET DEFAULT nextval('public.employee_roles_id_seq'::regclass);


--
-- Name: employees id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employees ALTER COLUMN id SET DEFAULT nextval('public.employees_id_seq'::regclass);


--
-- Name: lots id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.lots ALTER COLUMN id SET DEFAULT nextval('public.lots_id_seq'::regclass);


--
-- Name: permissions id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.permissions ALTER COLUMN id SET DEFAULT nextval('public.permissions_id_seq'::regclass);


--
-- Name: po_items id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.po_items ALTER COLUMN id SET DEFAULT nextval('public.po_items_id_seq'::regclass);


--
-- Name: purchase_orders id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.purchase_orders ALTER COLUMN id SET DEFAULT nextval('public.purchase_orders_id_seq'::regclass);


--
-- Name: role_permissions id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.role_permissions ALTER COLUMN id SET DEFAULT nextval('public.role_permissions_id_seq'::regclass);


--
-- Name: roles id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles ALTER COLUMN id SET DEFAULT nextval('public.roles_id_seq'::regclass);


--
-- Name: skus id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.skus ALTER COLUMN id SET DEFAULT nextval('public.skus_id_seq'::regclass);


--
-- Name: style_color_thread_specs id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.style_color_thread_specs ALTER COLUMN id SET DEFAULT nextval('public.style_color_thread_specs_id_seq'::regclass);


--
-- Name: style_thread_specs id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.style_thread_specs ALTER COLUMN id SET DEFAULT nextval('public.style_thread_specs_id_seq'::regclass);


--
-- Name: styles id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.styles ALTER COLUMN id SET DEFAULT nextval('public.styles_id_seq'::regclass);


--
-- Name: suppliers id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.suppliers ALTER COLUMN id SET DEFAULT nextval('public.suppliers_id_seq'::regclass);


--
-- Name: system_settings id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.system_settings ALTER COLUMN id SET DEFAULT nextval('public.system_settings_id_seq'::regclass);


--
-- Name: thread_allocation_cones id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_allocation_cones ALTER COLUMN id SET DEFAULT nextval('public.thread_allocation_cones_id_seq'::regclass);


--
-- Name: thread_allocations id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_allocations ALTER COLUMN id SET DEFAULT nextval('public.thread_allocations_id_seq'::regclass);


--
-- Name: thread_audit_log id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_audit_log ALTER COLUMN id SET DEFAULT nextval('public.thread_audit_log_id_seq'::regclass);


--
-- Name: thread_conflict_allocations id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_conflict_allocations ALTER COLUMN id SET DEFAULT nextval('public.thread_conflict_allocations_id_seq'::regclass);


--
-- Name: thread_conflicts id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_conflicts ALTER COLUMN id SET DEFAULT nextval('public.thread_conflicts_id_seq'::regclass);


--
-- Name: thread_inventory id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_inventory ALTER COLUMN id SET DEFAULT nextval('public.thread_inventory_id_seq'::regclass);


--
-- Name: thread_issue_items id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_items ALTER COLUMN id SET DEFAULT nextval('public.thread_issue_items_id_seq'::regclass);


--
-- Name: thread_issue_lines id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_lines ALTER COLUMN id SET DEFAULT nextval('public.thread_issue_lines_id_seq'::regclass);


--
-- Name: thread_issue_requests id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_requests ALTER COLUMN id SET DEFAULT nextval('public.thread_issue_requests_id_seq'::regclass);


--
-- Name: thread_issue_returns id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_returns ALTER COLUMN id SET DEFAULT nextval('public.thread_issue_returns_id_seq'::regclass);


--
-- Name: thread_issues id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issues ALTER COLUMN id SET DEFAULT nextval('public.thread_issues_id_seq'::regclass);


--
-- Name: thread_movements id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_movements ALTER COLUMN id SET DEFAULT nextval('public.thread_movements_id_seq'::regclass);


--
-- Name: thread_order_deliveries id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_deliveries ALTER COLUMN id SET DEFAULT nextval('public.thread_order_deliveries_id_seq'::regclass);


--
-- Name: thread_order_items id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_items ALTER COLUMN id SET DEFAULT nextval('public.thread_order_items_id_seq'::regclass);


--
-- Name: thread_order_results id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_results ALTER COLUMN id SET DEFAULT nextval('public.thread_order_results_id_seq'::regclass);


--
-- Name: thread_order_weeks id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_weeks ALTER COLUMN id SET DEFAULT nextval('public.thread_order_weeks_id_seq'::regclass);


--
-- Name: thread_recovery id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_recovery ALTER COLUMN id SET DEFAULT nextval('public.thread_recovery_id_seq'::regclass);


--
-- Name: thread_stock id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_stock ALTER COLUMN id SET DEFAULT nextval('public.thread_stock_id_seq'::regclass);


--
-- Name: thread_type_supplier id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_type_supplier ALTER COLUMN id SET DEFAULT nextval('public.thread_type_supplier_id_seq'::regclass);


--
-- Name: thread_types id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_types ALTER COLUMN id SET DEFAULT nextval('public.thread_types_id_seq'::regclass);


--
-- Name: warehouses id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.warehouses ALTER COLUMN id SET DEFAULT nextval('public.warehouses_id_seq'::regclass);


--
-- Name: hooks id; Type: DEFAULT; Schema: supabase_functions; Owner: supabase_functions_admin
--

ALTER TABLE ONLY supabase_functions.hooks ALTER COLUMN id SET DEFAULT nextval('supabase_functions.hooks_id_seq'::regclass);


--
-- Data for Name: extensions; Type: TABLE DATA; Schema: _realtime; Owner: supabase_admin
--

COPY _realtime.extensions (id, type, settings, tenant_external_id, inserted_at, updated_at) FROM stdin;
3a35a1ed-be0c-41db-919f-71bb021db07a	postgres_cdc_rls	{"region": "us-east-1", "db_host": "sXy/++n+kxlWBT3iaMB+JOfCmN2N00Wt3a3oEcraMCI=", "db_name": "sWBpZNdjggEPTQVlI52Zfw==", "db_port": "+enMDFi1J/3IrrquHHwUmA==", "db_user": "uxbEq/zz8DXVD53TOI1zmw==", "slot_name": "supabase_realtime_replication_slot", "db_password": "sWBpZNdjggEPTQVlI52Zfw==", "publication": "supabase_realtime", "ssl_enforced": false, "poll_interval_ms": 100, "poll_max_changes": 100, "poll_max_record_bytes": 1048576}	realtime-dev	2026-02-12 09:59:17	2026-02-12 09:59:17
\.


--
-- Data for Name: schema_migrations; Type: TABLE DATA; Schema: _realtime; Owner: supabase_admin
--

COPY _realtime.schema_migrations (version, inserted_at) FROM stdin;
20210706140551	2026-02-10 17:00:54
20220329161857	2026-02-10 17:00:54
20220410212326	2026-02-10 17:00:54
20220506102948	2026-02-10 17:00:54
20220527210857	2026-02-10 17:00:54
20220815211129	2026-02-10 17:00:54
20220815215024	2026-02-10 17:00:54
20220818141501	2026-02-10 17:00:54
20221018173709	2026-02-10 17:00:54
20221102172703	2026-02-10 17:00:54
20221223010058	2026-02-10 17:00:54
20230110180046	2026-02-10 17:00:54
20230810220907	2026-02-10 17:00:54
20230810220924	2026-02-10 17:00:54
20231024094642	2026-02-10 17:00:54
20240306114423	2026-02-10 17:00:54
20240418082835	2026-02-10 17:00:54
20240625211759	2026-02-10 17:00:54
20240704172020	2026-02-10 17:00:54
20240902173232	2026-02-10 17:00:54
20241106103258	2026-02-10 17:00:54
20250424203323	2026-02-10 17:00:54
20250613072131	2026-02-10 17:00:54
20250711044927	2026-02-10 17:00:54
20250811121559	2026-02-10 17:00:54
20250926223044	2026-02-10 17:00:54
20251204170944	2026-02-10 17:00:54
20251218000543	2026-02-10 17:00:54
\.


--
-- Data for Name: tenants; Type: TABLE DATA; Schema: _realtime; Owner: supabase_admin
--

COPY _realtime.tenants (id, name, external_id, jwt_secret, max_concurrent_users, inserted_at, updated_at, max_events_per_second, postgres_cdc_default, max_bytes_per_second, max_channels_per_client, max_joins_per_second, suspend, jwt_jwks, notify_private_alpha, private_only, migrations_ran, broadcast_adapter, max_presence_events_per_second, max_payload_size_in_kb) FROM stdin;
24431632-208a-4d80-93b7-78ca97106859	realtime-dev	realtime-dev	iNjicxc4+llvc9wovDvqymwfnj9teWMlyOIbJ8Fh6j2WNU8CIJ2ZgjR6MUIKqSmeDmvpsKLsZ9jgXJmQPpwL8w==	200	2026-02-12 09:59:17	2026-02-12 09:59:17	100	postgres_cdc_rls	100000	100	100	f	{"keys": [{"x": "M5Sjqn5zwC9Kl1zVfUUGvv9boQjCGd45G8sdopBExB4", "y": "P6IXMvA2WYXSHSOMTBH2jsw_9rrzGy89FjPf6oOsIxQ", "alg": "ES256", "crv": "P-256", "ext": true, "kid": "b81269f1-21d8-4f2e-b719-c2240a840d90", "kty": "EC", "use": "sig", "key_ops": ["verify"]}, {"k": "c3VwZXItc2VjcmV0LWp3dC10b2tlbi13aXRoLWF0LWxlYXN0LTMyLWNoYXJhY3RlcnMtbG9uZw", "kty": "oct"}]}	f	f	65	gen_rpc	1000	3000
\.


--
-- Data for Name: audit_log_entries; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.audit_log_entries (instance_id, id, payload, created_at, ip_address) FROM stdin;
\.


--
-- Data for Name: flow_state; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.flow_state (id, user_id, auth_code, code_challenge_method, code_challenge, provider_type, provider_access_token, provider_refresh_token, created_at, updated_at, authentication_method, auth_code_issued_at, invite_token, referrer, oauth_client_state_id, linking_target_id, email_optional) FROM stdin;
\.


--
-- Data for Name: identities; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.identities (provider_id, user_id, identity_data, provider, last_sign_in_at, created_at, updated_at, id) FROM stdin;
\.


--
-- Data for Name: instances; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.instances (id, uuid, raw_base_config, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: mfa_amr_claims; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.mfa_amr_claims (session_id, created_at, updated_at, authentication_method, id) FROM stdin;
\.


--
-- Data for Name: mfa_challenges; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.mfa_challenges (id, factor_id, created_at, verified_at, ip_address, otp_code, web_authn_session_data) FROM stdin;
\.


--
-- Data for Name: mfa_factors; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.mfa_factors (id, user_id, friendly_name, factor_type, status, created_at, updated_at, secret, phone, last_challenged_at, web_authn_credential, web_authn_aaguid, last_webauthn_challenge_data) FROM stdin;
\.


--
-- Data for Name: oauth_authorizations; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.oauth_authorizations (id, authorization_id, client_id, user_id, redirect_uri, scope, state, resource, code_challenge, code_challenge_method, response_type, status, authorization_code, created_at, expires_at, approved_at, nonce) FROM stdin;
\.


--
-- Data for Name: oauth_client_states; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.oauth_client_states (id, provider_type, code_verifier, created_at) FROM stdin;
\.


--
-- Data for Name: oauth_clients; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.oauth_clients (id, client_secret_hash, registration_type, redirect_uris, grant_types, client_name, client_uri, logo_uri, created_at, updated_at, deleted_at, client_type, token_endpoint_auth_method) FROM stdin;
\.


--
-- Data for Name: oauth_consents; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.oauth_consents (id, user_id, client_id, scopes, granted_at, revoked_at) FROM stdin;
\.


--
-- Data for Name: one_time_tokens; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.one_time_tokens (id, user_id, token_type, token_hash, relates_to, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: refresh_tokens; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.refresh_tokens (instance_id, id, token, user_id, revoked, created_at, updated_at, parent, session_id) FROM stdin;
\.


--
-- Data for Name: saml_providers; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.saml_providers (id, sso_provider_id, entity_id, metadata_xml, metadata_url, attribute_mapping, created_at, updated_at, name_id_format) FROM stdin;
\.


--
-- Data for Name: saml_relay_states; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.saml_relay_states (id, sso_provider_id, request_id, for_email, redirect_to, created_at, updated_at, flow_state_id) FROM stdin;
\.


--
-- Data for Name: schema_migrations; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.schema_migrations (version) FROM stdin;
20171026211738
20171026211808
20171026211834
20180103212743
20180108183307
20180119214651
20180125194653
00
20210710035447
20210722035447
20210730183235
20210909172000
20210927181326
20211122151130
20211124214934
20211202183645
20220114185221
20220114185340
20220224000811
20220323170000
20220429102000
20220531120530
20220614074223
20220811173540
20221003041349
20221003041400
20221011041400
20221020193600
20221021073300
20221021082433
20221027105023
20221114143122
20221114143410
20221125140132
20221208132122
20221215195500
20221215195800
20221215195900
20230116124310
20230116124412
20230131181311
20230322519590
20230402418590
20230411005111
20230508135423
20230523124323
20230818113222
20230914180801
20231027141322
20231114161723
20231117164230
20240115144230
20240214120130
20240306115329
20240314092811
20240427152123
20240612123726
20240729123726
20240802193726
20240806073726
20241009103726
20250717082212
20250731150234
20250804100000
20250901200500
20250903112500
20250904133000
20250925093508
20251007112900
20251104100000
20251111201300
20251201000000
20260115000000
20260121000000
\.


--
-- Data for Name: sessions; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.sessions (id, user_id, created_at, updated_at, factor_id, aal, not_after, refreshed_at, user_agent, ip, tag, oauth_client_id, refresh_token_hmac_key, refresh_token_counter, scopes) FROM stdin;
\.


--
-- Data for Name: sso_domains; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.sso_domains (id, sso_provider_id, domain, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: sso_providers; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.sso_providers (id, resource_id, created_at, updated_at, disabled) FROM stdin;
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: auth; Owner: supabase_auth_admin
--

COPY auth.users (instance_id, id, aud, role, email, encrypted_password, email_confirmed_at, invited_at, confirmation_token, confirmation_sent_at, recovery_token, recovery_sent_at, email_change_token_new, email_change, email_change_sent_at, last_sign_in_at, raw_app_meta_data, raw_user_meta_data, is_super_admin, created_at, updated_at, phone, phone_confirmed_at, phone_change, phone_change_token, phone_change_sent_at, email_change_token_current, email_change_confirm_status, banned_until, reauthentication_token, reauthentication_sent_at, is_sso_user, deleted_at, is_anonymous) FROM stdin;
\.


--
-- Data for Name: batch_transactions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.batch_transactions (id, operation_type, lot_id, from_warehouse_id, to_warehouse_id, cone_ids, cone_count, reference_number, recipient, notes, performed_by, performed_at) FROM stdin;
\.


--
-- Data for Name: color_supplier; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.color_supplier (id, color_id, supplier_id, price_per_kg, min_order_qty, is_active, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: colors; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.colors (id, name, hex_code, pantone_code, ral_code, is_active, created_at, updated_at) FROM stdin;
1	Trng	#FFFFFF	11-0601 TCX	RAL 9003	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
2	en	#000000	19-4005 TCX	RAL 9005	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
3		#DC2626	18-1664 TCX	RAL 3020	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
4	 m	#991B1B	19-1557 TCX	RAL 3003	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
5	Xanh Dng	#2563EB	18-4051 TCX	RAL 5015	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
6	Xanh Navy	#1E3A8A	19-3939 TCX	RAL 5013	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
7	Xanh L	#16A34A	17-6153 TCX	RAL 6024	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
8	Xanh L m	#166534	19-5420 TCX	RAL 6016	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
9	Vng	#EAB308	13-0859 TCX	RAL 1018	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
10	Vng Nht	#FDE047	12-0736 TCX	RAL 1016	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
11	Cam	#EA580C	16-1364 TCX	RAL 2004	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
12	Hng	#DB2777	17-2034 TCX	RAL 4003	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
13	Hng Nht	#F472B6	15-2214 TCX	RAL 3015	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
14	Tm	#9333EA	18-3838 TCX	RAL 4005	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
15	Tm m	#6B21A8	19-3640 TCX	RAL 4007	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
16	Nu	#92400E	18-1140 TCX	RAL 8024	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
17	Be	#D4B896	14-1116 TCX	RAL 1001	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
18	Xm	#6B7280	17-4402 TCX	RAL 7037	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
19	Xm Nht	#9CA3AF	15-4306 TCX	RAL 7035	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
20	Xm m	#374151	19-4007 TCX	RAL 7024	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
21	Xanh Ngc	#0D9488	17-5024 TCX	RAL 6033	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
22	Xanh Cyan	#06B6D4	15-4825 TCX	RAL 5018	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
23	Bc	#C0C0C0	14-4102 TCX	RAL 9006	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
24	Vng Gold	#D4AF37	16-0946 TCX	RAL 1024	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
25	Kem	#FFFDD0	11-0107 TCX	RAL 1015	t	2026-02-10 17:34:16.943447+00	2026-02-10 17:34:16.943447+00
\.


--
-- Data for Name: employee_permissions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.employee_permissions (id, employee_id, permission_id, granted, assigned_by, assigned_at, expires_at) FROM stdin;
\.


--
-- Data for Name: employee_refresh_tokens; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.employee_refresh_tokens (id, employee_id, token_hash, expires_at, created_at) FROM stdin;
1	4	$2b$10$0mLhJhUsUAHIJc1YR5cr0uyrantGGHW.W414dkdLJ7gDvRbF3q61G	2026-02-17 17:28:18.728+00	2026-02-10 17:28:18.731709+00
2	4	$2b$10$0BKSAWJpOHL1ktibH6XY4eJUrr4zQUQks3Qssf2bzft1o3Udk6NUq	2026-02-19 02:24:07.79+00	2026-02-12 02:24:07.798677+00
\.


--
-- Data for Name: employee_roles; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.employee_roles (id, employee_id, role_id, assigned_by, assigned_at) FROM stdin;
1	4	1	\N	2026-02-10 17:01:20.045096+00
\.


--
-- Data for Name: employees; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.employees (id, employee_id, full_name, department, chuc_vu, is_active, created_at, updated_at, password_hash, must_change_password, password_changed_at, failed_login_attempts, locked_until, last_login_at, refresh_token, refresh_token_expires_at) FROM stdin;
2	NV001	Nguyn Vn A	Kho	nhan_vien	t	2026-02-10 17:01:19.848556+00	2026-02-10 17:01:19.848556+00	\N	f	\N	0	\N	\N	\N	\N
3	NV002	Trn Th B	K hoch	nhan_vien	t	2026-02-10 17:01:19.848556+00	2026-02-10 17:01:19.848556+00	\N	f	\N	0	\N	\N	\N	\N
1	ROOT001	System Administrator	IT	admin	t	2026-02-10 17:01:19.848556+00	2026-02-10 17:17:42.203684+00	\\b\\0\\	f	\N	0	\N	\N	\N	\N
5	NV-DK-001	Nguyn Vn Minh	Xng Dt Kim	nhan_vien	t	2026-02-10 17:34:27.047493+00	2026-02-10 17:35:57.935116+00	\N	f	\N	0	\N	\N	\N	\N
6	NV-DK-002	Trn Th Hoa	Xng Dt Kim	nhan_vien	t	2026-02-10 17:34:27.047493+00	2026-02-10 17:35:57.935116+00	\N	f	\N	0	\N	\N	\N	\N
7	NV-XN-001	L Vn Hng	Xng Nht	nhan_vien	t	2026-02-10 17:34:27.047493+00	2026-02-10 17:35:57.935116+00	\N	f	\N	0	\N	\N	\N	\N
8	NV-XN-002	Phm Th Mai	Xng Nht	nhan_vien	t	2026-02-10 17:34:27.047493+00	2026-02-10 17:35:57.935116+00	\N	f	\N	0	\N	\N	\N	\N
9	NV-XT-001	Hong Vn Nam	Xng Trc	nhan_vien	t	2026-02-10 17:34:27.047493+00	2026-02-10 17:35:57.935116+00	\N	f	\N	0	\N	\N	\N	\N
10	NV-KCS-001	 Th Lan	KCS	nhan_vien_ky_thuat	t	2026-02-10 17:34:27.047493+00	2026-02-10 17:35:57.935116+00	\N	f	\N	0	\N	\N	\N	\N
11	QL-SX-001	V c Anh	Qun L Sn Xut	quan_ly	t	2026-02-10 17:34:27.047493+00	2026-02-10 17:35:57.935116+00	\N	f	\N	0	\N	\N	\N	\N
4	ROOT	System Administrator	IT	Root	t	2026-02-10 17:01:20.045096+00	2026-02-12 02:24:07.684269+00	$2b$10$/5efElA69jJombrmhk3XDuyGVNsUiAoJOoKpbR.d30Ur/FGzkkXbi	t	\N	0	\N	2026-02-12 02:24:07.673+00	\N	\N
\.


--
-- Data for Name: lots; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.lots (id, lot_number, thread_type_id, warehouse_id, production_date, expiry_date, supplier, total_cones, available_cones, status, notes, created_at, updated_at, supplier_id) FROM stdin;
\.


--
-- Data for Name: permissions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.permissions (id, code, name, description, module, resource, action, route_path, is_page_access, sort_order, created_at, updated_at) FROM stdin;
1	dashboard.view	Xem Dashboard	Quyn xem trang tng quan	dashboard	main	view	/	t	1	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
2	thread.types.view	Xem Loi Ch	Quyn xem danh sch loi ch	thread	types	view	/thread	t	10	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
3	thread.types.create	Thm Loi Ch	Quyn thm loi ch mi	thread	types	create	\N	f	11	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
4	thread.types.edit	Sa Loi Ch	Quyn chnh sa loi ch	thread	types	edit	\N	f	12	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
5	thread.types.delete	Xa Loi Ch	Quyn xa loi ch	thread	types	delete	\N	f	13	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
6	thread.colors.view	Xem Mu Ch	Quyn xem danh sch mu ch	thread	colors	view	/thread/colors	t	20	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
7	thread.colors.manage	Qun l Mu Ch	Quyn thm/sa/xa mu ch	thread	colors	manage	\N	f	21	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
8	thread.suppliers.view	Xem Nh Cung Cp	Quyn xem danh sch NCC	thread	suppliers	view	/thread/suppliers	t	30	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
9	thread.suppliers.manage	Qun l NCC	Quyn thm/sa/xa NCC	thread	suppliers	manage	\N	f	31	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
10	thread.inventory.view	Xem Tn Kho	Quyn xem tn kho ch	thread	inventory	view	/thread/inventory	t	40	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
11	thread.inventory.edit	Chnh sa Tn Kho	Quyn chnh sa tn kho	thread	inventory	edit	\N	f	41	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
12	thread.lots.view	Xem L Hng	Quyn xem danh sch l	thread	lots	view	/thread/lots	t	50	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
13	thread.lots.manage	Qun l L Hng	Quyn thm/sa l hng	thread	lots	manage	\N	f	51	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
14	thread.allocations.view	Xem Phn B	Quyn xem phn b ch	thread	allocations	view	/thread/allocations	t	60	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
15	thread.allocations.manage	Qun l Phn B	Quyn to/duyt phn b	thread	allocations	manage	\N	f	61	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
16	thread.recovery.view	Xem Hon Tr	Quyn xem hon tr ch	thread	recovery	view	/thread/recovery	t	70	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
17	thread.recovery.manage	Qun l Hon Tr	Quyn x l hon tr	thread	recovery	manage	\N	f	71	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
18	thread.dashboard.view	Xem Thread Dashboard	Quyn xem dashboard ch	thread	dashboard	view	/thread/dashboard	t	80	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
19	thread.batch.receive	Nhp Kho	Quyn nhp kho ch	thread	batch	create	/thread/batch/receive	t	90	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
20	thread.batch.issue	Xut Kho	Quyn xut kho ch	thread	batch	create	/thread/batch/issue	t	91	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
21	thread.batch.transfer	Chuyn Kho	Quyn chuyn kho ni b	thread	batch	create	/thread/batch/transfer	t	92	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
22	thread.mobile.receive	Nhp Kho Mobile	Quyn nhp kho trn mobile	thread	mobile	create	/thread/mobile/receive	t	100	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
23	thread.mobile.issue	Xut Kho Mobile	Quyn xut kho trn mobile	thread	mobile	create	/thread/mobile/issue	t	101	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
24	thread.mobile.recovery	Hon Tr Mobile	Quyn hon tr trn mobile	thread	mobile	create	/thread/mobile/recovery	t	102	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
25	thread.stocktake.view	Kim K	Quyn thc hin kim k	thread	stocktake	view	/thread/stocktake	t	110	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
26	reports.view	Xem Bo Co	Quyn xem cc bo co	reports	main	view	/reports	t	200	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
27	employees.view	Xem Nhn Vin	Quyn xem danh sch nhn vin	employees	main	view	/employees	t	300	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
28	employees.create	Thm Nhn Vin	Quyn thm nhn vin	employees	main	create	\N	f	301	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
29	employees.edit	Sa Nhn Vin	Quyn chnh sa nhn vin	employees	main	edit	\N	f	302	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
30	employees.delete	Xa Nhn Vin	Quyn xa nhn vin	employees	main	delete	\N	f	303	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
31	admin.users.view	Xem Ngi Dng	Quyn xem danh sch ngi dng	admin	users	view	/admin/users	t	900	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
32	admin.users.manage	Qun l Ngi Dng	Quyn thm/sa/xa ngi dng	admin	users	manage	\N	f	901	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
33	admin.roles.view	Xem Vai Tr	Quyn xem danh sch vai tr	admin	roles	view	/admin/roles	t	910	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
34	admin.roles.manage	Qun l Vai Tr	Quyn thm/sa/xa vai tr	admin	roles	manage	\N	f	911	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
35	admin.permissions.view	Xem Quyn	Quyn xem danh sch quyn	admin	permissions	view	/admin/permissions	t	920	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
\.


--
-- Data for Name: po_items; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.po_items (id, po_id, style_id, quantity, notes, created_at, updated_at) FROM stdin;
1	1	3	4000	Mu en v xm	2026-02-10 17:35:57.883831+00	2026-02-10 17:35:57.883831+00
2	1	2	3000	Mu hng nht	2026-02-10 17:35:57.883831+00	2026-02-10 17:35:57.883831+00
3	1	1	5000	Mu trng v xanh m	2026-02-10 17:35:57.883831+00	2026-02-10 17:35:57.883831+00
4	2	6	3500	Mu xanh navy	2026-02-10 17:35:57.888633+00	2026-02-10 17:35:57.888633+00
5	2	5	2500	Mu  burgundy	2026-02-10 17:35:57.888633+00	2026-02-10 17:35:57.888633+00
6	3	10	4000	Mu xm melange	2026-02-10 17:35:57.892351+00	2026-02-10 17:35:57.892351+00
7	3	7	10000	Nhiu size	2026-02-10 17:35:57.892351+00	2026-02-10 17:35:57.892351+00
8	3	4	6000	Mu be	2026-02-10 17:35:57.892351+00	2026-02-10 17:35:57.892351+00
9	4	3	5000	\N	2026-02-10 17:35:57.89568+00	2026-02-10 17:35:57.89568+00
10	4	1	8000	n ni a	2026-02-10 17:35:57.89568+00	2026-02-10 17:35:57.89568+00
11	5	9	12000	t 2	2026-02-10 17:35:57.899309+00	2026-02-10 17:35:57.899309+00
12	5	8	5000	t 3	2026-02-10 17:35:57.899309+00	2026-02-10 17:35:57.899309+00
13	5	7	20000	t 1 + 2	2026-02-10 17:35:57.899309+00	2026-02-10 17:35:57.899309+00
14	5	6	15000	t 1	2026-02-10 17:35:57.899309+00	2026-02-10 17:35:57.899309+00
15	6	9	8000	Ch polyester c bit	2026-02-10 17:35:57.902777+00	2026-02-10 17:35:57.902777+00
16	6	6	6000	Polo th thao	2026-02-10 17:35:57.902777+00	2026-02-10 17:35:57.902777+00
17	7	8	3000	\N	2026-02-10 17:35:57.906535+00	2026-02-10 17:35:57.906535+00
18	7	3	7000	Ch denim chuyn dng	2026-02-10 17:35:57.906535+00	2026-02-10 17:35:57.906535+00
19	8	9	10000	Short chy b	2026-02-10 17:35:57.910255+00	2026-02-10 17:35:57.910255+00
20	8	7	8000	o dri-fit	2026-02-10 17:35:57.910255+00	2026-02-10 17:35:57.910255+00
21	9	10	7000	Hoodie training	2026-02-10 17:35:57.913946+00	2026-02-10 17:35:57.913946+00
22	9	9	9000	Short training	2026-02-10 17:35:57.913946+00	2026-02-10 17:35:57.913946+00
23	10	1	500	n mu th	2026-02-10 17:35:57.917675+00	2026-02-10 17:35:57.917675+00
\.


--
-- Data for Name: purchase_orders; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.purchase_orders (id, po_number, customer_name, order_date, delivery_date, status, priority, notes, created_at, updated_at) FROM stdin;
1	PO-2026-0001	UNIQLO Vietnam	2026-01-15 00:00:00+00	2026-02-28 00:00:00+00	in_production	high	n hng gp, u tin xut ch	2026-02-10 17:34:27.021851+00	2026-02-10 17:35:57.87948+00
2	PO-2026-0002	Zara International	2026-01-20 00:00:00+00	2026-03-15 00:00:00+00	pending	normal	Mu sc theo mu nh km	2026-02-10 17:34:27.021851+00	2026-02-10 17:35:57.87948+00
3	PO-2026-0003	H&M Supply	2026-01-25 00:00:00+00	2026-03-01 00:00:00+00	in_production	high	Kim tra k nh mc ch	2026-02-10 17:34:27.021851+00	2026-02-10 17:35:57.87948+00
4	PO-2026-0004	Cng ty TNHH May Vit Tin	2026-02-01 00:00:00+00	2026-03-20 00:00:00+00	pending	normal	\N	2026-02-10 17:34:27.021851+00	2026-02-10 17:35:57.87948+00
5	PO-2026-0005	Target Corporation	2026-02-05 00:00:00+00	2026-04-01 00:00:00+00	pending	low	n hng ln, chia nhiu t	2026-02-10 17:34:27.021851+00	2026-02-10 17:35:57.87948+00
6	PO-2026-0006	Decathlon Sports	2026-02-08 00:00:00+00	2026-03-25 00:00:00+00	in_production	high	Ch th thao chuyn dng	2026-02-10 17:34:27.021851+00	2026-02-10 17:35:57.87948+00
7	PO-2026-0007	Levi Strauss & Co	2026-02-10 00:00:00+00	2026-04-15 00:00:00+00	pending	normal	\N	2026-02-10 17:34:27.021851+00	2026-02-10 17:35:57.87948+00
8	PO-2026-0008	Nike Vietnam	2026-02-10 00:00:00+00	2026-03-30 00:00:00+00	in_production	high	Ch polyester cao cp	2026-02-10 17:34:27.021851+00	2026-02-10 17:35:57.87948+00
9	PO-2026-0009	Adidas Sourcing	2026-02-11 00:00:00+00	2026-04-10 00:00:00+00	pending	normal	Xc nhn mu trc khi xut	2026-02-10 17:34:27.021851+00	2026-02-10 17:35:57.87948+00
10	PO-2026-0010	GAP Inc	2026-02-11 00:00:00+00	2026-04-20 00:00:00+00	pending	low	n hng mu th	2026-02-10 17:34:27.021851+00	2026-02-10 17:35:57.87948+00
\.


--
-- Data for Name: role_permissions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.role_permissions (id, role_id, permission_id, created_at) FROM stdin;
1	2	1	2026-02-10 17:01:20.045096+00
2	2	2	2026-02-10 17:01:20.045096+00
3	2	3	2026-02-10 17:01:20.045096+00
4	2	4	2026-02-10 17:01:20.045096+00
5	2	5	2026-02-10 17:01:20.045096+00
6	2	6	2026-02-10 17:01:20.045096+00
7	2	7	2026-02-10 17:01:20.045096+00
8	2	8	2026-02-10 17:01:20.045096+00
9	2	9	2026-02-10 17:01:20.045096+00
10	2	10	2026-02-10 17:01:20.045096+00
11	2	11	2026-02-10 17:01:20.045096+00
12	2	12	2026-02-10 17:01:20.045096+00
13	2	13	2026-02-10 17:01:20.045096+00
14	2	14	2026-02-10 17:01:20.045096+00
15	2	15	2026-02-10 17:01:20.045096+00
16	2	16	2026-02-10 17:01:20.045096+00
17	2	17	2026-02-10 17:01:20.045096+00
18	2	18	2026-02-10 17:01:20.045096+00
19	2	19	2026-02-10 17:01:20.045096+00
20	2	20	2026-02-10 17:01:20.045096+00
21	2	21	2026-02-10 17:01:20.045096+00
22	2	22	2026-02-10 17:01:20.045096+00
23	2	23	2026-02-10 17:01:20.045096+00
24	2	24	2026-02-10 17:01:20.045096+00
25	2	25	2026-02-10 17:01:20.045096+00
26	2	26	2026-02-10 17:01:20.045096+00
27	2	27	2026-02-10 17:01:20.045096+00
28	2	28	2026-02-10 17:01:20.045096+00
29	2	29	2026-02-10 17:01:20.045096+00
30	2	30	2026-02-10 17:01:20.045096+00
31	2	31	2026-02-10 17:01:20.045096+00
32	2	32	2026-02-10 17:01:20.045096+00
33	2	33	2026-02-10 17:01:20.045096+00
34	2	34	2026-02-10 17:01:20.045096+00
35	2	35	2026-02-10 17:01:20.045096+00
36	3	1	2026-02-10 17:01:20.045096+00
37	3	2	2026-02-10 17:01:20.045096+00
38	3	3	2026-02-10 17:01:20.045096+00
39	3	4	2026-02-10 17:01:20.045096+00
40	3	5	2026-02-10 17:01:20.045096+00
41	3	6	2026-02-10 17:01:20.045096+00
42	3	7	2026-02-10 17:01:20.045096+00
43	3	8	2026-02-10 17:01:20.045096+00
44	3	9	2026-02-10 17:01:20.045096+00
45	3	10	2026-02-10 17:01:20.045096+00
46	3	11	2026-02-10 17:01:20.045096+00
47	3	12	2026-02-10 17:01:20.045096+00
48	3	13	2026-02-10 17:01:20.045096+00
49	3	14	2026-02-10 17:01:20.045096+00
50	3	16	2026-02-10 17:01:20.045096+00
51	3	17	2026-02-10 17:01:20.045096+00
52	3	18	2026-02-10 17:01:20.045096+00
53	3	19	2026-02-10 17:01:20.045096+00
54	3	20	2026-02-10 17:01:20.045096+00
55	3	21	2026-02-10 17:01:20.045096+00
56	3	22	2026-02-10 17:01:20.045096+00
57	3	23	2026-02-10 17:01:20.045096+00
58	3	24	2026-02-10 17:01:20.045096+00
59	3	25	2026-02-10 17:01:20.045096+00
60	5	1	2026-02-10 17:01:20.045096+00
61	5	10	2026-02-10 17:01:20.045096+00
62	5	16	2026-02-10 17:01:20.045096+00
63	5	19	2026-02-10 17:01:20.045096+00
64	5	20	2026-02-10 17:01:20.045096+00
65	5	22	2026-02-10 17:01:20.045096+00
66	5	23	2026-02-10 17:01:20.045096+00
67	5	24	2026-02-10 17:01:20.045096+00
68	4	1	2026-02-10 17:01:20.045096+00
69	4	10	2026-02-10 17:01:20.045096+00
70	4	14	2026-02-10 17:01:20.045096+00
71	4	15	2026-02-10 17:01:20.045096+00
72	4	18	2026-02-10 17:01:20.045096+00
73	4	26	2026-02-10 17:01:20.045096+00
74	6	1	2026-02-10 17:01:20.045096+00
75	6	10	2026-02-10 17:01:20.045096+00
76	6	14	2026-02-10 17:01:20.045096+00
77	7	1	2026-02-10 17:01:20.045096+00
78	7	18	2026-02-10 17:01:20.045096+00
79	7	26	2026-02-10 17:01:20.045096+00
\.


--
-- Data for Name: roles; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.roles (id, code, name, description, level, is_system, is_active, created_at, updated_at) FROM stdin;
1	root	ROOT	Quyn cao nht - bypass mi kim tra. Khng th xa.	0	t	t	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
2	admin	Qun tr vin	Ton quyn truy cp h thng (tr qun l ROOT)	1	t	t	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
3	warehouse_manager	Qun l Kho	Qun l tn kho, nhp/xut/chuyn kho	2	f	t	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
4	planning	K hoch	Phn b ch cho sn xut	2	f	t	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
5	warehouse_staff	Nhn vin Kho	Thao tc nhp/xut kho c bn	3	f	t	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
6	production	Sn xut	Xem tn kho v nhn ch	3	f	t	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
7	viewer	Xem bo co	Ch xem bo co v dashboard	4	f	t	2026-02-10 17:01:20.045096+00	2026-02-10 17:01:20.045096+00
\.


--
-- Data for Name: skus; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.skus (id, po_item_id, color_id, size, quantity, created_at, updated_at) FROM stdin;
1	1	2	M	1000	2026-02-10 17:35:57.92889+00	2026-02-10 17:35:57.92889+00
2	1	2	L	1200	2026-02-10 17:35:57.92889+00	2026-02-10 17:35:57.92889+00
3	1	18	M	900	2026-02-10 17:35:57.92889+00	2026-02-10 17:35:57.92889+00
4	1	18	L	900	2026-02-10 17:35:57.92889+00	2026-02-10 17:35:57.92889+00
5	3	1	S	800	2026-02-10 17:35:57.92889+00	2026-02-10 17:35:57.92889+00
6	3	1	M	1200	2026-02-10 17:35:57.92889+00	2026-02-10 17:35:57.92889+00
7	3	1	L	1000	2026-02-10 17:35:57.92889+00	2026-02-10 17:35:57.92889+00
15	7	1	L	2500	2026-02-10 17:39:03.632764+00	2026-02-10 17:39:03.632764+00
16	7	1	M	3000	2026-02-10 17:39:03.632764+00	2026-02-10 17:39:03.632764+00
17	7	1	S	2000	2026-02-10 17:39:03.632764+00	2026-02-10 17:39:03.632764+00
18	7	2	M	1000	2026-02-10 17:39:03.632764+00	2026-02-10 17:39:03.632764+00
19	7	2	S	1500	2026-02-10 17:39:03.632764+00	2026-02-10 17:39:03.632764+00
20	19	2	L	3500	2026-02-10 17:39:03.636477+00	2026-02-10 17:39:03.636477+00
21	19	2	M	4000	2026-02-10 17:39:03.636477+00	2026-02-10 17:39:03.636477+00
22	19	2	S	2500	2026-02-10 17:39:03.636477+00	2026-02-10 17:39:03.636477+00
\.


--
-- Data for Name: style_color_thread_specs; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.style_color_thread_specs (id, style_thread_spec_id, color_id, thread_type_id, notes, created_at, updated_at) FROM stdin;
1	1	1	21	May thn o - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
2	1	2	22	May thn o - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
3	1	5	24	May thn o - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
4	2	1	39	May c o - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
5	2	2	40	May c o - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
6	2	12	39	May c o - Hng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
7	3	1	21	May tay o - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
8	3	2	22	May tay o - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
9	3	5	24	May tay o - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
10	4	1	11	Vt s - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
11	4	2	12	Vt s - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
12	5	1	39	May thn o - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
13	5	2	40	May thn o - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
14	5	12	39	May thn o - Hng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
15	6	1	48	May c tim - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
16	6	12	48	May c tim - Hng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
17	7	1	21	Vt s - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
18	7	2	22	Vt s - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
19	7	5	24	Vt s - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
20	19	1	21	May c b - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
21	19	2	22	May c b - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
22	19	5	24	May c b - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
23	20	1	11	Vt s - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
24	20	2	12	Vt s - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
25	18	1	21	May thn o - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
26	18	2	22	May thn o - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
27	18	5	24	May thn o - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
28	22	1	21	Vin c + gu - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
29	22	2	22	Vin c + gu - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
30	22	5	24	Vin c + gu - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
31	21	1	21	May thn o - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
32	21	2	22	May thn o - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
33	21	5	24	May thn o - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
34	32	1	11	Bo tay + gu - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
35	32	2	12	Bo tay + gu - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
36	29	1	11	May thn hoodie - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
37	29	2	12	May thn hoodie - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
38	30	1	21	May m - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
39	30	2	22	May m - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
40	30	5	24	May m - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
41	31	1	21	May ti kangaroo - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
42	31	2	22	May ti kangaroo - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
43	31	5	24	May ti kangaroo - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
44	25	1	11	May tay + bo - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
45	25	2	12	May tay + bo - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
46	26	1	11	Gn kha ko - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
47	26	2	12	Gn kha ko - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
48	23	1	11	May thn jacket - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
49	23	2	12	May thn jacket - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
50	24	1	21	May lt trong - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
51	24	2	22	May lt trong - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
52	24	5	24	May lt trong - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
53	8	1	21	May thn qun - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
54	8	2	22	May thn qun - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
55	8	5	24	May thn qun - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
56	11	1	11	Vt s - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
57	11	2	12	Vt s - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
58	10	1	21	May dy ko - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
59	10	2	22	May dy ko - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
60	10	5	24	May dy ko - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
61	9	1	39	May ti - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
62	9	2	40	May ti - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
63	9	12	39	May ti - Hng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
64	12	1	21	May thn qun - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
65	12	2	22	May thn qun - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
66	12	5	24	May thn qun - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
67	13	1	39	May ti + tht lng - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
68	13	2	40	May ti + tht lng - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
69	13	12	39	May ti + tht lng - Hng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
70	14	1	11	Vt s - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
71	14	2	12	Vt s - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
72	27	1	21	May thn qun - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
73	27	2	22	May thn qun - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
74	27	5	24	May thn qun - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
75	28	1	21	May thun eo - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
76	28	2	22	May thun eo - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
77	28	5	24	May thun eo - Xanh	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
78	16	1	39	May ti hng - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
79	16	2	40	May ti hng - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
80	16	12	39	May ti hng - Hng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
81	15	1	39	May thn vy - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
82	15	2	40	May thn vy - en	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
83	15	12	39	May thn vy - Hng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
84	17	1	48	Vin gu - Trng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
85	17	12	48	Vin gu - Hng	2026-02-10 17:41:52.265673+00	2026-02-10 17:41:52.265673+00
\.


--
-- Data for Name: style_thread_specs; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.style_thread_specs (id, style_id, supplier_id, process_name, tex_id, meters_per_unit, notes, created_at, updated_at, display_order) FROM stdin;
1	1	3	May thn o	21	12.50	Ch may chnh	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
2	1	3	May c o	39	3.20	Ch mn cho c	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
3	1	3	May tay o	21	8.00	May tay + mng st	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
4	1	3	Vt s	11	15.00	Vt s vin trong	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
5	2	3	May thn o	39	10.00	Ch mn cho n	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
6	2	3	May c tim	48	2.50	Ch siu mn	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
7	2	3	Vt s	21	12.00	\N	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
8	3	3	May thn qun	21	18.00	Ch bn	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
9	3	3	May ti	39	6.00	Ti trc + sau	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
10	3	3	May dy ko	21	2.00	Kha YKK	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
11	3	3	Vt s	11	20.00	\N	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
12	4	3	May thn qun	21	15.00	\N	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
13	4	3	May ti + tht lng	39	5.50	\N	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
14	4	3	Vt s	11	18.00	\N	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
15	5	3	May thn vy	39	22.00	Vy di	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
16	5	3	May ti hng	39	4.00	\N	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
17	5	3	Vin gu	48	8.00	Vin mn	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
18	6	3	May thn o	21	14.00	\N	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
19	6	3	May c b	21	4.50	C pique	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
20	6	3	Vt s	11	10.00	\N	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
21	7	3	May thn o	21	10.00	May 4 kim	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
22	7	3	Vin c + gu	21	6.00	Vin thun	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
23	8	3	May thn jacket	11	25.00	Ch bn cho nylon	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
24	8	3	May lt trong	21	18.00	\N	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
25	8	3	May tay + bo	11	12.00	\N	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
26	8	3	Gn kha ko	11	3.00	Kha 2 chiu	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
27	9	3	May thn qun	21	8.00	Ch polyester	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
28	9	3	May thun eo	21	3.50	Thun co gin	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
29	10	3	May thn hoodie	11	20.00	Vi dy	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
30	10	3	May m	21	8.00	M 2 lp	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
31	10	3	May ti kangaroo	21	5.00	\N	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
32	10	3	Bo tay + gu	11	6.00	\N	2026-02-10 17:34:27.036904+00	2026-02-10 17:34:27.036904+00	0
\.


--
-- Data for Name: styles; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.styles (id, style_code, style_name, description, fabric_type, created_at, updated_at) FROM stdin;
2	AO-002	o S Mi N C Tim	o s mi n ngn tay, c tim, vi polyester	Polyester blend	2026-02-10 17:34:27.017316+00	2026-02-10 17:35:57.873158+00
3	QU-001	Qun u Nam Slimfit	Qun u nam ng cn, slimfit, c vt s	Wool blend	2026-02-10 17:34:27.017316+00	2026-02-10 17:35:57.873158+00
4	QU-002	Qun Kaki N	Qun kaki n cng s, ng sung	Cotton twill	2026-02-10 17:34:27.017316+00	2026-02-10 17:35:57.873158+00
5	VA-001	Vy Lin A-Line	Vy lin thn dng ch A, c ti hng	Chiffon	2026-02-10 17:34:27.017316+00	2026-02-10 17:35:57.873158+00
6	AO-003	o Polo Nam	o polo nam ngn tay, c c b	Cotton Pique	2026-02-10 17:34:27.017316+00	2026-02-10 17:35:57.873158+00
7	AO-004	o Thun C Trn	o thun unisex c trn	Cotton Jersey	2026-02-10 17:34:27.017316+00	2026-02-10 17:35:57.873158+00
8	JK-001	Jacket Nam Bomber	Jacket bomber nam, c lt, kha ko	Nylon	2026-02-10 17:34:27.017316+00	2026-02-10 17:35:57.873158+00
9	QU-003	Qun Short Th Thao	Qun short nam th thao, thun eo	Polyester mesh	2026-02-10 17:34:27.017316+00	2026-02-10 17:35:57.873158+00
10	AO-005	o Hoodie Unisex	o hoodie c m, ti kangaroo	French Terry	2026-02-10 17:34:27.017316+00	2026-02-10 17:35:57.873158+00
1	AO-001	o S Mi Nam C ng	o s mi nam di tay, c ng, vi cotton	Cotton 100%	2026-02-10 17:34:27.017316+00	2026-02-10 17:37:11.87945+00
\.


--
-- Data for Name: suppliers; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.suppliers (id, code, name, contact_name, phone, email, address, lead_time_days, is_active, created_at, updated_at) FROM stdin;
1	NCC-001	Cng ty TNHH Ch May Vit Tin	Nguyn Vn An	0903123456	sales@viettien.vn	S 15, ng L Li, Qun 1, TP.HCM	7	t	2026-02-10 17:34:16.939341+00	2026-02-10 17:34:16.939341+00
2	NCC-002	Cng ty CP Si Ch Ph Th	Trn Th Bch	0912345678	order@phutho-thread.com	KCN Ph Th, Ph Th	10	t	2026-02-10 17:34:16.939341+00	2026-02-10 17:34:16.939341+00
3	NCC-003	Cng ty TNHH Coats Vit Nam	David Lee	0909888777	vietnam@coats.com	KCN Tn Bnh, TP.HCM	5	t	2026-02-10 17:34:16.939341+00	2026-02-10 17:34:16.939341+00
4	NCC-004	Nh my Ch Kim Ngc	L Th Kim	0905555666	kimngoc@gmail.com	ng 30/4, TP.  Nng	7	t	2026-02-10 17:34:16.939341+00	2026-02-10 17:34:16.939341+00
5	NCC-005	Cng ty TNHH American Thread	John Smith	0908123456	sales@amthread.vn	KCN Long Bnh, Bin Ha	14	t	2026-02-10 17:34:16.939341+00	2026-02-10 17:34:16.939341+00
6	NCC-006	Xng Ch Thi Bnh	Phm Vn Hng	0911222333	thaibinh.thread@yahoo.com	TP. Thi Bnh	8	t	2026-02-10 17:34:16.939341+00	2026-02-10 17:34:16.939341+00
7	NCC-007	Cng ty CP Dt May H Ni	Hong Minh Tun	0904567890	sales@detmayhn.vn	KCN Si ng, H Ni	12	t	2026-02-10 17:34:16.939341+00	2026-02-10 17:34:16.939341+00
8	NCC-008	Cng ty TNHH Onuki Vit Nam	Tanaka Yuki	0907999888	vietnam@onuki.jp	KCN VSIP, Bnh Dng	6	t	2026-02-10 17:34:16.939341+00	2026-02-10 17:34:16.939341+00
9	NCC-009	X nghip Ch May Bnh nh	V Thanh Hi	0902333444	binhdinh.chi@gmail.com	TP. Quy Nhn, Bnh nh	9	t	2026-02-10 17:34:16.939341+00	2026-02-10 17:34:16.939341+00
10	NCC-010	Cng ty TNHH Gtermann Vit Nam	Hans Mueller	0906777666	sales@gutermann.vn	KCN Nhn Trch, ng Nai	7	t	2026-02-10 17:34:16.939341+00	2026-02-10 17:34:16.939341+00
11	NCC-011	Nh my Si ng Nai	Nguyn Th Hoa	0913456789	dongnai.soi@outlook.com	KCN Bin Ha 2, ng Nai	5	t	2026-02-10 17:34:16.939341+00	2026-02-10 17:34:16.939341+00
12	NCC-012	Cng ty TNHH A&E Gtermann	Michael Chen	0901888999	michael@aegutermann.com	KCN Tn Thun, Qun 7, TP.HCM	10	t	2026-02-10 17:34:16.939341+00	2026-02-10 17:34:16.939341+00
\.


--
-- Data for Name: system_settings; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.system_settings (id, key, value, description, updated_at) FROM stdin;
1	partial_cone_ratio	0.3	Ty le quy doi cuon le so voi cuon nguyen (vd: 0.3 = 1 cuon le = 0.3 cuon nguyen)	2026-02-11 03:35:43.835272+00
\.


--
-- Data for Name: thread_allocation_cones; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_allocation_cones (id, allocation_id, cone_id, allocated_meters, created_at) FROM stdin;
\.


--
-- Data for Name: thread_allocations; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_allocations (id, order_id, order_reference, thread_type_id, requested_meters, allocated_meters, status, priority, priority_score, requested_date, due_date, notes, created_by, created_at, updated_at, split_from_id) FROM stdin;
2	PO-2026-0001	UNIQLO - o S Mi Nam Vt s	11	30000.0000	25000.0000	SOFT	NORMAL	0	2026-02-10 17:37:09.331497+00	2026-02-28	Vt s - cn thiu 5000m	\N	2026-02-10 17:37:09.331497+00	2026-02-10 17:37:09.331497+00	\N
3	PO-2026-0003	H&M - Qun Kaki N	12	40000.0000	40000.0000	HARD	NORMAL	0	2026-02-10 17:37:09.331497+00	2026-03-01	\N	\N	2026-02-10 17:37:09.331497+00	2026-02-10 17:37:09.331497+00	\N
4	PO-2026-0001	UNIQLO - o S Mi Nam Trng	21	50000.0000	45000.0000	HARD	NORMAL	0	2026-02-10 17:37:09.331497+00	2026-02-28	Allocation for production	\N	2026-02-10 17:37:09.331497+00	2026-02-10 17:37:09.331497+00	\N
5	PO-2026-0003	H&M - o Thun C Trn	22	80000.0000	60000.0000	SOFT	NORMAL	0	2026-02-10 17:37:09.331497+00	2026-03-01	ang xut dn	\N	2026-02-10 17:37:09.331497+00	2026-02-10 17:37:09.331497+00	\N
6	PO-2026-0006	Decathlon - Qun Short	24	35000.0000	35000.0000	HARD	NORMAL	0	2026-02-10 17:37:09.331497+00	2026-03-25	Ch polyester	\N	2026-02-10 17:37:09.331497+00	2026-02-10 17:37:09.331497+00	\N
7	PO-2026-0006	Decathlon - o Polo	25	28000.0000	0.0000	PENDING	NORMAL	0	2026-02-10 17:37:09.331497+00	2026-03-25	Ch nhp kho	\N	2026-02-10 17:37:09.331497+00	2026-02-10 17:37:09.331497+00	\N
8	PO-2026-0008	Nike - o dri-fit	26	55000.0000	55000.0000	ISSUED	NORMAL	0	2026-02-10 17:37:09.331497+00	2026-03-30	 xut 	\N	2026-02-10 17:37:09.331497+00	2026-02-10 17:37:09.331497+00	\N
9	PO-2026-0008	Nike - Short chy b	27	45000.0000	40000.0000	SOFT	NORMAL	0	2026-02-10 17:37:09.331497+00	2026-03-30	\N	\N	2026-02-10 17:37:09.331497+00	2026-02-10 17:37:09.331497+00	\N
10	PO-2026-0001	UNIQLO - o S Mi Nam C	39	15000.0000	15000.0000	HARD	NORMAL	0	2026-02-10 17:37:09.331497+00	2026-02-28	Ch mn cho c	\N	2026-02-10 17:37:09.331497+00	2026-02-10 17:37:09.331497+00	\N
11	WO-1-QU-003-27	Tun 1 - Qun Short Th Thao - May thn qun	22	20000.0000	0.0000	PENDING	NORMAL	0	2026-02-10 17:44:09.158442+00	\N	\N	\N	2026-02-10 17:44:09.158442+00	2026-02-10 17:44:09.158442+00	\N
12	WO-1-QU-003-28	Tun 1 - Qun Short Th Thao - May thun eo	22	20000.0000	0.0000	PENDING	NORMAL	0	2026-02-10 17:44:09.158442+00	\N	\N	\N	2026-02-10 17:44:09.158442+00	2026-02-10 17:44:09.158442+00	\N
13	WO-1-AO-004-21	Tun 1 - o Thun C Trn - May thn o	22	10000.0000	0.0000	PENDING	NORMAL	0	2026-02-10 17:44:09.158442+00	\N	\N	\N	2026-02-10 17:44:09.158442+00	2026-02-10 17:44:09.158442+00	\N
14	WO-1-AO-004-22	Tun 1 - o Thun C Trn - Vin c + gu	22	10000.0000	0.0000	PENDING	NORMAL	0	2026-02-10 17:44:09.158442+00	\N	\N	\N	2026-02-10 17:44:09.158442+00	2026-02-10 17:44:09.158442+00	\N
15	WO-2-QU-001-10	Tun 2 - Qun u Nam Slimfit - May dy ko	21	5000.0000	0.0000	PENDING	NORMAL	0	2026-02-11 03:45:45.419938+00	\N	\N	\N	2026-02-11 03:45:45.419938+00	2026-02-11 03:45:45.419938+00	\N
16	WO-2-AO-001-1	Tun 2 - o S Mi Nam C ng - May thn o	21	15000.0000	0.0000	PENDING	NORMAL	0	2026-02-11 03:45:45.419938+00	\N	\N	\N	2026-02-11 03:45:45.419938+00	2026-02-11 03:45:45.419938+00	\N
17	WO-2-AO-001-3	Tun 2 - o S Mi Nam C ng - May tay o	21	10000.0000	0.0000	PENDING	NORMAL	0	2026-02-11 03:45:45.419938+00	\N	\N	\N	2026-02-11 03:45:45.419938+00	2026-02-11 03:45:45.419938+00	\N
18	WO-2-AO-001-4	Tun 2 - o S Mi Nam C ng - Vt s	11	15000.0000	0.0000	PENDING	NORMAL	0	2026-02-11 03:45:45.419938+00	\N	\N	\N	2026-02-11 03:45:45.419938+00	2026-02-11 03:45:45.419938+00	\N
19	WO-2-QU-001-10	Tun 2 - Qun u Nam Slimfit - May dy ko	21	5000.0000	0.0000	PENDING	NORMAL	0	2026-02-11 03:51:43.511542+00	\N	\N	\N	2026-02-11 03:51:43.511542+00	2026-02-11 03:51:43.511542+00	\N
20	WO-2-AO-001-1	Tun 2 - o S Mi Nam C ng - May thn o	21	15000.0000	0.0000	PENDING	NORMAL	0	2026-02-11 03:51:43.511542+00	\N	\N	\N	2026-02-11 03:51:43.511542+00	2026-02-11 03:51:43.511542+00	\N
21	WO-2-AO-001-3	Tun 2 - o S Mi Nam C ng - May tay o	21	10000.0000	0.0000	PENDING	NORMAL	0	2026-02-11 03:51:43.511542+00	\N	\N	\N	2026-02-11 03:51:43.511542+00	2026-02-11 03:51:43.511542+00	\N
22	WO-2-AO-001-4	Tun 2 - o S Mi Nam C ng - Vt s	11	15000.0000	0.0000	PENDING	NORMAL	0	2026-02-11 03:51:43.511542+00	\N	\N	\N	2026-02-11 03:51:43.511542+00	2026-02-11 03:51:43.511542+00	\N
23	WO-2-QU-001-10	Tun 2 - Qun u Nam Slimfit - May dy ko	21	5000.0000	0.0000	PENDING	NORMAL	0	2026-02-11 07:09:20.2305+00	\N	\N	\N	2026-02-11 07:09:20.2305+00	2026-02-11 07:09:20.2305+00	\N
24	WO-2-AO-001-1	Tun 2 - o S Mi Nam C ng - May thn o	21	15000.0000	0.0000	PENDING	NORMAL	0	2026-02-11 07:09:20.2305+00	\N	\N	\N	2026-02-11 07:09:20.2305+00	2026-02-11 07:09:20.2305+00	\N
25	WO-2-AO-001-3	Tun 2 - o S Mi Nam C ng - May tay o	21	10000.0000	0.0000	PENDING	NORMAL	0	2026-02-11 07:09:20.2305+00	\N	\N	\N	2026-02-11 07:09:20.2305+00	2026-02-11 07:09:20.2305+00	\N
26	WO-2-AO-001-4	Tun 2 - o S Mi Nam C ng - Vt s	11	15000.0000	0.0000	PENDING	NORMAL	0	2026-02-11 07:09:20.2305+00	\N	\N	\N	2026-02-11 07:09:20.2305+00	2026-02-11 07:09:20.2305+00	\N
\.


--
-- Data for Name: thread_audit_log; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_audit_log (id, table_name, record_id, action, old_values, new_values, changed_fields, performed_by, ip_address, user_agent, created_at) FROM stdin;
1	thread_types	1	INSERT	\N	{"id": 1, "code": "CHI-20-TRA", "name": "Ch Polyester Trng TEX20", "color": "Trng", "color_id": null, "material": "polyester", "supplier": "Cng ty TNHH Coats Vit Nam", "is_active": true, "color_code": "#FFFFFF", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 20.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 5, "meters_per_cone": 6000.00, "color_supplier_id": null, "reorder_level_meters": 15000.00, "density_grams_per_meter": 0.020000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
2	thread_types	2	INSERT	\N	{"id": 2, "code": "CHI-20-DEN", "name": "Ch Polyester en TEX20", "color": "en", "color_id": null, "material": "polyester", "supplier": "Cng ty TNHH Coats Vit Nam", "is_active": true, "color_code": "#000000", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 20.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 5, "meters_per_cone": 6000.00, "color_supplier_id": null, "reorder_level_meters": 15000.00, "density_grams_per_meter": 0.020000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
3	thread_types	3	INSERT	\N	{"id": 3, "code": "CHI-20-DO", "name": "Ch Polyester  TEX20", "color": "", "color_id": null, "material": "polyester", "supplier": "Cng ty TNHH Ch May Vit Tin", "is_active": true, "color_code": "#DC2626", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 20.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 6000.00, "color_supplier_id": null, "reorder_level_meters": 12000.00, "density_grams_per_meter": 0.020000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
4	thread_types	4	INSERT	\N	{"id": 4, "code": "CHI-20-XDG", "name": "Ch Polyester Xanh Dng TEX20", "color": "Xanh Dng", "color_id": null, "material": "polyester", "supplier": "Cng ty TNHH Ch May Vit Tin", "is_active": true, "color_code": "#2563EB", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 20.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 6000.00, "color_supplier_id": null, "reorder_level_meters": 12000.00, "density_grams_per_meter": 0.020000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
5	thread_types	5	INSERT	\N	{"id": 5, "code": "CHI-20-VAG", "name": "Ch Polyester Vng TEX20", "color": "Vng", "color_id": null, "material": "polyester", "supplier": "Cng ty TNHH Ch May Vit Tin", "is_active": true, "color_code": "#EAB308", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 20.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 6000.00, "color_supplier_id": null, "reorder_level_meters": 10000.00, "density_grams_per_meter": 0.020000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
6	thread_types	6	INSERT	\N	{"id": 6, "code": "CHI-25-TRA", "name": "Ch Cotton Trng TEX25", "color": "Trng", "color_id": null, "material": "cotton", "supplier": "Cng ty CP Si Ch Ph Th", "is_active": true, "color_code": "#FFFFFF", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 25.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 10, "meters_per_cone": 5500.00, "color_supplier_id": null, "reorder_level_meters": 12000.00, "density_grams_per_meter": 0.025000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
7	thread_types	7	INSERT	\N	{"id": 7, "code": "CHI-25-DEN", "name": "Ch Cotton en TEX25", "color": "en", "color_id": null, "material": "cotton", "supplier": "Cng ty CP Si Ch Ph Th", "is_active": true, "color_code": "#000000", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 25.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 10, "meters_per_cone": 5500.00, "color_supplier_id": null, "reorder_level_meters": 12000.00, "density_grams_per_meter": 0.025000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
8	thread_types	8	INSERT	\N	{"id": 8, "code": "CHI-25-NAU", "name": "Ch Cotton Nu TEX25", "color": "Nu", "color_id": null, "material": "cotton", "supplier": "Cng ty CP Si Ch Ph Th", "is_active": true, "color_code": "#92400E", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 25.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 10, "meters_per_cone": 5500.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.025000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
9	thread_types	9	INSERT	\N	{"id": 9, "code": "CHI-25-BEE", "name": "Ch Cotton Be TEX25", "color": "Be", "color_id": null, "material": "cotton", "supplier": "Xng Ch Thi Bnh", "is_active": true, "color_code": "#D4B896", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 25.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 8, "meters_per_cone": 5500.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.025000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
10	thread_types	10	INSERT	\N	{"id": 10, "code": "CHI-25-XAM", "name": "Ch Cotton Xm TEX25", "color": "Xm", "color_id": null, "material": "cotton", "supplier": "Xng Ch Thi Bnh", "is_active": true, "color_code": "#6B7280", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 25.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 8, "meters_per_cone": 5500.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.025000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
11	thread_types	11	INSERT	\N	{"id": 11, "code": "CHI-30-TRA", "name": "Ch Polyester Trng TEX30", "color": "Trng", "color_id": null, "material": "polyester", "supplier": "Cng ty TNHH Gtermann Vit Nam", "is_active": true, "color_code": "#FFFFFF", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 30.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 5000.00, "color_supplier_id": null, "reorder_level_meters": 15000.00, "density_grams_per_meter": 0.030000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
12	thread_types	12	INSERT	\N	{"id": 12, "code": "CHI-30-DEN", "name": "Ch Polyester en TEX30", "color": "en", "color_id": null, "material": "polyester", "supplier": "Cng ty TNHH Gtermann Vit Nam", "is_active": true, "color_code": "#000000", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 30.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 5000.00, "color_supplier_id": null, "reorder_level_meters": 15000.00, "density_grams_per_meter": 0.030000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
13	thread_types	13	INSERT	\N	{"id": 13, "code": "CHI-30-XLA", "name": "Ch Polyester Xanh L TEX30", "color": "Xanh L", "color_id": null, "material": "polyester", "supplier": "Nh my Ch Kim Ngc", "is_active": true, "color_code": "#16A34A", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 30.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 5000.00, "color_supplier_id": null, "reorder_level_meters": 10000.00, "density_grams_per_meter": 0.030000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
14	thread_types	14	INSERT	\N	{"id": 14, "code": "CHI-30-HOG", "name": "Ch Polyester Hng TEX30", "color": "Hng", "color_id": null, "material": "polyester", "supplier": "Nh my Ch Kim Ngc", "is_active": true, "color_code": "#DB2777", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 30.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 5000.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.030000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
15	thread_types	15	INSERT	\N	{"id": 15, "code": "CHI-30-TIM", "name": "Ch Polyester Tm TEX30", "color": "Tm", "color_id": null, "material": "polyester", "supplier": "Nh my Ch Kim Ngc", "is_active": true, "color_code": "#9333EA", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 30.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 5000.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.030000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
16	thread_types	16	INSERT	\N	{"id": 16, "code": "CHI-35-TRA", "name": "Ch Nylon Trng TEX35", "color": "Trng", "color_id": null, "material": "nylon", "supplier": "Cng ty TNHH American Thread", "is_active": true, "color_code": "#FFFFFF", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 35.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 14, "meters_per_cone": 4800.00, "color_supplier_id": null, "reorder_level_meters": 12000.00, "density_grams_per_meter": 0.035000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
17	thread_types	17	INSERT	\N	{"id": 17, "code": "CHI-35-DEN", "name": "Ch Nylon en TEX35", "color": "en", "color_id": null, "material": "nylon", "supplier": "Cng ty TNHH American Thread", "is_active": true, "color_code": "#000000", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 35.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 14, "meters_per_cone": 4800.00, "color_supplier_id": null, "reorder_level_meters": 12000.00, "density_grams_per_meter": 0.035000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
18	thread_types	18	INSERT	\N	{"id": 18, "code": "CHI-35-NAV", "name": "Ch Nylon Navy TEX35", "color": "Xanh Navy", "color_id": null, "material": "nylon", "supplier": "Cng ty TNHH American Thread", "is_active": true, "color_code": "#1E3A8A", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 35.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 14, "meters_per_cone": 4800.00, "color_supplier_id": null, "reorder_level_meters": 10000.00, "density_grams_per_meter": 0.035000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
19	thread_types	19	INSERT	\N	{"id": 19, "code": "CHI-35-XAD", "name": "Ch Nylon Xm m TEX35", "color": "Xm m", "color_id": null, "material": "nylon", "supplier": "Cng ty TNHH Onuki Vit Nam", "is_active": true, "color_code": "#374151", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 35.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 6, "meters_per_cone": 4800.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.035000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
20	thread_types	20	INSERT	\N	{"id": 20, "code": "CHI-35-CAM", "name": "Ch Nylon Cam TEX35", "color": "Cam", "color_id": null, "material": "nylon", "supplier": "Cng ty TNHH Onuki Vit Nam", "is_active": true, "color_code": "#EA580C", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 35.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 6, "meters_per_cone": 4800.00, "color_supplier_id": null, "reorder_level_meters": 6000.00, "density_grams_per_meter": 0.035000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
21	thread_types	21	INSERT	\N	{"id": 21, "code": "CHI-40-TRA", "name": "Ch Polyester Trng TEX40", "color": "Trng", "color_id": null, "material": "polyester", "supplier": "Cng ty TNHH Coats Vit Nam", "is_active": true, "color_code": "#FFFFFF", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 40.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 5, "meters_per_cone": 5000.00, "color_supplier_id": null, "reorder_level_meters": 20000.00, "density_grams_per_meter": 0.040000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
22	thread_types	22	INSERT	\N	{"id": 22, "code": "CHI-40-DEN", "name": "Ch Polyester en TEX40", "color": "en", "color_id": null, "material": "polyester", "supplier": "Cng ty TNHH Coats Vit Nam", "is_active": true, "color_code": "#000000", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 40.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 5, "meters_per_cone": 5000.00, "color_supplier_id": null, "reorder_level_meters": 20000.00, "density_grams_per_meter": 0.040000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
23	thread_types	23	INSERT	\N	{"id": 23, "code": "CHI-40-DO", "name": "Ch Polyester  TEX40", "color": "", "color_id": null, "material": "polyester", "supplier": "Cng ty TNHH Ch May Vit Tin", "is_active": true, "color_code": "#DC2626", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 40.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 5000.00, "color_supplier_id": null, "reorder_level_meters": 15000.00, "density_grams_per_meter": 0.040000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
24	thread_types	24	INSERT	\N	{"id": 24, "code": "CHI-40-XDG", "name": "Ch Polyester Xanh Dng TEX40", "color": "Xanh Dng", "color_id": null, "material": "polyester", "supplier": "Cng ty TNHH Ch May Vit Tin", "is_active": true, "color_code": "#2563EB", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 40.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 5000.00, "color_supplier_id": null, "reorder_level_meters": 15000.00, "density_grams_per_meter": 0.040000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
25	thread_types	25	INSERT	\N	{"id": 25, "code": "CHI-40-XLA", "name": "Ch Polyester Xanh L TEX40", "color": "Xanh L", "color_id": null, "material": "polyester", "supplier": "Cng ty CP Dt May H Ni", "is_active": true, "color_code": "#16A34A", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 40.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 12, "meters_per_cone": 5000.00, "color_supplier_id": null, "reorder_level_meters": 12000.00, "density_grams_per_meter": 0.040000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
26	thread_types	26	INSERT	\N	{"id": 26, "code": "CHI-40-VAG", "name": "Ch Polyester Vng TEX40", "color": "Vng", "color_id": null, "material": "polyester", "supplier": "Cng ty CP Dt May H Ni", "is_active": true, "color_code": "#EAB308", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 40.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 12, "meters_per_cone": 5000.00, "color_supplier_id": null, "reorder_level_meters": 10000.00, "density_grams_per_meter": 0.040000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
27	thread_types	27	INSERT	\N	{"id": 27, "code": "CHI-40-HOG", "name": "Ch Polyester Hng TEX40", "color": "Hng", "color_id": null, "material": "polyester", "supplier": "Nh my Ch Kim Ngc", "is_active": true, "color_code": "#DB2777", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 40.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 5000.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.040000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
28	thread_types	28	INSERT	\N	{"id": 28, "code": "CHI-40-KEM", "name": "Ch Polyester Kem TEX40", "color": "Kem", "color_id": null, "material": "polyester", "supplier": "Nh my Ch Kim Ngc", "is_active": true, "color_code": "#FFFDD0", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 40.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 5000.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.040000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
29	thread_types	29	INSERT	\N	{"id": 29, "code": "CHI-45-TRA", "name": "Ch Silk Trng TEX45", "color": "Trng", "color_id": null, "material": "silk", "supplier": "Cng ty TNHH Gtermann Vit Nam", "is_active": true, "color_code": "#FFFFFF", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 45.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 4500.00, "color_supplier_id": null, "reorder_level_meters": 10000.00, "density_grams_per_meter": 0.045000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
30	thread_types	30	INSERT	\N	{"id": 30, "code": "CHI-45-DEN", "name": "Ch Silk en TEX45", "color": "en", "color_id": null, "material": "silk", "supplier": "Cng ty TNHH Gtermann Vit Nam", "is_active": true, "color_code": "#000000", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 45.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 7, "meters_per_cone": 4500.00, "color_supplier_id": null, "reorder_level_meters": 10000.00, "density_grams_per_meter": 0.045000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
31	thread_types	31	INSERT	\N	{"id": 31, "code": "CHI-45-GOD", "name": "Ch Silk Vng Gold TEX45", "color": "Vng Gold", "color_id": null, "material": "silk", "supplier": "Cng ty TNHH A&E Gtermann", "is_active": true, "color_code": "#D4AF37", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 45.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 10, "meters_per_cone": 4500.00, "color_supplier_id": null, "reorder_level_meters": 6000.00, "density_grams_per_meter": 0.045000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
32	thread_types	32	INSERT	\N	{"id": 32, "code": "CHI-45-BAC", "name": "Ch Silk Bc TEX45", "color": "Bc", "color_id": null, "material": "silk", "supplier": "Cng ty TNHH A&E Gtermann", "is_active": true, "color_code": "#C0C0C0", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 45.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 10, "meters_per_cone": 4500.00, "color_supplier_id": null, "reorder_level_meters": 6000.00, "density_grams_per_meter": 0.045000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
33	thread_types	33	INSERT	\N	{"id": 33, "code": "CHI-45-TIM", "name": "Ch Silk Tm TEX45", "color": "Tm", "color_id": null, "material": "silk", "supplier": "Cng ty TNHH A&E Gtermann", "is_active": true, "color_code": "#9333EA", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 45.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 10, "meters_per_cone": 4500.00, "color_supplier_id": null, "reorder_level_meters": 5000.00, "density_grams_per_meter": 0.045000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
34	thread_types	34	INSERT	\N	{"id": 34, "code": "CHI-50-TRA", "name": "Ch Mixed Trng TEX50", "color": "Trng", "color_id": null, "material": "mixed", "supplier": "X nghip Ch May Bnh nh", "is_active": true, "color_code": "#FFFFFF", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 50.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 9, "meters_per_cone": 4000.00, "color_supplier_id": null, "reorder_level_meters": 12000.00, "density_grams_per_meter": 0.050000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
35	thread_types	35	INSERT	\N	{"id": 35, "code": "CHI-50-DEN", "name": "Ch Mixed en TEX50", "color": "en", "color_id": null, "material": "mixed", "supplier": "X nghip Ch May Bnh nh", "is_active": true, "color_code": "#000000", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 50.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 9, "meters_per_cone": 4000.00, "color_supplier_id": null, "reorder_level_meters": 12000.00, "density_grams_per_meter": 0.050000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
36	thread_types	36	INSERT	\N	{"id": 36, "code": "CHI-50-XNG", "name": "Ch Mixed Xanh Ngc TEX50", "color": "Xanh Ngc", "color_id": null, "material": "mixed", "supplier": "X nghip Ch May Bnh nh", "is_active": true, "color_code": "#0D9488", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 50.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 9, "meters_per_cone": 4000.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.050000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
37	thread_types	37	INSERT	\N	{"id": 37, "code": "CHI-50-CYA", "name": "Ch Mixed Xanh Cyan TEX50", "color": "Xanh Cyan", "color_id": null, "material": "mixed", "supplier": "Nh my Si ng Nai", "is_active": true, "color_code": "#06B6D4", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 50.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 5, "meters_per_cone": 4000.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.050000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
38	thread_types	38	INSERT	\N	{"id": 38, "code": "CHI-50-XAN", "name": "Ch Mixed Xm Nht TEX50", "color": "Xm Nht", "color_id": null, "material": "mixed", "supplier": "Nh my Si ng Nai", "is_active": true, "color_code": "#9CA3AF", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 50.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 5, "meters_per_cone": 4000.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.050000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
39	thread_types	39	INSERT	\N	{"id": 39, "code": "CHI-60-TRA", "name": "Ch Polyester Trng TEX60", "color": "Trng", "color_id": null, "material": "polyester", "supplier": "Cng ty TNHH Coats Vit Nam", "is_active": true, "color_code": "#FFFFFF", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 60.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 5, "meters_per_cone": 3500.00, "color_supplier_id": null, "reorder_level_meters": 12000.00, "density_grams_per_meter": 0.060000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
40	thread_types	40	INSERT	\N	{"id": 40, "code": "CHI-60-DEN", "name": "Ch Polyester en TEX60", "color": "en", "color_id": null, "material": "polyester", "supplier": "Cng ty TNHH Coats Vit Nam", "is_active": true, "color_code": "#000000", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 60.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 5, "meters_per_cone": 3500.00, "color_supplier_id": null, "reorder_level_meters": 12000.00, "density_grams_per_meter": 0.060000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
41	thread_types	41	INSERT	\N	{"id": 41, "code": "CHI-60-XDG", "name": "Ch Polyester Xanh Dng TEX60", "color": "Xanh Dng", "color_id": null, "material": "polyester", "supplier": "Cng ty CP Si Ch Ph Th", "is_active": true, "color_code": "#2563EB", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 60.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 10, "meters_per_cone": 3500.00, "color_supplier_id": null, "reorder_level_meters": 10000.00, "density_grams_per_meter": 0.060000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
42	thread_types	42	INSERT	\N	{"id": 42, "code": "CHI-60-NAV", "name": "Ch Polyester Navy TEX60", "color": "Xanh Navy", "color_id": null, "material": "polyester", "supplier": "Cng ty CP Si Ch Ph Th", "is_active": true, "color_code": "#1E3A8A", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 60.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 10, "meters_per_cone": 3500.00, "color_supplier_id": null, "reorder_level_meters": 10000.00, "density_grams_per_meter": 0.060000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
43	thread_types	43	INSERT	\N	{"id": 43, "code": "CHI-60-DOD", "name": "Ch Polyester  m TEX60", "color": " m", "color_id": null, "material": "polyester", "supplier": "Xng Ch Thi Bnh", "is_active": true, "color_code": "#991B1B", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 60.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 8, "meters_per_cone": 3500.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.060000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
44	thread_types	44	INSERT	\N	{"id": 44, "code": "CHI-60-XLD", "name": "Ch Polyester Xanh L m TEX60", "color": "Xanh L m", "color_id": null, "material": "polyester", "supplier": "Xng Ch Thi Bnh", "is_active": true, "color_code": "#166534", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 60.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 8, "meters_per_cone": 3500.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.060000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
45	thread_types	45	INSERT	\N	{"id": 45, "code": "CHI-70-TRA", "name": "Ch Rayon Trng TEX70", "color": "Trng", "color_id": null, "material": "rayon", "supplier": "Cng ty TNHH Onuki Vit Nam", "is_active": true, "color_code": "#FFFFFF", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 70.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 6, "meters_per_cone": 3000.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.070000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
46	thread_types	46	INSERT	\N	{"id": 46, "code": "CHI-70-DEN", "name": "Ch Rayon en TEX70", "color": "en", "color_id": null, "material": "rayon", "supplier": "Cng ty TNHH Onuki Vit Nam", "is_active": true, "color_code": "#000000", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 70.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 6, "meters_per_cone": 3000.00, "color_supplier_id": null, "reorder_level_meters": 8000.00, "density_grams_per_meter": 0.070000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
47	thread_types	47	INSERT	\N	{"id": 47, "code": "CHI-70-TDD", "name": "Ch Rayon Tm m TEX70", "color": "Tm m", "color_id": null, "material": "rayon", "supplier": "Cng ty TNHH Onuki Vit Nam", "is_active": true, "color_code": "#6B21A8", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 70.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 6, "meters_per_cone": 3000.00, "color_supplier_id": null, "reorder_level_meters": 5000.00, "density_grams_per_meter": 0.070000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
48	thread_types	48	INSERT	\N	{"id": 48, "code": "CHI-80-TRA", "name": "Ch Nylon Trng TEX80", "color": "Trng", "color_id": null, "material": "nylon", "supplier": "Cng ty TNHH American Thread", "is_active": true, "color_code": "#FFFFFF", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 80.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 14, "meters_per_cone": 2500.00, "color_supplier_id": null, "reorder_level_meters": 6000.00, "density_grams_per_meter": 0.080000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
49	thread_types	49	INSERT	\N	{"id": 49, "code": "CHI-80-DEN", "name": "Ch Nylon en TEX80", "color": "en", "color_id": null, "material": "nylon", "supplier": "Cng ty TNHH American Thread", "is_active": true, "color_code": "#000000", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 80.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 14, "meters_per_cone": 2500.00, "color_supplier_id": null, "reorder_level_meters": 6000.00, "density_grams_per_meter": 0.080000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
50	thread_types	50	INSERT	\N	{"id": 50, "code": "CHI-80-HON", "name": "Ch Nylon Hng Nht TEX80", "color": "Hng Nht", "color_id": null, "material": "nylon", "supplier": "Cng ty TNHH American Thread", "is_active": true, "color_code": "#F472B6", "created_at": "2026-02-10T17:34:16.947441+00:00", "tex_number": 80.00, "updated_at": "2026-02-10T17:34:16.947441+00:00", "supplier_id": null, "lead_time_days": 14, "meters_per_cone": 2500.00, "color_supplier_id": null, "reorder_level_meters": 4000.00, "density_grams_per_meter": 0.080000}	\N	\N	\N	\N	2026-02-10 17:34:16.947441+00
51	thread_inventory	1	INSERT	\N	{"id": 1, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-001", "location": "A1-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-002", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
52	thread_inventory	2	INSERT	\N	{"id": 2, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-002", "location": "A1-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-003", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
53	thread_inventory	3	INSERT	\N	{"id": 3, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-003", "location": "A1-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-004", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
54	thread_inventory	4	INSERT	\N	{"id": 4, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-004", "location": "A1-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-005", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
55	thread_inventory	5	INSERT	\N	{"id": 5, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-005", "location": "A1-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-006", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
56	thread_inventory	6	INSERT	\N	{"id": 6, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-006", "location": "A1-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-007", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
57	thread_inventory	7	INSERT	\N	{"id": 7, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-007", "location": "A1-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-008", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
58	thread_inventory	8	INSERT	\N	{"id": 8, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-008", "location": "A1-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-009", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
59	thread_inventory	9	INSERT	\N	{"id": 9, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-009", "location": "A1-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-010", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
60	thread_inventory	10	INSERT	\N	{"id": 10, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-010", "location": "A1-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-011", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
61	thread_inventory	11	INSERT	\N	{"id": 11, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-011", "location": "A2-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-012", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
62	thread_inventory	12	INSERT	\N	{"id": 12, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-012", "location": "A2-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-013", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
63	thread_inventory	13	INSERT	\N	{"id": 13, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-013", "location": "A2-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-014", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
64	thread_inventory	14	INSERT	\N	{"id": 14, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-014", "location": "A2-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-015", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
65	thread_inventory	15	INSERT	\N	{"id": 15, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-015", "location": "A2-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-016", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
66	thread_inventory	16	INSERT	\N	{"id": 16, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-016", "location": "A2-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-017", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
67	thread_inventory	17	INSERT	\N	{"id": 17, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-017", "location": "A2-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-018", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
68	thread_inventory	18	INSERT	\N	{"id": 18, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-018", "location": "A2-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-019", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
69	thread_inventory	19	INSERT	\N	{"id": 19, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-019", "location": "A2-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-020", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
70	thread_inventory	20	INSERT	\N	{"id": 20, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-020", "location": "A2-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-001", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
71	thread_inventory	21	INSERT	\N	{"id": 21, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-021", "location": "A3-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-002", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
72	thread_inventory	22	INSERT	\N	{"id": 22, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-022", "location": "A3-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-003", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
73	thread_inventory	23	INSERT	\N	{"id": 23, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-023", "location": "A3-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-004", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
74	thread_inventory	24	INSERT	\N	{"id": 24, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-024", "location": "A3-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-005", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
75	thread_inventory	25	INSERT	\N	{"id": 25, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-025", "location": "A3-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-006", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
76	thread_inventory	26	INSERT	\N	{"id": 26, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-026", "location": "A3-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-007", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
77	thread_inventory	27	INSERT	\N	{"id": 27, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-027", "location": "A3-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-008", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
78	thread_inventory	28	INSERT	\N	{"id": 28, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-028", "location": "A3-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-009", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
79	thread_inventory	29	INSERT	\N	{"id": 29, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-029", "location": "A3-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-010", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
80	thread_inventory	30	INSERT	\N	{"id": 30, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-030", "location": "A3-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-011", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
81	thread_inventory	31	INSERT	\N	{"id": 31, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-031", "location": "A4-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-012", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
82	thread_inventory	32	INSERT	\N	{"id": 32, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-032", "location": "A4-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-013", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
83	thread_inventory	33	INSERT	\N	{"id": 33, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-033", "location": "A4-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-014", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
84	thread_inventory	34	INSERT	\N	{"id": 34, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-034", "location": "A4-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-015", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
85	thread_inventory	35	INSERT	\N	{"id": 35, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-035", "location": "A4-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-016", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
86	thread_inventory	36	INSERT	\N	{"id": 36, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-036", "location": "A4-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-017", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
87	thread_inventory	37	INSERT	\N	{"id": 37, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-037", "location": "A4-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-018", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
88	thread_inventory	38	INSERT	\N	{"id": 38, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-038", "location": "A4-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-019", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
89	thread_inventory	39	INSERT	\N	{"id": 39, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-039", "location": "A4-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-020", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
90	thread_inventory	40	INSERT	\N	{"id": 40, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-040", "location": "A4-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-001", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
91	thread_inventory	41	INSERT	\N	{"id": 41, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-041", "location": "A5-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-002", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
92	thread_inventory	42	INSERT	\N	{"id": 42, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-042", "location": "A5-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-003", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
93	thread_inventory	43	INSERT	\N	{"id": 43, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-043", "location": "A5-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-004", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
94	thread_inventory	44	INSERT	\N	{"id": 44, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-044", "location": "A5-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-005", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
95	thread_inventory	45	INSERT	\N	{"id": 45, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-045", "location": "A5-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-006", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
96	thread_inventory	46	INSERT	\N	{"id": 46, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-046", "location": "A5-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-007", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
97	thread_inventory	47	INSERT	\N	{"id": 47, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-047", "location": "A5-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-008", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
98	thread_inventory	48	INSERT	\N	{"id": 48, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-048", "location": "A5-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-009", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
99	thread_inventory	49	INSERT	\N	{"id": 49, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-049", "location": "A5-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-010", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
100	thread_inventory	50	INSERT	\N	{"id": 50, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-050", "location": "A5-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-011", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.956845+00
101	thread_inventory	1	UPDATE	{"id": 1, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-001", "location": "A1-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-002", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 1, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-001", "location": "A1-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-002", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 137.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 8, "quantity_meters": 5500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
102	thread_inventory	2	UPDATE	{"id": 2, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-002", "location": "A1-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-003", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 2, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-002", "location": "A1-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-003", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 137.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 9, "quantity_meters": 5500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
103	thread_inventory	3	UPDATE	{"id": 3, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-003", "location": "A1-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-004", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 3, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-003", "location": "A1-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-004", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 45, "quantity_meters": 3000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
104	thread_inventory	4	UPDATE	{"id": 4, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-004", "location": "A1-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-005", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 4, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-004", "location": "A1-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-005", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{updated_at}	\N	\N	\N	2026-02-10 17:34:16.968718+00
105	thread_inventory	5	UPDATE	{"id": 5, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-005", "location": "A1-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-006", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 5, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-005", "location": "A1-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-006", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 41, "quantity_meters": 3500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
113	thread_inventory	13	UPDATE	{"id": 13, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-013", "location": "A2-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-014", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 13, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-013", "location": "A2-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-014", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 22, "quantity_meters": 5000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
106	thread_inventory	6	UPDATE	{"id": 6, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-006", "location": "A1-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-007", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 6, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-006", "location": "A1-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-007", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 137.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 7, "quantity_meters": 5500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
107	thread_inventory	7	UPDATE	{"id": 7, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-007", "location": "A1-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-008", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 7, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-007", "location": "A1-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-008", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 25, "quantity_meters": 5000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
108	thread_inventory	8	UPDATE	{"id": 8, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-008", "location": "A1-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-009", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 8, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-008", "location": "A1-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-009", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 39, "quantity_meters": 3500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
109	thread_inventory	9	UPDATE	{"id": 9, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-009", "location": "A1-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-010", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 9, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-009", "location": "A1-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-010", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 43, "quantity_meters": 3500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
110	thread_inventory	10	UPDATE	{"id": 10, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-010", "location": "A1-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-011", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 10, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-010", "location": "A1-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-011", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 150.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 14, "quantity_meters": 5000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
111	thread_inventory	11	UPDATE	{"id": 11, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-011", "location": "A2-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-012", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 11, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-011", "location": "A2-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-012", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 40, "quantity_meters": 3500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
112	thread_inventory	12	UPDATE	{"id": 12, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-012", "location": "A2-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-013", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 12, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-012", "location": "A2-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-013", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 23, "quantity_meters": 5000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
114	thread_inventory	14	UPDATE	{"id": 14, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-014", "location": "A2-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-015", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 14, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-014", "location": "A2-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-015", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 29, "quantity_meters": 4500.0000}	{updated_at,thread_type_id}	\N	\N	\N	2026-02-10 17:34:16.968718+00
115	thread_inventory	15	UPDATE	{"id": 15, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-015", "location": "A2-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-016", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 15, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-015", "location": "A2-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-016", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 30, "quantity_meters": 4500.0000}	{updated_at,thread_type_id}	\N	\N	\N	2026-02-10 17:34:16.968718+00
116	thread_inventory	16	UPDATE	{"id": 16, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-016", "location": "A2-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-017", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 16, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-016", "location": "A2-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-017", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 36, "quantity_meters": 4000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
117	thread_inventory	17	UPDATE	{"id": 17, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-017", "location": "A2-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-018", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 17, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-017", "location": "A2-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-018", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 49, "quantity_meters": 2500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
118	thread_inventory	18	UPDATE	{"id": 18, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-018", "location": "A2-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-019", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 18, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-018", "location": "A2-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-019", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 44, "quantity_meters": 3500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
119	thread_inventory	19	UPDATE	{"id": 19, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-019", "location": "A2-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-020", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 19, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-019", "location": "A2-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-020", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 150.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 12, "quantity_meters": 5000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
120	thread_inventory	20	UPDATE	{"id": 20, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-020", "location": "A2-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-001", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 20, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-020", "location": "A2-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-001", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 21, "quantity_meters": 5000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
162	thread_inventory	2562	INSERT	\N	{"id": 2562, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-012", "location": "B2-02", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-033", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": "2027-06-30", "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 35, "quantity_meters": 4000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
121	thread_inventory	21	UPDATE	{"id": 21, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-021", "location": "A3-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-002", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 21, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-021", "location": "A3-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-002", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 38, "quantity_meters": 4000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
122	thread_inventory	22	UPDATE	{"id": 22, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-022", "location": "A3-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-003", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 22, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-022", "location": "A3-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-003", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 32, "quantity_meters": 4500.0000}	{updated_at,thread_type_id}	\N	\N	\N	2026-02-10 17:34:16.968718+00
123	thread_inventory	23	UPDATE	{"id": 23, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-023", "location": "A3-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-004", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 23, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-023", "location": "A3-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-004", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 35, "quantity_meters": 4000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
124	thread_inventory	24	UPDATE	{"id": 24, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-024", "location": "A3-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-005", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 24, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-024", "location": "A3-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-005", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 150.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 13, "quantity_meters": 5000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
125	thread_inventory	25	UPDATE	{"id": 25, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-025", "location": "A3-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-006", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 25, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-025", "location": "A3-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-006", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 24, "quantity_meters": 5000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
126	thread_inventory	26	UPDATE	{"id": 26, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-026", "location": "A3-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-007", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 26, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-026", "location": "A3-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-007", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 34, "quantity_meters": 4000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
127	thread_inventory	27	UPDATE	{"id": 27, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-027", "location": "A3-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-008", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 27, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-027", "location": "A3-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-008", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 120.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 3, "quantity_meters": 6000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
128	thread_inventory	28	UPDATE	{"id": 28, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-028", "location": "A3-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-009", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 28, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-028", "location": "A3-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-009", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 120.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 5, "quantity_meters": 6000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
129	thread_inventory	29	UPDATE	{"id": 29, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-029", "location": "A3-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-010", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 29, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-029", "location": "A3-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-010", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 120.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 4, "quantity_meters": 6000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
130	thread_inventory	30	UPDATE	{"id": 30, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-030", "location": "A3-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-011", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 30, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-030", "location": "A3-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-011", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 137.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 6, "quantity_meters": 5500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
131	thread_inventory	31	UPDATE	{"id": 31, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-031", "location": "A4-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-012", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 31, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-031", "location": "A4-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-012", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 120.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 1, "quantity_meters": 6000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
132	thread_inventory	32	UPDATE	{"id": 32, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-032", "location": "A4-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-013", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 32, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-032", "location": "A4-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-013", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 168.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 16, "quantity_meters": 4800.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
133	thread_inventory	33	UPDATE	{"id": 33, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-033", "location": "A4-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-014", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 33, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-033", "location": "A4-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-014", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 27, "quantity_meters": 5000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
134	thread_inventory	34	UPDATE	{"id": 34, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-034", "location": "A4-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-015", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 34, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-034", "location": "A4-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-015", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 150.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 15, "quantity_meters": 5000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
135	thread_inventory	35	UPDATE	{"id": 35, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-035", "location": "A4-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-016", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 35, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-035", "location": "A4-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-016", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 168.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 18, "quantity_meters": 4800.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
136	thread_inventory	36	UPDATE	{"id": 36, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-036", "location": "A4-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-017", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 36, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-036", "location": "A4-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-017", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 46, "quantity_meters": 3000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
137	thread_inventory	37	UPDATE	{"id": 37, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-037", "location": "A4-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-018", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 37, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-037", "location": "A4-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-018", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 26, "quantity_meters": 5000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
138	thread_inventory	38	UPDATE	{"id": 38, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-038", "location": "A4-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-019", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 38, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-038", "location": "A4-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-019", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 42, "quantity_meters": 3500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
139	thread_inventory	39	UPDATE	{"id": 39, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-039", "location": "A4-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-020", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 39, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-039", "location": "A4-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-020", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 50, "quantity_meters": 2500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
140	thread_inventory	40	UPDATE	{"id": 40, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-040", "location": "A4-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-001", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 40, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-040", "location": "A4-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-001", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 168.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 19, "quantity_meters": 4800.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
141	thread_inventory	41	UPDATE	{"id": 41, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-041", "location": "A5-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-002", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 41, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-041", "location": "A5-01", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-002", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 28, "quantity_meters": 5000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
142	thread_inventory	42	UPDATE	{"id": 42, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-042", "location": "A5-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-003", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 42, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-042", "location": "A5-02", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-003", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 37, "quantity_meters": 4000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
143	thread_inventory	43	UPDATE	{"id": 43, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-043", "location": "A5-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-004", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 43, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-043", "location": "A5-03", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-004", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 120.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 2, "quantity_meters": 6000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
144	thread_inventory	44	UPDATE	{"id": 44, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-044", "location": "A5-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-005", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 44, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-044", "location": "A5-04", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-005", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 137.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 10, "quantity_meters": 5500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
145	thread_inventory	45	UPDATE	{"id": 45, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-045", "location": "A5-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-006", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 45, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-045", "location": "A5-05", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-006", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 33, "quantity_meters": 4500.0000}	{updated_at,thread_type_id}	\N	\N	\N	2026-02-10 17:34:16.968718+00
146	thread_inventory	46	UPDATE	{"id": 46, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-046", "location": "A5-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-007", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 46, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-046", "location": "A5-06", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-007", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 48, "quantity_meters": 2500.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
147	thread_inventory	47	UPDATE	{"id": 47, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-047", "location": "A5-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-008", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 47, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-047", "location": "A5-07", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-008", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 168.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 20, "quantity_meters": 4800.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
148	thread_inventory	48	UPDATE	{"id": 48, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-048", "location": "A5-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-009", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 48, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-048", "location": "A5-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-009", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 150.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 11, "quantity_meters": 5000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
149	thread_inventory	49	UPDATE	{"id": 49, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-049", "location": "A5-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-010", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 49, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-049", "location": "A5-09", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-010", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 168.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 17, "quantity_meters": 4800.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
150	thread_inventory	50	UPDATE	{"id": 50, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-050", "location": "A5-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-011", "updated_at": "2026-02-10T17:34:16.956845+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 202.50, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	{"id": 50, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-050", "location": "A5-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-011", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 47, "quantity_meters": 3000.0000}	{updated_at,weight_grams,thread_type_id,quantity_meters}	\N	\N	\N	2026-02-10 17:34:16.968718+00
151	thread_inventory	2551	INSERT	\N	{"id": 2551, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-001", "location": "B1-01", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-022", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 120.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 4, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
152	thread_inventory	2552	INSERT	\N	{"id": 2552, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-002", "location": "B1-02", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-023", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 168.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 16, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
153	thread_inventory	2553	INSERT	\N	{"id": 2553, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-003", "location": "B1-03", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-024", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 28, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
154	thread_inventory	2554	INSERT	\N	{"id": 2554, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-004", "location": "B1-04", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-025", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": "2027-06-30", "warehouse_id": 4, "weight_grams": 210.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 40, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
155	thread_inventory	2555	INSERT	\N	{"id": 2555, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-005", "location": "B1-05", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-026", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 150.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 15, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
156	thread_inventory	2556	INSERT	\N	{"id": 2556, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-006", "location": "B1-06", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-027", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 48, "quantity_meters": 2500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
157	thread_inventory	2557	INSERT	\N	{"id": 2557, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-007", "location": "B1-07", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-028", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 168.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 17, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
158	thread_inventory	2558	INSERT	\N	{"id": 2558, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-008", "location": "B1-08", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-029", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": "2027-06-30", "warehouse_id": 4, "weight_grams": 150.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 12, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
159	thread_inventory	2559	INSERT	\N	{"id": 2559, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-009", "location": "B1-09", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-030", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 27, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
160	thread_inventory	2560	INSERT	\N	{"id": 2560, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-010", "location": "B1-10", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-031", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 168.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 19, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
161	thread_inventory	2561	INSERT	\N	{"id": 2561, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-011", "location": "B2-01", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-032", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 49, "quantity_meters": 2500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
163	thread_inventory	2563	INSERT	\N	{"id": 2563, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-013", "location": "B2-03", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-034", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 22, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
164	thread_inventory	2564	INSERT	\N	{"id": 2564, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-014", "location": "B2-04", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-035", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 210.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 41, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
165	thread_inventory	2565	INSERT	\N	{"id": 2565, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-015", "location": "B2-05", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-036", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 202.50, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 30, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
166	thread_inventory	2566	INSERT	\N	{"id": 2566, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-016", "location": "B2-06", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-037", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": "2027-06-30", "warehouse_id": 4, "weight_grams": 168.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 18, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
167	thread_inventory	2567	INSERT	\N	{"id": 2567, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-017", "location": "B2-07", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-038", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 210.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 45, "quantity_meters": 3000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
168	thread_inventory	2568	INSERT	\N	{"id": 2568, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-018", "location": "B2-08", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-039", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 26, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
169	thread_inventory	2569	INSERT	\N	{"id": 2569, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-019", "location": "B2-09", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-040", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 120.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 5, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
170	thread_inventory	2570	INSERT	\N	{"id": 2570, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-020", "location": "B2-10", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-021", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": "2027-06-30", "warehouse_id": 4, "weight_grams": 168.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 20, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
171	thread_inventory	2571	INSERT	\N	{"id": 2571, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-021", "location": "B3-01", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-022", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 37, "quantity_meters": 4000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
172	thread_inventory	2572	INSERT	\N	{"id": 2572, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-022", "location": "B3-02", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-023", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 150.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 13, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
173	thread_inventory	2573	INSERT	\N	{"id": 2573, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-023", "location": "B3-03", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-024", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 21, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
174	thread_inventory	2574	INSERT	\N	{"id": 2574, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-024", "location": "B3-04", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-025", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": "2027-06-30", "warehouse_id": 4, "weight_grams": 120.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 1, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
175	thread_inventory	2575	INSERT	\N	{"id": 2575, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-025", "location": "B3-05", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-026", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 25, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
176	thread_inventory	2576	INSERT	\N	{"id": 2576, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-026", "location": "B3-06", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-027", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 210.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 44, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
177	thread_inventory	2577	INSERT	\N	{"id": 2577, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-027", "location": "B3-07", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-028", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 210.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 46, "quantity_meters": 3000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
178	thread_inventory	2578	INSERT	\N	{"id": 2578, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-028", "location": "B3-08", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-029", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": "2027-06-30", "warehouse_id": 4, "weight_grams": 137.50, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 8, "quantity_meters": 5500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
179	thread_inventory	2579	INSERT	\N	{"id": 2579, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-029", "location": "B3-09", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-030", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 137.50, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 10, "quantity_meters": 5500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
180	thread_inventory	2580	INSERT	\N	{"id": 2580, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-030", "location": "B3-10", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-031", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 24, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
181	thread_inventory	2581	INSERT	\N	{"id": 2581, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-031", "location": "B4-01", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-032", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 50, "quantity_meters": 2500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
182	thread_inventory	2582	INSERT	\N	{"id": 2582, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-032", "location": "B4-02", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-033", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": "2027-06-30", "warehouse_id": 4, "weight_grams": 202.50, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 29, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
183	thread_inventory	2583	INSERT	\N	{"id": 2583, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-033", "location": "B4-03", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-034", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 210.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 39, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
184	thread_inventory	2584	INSERT	\N	{"id": 2584, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-034", "location": "B4-04", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-035", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 137.50, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 6, "quantity_meters": 5500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
185	thread_inventory	2585	INSERT	\N	{"id": 2585, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-035", "location": "B4-05", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-036", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 120.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 3, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
186	thread_inventory	2586	INSERT	\N	{"id": 2586, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-036", "location": "B4-06", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-037", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": "2027-06-30", "warehouse_id": 4, "weight_grams": 137.50, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 9, "quantity_meters": 5500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
187	thread_inventory	2587	INSERT	\N	{"id": 2587, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-037", "location": "B4-07", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-038", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 137.50, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 7, "quantity_meters": 5500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
188	thread_inventory	2588	INSERT	\N	{"id": 2588, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-038", "location": "B4-08", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-039", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 210.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 47, "quantity_meters": 3000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
189	thread_inventory	2589	INSERT	\N	{"id": 2589, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-039", "location": "B4-09", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-040", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 38, "quantity_meters": 4000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
190	thread_inventory	2590	INSERT	\N	{"id": 2590, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-040", "location": "B4-10", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-021", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": "2027-06-30", "warehouse_id": 4, "weight_grams": 210.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 42, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
191	thread_inventory	2591	INSERT	\N	{"id": 2591, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-041", "location": "B5-01", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-022", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 150.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 14, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
192	thread_inventory	2592	INSERT	\N	{"id": 2592, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-042", "location": "B5-02", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-023", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 150.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 11, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
193	thread_inventory	2593	INSERT	\N	{"id": 2593, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-043", "location": "B5-03", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-024", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 34, "quantity_meters": 4000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
194	thread_inventory	2594	INSERT	\N	{"id": 2594, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-044", "location": "B5-04", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-025", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": "2027-06-30", "warehouse_id": 4, "weight_grams": 202.50, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
195	thread_inventory	2595	INSERT	\N	{"id": 2595, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-045", "location": "B5-05", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-026", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 202.50, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 33, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
196	thread_inventory	2596	INSERT	\N	{"id": 2596, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-046", "location": "B5-06", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-027", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 36, "quantity_meters": 4000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
197	thread_inventory	2597	INSERT	\N	{"id": 2597, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-047", "location": "B5-07", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-028", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 23, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
198	thread_inventory	2598	INSERT	\N	{"id": 2598, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-048", "location": "B5-08", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-029", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": "2027-06-30", "warehouse_id": 4, "weight_grams": 120.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 2, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
199	thread_inventory	2599	INSERT	\N	{"id": 2599, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-049", "location": "B5-09", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-030", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 210.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 43, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
200	thread_inventory	2600	INSERT	\N	{"id": 2600, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-050", "location": "B5-10", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-031", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 202.50, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 32, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.98329+00
201	thread_inventory	2601	INSERT	\N	{"id": 2601, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-001", "location": "C1-01", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-042", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 150.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 14, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
202	thread_inventory	2602	INSERT	\N	{"id": 2602, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-002", "location": "C1-02", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-043", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 200.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 27, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
203	thread_inventory	2603	INSERT	\N	{"id": 2603, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-003", "location": "C1-03", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-044", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 120.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 4, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
204	thread_inventory	2604	INSERT	\N	{"id": 2604, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-004", "location": "C1-04", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-045", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 168.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 20, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
205	thread_inventory	2605	INSERT	\N	{"id": 2605, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-005", "location": "C1-05", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-046", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": "2026-09-30", "warehouse_id": 5, "weight_grams": 210.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 44, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
206	thread_inventory	2606	INSERT	\N	{"id": 2606, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-006", "location": "C1-06", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-047", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 200.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 36, "quantity_meters": 4000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
207	thread_inventory	2607	INSERT	\N	{"id": 2607, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-007", "location": "C1-07", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-048", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 168.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 19, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
208	thread_inventory	2608	INSERT	\N	{"id": 2608, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-008", "location": "C1-08", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-049", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 210.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 43, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
209	thread_inventory	2609	INSERT	\N	{"id": 2609, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-009", "location": "C2-01", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-050", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 202.50, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
210	thread_inventory	2610	INSERT	\N	{"id": 2610, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-010", "location": "C2-02", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-051", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": "2026-09-30", "warehouse_id": 5, "weight_grams": 210.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 41, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
211	thread_inventory	2611	INSERT	\N	{"id": 2611, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-011", "location": "C2-03", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-052", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 120.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 5, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
212	thread_inventory	2612	INSERT	\N	{"id": 2612, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-012", "location": "C2-04", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-053", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 210.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 39, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
213	thread_inventory	2613	INSERT	\N	{"id": 2613, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-013", "location": "C2-05", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-054", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 202.50, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 29, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
214	thread_inventory	2614	INSERT	\N	{"id": 2614, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-014", "location": "C2-06", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-055", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 210.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 47, "quantity_meters": 3000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
215	thread_inventory	2615	INSERT	\N	{"id": 2615, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-015", "location": "C2-07", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-041", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": "2026-09-30", "warehouse_id": 5, "weight_grams": 210.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 42, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
216	thread_inventory	2616	INSERT	\N	{"id": 2616, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-016", "location": "C2-08", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-042", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 168.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 18, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
217	thread_inventory	2617	INSERT	\N	{"id": 2617, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-017", "location": "C3-01", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-043", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 200.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 34, "quantity_meters": 4000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
218	thread_inventory	2618	INSERT	\N	{"id": 2618, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-018", "location": "C3-02", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-044", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 120.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 1, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
219	thread_inventory	2619	INSERT	\N	{"id": 2619, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-019", "location": "C3-03", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-045", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 168.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 17, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
220	thread_inventory	2620	INSERT	\N	{"id": 2620, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-020", "location": "C3-04", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-046", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": "2026-09-30", "warehouse_id": 5, "weight_grams": 200.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 24, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
221	thread_inventory	2621	INSERT	\N	{"id": 2621, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-021", "location": "C3-05", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-047", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 200.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 25, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
222	thread_inventory	2622	INSERT	\N	{"id": 2622, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-022", "location": "C3-06", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-048", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 202.50, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 30, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
223	thread_inventory	2623	INSERT	\N	{"id": 2623, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-023", "location": "C3-07", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-049", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 168.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 16, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
224	thread_inventory	2624	INSERT	\N	{"id": 2624, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-024", "location": "C3-08", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-050", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 150.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 15, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
225	thread_inventory	2625	INSERT	\N	{"id": 2625, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-025", "location": "C4-01", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-051", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": "2026-09-30", "warehouse_id": 5, "weight_grams": 202.50, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 32, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
226	thread_inventory	2626	INSERT	\N	{"id": 2626, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-026", "location": "C4-02", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-052", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 210.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 46, "quantity_meters": 3000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
227	thread_inventory	2627	INSERT	\N	{"id": 2627, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-027", "location": "C4-03", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-053", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 200.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 35, "quantity_meters": 4000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
228	thread_inventory	2628	INSERT	\N	{"id": 2628, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-028", "location": "C4-04", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-054", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 200.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 50, "quantity_meters": 2500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
229	thread_inventory	2629	INSERT	\N	{"id": 2629, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-029", "location": "C4-05", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-055", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 200.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 22, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
230	thread_inventory	2630	INSERT	\N	{"id": 2630, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-030", "location": "C4-06", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-041", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": "2026-09-30", "warehouse_id": 5, "weight_grams": 200.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 48, "quantity_meters": 2500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
231	thread_inventory	2631	INSERT	\N	{"id": 2631, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-031", "location": "C4-07", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-042", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 137.50, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 9, "quantity_meters": 5500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
232	thread_inventory	2632	INSERT	\N	{"id": 2632, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-032", "location": "C4-08", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-043", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 137.50, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 8, "quantity_meters": 5500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
233	thread_inventory	2633	INSERT	\N	{"id": 2633, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-033", "location": "C5-01", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-044", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 200.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 37, "quantity_meters": 4000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
234	thread_inventory	2634	INSERT	\N	{"id": 2634, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-034", "location": "C5-02", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-045", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 137.50, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 6, "quantity_meters": 5500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
235	thread_inventory	2635	INSERT	\N	{"id": 2635, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-035", "location": "C5-03", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-046", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": "2026-09-30", "warehouse_id": 5, "weight_grams": 200.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 23, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
236	thread_inventory	2636	INSERT	\N	{"id": 2636, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-036", "location": "C5-04", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-047", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 120.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 3, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
237	thread_inventory	2637	INSERT	\N	{"id": 2637, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-037", "location": "C5-05", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-048", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 150.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 11, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
238	thread_inventory	2638	INSERT	\N	{"id": 2638, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-038", "location": "C5-06", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-049", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 120.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 2, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
239	thread_inventory	2639	INSERT	\N	{"id": 2639, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-039", "location": "C5-07", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-050", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 200.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 49, "quantity_meters": 2500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
240	thread_inventory	2640	INSERT	\N	{"id": 2640, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-040", "location": "C5-08", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-051", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": "2026-09-30", "warehouse_id": 5, "weight_grams": 210.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 40, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.991499+00
241	thread_inventory	2641	INSERT	\N	{"id": 2641, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-001", "location": "P1-01", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-057", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 210.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 46, "quantity_meters": 3000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
242	thread_inventory	2642	INSERT	\N	{"id": 2642, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-002", "location": "P1-02", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-058", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 120.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 4, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
243	thread_inventory	2643	INSERT	\N	{"id": 2643, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-003", "location": "P1-03", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-059", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 150.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 13, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
244	thread_inventory	2644	INSERT	\N	{"id": 2644, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-004", "location": "P1-04", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-060", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": "2027-03-31", "warehouse_id": 6, "weight_grams": 137.50, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 10, "quantity_meters": 5500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
245	thread_inventory	2645	INSERT	\N	{"id": 2645, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-005", "location": "P1-05", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-061", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 120.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 3, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
246	thread_inventory	2646	INSERT	\N	{"id": 2646, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-006", "location": "P1-06", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-062", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 202.50, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
247	thread_inventory	2647	INSERT	\N	{"id": 2647, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-007", "location": "P1-07", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-063", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 168.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 20, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
248	thread_inventory	2648	INSERT	\N	{"id": 2648, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-008", "location": "P1-08", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-064", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": "2027-03-31", "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 22, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
249	thread_inventory	2649	INSERT	\N	{"id": 2649, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-009", "location": "P2-01", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-065", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 168.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 19, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
250	thread_inventory	2650	INSERT	\N	{"id": 2650, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-010", "location": "P2-02", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-066", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 21, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
251	thread_inventory	2651	INSERT	\N	{"id": 2651, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-011", "location": "P2-03", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-067", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 34, "quantity_meters": 4000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
252	thread_inventory	2652	INSERT	\N	{"id": 2652, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-012", "location": "P2-04", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-056", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": "2027-03-31", "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 49, "quantity_meters": 2500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
253	thread_inventory	2653	INSERT	\N	{"id": 2653, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-013", "location": "P2-05", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-057", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 168.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 16, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
254	thread_inventory	2654	INSERT	\N	{"id": 2654, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-014", "location": "P2-06", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-058", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 27, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
255	thread_inventory	2655	INSERT	\N	{"id": 2655, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-015", "location": "P2-07", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-059", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 210.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 44, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
256	thread_inventory	2656	INSERT	\N	{"id": 2656, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-016", "location": "P2-08", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-060", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": "2027-03-31", "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 28, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
257	thread_inventory	2657	INSERT	\N	{"id": 2657, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-017", "location": "P3-01", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-061", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 150.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 11, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
258	thread_inventory	2658	INSERT	\N	{"id": 2658, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-018", "location": "P3-02", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-062", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 210.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 39, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
259	thread_inventory	2659	INSERT	\N	{"id": 2659, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-019", "location": "P3-03", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-063", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 137.50, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 6, "quantity_meters": 5500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
260	thread_inventory	2660	INSERT	\N	{"id": 2660, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-020", "location": "P3-04", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-064", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": "2027-03-31", "warehouse_id": 6, "weight_grams": 210.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 45, "quantity_meters": 3000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
261	thread_inventory	2661	INSERT	\N	{"id": 2661, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-021", "location": "P3-05", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-065", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 168.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 17, "quantity_meters": 4800.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
262	thread_inventory	2662	INSERT	\N	{"id": 2662, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-022", "location": "P3-06", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-066", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 26, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
263	thread_inventory	2663	INSERT	\N	{"id": 2663, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-023", "location": "P3-07", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-067", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 35, "quantity_meters": 4000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
264	thread_inventory	2664	INSERT	\N	{"id": 2664, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-024", "location": "P3-08", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-056", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": "2027-03-31", "warehouse_id": 6, "weight_grams": 150.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 12, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
265	thread_inventory	2665	INSERT	\N	{"id": 2665, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-025", "location": "P4-01", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-057", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 120.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 5, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
266	thread_inventory	2666	INSERT	\N	{"id": 2666, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-026", "location": "P4-02", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-058", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 38, "quantity_meters": 4000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
267	thread_inventory	2667	INSERT	\N	{"id": 2667, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-027", "location": "P4-03", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-059", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 48, "quantity_meters": 2500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
268	thread_inventory	2668	INSERT	\N	{"id": 2668, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-028", "location": "P4-04", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-060", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": "2027-03-31", "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 36, "quantity_meters": 4000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
269	thread_inventory	2669	INSERT	\N	{"id": 2669, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-029", "location": "P4-05", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-061", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 137.50, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 8, "quantity_meters": 5500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
270	thread_inventory	2670	INSERT	\N	{"id": 2670, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-030", "location": "P4-06", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-062", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 120.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 1, "quantity_meters": 6000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
271	thread_inventory	2671	INSERT	\N	{"id": 2671, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-031", "location": "P4-07", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-063", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 210.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 43, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
272	thread_inventory	2672	INSERT	\N	{"id": 2672, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-032", "location": "P4-08", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-064", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": "2027-03-31", "warehouse_id": 6, "weight_grams": 137.50, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 9, "quantity_meters": 5500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
273	thread_inventory	2673	INSERT	\N	{"id": 2673, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-033", "location": "P5-01", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-065", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 150.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 15, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
274	thread_inventory	2674	INSERT	\N	{"id": 2674, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-034", "location": "P5-02", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-066", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 23, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
275	thread_inventory	2675	INSERT	\N	{"id": 2675, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-035", "location": "P5-03", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-067", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 210.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 47, "quantity_meters": 3000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
276	thread_inventory	2676	INSERT	\N	{"id": 2676, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-036", "location": "P5-04", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-056", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": "2027-03-31", "warehouse_id": 6, "weight_grams": 202.50, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 32, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
277	thread_inventory	2677	INSERT	\N	{"id": 2677, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-037", "location": "P5-05", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-057", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 202.50, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 33, "quantity_meters": 4500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
278	thread_inventory	2678	INSERT	\N	{"id": 2678, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-038", "location": "P5-06", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-058", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 24, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
279	thread_inventory	2679	INSERT	\N	{"id": 2679, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-039", "location": "P5-07", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-059", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 25, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
280	thread_inventory	2680	INSERT	\N	{"id": 2680, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-040", "location": "P5-08", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-060", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": "2027-03-31", "warehouse_id": 6, "weight_grams": 210.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 40, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:16.998402+00
281	thread_inventory	2681	INSERT	\N	{"id": 2681, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-001", "location": "REC-01", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-001", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 122.16, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 38, "quantity_meters": 2443.2800}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
282	thread_inventory	2682	INSERT	\N	{"id": 2682, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-002", "location": "REC-02", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-002", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 94.78, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 13, "quantity_meters": 3159.3400}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
283	thread_inventory	2683	INSERT	\N	{"id": 2683, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-003", "location": "REC-03", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-003", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 43.79, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 4, "quantity_meters": 2189.3700}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
284	thread_inventory	2684	INSERT	\N	{"id": 2684, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-004", "location": "REC-04", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-004", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 125.61, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 49, "quantity_meters": 1570.1400}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
285	thread_inventory	2685	INSERT	\N	{"id": 2685, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-005", "location": "REC-05", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-005", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 101.26, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 30, "quantity_meters": 2250.2200}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
286	thread_inventory	2686	INSERT	\N	{"id": 2686, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-006", "location": "REC-06", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-006", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 129.31, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 48, "quantity_meters": 1616.3500}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
287	thread_inventory	2687	INSERT	\N	{"id": 2687, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-007", "location": "REC-07", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-007", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 136.30, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 36, "quantity_meters": 2725.9200}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
288	thread_inventory	2688	INSERT	\N	{"id": 2688, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-008", "location": "REC-08", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-008", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 56.40, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 20, "quantity_meters": 1611.5400}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
289	thread_inventory	2689	INSERT	\N	{"id": 2689, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-009", "location": "REC-09", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-009", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 49.71, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 31, "quantity_meters": 1104.7700}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
290	thread_inventory	2690	INSERT	\N	{"id": 2690, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-010", "location": "REC-10", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-010", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 138.06, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 46, "quantity_meters": 1972.3000}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
291	thread_inventory	2691	INSERT	\N	{"id": 2691, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-011", "location": "REC-11", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-011", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 137.10, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 41, "quantity_meters": 2284.9700}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
292	thread_inventory	2692	INSERT	\N	{"id": 2692, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-012", "location": "REC-12", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-012", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 131.82, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 26, "quantity_meters": 3295.5100}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
293	thread_inventory	2693	INSERT	\N	{"id": 2693, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-013", "location": "REC-13", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-013", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 84.13, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 37, "quantity_meters": 1682.5800}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
294	thread_inventory	2694	INSERT	\N	{"id": 2694, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-014", "location": "REC-14", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-014", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 95.35, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 33, "quantity_meters": 2118.9800}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
295	thread_inventory	2695	INSERT	\N	{"id": 2695, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-015", "location": "REC-15", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-015", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 48.62, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 47, "quantity_meters": 694.5800}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
296	thread_inventory	2696	INSERT	\N	{"id": 2696, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-016", "location": "REC-16", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-016", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 125.32, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 25, "quantity_meters": 3132.9600}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
297	thread_inventory	2697	INSERT	\N	{"id": 2697, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-017", "location": "REC-17", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-017", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 52.78, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 12, "quantity_meters": 1759.3400}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
298	thread_inventory	2698	INSERT	\N	{"id": 2698, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-018", "location": "REC-18", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-018", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 41.10, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 18, "quantity_meters": 1174.2800}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
299	thread_inventory	2699	INSERT	\N	{"id": 2699, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-019", "location": "REC-19", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-019", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 137.14, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 21, "quantity_meters": 3428.4300}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
300	thread_inventory	2700	INSERT	\N	{"id": 2700, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PAR-020", "location": "REC-20", "created_at": "2026-02-10T17:34:17.005421+00:00", "is_partial": true, "lot_number": "LOT-2024-PAR-020", "updated_at": "2026-02-10T17:34:17.005421+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 47.96, "received_date": "2024-12-15", "quantity_cones": 1, "thread_type_id": 6, "quantity_meters": 1918.4500}	\N	\N	\N	\N	2026-02-10 17:34:17.005421+00
301	thread_inventory	2701	INSERT	\N	{"id": 2701, "lot_id": null, "status": "IN_PRODUCTION", "cone_id": "TST-PRO-001", "location": null, "created_at": "2026-02-10T17:34:17.011349+00:00", "is_partial": false, "lot_number": "LOT-2025-PRO-001", "updated_at": "2026-02-10T17:34:17.011349+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-10", "quantity_cones": 1, "thread_type_id": 23, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.011349+00
302	thread_inventory	2702	INSERT	\N	{"id": 2702, "lot_id": null, "status": "IN_PRODUCTION", "cone_id": "TST-PRO-002", "location": null, "created_at": "2026-02-10T17:34:17.011349+00:00", "is_partial": false, "lot_number": "LOT-2025-PRO-002", "updated_at": "2026-02-10T17:34:17.011349+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-10", "quantity_cones": 1, "thread_type_id": 28, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.011349+00
303	thread_inventory	2703	INSERT	\N	{"id": 2703, "lot_id": null, "status": "IN_PRODUCTION", "cone_id": "TST-PRO-003", "location": null, "created_at": "2026-02-10T17:34:17.011349+00:00", "is_partial": false, "lot_number": "LOT-2025-PRO-003", "updated_at": "2026-02-10T17:34:17.011349+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-10", "quantity_cones": 1, "thread_type_id": 26, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.011349+00
304	thread_inventory	2704	INSERT	\N	{"id": 2704, "lot_id": null, "status": "IN_PRODUCTION", "cone_id": "TST-PRO-004", "location": null, "created_at": "2026-02-10T17:34:17.011349+00:00", "is_partial": false, "lot_number": "LOT-2025-PRO-004", "updated_at": "2026-02-10T17:34:17.011349+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-10", "quantity_cones": 1, "thread_type_id": 21, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.011349+00
305	thread_inventory	2705	INSERT	\N	{"id": 2705, "lot_id": null, "status": "IN_PRODUCTION", "cone_id": "TST-PRO-005", "location": null, "created_at": "2026-02-10T17:34:17.011349+00:00", "is_partial": false, "lot_number": "LOT-2025-PRO-005", "updated_at": "2026-02-10T17:34:17.011349+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-10", "quantity_cones": 1, "thread_type_id": 22, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.011349+00
306	thread_inventory	2706	INSERT	\N	{"id": 2706, "lot_id": null, "status": "IN_PRODUCTION", "cone_id": "TST-PRO-006", "location": null, "created_at": "2026-02-10T17:34:17.011349+00:00", "is_partial": false, "lot_number": "LOT-2025-PRO-006", "updated_at": "2026-02-10T17:34:17.011349+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-10", "quantity_cones": 1, "thread_type_id": 24, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.011349+00
307	thread_inventory	2707	INSERT	\N	{"id": 2707, "lot_id": null, "status": "IN_PRODUCTION", "cone_id": "TST-PRO-007", "location": null, "created_at": "2026-02-10T17:34:17.011349+00:00", "is_partial": false, "lot_number": "LOT-2025-PRO-007", "updated_at": "2026-02-10T17:34:17.011349+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-10", "quantity_cones": 1, "thread_type_id": 25, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.011349+00
308	thread_inventory	2708	INSERT	\N	{"id": 2708, "lot_id": null, "status": "IN_PRODUCTION", "cone_id": "TST-PRO-008", "location": null, "created_at": "2026-02-10T17:34:17.011349+00:00", "is_partial": false, "lot_number": "LOT-2025-PRO-008", "updated_at": "2026-02-10T17:34:17.011349+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-10", "quantity_cones": 1, "thread_type_id": 27, "quantity_meters": 5000.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.011349+00
309	thread_inventory	2709	INSERT	\N	{"id": 2709, "lot_id": null, "status": "RECEIVED", "cone_id": "TST-NEW-001", "location": "RECV-AREA", "created_at": "2026-02-10T17:34:17.016294+00:00", "is_partial": false, "lot_number": "LOT-2025-NEW-001", "updated_at": "2026-02-10T17:34:17.016294+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2026-02-10", "quantity_cones": 1, "thread_type_id": 44, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.016294+00
310	thread_inventory	2710	INSERT	\N	{"id": 2710, "lot_id": null, "status": "RECEIVED", "cone_id": "TST-NEW-002", "location": "RECV-AREA", "created_at": "2026-02-10T17:34:17.016294+00:00", "is_partial": false, "lot_number": "LOT-2025-NEW-002", "updated_at": "2026-02-10T17:34:17.016294+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2026-02-10", "quantity_cones": 1, "thread_type_id": 39, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.016294+00
311	thread_inventory	2711	INSERT	\N	{"id": 2711, "lot_id": null, "status": "RECEIVED", "cone_id": "TST-NEW-003", "location": "RECV-AREA", "created_at": "2026-02-10T17:34:17.016294+00:00", "is_partial": false, "lot_number": "LOT-2025-NEW-003", "updated_at": "2026-02-10T17:34:17.016294+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2026-02-10", "quantity_cones": 1, "thread_type_id": 41, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.016294+00
312	thread_inventory	2712	INSERT	\N	{"id": 2712, "lot_id": null, "status": "RECEIVED", "cone_id": "TST-NEW-004", "location": "RECV-AREA", "created_at": "2026-02-10T17:34:17.016294+00:00", "is_partial": false, "lot_number": "LOT-2025-NEW-004", "updated_at": "2026-02-10T17:34:17.016294+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2026-02-10", "quantity_cones": 1, "thread_type_id": 42, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.016294+00
313	thread_inventory	2713	INSERT	\N	{"id": 2713, "lot_id": null, "status": "RECEIVED", "cone_id": "TST-NEW-005", "location": "RECV-AREA", "created_at": "2026-02-10T17:34:17.016294+00:00", "is_partial": false, "lot_number": "LOT-2025-NEW-005", "updated_at": "2026-02-10T17:34:17.016294+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2026-02-10", "quantity_cones": 1, "thread_type_id": 43, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.016294+00
314	thread_inventory	2714	INSERT	\N	{"id": 2714, "lot_id": null, "status": "RECEIVED", "cone_id": "TST-NEW-006", "location": "RECV-AREA", "created_at": "2026-02-10T17:34:17.016294+00:00", "is_partial": false, "lot_number": "LOT-2025-NEW-006", "updated_at": "2026-02-10T17:34:17.016294+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2026-02-10", "quantity_cones": 1, "thread_type_id": 40, "quantity_meters": 3500.0000}	\N	\N	\N	\N	2026-02-10 17:34:17.016294+00
315	thread_allocations	2	INSERT	\N	{"id": 2, "notes": "Vt s - cn thiu 5000m", "status": "SOFT", "due_date": "2026-02-28", "order_id": "PO-2026-0001", "priority": "NORMAL", "created_at": "2026-02-10T17:37:09.331497+00:00", "created_by": null, "updated_at": "2026-02-10T17:37:09.331497+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-10T17:37:09.331497+00:00", "thread_type_id": 11, "order_reference": "UNIQLO - o S Mi Nam Vt s", "allocated_meters": 25000.0000, "requested_meters": 30000.0000}	\N	\N	\N	\N	2026-02-10 17:37:09.331497+00
316	thread_allocations	3	INSERT	\N	{"id": 3, "notes": null, "status": "HARD", "due_date": "2026-03-01", "order_id": "PO-2026-0003", "priority": "NORMAL", "created_at": "2026-02-10T17:37:09.331497+00:00", "created_by": null, "updated_at": "2026-02-10T17:37:09.331497+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-10T17:37:09.331497+00:00", "thread_type_id": 12, "order_reference": "H&M - Qun Kaki N", "allocated_meters": 40000.0000, "requested_meters": 40000.0000}	\N	\N	\N	\N	2026-02-10 17:37:09.331497+00
317	thread_allocations	4	INSERT	\N	{"id": 4, "notes": "Allocation for production", "status": "HARD", "due_date": "2026-02-28", "order_id": "PO-2026-0001", "priority": "NORMAL", "created_at": "2026-02-10T17:37:09.331497+00:00", "created_by": null, "updated_at": "2026-02-10T17:37:09.331497+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-10T17:37:09.331497+00:00", "thread_type_id": 21, "order_reference": "UNIQLO - o S Mi Nam Trng", "allocated_meters": 45000.0000, "requested_meters": 50000.0000}	\N	\N	\N	\N	2026-02-10 17:37:09.331497+00
318	thread_allocations	5	INSERT	\N	{"id": 5, "notes": "ang xut dn", "status": "SOFT", "due_date": "2026-03-01", "order_id": "PO-2026-0003", "priority": "NORMAL", "created_at": "2026-02-10T17:37:09.331497+00:00", "created_by": null, "updated_at": "2026-02-10T17:37:09.331497+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-10T17:37:09.331497+00:00", "thread_type_id": 22, "order_reference": "H&M - o Thun C Trn", "allocated_meters": 60000.0000, "requested_meters": 80000.0000}	\N	\N	\N	\N	2026-02-10 17:37:09.331497+00
319	thread_allocations	6	INSERT	\N	{"id": 6, "notes": "Ch polyester", "status": "HARD", "due_date": "2026-03-25", "order_id": "PO-2026-0006", "priority": "NORMAL", "created_at": "2026-02-10T17:37:09.331497+00:00", "created_by": null, "updated_at": "2026-02-10T17:37:09.331497+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-10T17:37:09.331497+00:00", "thread_type_id": 24, "order_reference": "Decathlon - Qun Short", "allocated_meters": 35000.0000, "requested_meters": 35000.0000}	\N	\N	\N	\N	2026-02-10 17:37:09.331497+00
320	thread_allocations	7	INSERT	\N	{"id": 7, "notes": "Ch nhp kho", "status": "PENDING", "due_date": "2026-03-25", "order_id": "PO-2026-0006", "priority": "NORMAL", "created_at": "2026-02-10T17:37:09.331497+00:00", "created_by": null, "updated_at": "2026-02-10T17:37:09.331497+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-10T17:37:09.331497+00:00", "thread_type_id": 25, "order_reference": "Decathlon - o Polo", "allocated_meters": 0.0000, "requested_meters": 28000.0000}	\N	\N	\N	\N	2026-02-10 17:37:09.331497+00
321	thread_allocations	8	INSERT	\N	{"id": 8, "notes": " xut ", "status": "ISSUED", "due_date": "2026-03-30", "order_id": "PO-2026-0008", "priority": "NORMAL", "created_at": "2026-02-10T17:37:09.331497+00:00", "created_by": null, "updated_at": "2026-02-10T17:37:09.331497+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-10T17:37:09.331497+00:00", "thread_type_id": 26, "order_reference": "Nike - o dri-fit", "allocated_meters": 55000.0000, "requested_meters": 55000.0000}	\N	\N	\N	\N	2026-02-10 17:37:09.331497+00
322	thread_allocations	9	INSERT	\N	{"id": 9, "notes": null, "status": "SOFT", "due_date": "2026-03-30", "order_id": "PO-2026-0008", "priority": "NORMAL", "created_at": "2026-02-10T17:37:09.331497+00:00", "created_by": null, "updated_at": "2026-02-10T17:37:09.331497+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-10T17:37:09.331497+00:00", "thread_type_id": 27, "order_reference": "Nike - Short chy b", "allocated_meters": 40000.0000, "requested_meters": 45000.0000}	\N	\N	\N	\N	2026-02-10 17:37:09.331497+00
323	thread_allocations	10	INSERT	\N	{"id": 10, "notes": "Ch mn cho c", "status": "HARD", "due_date": "2026-02-28", "order_id": "PO-2026-0001", "priority": "NORMAL", "created_at": "2026-02-10T17:37:09.331497+00:00", "created_by": null, "updated_at": "2026-02-10T17:37:09.331497+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-10T17:37:09.331497+00:00", "thread_type_id": 39, "order_reference": "UNIQLO - o S Mi Nam C", "allocated_meters": 15000.0000, "requested_meters": 15000.0000}	\N	\N	\N	\N	2026-02-10 17:37:09.331497+00
324	thread_allocations	11	INSERT	\N	{"id": 11, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-1-QU-003-27", "priority": "NORMAL", "created_at": "2026-02-10T17:44:09.158442+00:00", "created_by": null, "updated_at": "2026-02-10T17:44:09.158442+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-10T17:44:09.158442+00:00", "thread_type_id": 22, "order_reference": "Tun 1 - Qun Short Th Thao - May thn qun", "allocated_meters": 0.0000, "requested_meters": 20000.0000}	\N	\N	\N	\N	2026-02-10 17:44:09.158442+00
325	thread_allocations	12	INSERT	\N	{"id": 12, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-1-QU-003-28", "priority": "NORMAL", "created_at": "2026-02-10T17:44:09.158442+00:00", "created_by": null, "updated_at": "2026-02-10T17:44:09.158442+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-10T17:44:09.158442+00:00", "thread_type_id": 22, "order_reference": "Tun 1 - Qun Short Th Thao - May thun eo", "allocated_meters": 0.0000, "requested_meters": 20000.0000}	\N	\N	\N	\N	2026-02-10 17:44:09.158442+00
326	thread_allocations	13	INSERT	\N	{"id": 13, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-1-AO-004-21", "priority": "NORMAL", "created_at": "2026-02-10T17:44:09.158442+00:00", "created_by": null, "updated_at": "2026-02-10T17:44:09.158442+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-10T17:44:09.158442+00:00", "thread_type_id": 22, "order_reference": "Tun 1 - o Thun C Trn - May thn o", "allocated_meters": 0.0000, "requested_meters": 10000.0000}	\N	\N	\N	\N	2026-02-10 17:44:09.158442+00
327	thread_allocations	14	INSERT	\N	{"id": 14, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-1-AO-004-22", "priority": "NORMAL", "created_at": "2026-02-10T17:44:09.158442+00:00", "created_by": null, "updated_at": "2026-02-10T17:44:09.158442+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-10T17:44:09.158442+00:00", "thread_type_id": 22, "order_reference": "Tun 1 - o Thun C Trn - Vin c + gu", "allocated_meters": 0.0000, "requested_meters": 10000.0000}	\N	\N	\N	\N	2026-02-10 17:44:09.158442+00
328	thread_allocations	15	INSERT	\N	{"id": 15, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-2-QU-001-10", "priority": "NORMAL", "created_at": "2026-02-11T03:45:45.419938+00:00", "created_by": null, "updated_at": "2026-02-11T03:45:45.419938+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-11T03:45:45.419938+00:00", "thread_type_id": 21, "order_reference": "Tun 2 - Qun u Nam Slimfit - May dy ko", "allocated_meters": 0.0000, "requested_meters": 5000.0000}	\N	\N	\N	\N	2026-02-11 03:45:45.419938+00
329	thread_allocations	16	INSERT	\N	{"id": 16, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-2-AO-001-1", "priority": "NORMAL", "created_at": "2026-02-11T03:45:45.419938+00:00", "created_by": null, "updated_at": "2026-02-11T03:45:45.419938+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-11T03:45:45.419938+00:00", "thread_type_id": 21, "order_reference": "Tun 2 - o S Mi Nam C ng - May thn o", "allocated_meters": 0.0000, "requested_meters": 15000.0000}	\N	\N	\N	\N	2026-02-11 03:45:45.419938+00
330	thread_allocations	17	INSERT	\N	{"id": 17, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-2-AO-001-3", "priority": "NORMAL", "created_at": "2026-02-11T03:45:45.419938+00:00", "created_by": null, "updated_at": "2026-02-11T03:45:45.419938+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-11T03:45:45.419938+00:00", "thread_type_id": 21, "order_reference": "Tun 2 - o S Mi Nam C ng - May tay o", "allocated_meters": 0.0000, "requested_meters": 10000.0000}	\N	\N	\N	\N	2026-02-11 03:45:45.419938+00
331	thread_allocations	18	INSERT	\N	{"id": 18, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-2-AO-001-4", "priority": "NORMAL", "created_at": "2026-02-11T03:45:45.419938+00:00", "created_by": null, "updated_at": "2026-02-11T03:45:45.419938+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-11T03:45:45.419938+00:00", "thread_type_id": 11, "order_reference": "Tun 2 - o S Mi Nam C ng - Vt s", "allocated_meters": 0.0000, "requested_meters": 15000.0000}	\N	\N	\N	\N	2026-02-11 03:45:45.419938+00
332	thread_allocations	19	INSERT	\N	{"id": 19, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-2-QU-001-10", "priority": "NORMAL", "created_at": "2026-02-11T03:51:43.511542+00:00", "created_by": null, "updated_at": "2026-02-11T03:51:43.511542+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-11T03:51:43.511542+00:00", "thread_type_id": 21, "order_reference": "Tun 2 - Qun u Nam Slimfit - May dy ko", "allocated_meters": 0.0000, "requested_meters": 5000.0000}	\N	\N	\N	\N	2026-02-11 03:51:43.511542+00
333	thread_allocations	20	INSERT	\N	{"id": 20, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-2-AO-001-1", "priority": "NORMAL", "created_at": "2026-02-11T03:51:43.511542+00:00", "created_by": null, "updated_at": "2026-02-11T03:51:43.511542+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-11T03:51:43.511542+00:00", "thread_type_id": 21, "order_reference": "Tun 2 - o S Mi Nam C ng - May thn o", "allocated_meters": 0.0000, "requested_meters": 15000.0000}	\N	\N	\N	\N	2026-02-11 03:51:43.511542+00
334	thread_allocations	21	INSERT	\N	{"id": 21, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-2-AO-001-3", "priority": "NORMAL", "created_at": "2026-02-11T03:51:43.511542+00:00", "created_by": null, "updated_at": "2026-02-11T03:51:43.511542+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-11T03:51:43.511542+00:00", "thread_type_id": 21, "order_reference": "Tun 2 - o S Mi Nam C ng - May tay o", "allocated_meters": 0.0000, "requested_meters": 10000.0000}	\N	\N	\N	\N	2026-02-11 03:51:43.511542+00
335	thread_allocations	22	INSERT	\N	{"id": 22, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-2-AO-001-4", "priority": "NORMAL", "created_at": "2026-02-11T03:51:43.511542+00:00", "created_by": null, "updated_at": "2026-02-11T03:51:43.511542+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-11T03:51:43.511542+00:00", "thread_type_id": 11, "order_reference": "Tun 2 - o S Mi Nam C ng - Vt s", "allocated_meters": 0.0000, "requested_meters": 15000.0000}	\N	\N	\N	\N	2026-02-11 03:51:43.511542+00
336	thread_allocations	23	INSERT	\N	{"id": 23, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-2-QU-001-10", "priority": "NORMAL", "created_at": "2026-02-11T07:09:20.2305+00:00", "created_by": null, "updated_at": "2026-02-11T07:09:20.2305+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-11T07:09:20.2305+00:00", "thread_type_id": 21, "order_reference": "Tun 2 - Qun u Nam Slimfit - May dy ko", "allocated_meters": 0.0000, "requested_meters": 5000.0000}	\N	\N	\N	\N	2026-02-11 07:09:20.2305+00
337	thread_allocations	24	INSERT	\N	{"id": 24, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-2-AO-001-1", "priority": "NORMAL", "created_at": "2026-02-11T07:09:20.2305+00:00", "created_by": null, "updated_at": "2026-02-11T07:09:20.2305+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-11T07:09:20.2305+00:00", "thread_type_id": 21, "order_reference": "Tun 2 - o S Mi Nam C ng - May thn o", "allocated_meters": 0.0000, "requested_meters": 15000.0000}	\N	\N	\N	\N	2026-02-11 07:09:20.2305+00
338	thread_allocations	25	INSERT	\N	{"id": 25, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-2-AO-001-3", "priority": "NORMAL", "created_at": "2026-02-11T07:09:20.2305+00:00", "created_by": null, "updated_at": "2026-02-11T07:09:20.2305+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-11T07:09:20.2305+00:00", "thread_type_id": 21, "order_reference": "Tun 2 - o S Mi Nam C ng - May tay o", "allocated_meters": 0.0000, "requested_meters": 10000.0000}	\N	\N	\N	\N	2026-02-11 07:09:20.2305+00
339	thread_allocations	26	INSERT	\N	{"id": 26, "notes": null, "status": "PENDING", "due_date": null, "order_id": "WO-2-AO-001-4", "priority": "NORMAL", "created_at": "2026-02-11T07:09:20.2305+00:00", "created_by": null, "updated_at": "2026-02-11T07:09:20.2305+00:00", "split_from_id": null, "priority_score": 0, "requested_date": "2026-02-11T07:09:20.2305+00:00", "thread_type_id": 11, "order_reference": "Tun 2 - o S Mi Nam C ng - Vt s", "allocated_meters": 0.0000, "requested_meters": 15000.0000}	\N	\N	\N	\N	2026-02-11 07:09:20.2305+00
340	thread_inventory	20	UPDATE	{"id": 20, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-020", "location": "A2-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-001", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 21, "quantity_meters": 5000.0000}	{"id": 20, "lot_id": null, "status": "HARD_ALLOCATED", "cone_id": "TST-DK-020", "location": "A2-10", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-001", "updated_at": "2026-02-11T08:54:26.712633+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 200.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 21, "quantity_meters": 5000.0000}	{status,updated_at}	\N	\N	\N	2026-02-11 08:54:26.712633+00
341	thread_inventory	2573	UPDATE	{"id": 2573, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-023", "location": "B3-03", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-024", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 21, "quantity_meters": 5000.0000}	{"id": 2573, "lot_id": null, "status": "HARD_ALLOCATED", "cone_id": "TST-XN-023", "location": "B3-03", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-024", "updated_at": "2026-02-11T08:54:26.712633+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 200.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 21, "quantity_meters": 5000.0000}	{status,updated_at}	\N	\N	\N	2026-02-11 08:54:26.712633+00
342	thread_inventory	2650	UPDATE	{"id": 2650, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-PT-010", "location": "P2-02", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-066", "updated_at": "2026-02-10T17:34:16.998402+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 21, "quantity_meters": 5000.0000}	{"id": 2650, "lot_id": null, "status": "HARD_ALLOCATED", "cone_id": "TST-PT-010", "location": "P2-02", "created_at": "2026-02-10T17:34:16.998402+00:00", "is_partial": false, "lot_number": "LOT-2025-066", "updated_at": "2026-02-11T08:54:26.712633+00:00", "expiry_date": null, "warehouse_id": 6, "weight_grams": 200.00, "received_date": "2025-02-01", "quantity_cones": 1, "thread_type_id": 21, "quantity_meters": 5000.0000}	{status,updated_at}	\N	\N	\N	2026-02-11 08:54:26.712633+00
343	thread_inventory	8	UPDATE	{"id": 8, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-008", "location": "A1-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-009", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 39, "quantity_meters": 3500.0000}	{"id": 8, "lot_id": null, "status": "HARD_ALLOCATED", "cone_id": "TST-DK-008", "location": "A1-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-009", "updated_at": "2026-02-11T08:54:26.748744+00:00", "expiry_date": null, "warehouse_id": 3, "weight_grams": 210.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 39, "quantity_meters": 3500.0000}	{status,updated_at}	\N	\N	\N	2026-02-11 08:54:26.748744+00
344	thread_inventory	2583	UPDATE	{"id": 2583, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-033", "location": "B4-03", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-034", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 210.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 39, "quantity_meters": 3500.0000}	{"id": 2583, "lot_id": null, "status": "HARD_ALLOCATED", "cone_id": "TST-XN-033", "location": "B4-03", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-034", "updated_at": "2026-02-11T08:54:26.748744+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 210.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 39, "quantity_meters": 3500.0000}	{status,updated_at}	\N	\N	\N	2026-02-11 08:54:26.748744+00
345	thread_inventory	48	UPDATE	{"id": 48, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-DK-048", "location": "A5-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-009", "updated_at": "2026-02-10T17:34:16.968718+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 150.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 11, "quantity_meters": 5000.0000}	{"id": 48, "lot_id": null, "status": "HARD_ALLOCATED", "cone_id": "TST-DK-048", "location": "A5-08", "created_at": "2026-02-10T17:34:16.956845+00:00", "is_partial": false, "lot_number": "LOT-2025-009", "updated_at": "2026-02-11T08:54:26.77064+00:00", "expiry_date": "2026-12-31", "warehouse_id": 3, "weight_grams": 150.00, "received_date": "2025-01-15", "quantity_cones": 1, "thread_type_id": 11, "quantity_meters": 5000.0000}	{status,updated_at}	\N	\N	\N	2026-02-11 08:54:26.77064+00
346	thread_inventory	2592	UPDATE	{"id": 2592, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XN-042", "location": "B5-02", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-023", "updated_at": "2026-02-10T17:34:16.98329+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 150.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 11, "quantity_meters": 5000.0000}	{"id": 2592, "lot_id": null, "status": "HARD_ALLOCATED", "cone_id": "TST-XN-042", "location": "B5-02", "created_at": "2026-02-10T17:34:16.98329+00:00", "is_partial": false, "lot_number": "LOT-2025-023", "updated_at": "2026-02-12T07:00:58.518765+00:00", "expiry_date": null, "warehouse_id": 4, "weight_grams": 150.00, "received_date": "2025-01-20", "quantity_cones": 1, "thread_type_id": 11, "quantity_meters": 5000.0000}	{status,updated_at}	\N	\N	\N	2026-02-12 07:00:58.518765+00
347	thread_inventory	2637	UPDATE	{"id": 2637, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-037", "location": "C5-05", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-048", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 150.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 11, "quantity_meters": 5000.0000}	{"id": 2637, "lot_id": null, "status": "HARD_ALLOCATED", "cone_id": "TST-XT-037", "location": "C5-05", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-048", "updated_at": "2026-02-12T07:00:58.518765+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 150.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 11, "quantity_meters": 5000.0000}	{status,updated_at}	\N	\N	\N	2026-02-12 07:00:58.518765+00
348	thread_inventory	2612	UPDATE	{"id": 2612, "lot_id": null, "status": "AVAILABLE", "cone_id": "TST-XT-012", "location": "C2-04", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-053", "updated_at": "2026-02-10T17:34:16.991499+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 210.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 39, "quantity_meters": 3500.0000}	{"id": 2612, "lot_id": null, "status": "HARD_ALLOCATED", "cone_id": "TST-XT-012", "location": "C2-04", "created_at": "2026-02-10T17:34:16.991499+00:00", "is_partial": false, "lot_number": "LOT-2025-053", "updated_at": "2026-02-12T07:00:58.553799+00:00", "expiry_date": null, "warehouse_id": 5, "weight_grams": 210.00, "received_date": "2025-01-25", "quantity_cones": 1, "thread_type_id": 39, "quantity_meters": 3500.0000}	{status,updated_at}	\N	\N	\N	2026-02-12 07:00:58.553799+00
\.


--
-- Data for Name: thread_conflict_allocations; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_conflict_allocations (id, conflict_id, allocation_id, original_priority_score, adjusted_priority_score, created_at) FROM stdin;
\.


--
-- Data for Name: thread_conflicts; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_conflicts (id, thread_type_id, total_requested_meters, total_available_meters, shortage_meters, status, resolution_notes, resolved_by, resolved_at, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: thread_inventory; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_inventory (id, cone_id, thread_type_id, warehouse_id, quantity_cones, quantity_meters, weight_grams, is_partial, status, lot_number, expiry_date, received_date, location, created_at, updated_at, lot_id) FROM stdin;
1	TST-DK-001	8	3	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-002	\N	2025-01-15	A1-01	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
2	TST-DK-002	9	3	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-003	\N	2025-01-15	A1-02	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
3	TST-DK-003	45	3	1	3000.0000	210.00	f	AVAILABLE	LOT-2025-004	2026-12-31	2025-01-15	A1-03	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
4	TST-DK-004	31	3	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-005	\N	2025-01-15	A1-04	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
5	TST-DK-005	41	3	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-006	\N	2025-01-15	A1-05	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
6	TST-DK-006	7	3	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-007	2026-12-31	2025-01-15	A1-06	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
7	TST-DK-007	25	3	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-008	\N	2025-01-15	A1-07	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
9	TST-DK-009	43	3	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-010	2026-12-31	2025-01-15	A1-09	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
10	TST-DK-010	14	3	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-011	\N	2025-01-15	A1-10	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
11	TST-DK-011	40	3	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-012	\N	2025-01-15	A2-01	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
12	TST-DK-012	23	3	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-013	2026-12-31	2025-01-15	A2-02	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
8	TST-DK-008	39	3	1	3500.0000	210.00	f	HARD_ALLOCATED	LOT-2025-009	\N	2025-01-15	A1-08	2026-02-10 17:34:16.956845+00	2026-02-11 08:54:26.748744+00	\N
13	TST-DK-013	22	3	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-014	\N	2025-01-15	A2-03	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
14	TST-DK-014	29	3	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-015	\N	2025-01-15	A2-04	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
15	TST-DK-015	30	3	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-016	2026-12-31	2025-01-15	A2-05	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
16	TST-DK-016	36	3	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-017	\N	2025-01-15	A2-06	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
17	TST-DK-017	49	3	1	2500.0000	200.00	f	AVAILABLE	LOT-2025-018	\N	2025-01-15	A2-07	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
18	TST-DK-018	44	3	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-019	2026-12-31	2025-01-15	A2-08	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
19	TST-DK-019	12	3	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-020	\N	2025-01-15	A2-09	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
21	TST-DK-021	38	3	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-002	2026-12-31	2025-01-15	A3-01	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
22	TST-DK-022	32	3	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-003	\N	2025-01-15	A3-02	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
23	TST-DK-023	35	3	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-004	\N	2025-01-15	A3-03	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
24	TST-DK-024	13	3	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-005	2026-12-31	2025-01-15	A3-04	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
25	TST-DK-025	24	3	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-006	\N	2025-01-15	A3-05	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
26	TST-DK-026	34	3	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-007	\N	2025-01-15	A3-06	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
27	TST-DK-027	3	3	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-008	2026-12-31	2025-01-15	A3-07	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
28	TST-DK-028	5	3	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-009	\N	2025-01-15	A3-08	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
29	TST-DK-029	4	3	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-010	\N	2025-01-15	A3-09	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
30	TST-DK-030	6	3	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-011	2026-12-31	2025-01-15	A3-10	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
31	TST-DK-031	1	3	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-012	\N	2025-01-15	A4-01	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
32	TST-DK-032	16	3	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-013	\N	2025-01-15	A4-02	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
33	TST-DK-033	27	3	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-014	2026-12-31	2025-01-15	A4-03	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
34	TST-DK-034	15	3	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-015	\N	2025-01-15	A4-04	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
35	TST-DK-035	18	3	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-016	\N	2025-01-15	A4-05	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
36	TST-DK-036	46	3	1	3000.0000	210.00	f	AVAILABLE	LOT-2025-017	2026-12-31	2025-01-15	A4-06	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
37	TST-DK-037	26	3	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-018	\N	2025-01-15	A4-07	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
38	TST-DK-038	42	3	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-019	\N	2025-01-15	A4-08	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
39	TST-DK-039	50	3	1	2500.0000	200.00	f	AVAILABLE	LOT-2025-020	2026-12-31	2025-01-15	A4-09	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
40	TST-DK-040	19	3	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-001	\N	2025-01-15	A4-10	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
41	TST-DK-041	28	3	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-002	\N	2025-01-15	A5-01	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
42	TST-DK-042	37	3	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-003	2026-12-31	2025-01-15	A5-02	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
43	TST-DK-043	2	3	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-004	\N	2025-01-15	A5-03	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
44	TST-DK-044	10	3	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-005	\N	2025-01-15	A5-04	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
45	TST-DK-045	33	3	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-006	2026-12-31	2025-01-15	A5-05	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
46	TST-DK-046	48	3	1	2500.0000	200.00	f	AVAILABLE	LOT-2025-007	\N	2025-01-15	A5-06	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
47	TST-DK-047	20	3	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-008	\N	2025-01-15	A5-07	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
49	TST-DK-049	17	3	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-010	\N	2025-01-15	A5-09	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
50	TST-DK-050	47	3	1	3000.0000	210.00	f	AVAILABLE	LOT-2025-011	\N	2025-01-15	A5-10	2026-02-10 17:34:16.956845+00	2026-02-10 17:34:16.968718+00	\N
2551	TST-XN-001	4	4	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-022	\N	2025-01-20	B1-01	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2552	TST-XN-002	16	4	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-023	\N	2025-01-20	B1-02	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2553	TST-XN-003	28	4	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-024	\N	2025-01-20	B1-03	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2554	TST-XN-004	40	4	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-025	2027-06-30	2025-01-20	B1-04	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2555	TST-XN-005	15	4	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-026	\N	2025-01-20	B1-05	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2556	TST-XN-006	48	4	1	2500.0000	200.00	f	AVAILABLE	LOT-2025-027	\N	2025-01-20	B1-06	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2557	TST-XN-007	17	4	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-028	\N	2025-01-20	B1-07	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2558	TST-XN-008	12	4	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-029	2027-06-30	2025-01-20	B1-08	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2559	TST-XN-009	27	4	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-030	\N	2025-01-20	B1-09	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2560	TST-XN-010	19	4	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-031	\N	2025-01-20	B1-10	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2561	TST-XN-011	49	4	1	2500.0000	200.00	f	AVAILABLE	LOT-2025-032	\N	2025-01-20	B2-01	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2562	TST-XN-012	35	4	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-033	2027-06-30	2025-01-20	B2-02	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2563	TST-XN-013	22	4	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-034	\N	2025-01-20	B2-03	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2564	TST-XN-014	41	4	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-035	\N	2025-01-20	B2-04	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2565	TST-XN-015	30	4	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-036	\N	2025-01-20	B2-05	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2566	TST-XN-016	18	4	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-037	2027-06-30	2025-01-20	B2-06	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2567	TST-XN-017	45	4	1	3000.0000	210.00	f	AVAILABLE	LOT-2025-038	\N	2025-01-20	B2-07	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2568	TST-XN-018	26	4	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-039	\N	2025-01-20	B2-08	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2569	TST-XN-019	5	4	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-040	\N	2025-01-20	B2-09	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2570	TST-XN-020	20	4	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-021	2027-06-30	2025-01-20	B2-10	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2571	TST-XN-021	37	4	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-022	\N	2025-01-20	B3-01	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2572	TST-XN-022	13	4	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-023	\N	2025-01-20	B3-02	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2574	TST-XN-024	1	4	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-025	2027-06-30	2025-01-20	B3-04	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2575	TST-XN-025	25	4	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-026	\N	2025-01-20	B3-05	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2576	TST-XN-026	44	4	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-027	\N	2025-01-20	B3-06	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
48	TST-DK-048	11	3	1	5000.0000	150.00	f	HARD_ALLOCATED	LOT-2025-009	2026-12-31	2025-01-15	A5-08	2026-02-10 17:34:16.956845+00	2026-02-11 08:54:26.77064+00	\N
2577	TST-XN-027	46	4	1	3000.0000	210.00	f	AVAILABLE	LOT-2025-028	\N	2025-01-20	B3-07	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2578	TST-XN-028	8	4	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-029	2027-06-30	2025-01-20	B3-08	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2579	TST-XN-029	10	4	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-030	\N	2025-01-20	B3-09	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2580	TST-XN-030	24	4	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-031	\N	2025-01-20	B3-10	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2581	TST-XN-031	50	4	1	2500.0000	200.00	f	AVAILABLE	LOT-2025-032	\N	2025-01-20	B4-01	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2582	TST-XN-032	29	4	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-033	2027-06-30	2025-01-20	B4-02	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2584	TST-XN-034	6	4	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-035	\N	2025-01-20	B4-04	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2585	TST-XN-035	3	4	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-036	\N	2025-01-20	B4-05	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2586	TST-XN-036	9	4	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-037	2027-06-30	2025-01-20	B4-06	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2587	TST-XN-037	7	4	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-038	\N	2025-01-20	B4-07	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2588	TST-XN-038	47	4	1	3000.0000	210.00	f	AVAILABLE	LOT-2025-039	\N	2025-01-20	B4-08	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2589	TST-XN-039	38	4	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-040	\N	2025-01-20	B4-09	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2590	TST-XN-040	42	4	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-021	2027-06-30	2025-01-20	B4-10	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2591	TST-XN-041	14	4	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-022	\N	2025-01-20	B5-01	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2593	TST-XN-043	34	4	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-024	\N	2025-01-20	B5-03	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2594	TST-XN-044	31	4	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-025	2027-06-30	2025-01-20	B5-04	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2595	TST-XN-045	33	4	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-026	\N	2025-01-20	B5-05	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2596	TST-XN-046	36	4	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-027	\N	2025-01-20	B5-06	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2597	TST-XN-047	23	4	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-028	\N	2025-01-20	B5-07	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2598	TST-XN-048	2	4	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-029	2027-06-30	2025-01-20	B5-08	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2599	TST-XN-049	43	4	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-030	\N	2025-01-20	B5-09	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2600	TST-XN-050	32	4	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-031	\N	2025-01-20	B5-10	2026-02-10 17:34:16.98329+00	2026-02-10 17:34:16.98329+00	\N
2601	TST-XT-001	14	5	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-042	\N	2025-01-25	C1-01	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2602	TST-XT-002	27	5	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-043	\N	2025-01-25	C1-02	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2603	TST-XT-003	4	5	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-044	\N	2025-01-25	C1-03	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2604	TST-XT-004	20	5	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-045	\N	2025-01-25	C1-04	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2605	TST-XT-005	44	5	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-046	2026-09-30	2025-01-25	C1-05	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2606	TST-XT-006	36	5	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-047	\N	2025-01-25	C1-06	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2607	TST-XT-007	19	5	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-048	\N	2025-01-25	C1-07	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2608	TST-XT-008	43	5	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-049	\N	2025-01-25	C1-08	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2609	TST-XT-009	31	5	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-050	\N	2025-01-25	C2-01	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2610	TST-XT-010	41	5	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-051	2026-09-30	2025-01-25	C2-02	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2611	TST-XT-011	5	5	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-052	\N	2025-01-25	C2-03	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2613	TST-XT-013	29	5	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-054	\N	2025-01-25	C2-05	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2614	TST-XT-014	47	5	1	3000.0000	210.00	f	AVAILABLE	LOT-2025-055	\N	2025-01-25	C2-06	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2615	TST-XT-015	42	5	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-041	2026-09-30	2025-01-25	C2-07	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2616	TST-XT-016	18	5	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-042	\N	2025-01-25	C2-08	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2617	TST-XT-017	34	5	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-043	\N	2025-01-25	C3-01	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2618	TST-XT-018	1	5	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-044	\N	2025-01-25	C3-02	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2619	TST-XT-019	17	5	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-045	\N	2025-01-25	C3-03	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2620	TST-XT-020	24	5	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-046	2026-09-30	2025-01-25	C3-04	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2621	TST-XT-021	25	5	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-047	\N	2025-01-25	C3-05	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2622	TST-XT-022	30	5	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-048	\N	2025-01-25	C3-06	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2623	TST-XT-023	16	5	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-049	\N	2025-01-25	C3-07	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2624	TST-XT-024	15	5	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-050	\N	2025-01-25	C3-08	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2625	TST-XT-025	32	5	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-051	2026-09-30	2025-01-25	C4-01	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2626	TST-XT-026	46	5	1	3000.0000	210.00	f	AVAILABLE	LOT-2025-052	\N	2025-01-25	C4-02	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2627	TST-XT-027	35	5	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-053	\N	2025-01-25	C4-03	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2628	TST-XT-028	50	5	1	2500.0000	200.00	f	AVAILABLE	LOT-2025-054	\N	2025-01-25	C4-04	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2629	TST-XT-029	22	5	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-055	\N	2025-01-25	C4-05	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2630	TST-XT-030	48	5	1	2500.0000	200.00	f	AVAILABLE	LOT-2025-041	2026-09-30	2025-01-25	C4-06	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2631	TST-XT-031	9	5	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-042	\N	2025-01-25	C4-07	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2632	TST-XT-032	8	5	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-043	\N	2025-01-25	C4-08	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2633	TST-XT-033	37	5	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-044	\N	2025-01-25	C5-01	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2634	TST-XT-034	6	5	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-045	\N	2025-01-25	C5-02	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2635	TST-XT-035	23	5	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-046	2026-09-30	2025-01-25	C5-03	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2636	TST-XT-036	3	5	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-047	\N	2025-01-25	C5-04	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2638	TST-XT-038	2	5	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-049	\N	2025-01-25	C5-06	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2639	TST-XT-039	49	5	1	2500.0000	200.00	f	AVAILABLE	LOT-2025-050	\N	2025-01-25	C5-07	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2640	TST-XT-040	40	5	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-051	2026-09-30	2025-01-25	C5-08	2026-02-10 17:34:16.991499+00	2026-02-10 17:34:16.991499+00	\N
2592	TST-XN-042	11	4	1	5000.0000	150.00	f	HARD_ALLOCATED	LOT-2025-023	\N	2025-01-20	B5-02	2026-02-10 17:34:16.98329+00	2026-02-12 07:00:58.518765+00	\N
2612	TST-XT-012	39	5	1	3500.0000	210.00	f	HARD_ALLOCATED	LOT-2025-053	\N	2025-01-25	C2-04	2026-02-10 17:34:16.991499+00	2026-02-12 07:00:58.553799+00	\N
2641	TST-PT-001	46	6	1	3000.0000	210.00	f	AVAILABLE	LOT-2025-057	\N	2025-02-01	P1-01	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2642	TST-PT-002	4	6	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-058	\N	2025-02-01	P1-02	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2643	TST-PT-003	13	6	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-059	\N	2025-02-01	P1-03	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2644	TST-PT-004	10	6	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-060	2027-03-31	2025-02-01	P1-04	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2645	TST-PT-005	3	6	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-061	\N	2025-02-01	P1-05	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2646	TST-PT-006	31	6	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-062	\N	2025-02-01	P1-06	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2647	TST-PT-007	20	6	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-063	\N	2025-02-01	P1-07	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2648	TST-PT-008	22	6	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-064	2027-03-31	2025-02-01	P1-08	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2649	TST-PT-009	19	6	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-065	\N	2025-02-01	P2-01	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2651	TST-PT-011	34	6	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-067	\N	2025-02-01	P2-03	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2652	TST-PT-012	49	6	1	2500.0000	200.00	f	AVAILABLE	LOT-2025-056	2027-03-31	2025-02-01	P2-04	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2653	TST-PT-013	16	6	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-057	\N	2025-02-01	P2-05	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2654	TST-PT-014	27	6	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-058	\N	2025-02-01	P2-06	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2655	TST-PT-015	44	6	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-059	\N	2025-02-01	P2-07	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2656	TST-PT-016	28	6	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-060	2027-03-31	2025-02-01	P2-08	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2657	TST-PT-017	11	6	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-061	\N	2025-02-01	P3-01	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2658	TST-PT-018	39	6	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-062	\N	2025-02-01	P3-02	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2659	TST-PT-019	6	6	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-063	\N	2025-02-01	P3-03	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2660	TST-PT-020	45	6	1	3000.0000	210.00	f	AVAILABLE	LOT-2025-064	2027-03-31	2025-02-01	P3-04	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2661	TST-PT-021	17	6	1	4800.0000	168.00	f	AVAILABLE	LOT-2025-065	\N	2025-02-01	P3-05	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2662	TST-PT-022	26	6	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-066	\N	2025-02-01	P3-06	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2663	TST-PT-023	35	6	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-067	\N	2025-02-01	P3-07	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2664	TST-PT-024	12	6	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-056	2027-03-31	2025-02-01	P3-08	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2665	TST-PT-025	5	6	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-057	\N	2025-02-01	P4-01	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2666	TST-PT-026	38	6	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-058	\N	2025-02-01	P4-02	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2667	TST-PT-027	48	6	1	2500.0000	200.00	f	AVAILABLE	LOT-2025-059	\N	2025-02-01	P4-03	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2668	TST-PT-028	36	6	1	4000.0000	200.00	f	AVAILABLE	LOT-2025-060	2027-03-31	2025-02-01	P4-04	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2669	TST-PT-029	8	6	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-061	\N	2025-02-01	P4-05	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2670	TST-PT-030	1	6	1	6000.0000	120.00	f	AVAILABLE	LOT-2025-062	\N	2025-02-01	P4-06	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2671	TST-PT-031	43	6	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-063	\N	2025-02-01	P4-07	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2672	TST-PT-032	9	6	1	5500.0000	137.50	f	AVAILABLE	LOT-2025-064	2027-03-31	2025-02-01	P4-08	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2673	TST-PT-033	15	6	1	5000.0000	150.00	f	AVAILABLE	LOT-2025-065	\N	2025-02-01	P5-01	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2674	TST-PT-034	23	6	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-066	\N	2025-02-01	P5-02	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2675	TST-PT-035	47	6	1	3000.0000	210.00	f	AVAILABLE	LOT-2025-067	\N	2025-02-01	P5-03	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2676	TST-PT-036	32	6	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-056	2027-03-31	2025-02-01	P5-04	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2677	TST-PT-037	33	6	1	4500.0000	202.50	f	AVAILABLE	LOT-2025-057	\N	2025-02-01	P5-05	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2678	TST-PT-038	24	6	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-058	\N	2025-02-01	P5-06	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2679	TST-PT-039	25	6	1	5000.0000	200.00	f	AVAILABLE	LOT-2025-059	\N	2025-02-01	P5-07	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2680	TST-PT-040	40	6	1	3500.0000	210.00	f	AVAILABLE	LOT-2025-060	2027-03-31	2025-02-01	P5-08	2026-02-10 17:34:16.998402+00	2026-02-10 17:34:16.998402+00	\N
2681	TST-PAR-001	38	4	1	2443.2800	122.16	t	AVAILABLE	LOT-2024-PAR-001	\N	2024-12-15	REC-01	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2682	TST-PAR-002	13	3	1	3159.3400	94.78	t	AVAILABLE	LOT-2024-PAR-002	\N	2024-12-15	REC-02	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2683	TST-PAR-003	4	6	1	2189.3700	43.79	t	AVAILABLE	LOT-2024-PAR-003	\N	2024-12-15	REC-03	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2684	TST-PAR-004	49	5	1	1570.1400	125.61	t	AVAILABLE	LOT-2024-PAR-004	\N	2024-12-15	REC-04	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2685	TST-PAR-005	30	4	1	2250.2200	101.26	t	AVAILABLE	LOT-2024-PAR-005	\N	2024-12-15	REC-05	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2686	TST-PAR-006	48	3	1	1616.3500	129.31	t	AVAILABLE	LOT-2024-PAR-006	\N	2024-12-15	REC-06	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2687	TST-PAR-007	36	6	1	2725.9200	136.30	t	AVAILABLE	LOT-2024-PAR-007	\N	2024-12-15	REC-07	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2688	TST-PAR-008	20	5	1	1611.5400	56.40	t	AVAILABLE	LOT-2024-PAR-008	\N	2024-12-15	REC-08	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2689	TST-PAR-009	31	4	1	1104.7700	49.71	t	AVAILABLE	LOT-2024-PAR-009	\N	2024-12-15	REC-09	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2690	TST-PAR-010	46	3	1	1972.3000	138.06	t	AVAILABLE	LOT-2024-PAR-010	\N	2024-12-15	REC-10	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2691	TST-PAR-011	41	6	1	2284.9700	137.10	t	AVAILABLE	LOT-2024-PAR-011	\N	2024-12-15	REC-11	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2692	TST-PAR-012	26	5	1	3295.5100	131.82	t	AVAILABLE	LOT-2024-PAR-012	\N	2024-12-15	REC-12	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2693	TST-PAR-013	37	4	1	1682.5800	84.13	t	AVAILABLE	LOT-2024-PAR-013	\N	2024-12-15	REC-13	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2694	TST-PAR-014	33	3	1	2118.9800	95.35	t	AVAILABLE	LOT-2024-PAR-014	\N	2024-12-15	REC-14	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2695	TST-PAR-015	47	6	1	694.5800	48.62	t	AVAILABLE	LOT-2024-PAR-015	\N	2024-12-15	REC-15	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2696	TST-PAR-016	25	5	1	3132.9600	125.32	t	AVAILABLE	LOT-2024-PAR-016	\N	2024-12-15	REC-16	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2697	TST-PAR-017	12	4	1	1759.3400	52.78	t	AVAILABLE	LOT-2024-PAR-017	\N	2024-12-15	REC-17	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2698	TST-PAR-018	18	3	1	1174.2800	41.10	t	AVAILABLE	LOT-2024-PAR-018	\N	2024-12-15	REC-18	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2699	TST-PAR-019	21	6	1	3428.4300	137.14	t	AVAILABLE	LOT-2024-PAR-019	\N	2024-12-15	REC-19	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2700	TST-PAR-020	6	5	1	1918.4500	47.96	t	AVAILABLE	LOT-2024-PAR-020	\N	2024-12-15	REC-20	2026-02-10 17:34:17.005421+00	2026-02-10 17:34:17.005421+00	\N
2701	TST-PRO-001	23	4	1	5000.0000	200.00	f	IN_PRODUCTION	LOT-2025-PRO-001	\N	2025-01-10	\N	2026-02-10 17:34:17.011349+00	2026-02-10 17:34:17.011349+00	\N
2702	TST-PRO-002	28	3	1	5000.0000	200.00	f	IN_PRODUCTION	LOT-2025-PRO-002	\N	2025-01-10	\N	2026-02-10 17:34:17.011349+00	2026-02-10 17:34:17.011349+00	\N
2703	TST-PRO-003	26	4	1	5000.0000	200.00	f	IN_PRODUCTION	LOT-2025-PRO-003	\N	2025-01-10	\N	2026-02-10 17:34:17.011349+00	2026-02-10 17:34:17.011349+00	\N
2704	TST-PRO-004	21	3	1	5000.0000	200.00	f	IN_PRODUCTION	LOT-2025-PRO-004	\N	2025-01-10	\N	2026-02-10 17:34:17.011349+00	2026-02-10 17:34:17.011349+00	\N
2705	TST-PRO-005	22	4	1	5000.0000	200.00	f	IN_PRODUCTION	LOT-2025-PRO-005	\N	2025-01-10	\N	2026-02-10 17:34:17.011349+00	2026-02-10 17:34:17.011349+00	\N
2706	TST-PRO-006	24	3	1	5000.0000	200.00	f	IN_PRODUCTION	LOT-2025-PRO-006	\N	2025-01-10	\N	2026-02-10 17:34:17.011349+00	2026-02-10 17:34:17.011349+00	\N
2707	TST-PRO-007	25	4	1	5000.0000	200.00	f	IN_PRODUCTION	LOT-2025-PRO-007	\N	2025-01-10	\N	2026-02-10 17:34:17.011349+00	2026-02-10 17:34:17.011349+00	\N
2708	TST-PRO-008	27	3	1	5000.0000	200.00	f	IN_PRODUCTION	LOT-2025-PRO-008	\N	2025-01-10	\N	2026-02-10 17:34:17.011349+00	2026-02-10 17:34:17.011349+00	\N
2709	TST-NEW-001	44	3	1	3500.0000	210.00	f	RECEIVED	LOT-2025-NEW-001	\N	2026-02-10	RECV-AREA	2026-02-10 17:34:17.016294+00	2026-02-10 17:34:17.016294+00	\N
2710	TST-NEW-002	39	3	1	3500.0000	210.00	f	RECEIVED	LOT-2025-NEW-002	\N	2026-02-10	RECV-AREA	2026-02-10 17:34:17.016294+00	2026-02-10 17:34:17.016294+00	\N
2711	TST-NEW-003	41	3	1	3500.0000	210.00	f	RECEIVED	LOT-2025-NEW-003	\N	2026-02-10	RECV-AREA	2026-02-10 17:34:17.016294+00	2026-02-10 17:34:17.016294+00	\N
2712	TST-NEW-004	42	3	1	3500.0000	210.00	f	RECEIVED	LOT-2025-NEW-004	\N	2026-02-10	RECV-AREA	2026-02-10 17:34:17.016294+00	2026-02-10 17:34:17.016294+00	\N
2713	TST-NEW-005	43	3	1	3500.0000	210.00	f	RECEIVED	LOT-2025-NEW-005	\N	2026-02-10	RECV-AREA	2026-02-10 17:34:17.016294+00	2026-02-10 17:34:17.016294+00	\N
2714	TST-NEW-006	40	3	1	3500.0000	210.00	f	RECEIVED	LOT-2025-NEW-006	\N	2026-02-10	RECV-AREA	2026-02-10 17:34:17.016294+00	2026-02-10 17:34:17.016294+00	\N
20	TST-DK-020	21	3	1	5000.0000	200.00	f	HARD_ALLOCATED	LOT-2025-001	\N	2025-01-15	A2-10	2026-02-10 17:34:16.956845+00	2026-02-11 08:54:26.712633+00	\N
2573	TST-XN-023	21	4	1	5000.0000	200.00	f	HARD_ALLOCATED	LOT-2025-024	\N	2025-01-20	B3-03	2026-02-10 17:34:16.98329+00	2026-02-11 08:54:26.712633+00	\N
2650	TST-PT-010	21	6	1	5000.0000	200.00	f	HARD_ALLOCATED	LOT-2025-066	\N	2025-02-01	P2-02	2026-02-10 17:34:16.998402+00	2026-02-11 08:54:26.712633+00	\N
2583	TST-XN-033	39	4	1	3500.0000	210.00	f	HARD_ALLOCATED	LOT-2025-034	\N	2025-01-20	B4-03	2026-02-10 17:34:16.98329+00	2026-02-11 08:54:26.748744+00	\N
2637	TST-XT-037	11	5	1	5000.0000	150.00	f	HARD_ALLOCATED	LOT-2025-048	\N	2025-01-25	C5-05	2026-02-10 17:34:16.991499+00	2026-02-12 07:00:58.518765+00	\N
\.


--
-- Data for Name: thread_issue_items; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_issue_items (id, issue_request_id, cone_id, allocation_id, quantity_meters, batch_number, over_limit_notes, issued_by, issued_at) FROM stdin;
\.


--
-- Data for Name: thread_issue_lines; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_issue_lines (id, issue_id, po_id, style_id, color_id, thread_type_id, quota_cones, issued_full, issued_partial, returned_full, returned_partial, over_quota_notes, created_at) FROM stdin;
2	17	1	1	1	21	3.00	3	1	0	0	Test vt nh Mc	2026-02-11 08:43:34.4823+00
3	17	1	1	1	39	1.00	1	0	0	0	\N	2026-02-11 08:44:00.057899+00
4	17	1	1	1	11	3.00	2	0	0	0	\N	2026-02-11 08:44:16.90621+00
5	18	1	1	1	11	3.00	2	0	0	0	\N	2026-02-11 08:48:50.746575+00
6	18	1	1	1	39	1.00	1	0	0	0	\N	2026-02-11 08:48:51.844622+00
8	19	1	1	1	21	3.00	3	0	0	0	\N	2026-02-11 08:52:49.451855+00
9	19	1	1	1	39	1.00	2	0	0	0	Test vt nh mc	2026-02-11 08:52:58.850094+00
10	19	1	1	1	11	3.00	1	0	0	0	\N	2026-02-11 08:52:59.84807+00
\.


--
-- Data for Name: thread_issue_requests; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_issue_requests (id, issue_code, po_id, style_id, color_id, thread_type_id, department, quota_meters, requested_meters, issued_meters, status, notes, created_by, created_at, updated_at) FROM stdin;
1	XK-20260210-001	1	3	1	9	Xng Dt Kim	0.0000	50.0000	0.0000	PENDING	test	\N	2026-02-10 17:47:58.670122+00	2026-02-10 17:47:58.670122+00
\.


--
-- Data for Name: thread_issue_returns; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_issue_returns (id, issue_item_id, cone_id, original_meters, remaining_percentage, calculated_remaining_meters, notes, returned_by, returned_at) FROM stdin;
\.


--
-- Data for Name: thread_issues; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_issues (id, issue_code, department, status, created_by, notes, created_at, updated_at) FROM stdin;
1	XK-20260211-001	IT	DRAFT	A	\N	2026-02-11 03:44:17.817161+00	2026-02-11 03:44:17.817161+00
2	XK-20260211-002	KCS	DRAFT	A	\N	2026-02-11 03:44:31.458677+00	2026-02-11 03:44:31.458677+00
3	XK-20260211-003	IT	DRAFT	T	\N	2026-02-11 03:51:59.484093+00	2026-02-11 03:51:59.484093+00
4	XK-20260211-004	IT	DRAFT	c	\N	2026-02-11 07:04:11.503838+00	2026-02-11 07:04:11.503838+00
5	XK-20260211-005	IT	DRAFT	c	\N	2026-02-11 07:04:30.030885+00	2026-02-11 07:04:30.030885+00
6	XK-20260211-006	IT	DRAFT	c	\N	2026-02-11 07:09:28.872233+00	2026-02-11 07:09:28.872233+00
7	XK-20260211-007	IT	DRAFT	c	\N	2026-02-11 07:18:08.63603+00	2026-02-11 07:18:08.63603+00
8	XK-20260211-008	IT	DRAFT		\N	2026-02-11 07:28:50.678644+00	2026-02-11 07:28:50.678644+00
9	XK-20260211-009	IT	DRAFT		\N	2026-02-11 07:43:59.795776+00	2026-02-11 07:43:59.795776+00
10	XK-20260211-010	IT	DRAFT		\N	2026-02-11 07:47:38.839239+00	2026-02-11 07:47:38.839239+00
11	XK-20260211-011	IT	DRAFT		\N	2026-02-11 07:47:49.296408+00	2026-02-11 07:47:49.296408+00
12	XK-20260211-012	KCS	DRAFT	A	\N	2026-02-11 07:56:07.118387+00	2026-02-11 07:56:07.118387+00
13	XK-20260211-013	IT	DRAFT		\N	2026-02-11 08:08:32.542205+00	2026-02-11 08:08:32.542205+00
14	XK-20260211-014	IT	DRAFT		\N	2026-02-11 08:10:25.407399+00	2026-02-11 08:10:25.407399+00
15	XK-20260211-015	IT	DRAFT		\N	2026-02-11 08:35:01.007403+00	2026-02-11 08:35:01.007403+00
16	XK-20260211-016	IT	DRAFT		\N	2026-02-11 08:38:45.701254+00	2026-02-11 08:38:45.701254+00
17	XK-20260211-017	IT	DRAFT		\N	2026-02-11 08:43:13.705127+00	2026-02-11 08:43:13.705127+00
19	XK-20260211-019	IT	CONFIRMED		\N	2026-02-11 08:52:35.208999+00	2026-02-11 08:54:26.784464+00
20	XK-20260212-001	IT	DRAFT		\N	2026-02-12 02:48:26.234508+00	2026-02-12 02:48:26.234508+00
18	XK-20260211-018	IT	CONFIRMED		\N	2026-02-11 08:48:30.069722+00	2026-02-12 07:00:58.567281+00
21	XK-20260212-002	Xng Dt Kim	DRAFT		\N	2026-02-12 07:01:26.350134+00	2026-02-12 07:01:26.350134+00
\.


--
-- Data for Name: thread_movements; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_movements (id, cone_id, allocation_id, movement_type, quantity_meters, from_status, to_status, reference_id, reference_type, performed_by, notes, created_at) FROM stdin;
\.


--
-- Data for Name: thread_order_deliveries; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_order_deliveries (id, week_id, thread_type_id, supplier_id, delivery_date, actual_delivery_date, status, notes, created_at, updated_at, received_quantity, inventory_status, warehouse_id, received_by, received_at) FROM stdin;
2	2	39	3	2026-02-16	\N	pending	\N	2026-02-11 03:51:43.498937+00	2026-02-11 03:51:43.498937+00	0	pending	\N	\N	\N
4	2	40	3	2026-02-16	\N	pending	\N	2026-02-11 03:51:43.498937+00	2026-02-11 03:51:43.498937+00	0	pending	\N	\N	\N
5	2	48	3	2026-02-16	\N	pending	\N	2026-02-11 03:51:43.498937+00	2026-02-11 03:51:43.498937+00	0	pending	\N	\N	\N
6	2	22	3	2026-02-16	\N	pending	\N	2026-02-11 03:51:43.498937+00	2026-02-11 03:51:43.498937+00	0	pending	\N	\N	\N
1	2	21	3	2026-02-16	2026-02-11	delivered	\N	2026-02-11 03:51:43.498937+00	2026-02-11 08:09:17.903599+00	0	pending	\N	\N	\N
3	2	11	3	2026-02-16	2026-02-11	delivered	\N	2026-02-11 03:51:43.498937+00	2026-02-11 08:09:19.642366+00	0	pending	\N	\N	\N
\.


--
-- Data for Name: thread_order_items; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_order_items (id, week_id, style_id, color_id, quantity, created_at, po_id, quota_cones) FROM stdin;
1	1	9	2	5000	2026-02-10 17:44:09.057524+00	8	\N
2	1	7	2	1000	2026-02-10 17:44:09.057524+00	8	\N
9	2	3	1	1000	2026-02-11 07:09:20.129591+00	1	\N
10	2	2	2	1000	2026-02-11 07:09:20.129591+00	1	\N
11	2	1	1	1000	2026-02-11 07:09:20.129591+00	1	\N
\.


--
-- Data for Name: thread_order_results; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_order_results (id, week_id, calculation_data, summary_data, calculated_at) FROM stdin;
1	1	[{"style_id": 9, "style_code": "QU-003", "style_name": "Qun Short Th Thao", "calculations": [{"spec_id": 27, "tex_number": 40, "supplier_id": 3, "process_name": "May thn qun", "thread_color": "Trng", "total_meters": 40000, "delivery_date": "2026-02-15", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 4, "color_breakdown": [{"color_id": 2, "quantity": 5000, "color_name": "en", "total_meters": 40000, "thread_type_id": 22, "thread_type_name": "Ch Polyester en TEX40"}], "meters_per_cone": 5000, "meters_per_unit": 8, "is_fully_stocked": false, "thread_color_code": "#FFFFFF", "inventory_available": 4}, {"spec_id": 28, "tex_number": 40, "supplier_id": 3, "process_name": "May thun eo", "thread_color": "Trng", "total_meters": 17500, "delivery_date": "2026-02-15", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 4, "color_breakdown": [{"color_id": 2, "quantity": 5000, "color_name": "en", "total_meters": 17500, "thread_type_id": 22, "thread_type_name": "Ch Polyester en TEX40"}], "meters_per_cone": 5000, "meters_per_unit": 3.5, "is_fully_stocked": false, "thread_color_code": "#FFFFFF", "inventory_available": 0}], "total_quantity": 5000}, {"style_id": 7, "style_code": "AO-004", "style_name": "o Thun C Trn", "calculations": [{"spec_id": 21, "tex_number": 40, "supplier_id": 3, "process_name": "May thn o", "thread_color": "Trng", "total_meters": 10000, "delivery_date": "2026-02-15", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 2, "color_breakdown": [{"color_id": 2, "quantity": 1000, "color_name": "en", "total_meters": 10000, "thread_type_id": 22, "thread_type_name": "Ch Polyester en TEX40"}], "meters_per_cone": 5000, "meters_per_unit": 10, "is_fully_stocked": false, "thread_color_code": "#FFFFFF", "inventory_available": 0}, {"spec_id": 22, "tex_number": 40, "supplier_id": 3, "process_name": "Vin c + gu", "thread_color": "Trng", "total_meters": 6000, "delivery_date": "2026-02-15", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 2, "color_breakdown": [{"color_id": 2, "quantity": 1000, "color_name": "en", "total_meters": 6000, "thread_type_id": 22, "thread_type_name": "Ch Polyester en TEX40"}], "meters_per_cone": 5000, "meters_per_unit": 6, "is_fully_stocked": false, "thread_color_code": "#FFFFFF", "inventory_available": 0}], "total_quantity": 1000}]	[{"sl_can_dat": 11, "tex_number": 40, "supplier_id": 3, "total_cones": 15, "total_final": 11, "thread_color": "Trng", "total_meters": 73500, "delivery_date": "2026-02-15", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "thread_type_id": 22, "inventory_cones": 4, "meters_per_cone": 5000, "additional_order": 0, "thread_type_name": "Ch Polyester en TEX40", "thread_color_code": "#FFFFFF"}]	2026-02-10 17:44:09.116+00
2	2	[{"style_id": 3, "style_code": "QU-001", "style_name": "Qun u Nam Slimfit", "calculations": [{"spec_id": 8, "tex_number": 40, "supplier_id": 3, "process_name": "May thn qun", "thread_color": "Trng", "total_meters": 18000, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 0, "color_breakdown": [{"color_id": 1, "quantity": 1000, "color_name": "Trng", "total_meters": 18000, "thread_type_id": 21, "thread_type_name": "Ch Polyester Trng TEX40"}], "meters_per_cone": 5000, "meters_per_unit": 18, "is_fully_stocked": true, "thread_color_code": "#FFFFFF", "inventory_available": 4}, {"spec_id": 9, "tex_number": 60, "supplier_id": 3, "process_name": "May ti", "thread_color": "Trng", "total_meters": 6000, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 0, "color_breakdown": [{"color_id": 1, "quantity": 1000, "color_name": "Trng", "total_meters": 6000, "thread_type_id": 39, "thread_type_name": "Ch Polyester Trng TEX60"}], "meters_per_cone": 3500, "meters_per_unit": 6, "is_fully_stocked": true, "thread_color_code": "#FFFFFF", "inventory_available": 2}, {"spec_id": 10, "tex_number": 40, "supplier_id": 3, "process_name": "May dy ko", "thread_color": "Trng", "total_meters": 2000, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 1, "color_breakdown": [{"color_id": 1, "quantity": 1000, "color_name": "Trng", "total_meters": 2000, "thread_type_id": 21, "thread_type_name": "Ch Polyester Trng TEX40"}], "meters_per_cone": 5000, "meters_per_unit": 2, "is_fully_stocked": false, "thread_color_code": "#FFFFFF", "inventory_available": 0}, {"spec_id": 11, "tex_number": 30, "supplier_id": 3, "process_name": "Vt s", "thread_color": "Trng", "total_meters": 20000, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 0, "color_breakdown": [{"color_id": 1, "quantity": 1000, "color_name": "Trng", "total_meters": 20000, "thread_type_id": 11, "thread_type_name": "Ch Polyester Trng TEX30"}], "meters_per_cone": 5000, "meters_per_unit": 20, "is_fully_stocked": true, "thread_color_code": "#FFFFFF", "inventory_available": 4}], "total_quantity": 1000}, {"style_id": 2, "style_code": "AO-002", "style_name": "o S Mi N C Tim", "calculations": [{"spec_id": 5, "tex_number": 60, "supplier_id": 3, "process_name": "May thn o", "thread_color": "Trng", "total_meters": 10000, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 0, "color_breakdown": [{"color_id": 2, "quantity": 1000, "color_name": "en", "total_meters": 10000, "thread_type_id": 40, "thread_type_name": "Ch Polyester en TEX60"}], "meters_per_cone": 3500, "meters_per_unit": 10, "is_fully_stocked": true, "thread_color_code": "#FFFFFF", "inventory_available": 3}, {"spec_id": 6, "tex_number": 80, "supplier_id": 3, "process_name": "May c tim", "thread_color": "Trng", "total_meters": 2500, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 0, "color_breakdown": [{"color_id": 2, "quantity": 1000, "color_name": "", "total_meters": 2500, "thread_type_id": 48, "thread_type_name": "Ch Nylon Trng TEX80"}], "meters_per_cone": 2500, "meters_per_unit": 2.5, "is_fully_stocked": true, "thread_color_code": "#FFFFFF", "inventory_available": 1}, {"spec_id": 7, "tex_number": 40, "supplier_id": 3, "process_name": "Vt s", "thread_color": "Trng", "total_meters": 12000, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 0, "color_breakdown": [{"color_id": 2, "quantity": 1000, "color_name": "en", "total_meters": 12000, "thread_type_id": 22, "thread_type_name": "Ch Polyester en TEX40"}], "meters_per_cone": 5000, "meters_per_unit": 12, "is_fully_stocked": true, "thread_color_code": "#FFFFFF", "inventory_available": 3}], "total_quantity": 1000}, {"style_id": 1, "style_code": "AO-001", "style_name": "o S Mi Nam C ng", "calculations": [{"spec_id": 1, "tex_number": 40, "supplier_id": 3, "process_name": "May thn o", "thread_color": "Trng", "total_meters": 12500, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 3, "color_breakdown": [{"color_id": 1, "quantity": 1000, "color_name": "Trng", "total_meters": 12500, "thread_type_id": 21, "thread_type_name": "Ch Polyester Trng TEX40"}], "meters_per_cone": 5000, "meters_per_unit": 12.5, "is_fully_stocked": false, "thread_color_code": "#FFFFFF", "inventory_available": 0}, {"spec_id": 2, "tex_number": 60, "supplier_id": 3, "process_name": "May c o", "thread_color": "Trng", "total_meters": 3200, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 0, "color_breakdown": [{"color_id": 1, "quantity": 1000, "color_name": "Trng", "total_meters": 3200, "thread_type_id": 39, "thread_type_name": "Ch Polyester Trng TEX60"}], "meters_per_cone": 3500, "meters_per_unit": 3.2, "is_fully_stocked": true, "thread_color_code": "#FFFFFF", "inventory_available": 1}, {"spec_id": 3, "tex_number": 40, "supplier_id": 3, "process_name": "May tay o", "thread_color": "Trng", "total_meters": 8000, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 2, "color_breakdown": [{"color_id": 1, "quantity": 1000, "color_name": "Trng", "total_meters": 8000, "thread_type_id": 21, "thread_type_name": "Ch Polyester Trng TEX40"}], "meters_per_cone": 5000, "meters_per_unit": 8, "is_fully_stocked": false, "thread_color_code": "#FFFFFF", "inventory_available": 0}, {"spec_id": 4, "tex_number": 30, "supplier_id": 3, "process_name": "Vt s", "thread_color": "Trng", "total_meters": 15000, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "shortage_cones": 3, "color_breakdown": [{"color_id": 1, "quantity": 1000, "color_name": "Trng", "total_meters": 15000, "thread_type_id": 11, "thread_type_name": "Ch Polyester Trng TEX30"}], "meters_per_cone": 5000, "meters_per_unit": 15, "is_fully_stocked": false, "thread_color_code": "#FFFFFF", "inventory_available": 0}], "total_quantity": 1000}]	[{"sl_can_dat": 5, "tex_number": 40, "quota_cones": 9, "supplier_id": 3, "total_cones": 9, "total_final": 5, "thread_color": "Trng", "total_meters": 40500, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "thread_type_id": 21, "inventory_cones": 4, "meters_per_cone": 5000, "additional_order": 0, "thread_type_name": "Ch Polyester Trng TEX40", "thread_color_code": "#FFFFFF"}, {"sl_can_dat": 0, "tex_number": 60, "quota_cones": 3, "supplier_id": 3, "total_cones": 3, "total_final": 0, "thread_color": "Trng", "total_meters": 9200, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "thread_type_id": 39, "inventory_cones": 4, "meters_per_cone": 3500, "additional_order": 0, "thread_type_name": "Ch Polyester Trng TEX60", "thread_color_code": "#FFFFFF"}, {"sl_can_dat": 3, "tex_number": 30, "quota_cones": 7, "supplier_id": 3, "total_cones": 7, "total_final": 3, "thread_color": "Trng", "total_meters": 35000, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "thread_type_id": 11, "inventory_cones": 4, "meters_per_cone": 5000, "additional_order": 0, "thread_type_name": "Ch Polyester Trng TEX30", "thread_color_code": "#FFFFFF"}, {"sl_can_dat": 0, "tex_number": 60, "quota_cones": 3, "supplier_id": 3, "total_cones": 3, "total_final": 0, "thread_color": "Trng", "total_meters": 10000, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "thread_type_id": 40, "inventory_cones": 4, "meters_per_cone": 3500, "additional_order": 0, "thread_type_name": "Ch Polyester en TEX60", "thread_color_code": "#FFFFFF"}, {"sl_can_dat": 0, "tex_number": 80, "quota_cones": 1, "supplier_id": 3, "total_cones": 1, "total_final": 0, "thread_color": "Trng", "total_meters": 2500, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "thread_type_id": 48, "inventory_cones": 5, "meters_per_cone": 2500, "additional_order": 0, "thread_type_name": "Ch Nylon Trng TEX80", "thread_color_code": "#FFFFFF"}, {"sl_can_dat": 0, "tex_number": 40, "quota_cones": 3, "supplier_id": 3, "total_cones": 3, "total_final": 0, "thread_color": "Trng", "total_meters": 12000, "delivery_date": "2026-02-16", "supplier_name": "Cng ty TNHH Coats Vit Nam", "lead_time_days": 5, "thread_type_id": 22, "inventory_cones": 4, "meters_per_cone": 5000, "additional_order": 0, "thread_type_name": "Ch Polyester en TEX40", "thread_color_code": "#FFFFFF"}]	2026-02-11 07:09:20.19+00
\.


--
-- Data for Name: thread_order_weeks; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_order_weeks (id, week_name, start_date, end_date, status, notes, created_by, created_at, updated_at) FROM stdin;
1	1	\N	\N	draft	\N	\N	2026-02-10 17:44:09.037799+00	2026-02-10 17:44:09.037799+00
2	Test	2026-02-09	2026-02-15	confirmed	\N	\N	2026-02-11 03:45:45.316565+00	2026-02-11 07:18:02.035672+00
\.


--
-- Data for Name: thread_recovery; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_recovery (id, cone_id, original_meters, returned_weight_grams, calculated_meters, tare_weight_grams, consumption_meters, status, initiated_by, weighed_by, confirmed_by, notes, photo_url, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: thread_stock; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_stock (id, thread_type_id, warehouse_id, lot_number, qty_full_cones, qty_partial_cones, received_date, expiry_date, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: thread_type_supplier; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_type_supplier (id, thread_type_id, supplier_id, supplier_item_code, unit_price, is_active, notes, created_at, updated_at) FROM stdin;
1	2	10	GUTA-001	20000.0000	t	\N	2026-02-11 03:27:18.958128+00	2026-02-11 03:27:18.958128+00
\.


--
-- Data for Name: thread_types; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.thread_types (id, code, name, color, color_code, material, tex_number, density_grams_per_meter, meters_per_cone, supplier, reorder_level_meters, lead_time_days, is_active, created_at, updated_at, color_id, supplier_id, color_supplier_id) FROM stdin;
1	CHI-20-TRA	Ch Polyester Trng TEX20	Trng	#FFFFFF	polyester	20.00	0.020000	6000.00	Cng ty TNHH Coats Vit Nam	15000.00	5	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
2	CHI-20-DEN	Ch Polyester en TEX20	en	#000000	polyester	20.00	0.020000	6000.00	Cng ty TNHH Coats Vit Nam	15000.00	5	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
3	CHI-20-DO	Ch Polyester  TEX20		#DC2626	polyester	20.00	0.020000	6000.00	Cng ty TNHH Ch May Vit Tin	12000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
4	CHI-20-XDG	Ch Polyester Xanh Dng TEX20	Xanh Dng	#2563EB	polyester	20.00	0.020000	6000.00	Cng ty TNHH Ch May Vit Tin	12000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
5	CHI-20-VAG	Ch Polyester Vng TEX20	Vng	#EAB308	polyester	20.00	0.020000	6000.00	Cng ty TNHH Ch May Vit Tin	10000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
6	CHI-25-TRA	Ch Cotton Trng TEX25	Trng	#FFFFFF	cotton	25.00	0.025000	5500.00	Cng ty CP Si Ch Ph Th	12000.00	10	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
7	CHI-25-DEN	Ch Cotton en TEX25	en	#000000	cotton	25.00	0.025000	5500.00	Cng ty CP Si Ch Ph Th	12000.00	10	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
8	CHI-25-NAU	Ch Cotton Nu TEX25	Nu	#92400E	cotton	25.00	0.025000	5500.00	Cng ty CP Si Ch Ph Th	8000.00	10	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
9	CHI-25-BEE	Ch Cotton Be TEX25	Be	#D4B896	cotton	25.00	0.025000	5500.00	Xng Ch Thi Bnh	8000.00	8	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
10	CHI-25-XAM	Ch Cotton Xm TEX25	Xm	#6B7280	cotton	25.00	0.025000	5500.00	Xng Ch Thi Bnh	8000.00	8	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
11	CHI-30-TRA	Ch Polyester Trng TEX30	Trng	#FFFFFF	polyester	30.00	0.030000	5000.00	Cng ty TNHH Gtermann Vit Nam	15000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
12	CHI-30-DEN	Ch Polyester en TEX30	en	#000000	polyester	30.00	0.030000	5000.00	Cng ty TNHH Gtermann Vit Nam	15000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
13	CHI-30-XLA	Ch Polyester Xanh L TEX30	Xanh L	#16A34A	polyester	30.00	0.030000	5000.00	Nh my Ch Kim Ngc	10000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
14	CHI-30-HOG	Ch Polyester Hng TEX30	Hng	#DB2777	polyester	30.00	0.030000	5000.00	Nh my Ch Kim Ngc	8000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
15	CHI-30-TIM	Ch Polyester Tm TEX30	Tm	#9333EA	polyester	30.00	0.030000	5000.00	Nh my Ch Kim Ngc	8000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
16	CHI-35-TRA	Ch Nylon Trng TEX35	Trng	#FFFFFF	nylon	35.00	0.035000	4800.00	Cng ty TNHH American Thread	12000.00	14	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
17	CHI-35-DEN	Ch Nylon en TEX35	en	#000000	nylon	35.00	0.035000	4800.00	Cng ty TNHH American Thread	12000.00	14	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
18	CHI-35-NAV	Ch Nylon Navy TEX35	Xanh Navy	#1E3A8A	nylon	35.00	0.035000	4800.00	Cng ty TNHH American Thread	10000.00	14	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
19	CHI-35-XAD	Ch Nylon Xm m TEX35	Xm m	#374151	nylon	35.00	0.035000	4800.00	Cng ty TNHH Onuki Vit Nam	8000.00	6	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
20	CHI-35-CAM	Ch Nylon Cam TEX35	Cam	#EA580C	nylon	35.00	0.035000	4800.00	Cng ty TNHH Onuki Vit Nam	6000.00	6	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
21	CHI-40-TRA	Ch Polyester Trng TEX40	Trng	#FFFFFF	polyester	40.00	0.040000	5000.00	Cng ty TNHH Coats Vit Nam	20000.00	5	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
22	CHI-40-DEN	Ch Polyester en TEX40	en	#000000	polyester	40.00	0.040000	5000.00	Cng ty TNHH Coats Vit Nam	20000.00	5	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
23	CHI-40-DO	Ch Polyester  TEX40		#DC2626	polyester	40.00	0.040000	5000.00	Cng ty TNHH Ch May Vit Tin	15000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
24	CHI-40-XDG	Ch Polyester Xanh Dng TEX40	Xanh Dng	#2563EB	polyester	40.00	0.040000	5000.00	Cng ty TNHH Ch May Vit Tin	15000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
25	CHI-40-XLA	Ch Polyester Xanh L TEX40	Xanh L	#16A34A	polyester	40.00	0.040000	5000.00	Cng ty CP Dt May H Ni	12000.00	12	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
26	CHI-40-VAG	Ch Polyester Vng TEX40	Vng	#EAB308	polyester	40.00	0.040000	5000.00	Cng ty CP Dt May H Ni	10000.00	12	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
27	CHI-40-HOG	Ch Polyester Hng TEX40	Hng	#DB2777	polyester	40.00	0.040000	5000.00	Nh my Ch Kim Ngc	8000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
28	CHI-40-KEM	Ch Polyester Kem TEX40	Kem	#FFFDD0	polyester	40.00	0.040000	5000.00	Nh my Ch Kim Ngc	8000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
29	CHI-45-TRA	Ch Silk Trng TEX45	Trng	#FFFFFF	silk	45.00	0.045000	4500.00	Cng ty TNHH Gtermann Vit Nam	10000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
30	CHI-45-DEN	Ch Silk en TEX45	en	#000000	silk	45.00	0.045000	4500.00	Cng ty TNHH Gtermann Vit Nam	10000.00	7	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
31	CHI-45-GOD	Ch Silk Vng Gold TEX45	Vng Gold	#D4AF37	silk	45.00	0.045000	4500.00	Cng ty TNHH A&E Gtermann	6000.00	10	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
32	CHI-45-BAC	Ch Silk Bc TEX45	Bc	#C0C0C0	silk	45.00	0.045000	4500.00	Cng ty TNHH A&E Gtermann	6000.00	10	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
33	CHI-45-TIM	Ch Silk Tm TEX45	Tm	#9333EA	silk	45.00	0.045000	4500.00	Cng ty TNHH A&E Gtermann	5000.00	10	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
34	CHI-50-TRA	Ch Mixed Trng TEX50	Trng	#FFFFFF	mixed	50.00	0.050000	4000.00	X nghip Ch May Bnh nh	12000.00	9	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
35	CHI-50-DEN	Ch Mixed en TEX50	en	#000000	mixed	50.00	0.050000	4000.00	X nghip Ch May Bnh nh	12000.00	9	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
36	CHI-50-XNG	Ch Mixed Xanh Ngc TEX50	Xanh Ngc	#0D9488	mixed	50.00	0.050000	4000.00	X nghip Ch May Bnh nh	8000.00	9	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
37	CHI-50-CYA	Ch Mixed Xanh Cyan TEX50	Xanh Cyan	#06B6D4	mixed	50.00	0.050000	4000.00	Nh my Si ng Nai	8000.00	5	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
38	CHI-50-XAN	Ch Mixed Xm Nht TEX50	Xm Nht	#9CA3AF	mixed	50.00	0.050000	4000.00	Nh my Si ng Nai	8000.00	5	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
39	CHI-60-TRA	Ch Polyester Trng TEX60	Trng	#FFFFFF	polyester	60.00	0.060000	3500.00	Cng ty TNHH Coats Vit Nam	12000.00	5	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
40	CHI-60-DEN	Ch Polyester en TEX60	en	#000000	polyester	60.00	0.060000	3500.00	Cng ty TNHH Coats Vit Nam	12000.00	5	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
41	CHI-60-XDG	Ch Polyester Xanh Dng TEX60	Xanh Dng	#2563EB	polyester	60.00	0.060000	3500.00	Cng ty CP Si Ch Ph Th	10000.00	10	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
42	CHI-60-NAV	Ch Polyester Navy TEX60	Xanh Navy	#1E3A8A	polyester	60.00	0.060000	3500.00	Cng ty CP Si Ch Ph Th	10000.00	10	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
43	CHI-60-DOD	Ch Polyester  m TEX60	 m	#991B1B	polyester	60.00	0.060000	3500.00	Xng Ch Thi Bnh	8000.00	8	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
44	CHI-60-XLD	Ch Polyester Xanh L m TEX60	Xanh L m	#166534	polyester	60.00	0.060000	3500.00	Xng Ch Thi Bnh	8000.00	8	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
45	CHI-70-TRA	Ch Rayon Trng TEX70	Trng	#FFFFFF	rayon	70.00	0.070000	3000.00	Cng ty TNHH Onuki Vit Nam	8000.00	6	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
46	CHI-70-DEN	Ch Rayon en TEX70	en	#000000	rayon	70.00	0.070000	3000.00	Cng ty TNHH Onuki Vit Nam	8000.00	6	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
47	CHI-70-TDD	Ch Rayon Tm m TEX70	Tm m	#6B21A8	rayon	70.00	0.070000	3000.00	Cng ty TNHH Onuki Vit Nam	5000.00	6	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
48	CHI-80-TRA	Ch Nylon Trng TEX80	Trng	#FFFFFF	nylon	80.00	0.080000	2500.00	Cng ty TNHH American Thread	6000.00	14	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
49	CHI-80-DEN	Ch Nylon en TEX80	en	#000000	nylon	80.00	0.080000	2500.00	Cng ty TNHH American Thread	6000.00	14	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
50	CHI-80-HON	Ch Nylon Hng Nht TEX80	Hng Nht	#F472B6	nylon	80.00	0.080000	2500.00	Cng ty TNHH American Thread	4000.00	14	t	2026-02-10 17:34:16.947441+00	2026-02-10 17:34:16.947441+00	\N	\N	\N
\.


--
-- Data for Name: warehouses; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.warehouses (id, code, name, location, is_active, created_at, updated_at, parent_id, type, sort_order) FROM stdin;
1	DB	in Bn	in Bn, Qung Nam	t	2026-02-10 17:34:16.926794+00	2026-02-10 17:34:16.926794+00	\N	LOCATION	1
2	PT	Ph Tng	Ph Tng,  Nng	t	2026-02-10 17:34:16.926794+00	2026-02-10 17:34:16.926794+00	\N	LOCATION	2
3	DB-DK	Kho Dt Kim	Xng Dt Kim, in Bn	t	2026-02-10 17:34:16.932249+00	2026-02-10 17:34:16.932249+00	1	STORAGE	1
4	DB-XN	Kho Xng Nht	Xng Nht, in Bn	t	2026-02-10 17:34:16.932249+00	2026-02-10 17:34:16.932249+00	1	STORAGE	2
5	DB-XT	Kho Xng Trc	Xng Trc, in Bn	t	2026-02-10 17:34:16.932249+00	2026-02-10 17:34:16.932249+00	1	STORAGE	3
6	PT-01	Kho Ph Tng	Kho thu, Ph Tng	t	2026-02-10 17:34:16.93591+00	2026-02-10 17:34:16.93591+00	2	STORAGE	1
\.


--
-- Data for Name: messages_2026_02_09; Type: TABLE DATA; Schema: realtime; Owner: supabase_admin
--

COPY realtime.messages_2026_02_09 (topic, extension, payload, event, private, updated_at, inserted_at, id) FROM stdin;
\.


--
-- Data for Name: messages_2026_02_10; Type: TABLE DATA; Schema: realtime; Owner: supabase_admin
--

COPY realtime.messages_2026_02_10 (topic, extension, payload, event, private, updated_at, inserted_at, id) FROM stdin;
\.


--
-- Data for Name: messages_2026_02_11; Type: TABLE DATA; Schema: realtime; Owner: supabase_admin
--

COPY realtime.messages_2026_02_11 (topic, extension, payload, event, private, updated_at, inserted_at, id) FROM stdin;
\.


--
-- Data for Name: messages_2026_02_12; Type: TABLE DATA; Schema: realtime; Owner: supabase_admin
--

COPY realtime.messages_2026_02_12 (topic, extension, payload, event, private, updated_at, inserted_at, id) FROM stdin;
\.


--
-- Data for Name: messages_2026_02_13; Type: TABLE DATA; Schema: realtime; Owner: supabase_admin
--

COPY realtime.messages_2026_02_13 (topic, extension, payload, event, private, updated_at, inserted_at, id) FROM stdin;
\.


--
-- Data for Name: messages_2026_02_14; Type: TABLE DATA; Schema: realtime; Owner: supabase_admin
--

COPY realtime.messages_2026_02_14 (topic, extension, payload, event, private, updated_at, inserted_at, id) FROM stdin;
\.


--
-- Data for Name: messages_2026_02_15; Type: TABLE DATA; Schema: realtime; Owner: supabase_admin
--

COPY realtime.messages_2026_02_15 (topic, extension, payload, event, private, updated_at, inserted_at, id) FROM stdin;
\.


--
-- Data for Name: schema_migrations; Type: TABLE DATA; Schema: realtime; Owner: supabase_admin
--

COPY realtime.schema_migrations (version, inserted_at) FROM stdin;
20211116024918	2026-02-10 17:00:56
20211116045059	2026-02-10 17:00:56
20211116050929	2026-02-10 17:00:56
20211116051442	2026-02-10 17:00:56
20211116212300	2026-02-10 17:00:56
20211116213355	2026-02-10 17:00:56
20211116213934	2026-02-10 17:00:56
20211116214523	2026-02-10 17:00:56
20211122062447	2026-02-10 17:00:56
20211124070109	2026-02-10 17:00:56
20211202204204	2026-02-10 17:00:56
20211202204605	2026-02-10 17:00:56
20211210212804	2026-02-10 17:00:56
20211228014915	2026-02-10 17:00:56
20220107221237	2026-02-10 17:00:56
20220228202821	2026-02-10 17:00:56
20220312004840	2026-02-10 17:00:56
20220603231003	2026-02-10 17:00:56
20220603232444	2026-02-10 17:00:56
20220615214548	2026-02-10 17:00:56
20220712093339	2026-02-10 17:00:56
20220908172859	2026-02-10 17:00:56
20220916233421	2026-02-10 17:00:57
20230119133233	2026-02-10 17:00:57
20230128025114	2026-02-10 17:00:57
20230128025212	2026-02-10 17:00:57
20230227211149	2026-02-10 17:00:57
20230228184745	2026-02-10 17:00:57
20230308225145	2026-02-10 17:00:57
20230328144023	2026-02-10 17:00:57
20231018144023	2026-02-10 17:00:57
20231204144023	2026-02-10 17:00:57
20231204144024	2026-02-10 17:00:57
20231204144025	2026-02-10 17:00:57
20240108234812	2026-02-10 17:00:57
20240109165339	2026-02-10 17:00:57
20240227174441	2026-02-10 17:00:57
20240311171622	2026-02-10 17:00:57
20240321100241	2026-02-10 17:00:57
20240401105812	2026-02-10 17:00:57
20240418121054	2026-02-10 17:00:57
20240523004032	2026-02-10 17:00:57
20240618124746	2026-02-10 17:00:57
20240801235015	2026-02-10 17:00:57
20240805133720	2026-02-10 17:00:57
20240827160934	2026-02-10 17:00:57
20240919163303	2026-02-10 17:00:57
20240919163305	2026-02-10 17:00:57
20241019105805	2026-02-10 17:00:57
20241030150047	2026-02-10 17:00:57
20241108114728	2026-02-10 17:00:57
20241121104152	2026-02-10 17:00:57
20241130184212	2026-02-10 17:00:57
20241220035512	2026-02-10 17:00:57
20241220123912	2026-02-10 17:00:57
20241224161212	2026-02-10 17:00:57
20250107150512	2026-02-10 17:00:57
20250110162412	2026-02-10 17:00:57
20250123174212	2026-02-10 17:00:57
20250128220012	2026-02-10 17:00:57
20250506224012	2026-02-10 17:00:57
20250523164012	2026-02-10 17:00:57
20250714121412	2026-02-10 17:00:57
20250905041441	2026-02-10 17:00:57
20251103001201	2026-02-10 17:00:57
20251120212548	2026-02-10 17:00:57
20251120215549	2026-02-10 17:00:57
\.


--
-- Data for Name: subscription; Type: TABLE DATA; Schema: realtime; Owner: supabase_admin
--

COPY realtime.subscription (id, subscription_id, entity, filters, claims, created_at, action_filter) FROM stdin;
\.


--
-- Data for Name: buckets; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY storage.buckets (id, name, owner, created_at, updated_at, public, avif_autodetection, file_size_limit, allowed_mime_types, owner_id, type) FROM stdin;
\.


--
-- Data for Name: buckets_analytics; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY storage.buckets_analytics (name, type, format, created_at, updated_at, id, deleted_at) FROM stdin;
\.


--
-- Data for Name: buckets_vectors; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY storage.buckets_vectors (id, type, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: iceberg_namespaces; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY storage.iceberg_namespaces (id, bucket_name, name, created_at, updated_at, metadata, catalog_id) FROM stdin;
\.


--
-- Data for Name: iceberg_tables; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY storage.iceberg_tables (id, namespace_id, bucket_name, name, location, created_at, updated_at, remote_table_id, shard_key, shard_id, catalog_id) FROM stdin;
\.


--
-- Data for Name: migrations; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY storage.migrations (id, name, hash, executed_at) FROM stdin;
0	create-migrations-table	e18db593bcde2aca2a408c4d1100f6abba2195df	2026-02-10 17:01:18.470533
1	initialmigration	6ab16121fbaa08bbd11b712d05f358f9b555d777	2026-02-10 17:01:18.476016
2	storage-schema	f6a1fa2c93cbcd16d4e487b362e45fca157a8dbd	2026-02-10 17:01:18.479362
3	pathtoken-column	2cb1b0004b817b29d5b0a971af16bafeede4b70d	2026-02-10 17:01:18.4897
4	add-migrations-rls	427c5b63fe1c5937495d9c635c263ee7a5905058	2026-02-10 17:01:18.496147
5	add-size-functions	79e081a1455b63666c1294a440f8ad4b1e6a7f84	2026-02-10 17:01:18.499184
6	change-column-name-in-get-size	ded78e2f1b5d7e616117897e6443a925965b30d2	2026-02-10 17:01:18.50287
7	add-rls-to-buckets	e7e7f86adbc51049f341dfe8d30256c1abca17aa	2026-02-10 17:01:18.506701
8	add-public-to-buckets	fd670db39ed65f9d08b01db09d6202503ca2bab3	2026-02-10 17:01:18.509295
9	fix-search-function	af597a1b590c70519b464a4ab3be54490712796b	2026-02-10 17:01:18.512259
10	search-files-search-function	b595f05e92f7e91211af1bbfe9c6a13bb3391e16	2026-02-10 17:01:18.516701
11	add-trigger-to-auto-update-updated_at-column	7425bdb14366d1739fa8a18c83100636d74dcaa2	2026-02-10 17:01:18.520275
12	add-automatic-avif-detection-flag	8e92e1266eb29518b6a4c5313ab8f29dd0d08df9	2026-02-10 17:01:18.524899
13	add-bucket-custom-limits	cce962054138135cd9a8c4bcd531598684b25e7d	2026-02-10 17:01:18.528102
14	use-bytes-for-max-size	941c41b346f9802b411f06f30e972ad4744dad27	2026-02-10 17:01:18.531211
15	add-can-insert-object-function	934146bc38ead475f4ef4b555c524ee5d66799e5	2026-02-10 17:01:18.543547
16	add-version	76debf38d3fd07dcfc747ca49096457d95b1221b	2026-02-10 17:01:18.546799
17	drop-owner-foreign-key	f1cbb288f1b7a4c1eb8c38504b80ae2a0153d101	2026-02-10 17:01:18.549436
18	add_owner_id_column_deprecate_owner	e7a511b379110b08e2f214be852c35414749fe66	2026-02-10 17:01:18.55164
19	alter-default-value-objects-id	02e5e22a78626187e00d173dc45f58fa66a4f043	2026-02-10 17:01:18.555256
20	list-objects-with-delimiter	cd694ae708e51ba82bf012bba00caf4f3b6393b7	2026-02-10 17:01:18.55827
21	s3-multipart-uploads	8c804d4a566c40cd1e4cc5b3725a664a9303657f	2026-02-10 17:01:18.561725
22	s3-multipart-uploads-big-ints	9737dc258d2397953c9953d9b86920b8be0cdb73	2026-02-10 17:01:18.569148
23	optimize-search-function	9d7e604cddc4b56a5422dc68c9313f4a1b6f132c	2026-02-10 17:01:18.574404
24	operation-function	8312e37c2bf9e76bbe841aa5fda889206d2bf8aa	2026-02-10 17:01:18.577294
25	custom-metadata	d974c6057c3db1c1f847afa0e291e6165693b990	2026-02-10 17:01:18.579765
50	search-v2-optimised	6323ac4f850aa14e7387eb32102869578b5bd478	2026-02-10 17:01:18.658328
51	index-backward-compatible-search	2ee395d433f76e38bcd3856debaf6e0e5b674011	2026-02-10 17:01:18.668211
52	drop-not-used-indexes-and-functions	5cc44c8696749ac11dd0dc37f2a3802075f3a171	2026-02-10 17:01:18.669834
53	drop-index-lower-name	d0cb18777d9e2a98ebe0bc5cc7a42e57ebe41854	2026-02-10 17:01:18.673789
54	drop-index-object-level	6289e048b1472da17c31a7eba1ded625a6457e67	2026-02-10 17:01:18.675529
55	prevent-direct-deletes	262a4798d5e0f2e7c8970232e03ce8be695d5819	2026-02-10 17:01:18.67695
56	fix-optimized-search-function	cb58526ebc23048049fd5bf2fd148d18b04a2073	2026-02-10 17:01:18.680131
26	objects-prefixes	ef3f7871121cdc47a65308e6702519e853422ae2	2026-02-10 17:01:18.582029
27	search-v2	33b8f2a7ae53105f028e13e9fcda9dc4f356b4a2	2026-02-10 17:01:18.584176
28	object-bucket-name-sorting	ba85ec41b62c6a30a3f136788227ee47f311c436	2026-02-10 17:01:18.586409
29	create-prefixes	a7b1a22c0dc3ab630e3055bfec7ce7d2045c5b7b	2026-02-10 17:01:18.588307
30	update-object-levels	6c6f6cc9430d570f26284a24cf7b210599032db7	2026-02-10 17:01:18.590361
31	objects-level-index	33f1fef7ec7fea08bb892222f4f0f5d79bab5eb8	2026-02-10 17:01:18.592513
32	backward-compatible-index-on-objects	2d51eeb437a96868b36fcdfb1ddefdf13bef1647	2026-02-10 17:01:18.594446
33	backward-compatible-index-on-prefixes	fe473390e1b8c407434c0e470655945b110507bf	2026-02-10 17:01:18.596197
34	optimize-search-function-v1	82b0e469a00e8ebce495e29bfa70a0797f7ebd2c	2026-02-10 17:01:18.598101
35	add-insert-trigger-prefixes	63bb9fd05deb3dc5e9fa66c83e82b152f0caf589	2026-02-10 17:01:18.600201
36	optimise-existing-functions	81cf92eb0c36612865a18016a38496c530443899	2026-02-10 17:01:18.602412
37	add-bucket-name-length-trigger	3944135b4e3e8b22d6d4cbb568fe3b0b51df15c1	2026-02-10 17:01:18.604199
38	iceberg-catalog-flag-on-buckets	02716b81ceec9705aed84aa1501657095b32e5c5	2026-02-10 17:01:18.606856
39	add-search-v2-sort-support	0b610398a2ab38007247d4e86849a6640dc911c4	2026-02-10 17:01:18.616564
40	fix-prefix-race-conditions-optimized	0ac9c3dc677577aa12d933b6a910f567fd614342	2026-02-10 17:01:18.618908
41	add-object-level-update-trigger	44c22478bf01744b2129efc480cd2edc9a7d60e9	2026-02-10 17:01:18.621273
42	rollback-prefix-triggers	f2ab4f526ab7f979541082992593938c05ee4b47	2026-02-10 17:01:18.623189
43	fix-object-level	ab837ad8f1c7d00cc0b7310e989a23388ff29fc6	2026-02-10 17:01:18.625266
44	vector-bucket-type	99c20c0ffd52bb1ff1f32fb992f3b351e3ef8fb3	2026-02-10 17:01:18.627049
45	vector-buckets	049e27196d77a7cb76497a85afae669d8b230953	2026-02-10 17:01:18.629483
46	buckets-objects-grants	fedeb96d60fefd8e02ab3ded9fbde05632f84aed	2026-02-10 17:01:18.634183
47	iceberg-table-metadata	649df56855c24d8b36dd4cc1aeb8251aa9ad42c2	2026-02-10 17:01:18.636968
48	iceberg-catalog-ids	e0e8b460c609b9999ccd0df9ad14294613eed939	2026-02-10 17:01:18.640096
49	buckets-objects-grants-postgres	072b1195d0d5a2f888af6b2302a1938dd94b8b3d	2026-02-10 17:01:18.655997
\.


--
-- Data for Name: objects; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY storage.objects (id, bucket_id, name, owner, created_at, updated_at, last_accessed_at, metadata, version, owner_id, user_metadata) FROM stdin;
\.


--
-- Data for Name: s3_multipart_uploads; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY storage.s3_multipart_uploads (id, in_progress_size, upload_signature, bucket_id, key, version, owner_id, created_at, user_metadata) FROM stdin;
\.


--
-- Data for Name: s3_multipart_uploads_parts; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY storage.s3_multipart_uploads_parts (id, upload_id, size, part_number, bucket_id, key, etag, owner_id, version, created_at) FROM stdin;
\.


--
-- Data for Name: vector_indexes; Type: TABLE DATA; Schema: storage; Owner: supabase_storage_admin
--

COPY storage.vector_indexes (id, name, bucket_id, data_type, dimension, distance_metric, metadata_configuration, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: hooks; Type: TABLE DATA; Schema: supabase_functions; Owner: supabase_functions_admin
--

COPY supabase_functions.hooks (id, hook_table_id, hook_name, created_at, request_id) FROM stdin;
\.


--
-- Data for Name: migrations; Type: TABLE DATA; Schema: supabase_functions; Owner: supabase_functions_admin
--

COPY supabase_functions.migrations (version, inserted_at) FROM stdin;
initial	2026-02-10 17:00:39.212612+00
20210809183423_update_grants	2026-02-10 17:00:39.212612+00
\.


--
-- Data for Name: schema_migrations; Type: TABLE DATA; Schema: supabase_migrations; Owner: postgres
--

COPY supabase_migrations.schema_migrations (version, statements, name) FROM stdin;
20240100000000	{"-- ============================================\n-- EMPLOYEES TABLE\n-- Must run BEFORE auth_permissions migration\n-- ============================================\n\nCREATE TABLE IF NOT EXISTS employees (\n  id SERIAL PRIMARY KEY,\n  employee_id VARCHAR(50) UNIQUE NOT NULL,  -- M Nhn Vin\n  full_name VARCHAR(255) NOT NULL,          -- Tn Nhn Vin\n  department VARCHAR(100),                   -- Phng Ban\n  chuc_vu VARCHAR(50) DEFAULT 'nhan_vien',  -- Chc V\n  is_active BOOLEAN DEFAULT true,           -- Trng thi\n  created_at TIMESTAMPTZ DEFAULT NOW(),\n  updated_at TIMESTAMPTZ DEFAULT NOW()\n)","-- Create index for faster lookups\nCREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id)","CREATE INDEX IF NOT EXISTS idx_employees_department ON employees(department)","CREATE INDEX IF NOT EXISTS idx_employees_is_active ON employees(is_active)","-- Trigger to update updated_at on row update\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n  NEW.updated_at = NOW();\n  RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql","DROP TRIGGER IF EXISTS update_employees_updated_at ON employees","CREATE TRIGGER update_employees_updated_at\n  BEFORE UPDATE ON employees\n  FOR EACH ROW\n  EXECUTE FUNCTION update_updated_at_column()","-- Insert test employee for development\nINSERT INTO employees (employee_id, full_name, department, chuc_vu, is_active) VALUES\n  ('ROOT001', 'System Administrator', 'IT', 'admin', true),\n  ('NV001', 'Nguyn Vn A', 'Kho', 'nhan_vien', true),\n  ('NV002', 'Trn Th B', 'K hoch', 'nhan_vien', true)\nON CONFLICT (employee_id) DO NOTHING"}	employees
20240101000001	{"-- ============================================================================\n-- Thread Management System - Thread Types Table\n-- Migration: 001_thread_types.sql\n-- Description: Master data table for thread specifications\n-- ============================================================================\n\n-- ============================================================================\n-- ENUMS\n-- ============================================================================\n\n-- Create thread_material enum for thread composition classification\nCREATE TYPE thread_material AS ENUM (\n    'polyester',  -- Ch Polyester\n    'cotton',     -- Ch Cotton\n    'nylon',      -- Ch Nylon\n    'silk',       -- Ch La\n    'rayon',      -- Ch Rayon\n    'mixed'       -- Ch Pha\n)","-- ============================================================================\n-- FUNCTION: update_updated_at_column\n-- Auto-update updated_at timestamp on row updates\n-- Note: Created if not exists to avoid conflicts with other migrations\n-- ============================================================================\n\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql","-- ============================================================================\n-- TABLE: thread_types\n-- Master data for thread specifications including density conversion factors\n-- ============================================================================\n\nCREATE TABLE IF NOT EXISTS thread_types (\n    -- Primary key\n    id SERIAL PRIMARY KEY,\n    \n    -- Thread identification\n    code VARCHAR(50) UNIQUE NOT NULL,           -- M ch SKU (e.g., 'T-RED-40', 'TEX40-WHT-001')\n    name VARCHAR(200) NOT NULL,                 -- Tn hin th\n    \n    -- Color specifications\n    color VARCHAR(50),                          -- Tn mu (e.g., '', 'Xanh dng')\n    color_code VARCHAR(7),                      -- M mu Hex (e.g., '#FF0000')\n    \n    -- Thread physical properties\n    material thread_material DEFAULT 'polyester', -- Cht liu ch\n    tex_number DECIMAL(8,2),                    --  dy ch theo h TEX (grams/1000m)\n    \n    -- CRITICAL: Conversion factor for weight-to-meters calculation\n    -- Formula: meters = (weight_grams / density_grams_per_meter)\n    -- High precision (6 decimals) required for accurate inventory tracking\n    density_grams_per_meter DECIMAL(10,6) NOT NULL, -- H s chuyn i (g/m)\n    \n    -- Standard cone specifications\n    meters_per_cone DECIMAL(12,2),              -- S mt tiu chun/cun y\n    \n    -- Supplier information\n    supplier VARCHAR(200),                      -- Tn nh cung cp\n    \n    -- Reorder management\n    reorder_level_meters DECIMAL(12,2) DEFAULT 1000, -- Mc cnh bo t hng li (mt)\n    lead_time_days INTEGER DEFAULT 7,           -- Thi gian giao hng ca NCC (ngy)\n    \n    -- Status\n    is_active BOOLEAN DEFAULT TRUE,             -- Cn s dng hay khng\n    \n    -- Timestamps\n    created_at TIMESTAMPTZ DEFAULT NOW(),\n    updated_at TIMESTAMPTZ DEFAULT NOW()\n)","-- Add table comment\nCOMMENT ON TABLE thread_types IS 'Master data for thread specifications - Bng d liu ch v thng s ch may'","-- Add column comments\nCOMMENT ON COLUMN thread_types.code IS 'Thread SKU code - M SKU ch (unique)'","COMMENT ON COLUMN thread_types.name IS 'Display name - Tn hin th'","COMMENT ON COLUMN thread_types.color IS 'Color name - Tn mu sc'","COMMENT ON COLUMN thread_types.color_code IS 'Hex color code - M mu Hex (#RRGGBB)'","COMMENT ON COLUMN thread_types.material IS 'Thread material type - Loi cht liu ch'","COMMENT ON COLUMN thread_types.tex_number IS 'TEX number (thread thickness) -  mnh TEX'","COMMENT ON COLUMN thread_types.density_grams_per_meter IS 'Weight-to-length conversion factor - H s chuyn i khi lng sang chiu di'","COMMENT ON COLUMN thread_types.meters_per_cone IS 'Standard meters per full cone - S mt tiu chun mi cun y'","COMMENT ON COLUMN thread_types.supplier IS 'Supplier name - Tn nh cung cp'","COMMENT ON COLUMN thread_types.reorder_level_meters IS 'Reorder alert threshold in meters - Ngng cnh bo t hng li (mt)'","COMMENT ON COLUMN thread_types.lead_time_days IS 'Supplier lead time in days - Thi gian giao hng NCC (ngy)'","COMMENT ON COLUMN thread_types.is_active IS 'Active status - Trng thi hot ng'","-- ============================================================================\n-- TRIGGER: Auto-update updated_at on row modification\n-- ============================================================================\n\nCREATE TRIGGER update_thread_types_updated_at\n    BEFORE UPDATE ON thread_types\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()","-- ============================================================================\n-- INDEXES: Optimize common query patterns\n-- ============================================================================\n\n-- Primary lookup by code (already unique, but explicit index for clarity)\nCREATE INDEX IF NOT EXISTS idx_thread_types_code ON thread_types(code)","-- Filter by color for production matching\nCREATE INDEX IF NOT EXISTS idx_thread_types_color ON thread_types(color)","-- Filter by material type\nCREATE INDEX IF NOT EXISTS idx_thread_types_material ON thread_types(material)","-- Filter active/inactive threads (partial index for active only)\nCREATE INDEX IF NOT EXISTS idx_thread_types_active ON thread_types(is_active) WHERE is_active = TRUE","-- Filter by supplier for procurement\nCREATE INDEX IF NOT EXISTS idx_thread_types_supplier ON thread_types(supplier)","-- ============================================================================\n-- SEED DATA (Optional - uncomment if needed for testing)\n-- ============================================================================\n\n-- INSERT INTO thread_types (code, name, color, color_code, material, tex_number, density_grams_per_meter, meters_per_cone, supplier, reorder_level_meters, lead_time_days)\n-- VALUES\n--     ('T-RED-40', 'Ch Polyester  TEX40', '', '#FF0000', 'polyester', 40.00, 0.040000, 5000.00, 'Cng ty TNHH ABC', 1000.00, 7),\n--     ('T-BLU-40', 'Ch Polyester Xanh TEX40', 'Xanh dng', '#0000FF', 'polyester', 40.00, 0.040000, 5000.00, 'Cng ty TNHH ABC', 1000.00, 7),\n--     ('T-WHT-60', 'Ch Cotton Trng TEX60', 'Trng', '#FFFFFF', 'cotton', 60.00, 0.060000, 3000.00, 'Cng ty XYZ', 1500.00, 10),\n--     ('T-BLK-40', 'Ch Polyester en TEX40', 'en', '#000000', 'polyester', 40.00, 0.040000, 5000.00, 'Cng ty TNHH ABC', 1000.00, 7),\n--     ('T-GRN-50', 'Ch Nylon Xanh L TEX50', 'Xanh l', '#00FF00', 'nylon', 50.00, 0.050000, 4000.00, 'Cng ty DEF', 800.00, 5)\n-- ON CONFLICT (code) DO NOTHING;"}	thread_types
20240101000002	{"-- Migration: 008_warehouses.sql\n-- Description: Create warehouses table for storage locations\n-- Part of: Thread Management System - Phase 1 Foundation\n\n-- Warehouses table (storage locations)\nCREATE TABLE IF NOT EXISTS warehouses (\n  id SERIAL PRIMARY KEY,\n  code VARCHAR(20) UNIQUE NOT NULL,           -- Warehouse code (e.g., 'WH-01')\n  name VARCHAR(100) NOT NULL,                 -- Display name\n  location VARCHAR(200),                      -- Physical location/address\n  is_active BOOLEAN DEFAULT TRUE,\n  created_at TIMESTAMPTZ DEFAULT NOW(),\n  updated_at TIMESTAMPTZ DEFAULT NOW()\n)","-- Trigger for updated_at (reuse existing function from positions table)\nCREATE TRIGGER update_warehouses_updated_at\n  BEFORE UPDATE ON warehouses\n  FOR EACH ROW\n  EXECUTE FUNCTION update_updated_at_column()","-- Indexes for performance\nCREATE INDEX idx_warehouses_code ON warehouses(code)","CREATE INDEX idx_warehouses_active ON warehouses(is_active)","-- Add comment for table documentation\nCOMMENT ON TABLE warehouses IS 'Storage locations for thread inventory management'","COMMENT ON COLUMN warehouses.code IS 'Unique warehouse code (e.g., WH-01, WH-MAIN)'","COMMENT ON COLUMN warehouses.name IS 'Display name for the warehouse'","COMMENT ON COLUMN warehouses.location IS 'Physical address or location description'","COMMENT ON COLUMN warehouses.is_active IS 'Whether the warehouse is currently active'"}	warehouses
20240101000003	{"-- ============================================================================\n-- Thread Management System - Thread Inventory Table\n-- Migration: 002_thread_inventory.sql\n-- Description: Individual cone tracking with dual Unit of Measure (cones + meters)\n-- Dependencies: 001_thread_types.sql, 008_warehouses.sql\n-- ============================================================================\n\n-- ============================================================================\n-- ENUM: cone_status\n-- Represents the lifecycle states of a thread cone\n-- ============================================================================\n\nCREATE TYPE cone_status AS ENUM (\n    'RECEIVED',           -- Moi nhap kho - Just received into warehouse\n    'INSPECTED',          -- Da kiem tra - Quality check passed\n    'AVAILABLE',          -- San sang phan bo - Ready for allocation\n    'SOFT_ALLOCATED',     -- Da phan bo mem - Reserved but not yet issued\n    'HARD_ALLOCATED',     -- Da phan bo cung - Issued to production order\n    'IN_PRODUCTION',      -- Dang su dung - Currently being used in production\n    'PARTIAL_RETURN',     -- Dang tra ve - Worker initiated return\n    'PENDING_WEIGH',      -- Cho can - Waiting for warehouse to weigh\n    'CONSUMED',           -- Da su dung het - Fully consumed\n    'WRITTEN_OFF',        -- Da xoa so - Written off (damaged, lost, or too little remaining)\n    'QUARANTINE'          -- Cach ly - Quarantined for quality issues\n)","-- Add enum comment\nCOMMENT ON TYPE cone_status IS 'Lifecycle states for thread cones - Trang thai vong doi cua cuon chi'","-- ============================================================================\n-- TABLE: thread_inventory\n-- Individual cone tracking with dual UoM (cones + meters)\n-- Supports FEFO allocation with partial cone priority\n-- ============================================================================\n\nCREATE TABLE IF NOT EXISTS thread_inventory (\n    -- Primary key\n    id SERIAL PRIMARY KEY,\n    \n    -- Cone identification (barcode ID - auto-generated or scanned)\n    cone_id VARCHAR(50) UNIQUE NOT NULL,\n    \n    -- Foreign keys\n    thread_type_id INTEGER NOT NULL REFERENCES thread_types(id),\n    warehouse_id INTEGER NOT NULL REFERENCES warehouses(id),\n    \n    -- =========================================================================\n    -- Dual UoM Tracking\n    -- Primary: meters (for allocation/consumption calculations)\n    -- Secondary: cones (for physical counting)\n    -- =========================================================================\n    quantity_cones INTEGER NOT NULL DEFAULT 1,        -- So cuon (always 1 for individual tracking)\n    quantity_meters DECIMAL(12,4) NOT NULL,           -- So met con lai - High precision for conversion calculations\n    weight_grams DECIMAL(10,2),                       -- Khoi luong hien tai (g) - Actual weight (for partial cones)\n    \n    -- Partial cone indicator\n    is_partial BOOLEAN DEFAULT FALSE,                 -- Cuon le - Indicates if cone has been partially used\n    \n    -- Status tracking\n    status cone_status DEFAULT 'RECEIVED',\n    \n    -- =========================================================================\n    -- Traceability Information\n    -- =========================================================================\n    lot_number VARCHAR(50),                           -- So lo - Supplier batch number\n    expiry_date DATE,                                 -- Ngay het han - For FEFO allocation\n    received_date DATE DEFAULT CURRENT_DATE,          -- Ngay nhap kho\n    location VARCHAR(100),                            -- Vi tri trong kho - Physical location in warehouse (e.g., 'A-1-2')\n    \n    -- =========================================================================\n    -- Timestamps\n    -- =========================================================================\n    created_at TIMESTAMPTZ DEFAULT NOW(),\n    updated_at TIMESTAMPTZ DEFAULT NOW()\n)","-- Add table comment\nCOMMENT ON TABLE thread_inventory IS 'Individual cone inventory tracking with dual UoM - Theo doi ton kho cuon chi voi 2 don vi do'","-- Add column comments\nCOMMENT ON COLUMN thread_inventory.cone_id IS 'Barcode ID for cone (auto-generated or scanned) - Ma vach cuon chi'","COMMENT ON COLUMN thread_inventory.thread_type_id IS 'Reference to thread type - Tham chieu loai chi'","COMMENT ON COLUMN thread_inventory.warehouse_id IS 'Reference to warehouse location - Tham chieu kho'","COMMENT ON COLUMN thread_inventory.quantity_cones IS 'Number of cones (always 1 for individual tracking) - So cuon'","COMMENT ON COLUMN thread_inventory.quantity_meters IS 'Remaining meters on cone (high precision) - So met con lai'","COMMENT ON COLUMN thread_inventory.weight_grams IS 'Current weight in grams (for partial cone calculations) - Khoi luong hien tai'","COMMENT ON COLUMN thread_inventory.is_partial IS 'Flag indicating partial cone (previously used) - Co danh dau cuon le'","COMMENT ON COLUMN thread_inventory.status IS 'Current lifecycle status - Trang thai hien tai'","COMMENT ON COLUMN thread_inventory.lot_number IS 'Supplier batch/lot number - So lo nha cung cap'","COMMENT ON COLUMN thread_inventory.expiry_date IS 'Expiry date for FEFO allocation - Ngay het han'","COMMENT ON COLUMN thread_inventory.received_date IS 'Date received into warehouse - Ngay nhap kho'","COMMENT ON COLUMN thread_inventory.location IS 'Physical location in warehouse (e.g., A-1-2) - Vi tri kho'","-- ============================================================================\n-- TRIGGER: Auto-update updated_at on row modification\n-- Uses existing function from 001_thread_types.sql\n-- ============================================================================\n\nCREATE TRIGGER update_thread_inventory_updated_at\n    BEFORE UPDATE ON thread_inventory\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()","-- ============================================================================\n-- INDEXES: Optimize common query patterns\n-- ============================================================================\n\n-- Primary lookup by cone_id (barcode scan)\nCREATE INDEX idx_thread_inventory_cone_id ON thread_inventory(cone_id)","-- Filter by thread type (for stock level calculations)\nCREATE INDEX idx_thread_inventory_thread_type ON thread_inventory(thread_type_id)","-- Filter by warehouse (for warehouse-specific views)\nCREATE INDEX idx_thread_inventory_warehouse ON thread_inventory(warehouse_id)","-- Filter by status (for status-based queries)\nCREATE INDEX idx_thread_inventory_status ON thread_inventory(status)","-- Partial index for quick partial cone lookups (partial cones get allocation priority)\nCREATE INDEX idx_thread_inventory_is_partial ON thread_inventory(is_partial) WHERE is_partial = TRUE","-- Partial index for cones with expiry dates (for FEFO and expiry alerts)\nCREATE INDEX idx_thread_inventory_expiry ON thread_inventory(expiry_date) WHERE expiry_date IS NOT NULL","-- Partial index for available cones only (most common allocation query)\nCREATE INDEX idx_thread_inventory_available ON thread_inventory(status) WHERE status = 'AVAILABLE'","-- ============================================================================\n-- COMPOSITE INDEX: FEFO (First Expiry First Out) Allocation\n-- Critical for allocation performance\n-- Order: Partial cones first, then earliest expiry, then earliest received\n-- ============================================================================\n\nCREATE INDEX idx_thread_inventory_fefo ON thread_inventory(\n    is_partial DESC,              -- Partial cones first (use up remnants before full cones)\n    expiry_date ASC NULLS LAST,   -- Earliest expiry first (NULLS = no expiry, lowest priority)\n    received_date ASC             -- Earliest received first (FIFO as tiebreaker)\n) WHERE status = 'AVAILABLE'","-- Add index comment\nCOMMENT ON INDEX idx_thread_inventory_fefo IS 'FEFO composite index for allocation - partial cones first, then by expiry, then by received date'","-- ============================================================================\n-- CONSTRAINT: Ensure quantity_meters is positive\n-- ============================================================================\n\nALTER TABLE thread_inventory\nADD CONSTRAINT chk_thread_inventory_quantity_positive \nCHECK (quantity_meters >= 0)","-- ============================================================================\n-- CONSTRAINT: Ensure weight_grams is positive when set\n-- ============================================================================\n\nALTER TABLE thread_inventory\nADD CONSTRAINT chk_thread_inventory_weight_positive \nCHECK (weight_grams IS NULL OR weight_grams >= 0)","-- ============================================================================\n-- END OF MIGRATION\n-- ============================================================================"}	thread_inventory
20240101000004	{"-- ============================================================================\n-- Thread Management System - Thread Allocations Table\n-- Migration: 003_thread_allocations.sql\n-- Description: Reservation requests and junction table for cone-to-allocation mapping\n-- Dependencies: 001_thread_types.sql, 002_thread_inventory.sql\n-- ============================================================================\n\n-- ============================================================================\n-- ENUM: allocation_status\n-- Represents the lifecycle states of an allocation request\n-- ============================================================================\n\nCREATE TYPE allocation_status AS ENUM (\n    'PENDING',      -- Cho xu ly - Request submitted, not yet processed\n    'SOFT',         -- Phan bo mem - Cones reserved but not yet issued\n    'HARD',         -- Phan bo cung - Cones confirmed for production\n    'ISSUED',       -- Da xuat - Cones issued to production\n    'CANCELLED',    -- Da huy - Allocation cancelled\n    'WAITLISTED'    -- Cho danh sach - Insufficient stock, waiting for availability\n)","-- Add enum comment\nCOMMENT ON TYPE allocation_status IS 'Lifecycle states for allocation requests - Trang thai vong doi yeu cau phan bo'","-- ============================================================================\n-- ENUM: allocation_priority\n-- Priority levels for allocation queue ordering\n-- ============================================================================\n\nCREATE TYPE allocation_priority AS ENUM (\n    'LOW',      -- Thap - Low priority\n    'NORMAL',   -- Binh thuong - Normal priority (default)\n    'HIGH',     -- Cao - High priority\n    'URGENT'    -- Khan cap - Urgent priority\n)","-- Add enum comment\nCOMMENT ON TYPE allocation_priority IS 'Priority levels for allocation ordering - Muc do uu tien phan bo'","-- ============================================================================\n-- TABLE: thread_allocations\n-- Reservation requests linking production orders to thread requirements\n-- ============================================================================\n\nCREATE TABLE IF NOT EXISTS thread_allocations (\n    -- Primary key\n    id SERIAL PRIMARY KEY,\n    \n    -- Production order identification\n    order_id VARCHAR(50) NOT NULL,             -- Ma lenh san xuat - Production order ID\n    order_reference VARCHAR(200),              -- Mo ta don hang - Order description/reference\n    \n    -- Thread type requirement\n    thread_type_id INTEGER NOT NULL REFERENCES thread_types(id),\n    \n    -- =========================================================================\n    -- Quantity Tracking\n    -- requested_meters: Total requirement from production order\n    -- allocated_meters: Amount successfully allocated (may be less if insufficient stock)\n    -- =========================================================================\n    requested_meters DECIMAL(12,4) NOT NULL,   -- So met yeu cau\n    allocated_meters DECIMAL(12,4) DEFAULT 0,  -- So met da phan bo\n    \n    -- =========================================================================\n    -- Status and Priority\n    -- =========================================================================\n    status allocation_status DEFAULT 'PENDING',\n    priority allocation_priority DEFAULT 'NORMAL',\n    \n    -- Calculated priority score: (priority_level * 10) + age_days\n    -- Used for queue ordering when resolving conflicts\n    -- Priority levels: LOW=1, NORMAL=2, HIGH=3, URGENT=4\n    priority_score INTEGER DEFAULT 0,\n    \n    -- =========================================================================\n    -- Dates and Tracking\n    -- =========================================================================\n    requested_date TIMESTAMPTZ DEFAULT NOW(),  -- Ngay yeu cau\n    due_date DATE,                             -- Ngay can - Due date for production\n    notes TEXT,                                -- Ghi chu\n    created_by VARCHAR(100),                   -- Nguoi tao\n    \n    -- =========================================================================\n    -- Timestamps\n    -- =========================================================================\n    created_at TIMESTAMPTZ DEFAULT NOW(),\n    updated_at TIMESTAMPTZ DEFAULT NOW()\n)","-- Add table comment\nCOMMENT ON TABLE thread_allocations IS 'Thread allocation requests for production orders - Yeu cau phan bo chi cho lenh san xuat'","-- Add column comments\nCOMMENT ON COLUMN thread_allocations.order_id IS 'Production order ID - Ma lenh san xuat'","COMMENT ON COLUMN thread_allocations.order_reference IS 'Order description or reference - Mo ta don hang'","COMMENT ON COLUMN thread_allocations.thread_type_id IS 'Reference to thread type - Tham chieu loai chi'","COMMENT ON COLUMN thread_allocations.requested_meters IS 'Total meters requested - Tong so met yeu cau'","COMMENT ON COLUMN thread_allocations.allocated_meters IS 'Meters successfully allocated - So met da phan bo'","COMMENT ON COLUMN thread_allocations.status IS 'Current allocation status - Trang thai phan bo hien tai'","COMMENT ON COLUMN thread_allocations.priority IS 'Allocation priority level - Muc do uu tien'","COMMENT ON COLUMN thread_allocations.priority_score IS 'Calculated priority score (priority_level * 10 + age_days) - Diem uu tien tinh toan'","COMMENT ON COLUMN thread_allocations.requested_date IS 'Date allocation was requested - Ngay yeu cau phan bo'","COMMENT ON COLUMN thread_allocations.due_date IS 'Due date for production - Ngay can cho san xuat'","COMMENT ON COLUMN thread_allocations.notes IS 'Additional notes - Ghi chu them'","COMMENT ON COLUMN thread_allocations.created_by IS 'User who created the allocation - Nguoi tao phan bo'","-- ============================================================================\n-- TABLE: thread_allocation_cones\n-- Junction table linking allocations to specific inventory cones\n-- Supports partial allocation from a single cone to multiple orders\n-- ============================================================================\n\nCREATE TABLE IF NOT EXISTS thread_allocation_cones (\n    -- Primary key\n    id SERIAL PRIMARY KEY,\n    \n    -- Foreign keys\n    allocation_id INTEGER NOT NULL REFERENCES thread_allocations(id) ON DELETE CASCADE,\n    cone_id INTEGER NOT NULL REFERENCES thread_inventory(id),\n    \n    -- Allocation amount\n    allocated_meters DECIMAL(12,4) NOT NULL,   -- So met phan bo tu cuon nay\n    \n    -- Timestamp\n    created_at TIMESTAMPTZ DEFAULT NOW(),\n    \n    -- Ensure unique allocation-cone pair\n    UNIQUE(allocation_id, cone_id)\n)","-- Add table comment\nCOMMENT ON TABLE thread_allocation_cones IS 'Junction table linking allocations to inventory cones - Bang lien ket phan bo va cuon chi'","-- Add column comments\nCOMMENT ON COLUMN thread_allocation_cones.allocation_id IS 'Reference to allocation request - Tham chieu yeu cau phan bo'","COMMENT ON COLUMN thread_allocation_cones.cone_id IS 'Reference to inventory cone - Tham chieu cuon chi trong kho'","COMMENT ON COLUMN thread_allocation_cones.allocated_meters IS 'Meters allocated from this cone - So met phan bo tu cuon nay'","-- ============================================================================\n-- TRIGGER: Auto-update updated_at on row modification\n-- Uses existing function from 001_thread_types.sql\n-- ============================================================================\n\nCREATE TRIGGER update_thread_allocations_updated_at\n    BEFORE UPDATE ON thread_allocations\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()","-- ============================================================================\n-- INDEXES: thread_allocations - Optimize common query patterns\n-- ============================================================================\n\n-- Lookup by production order ID (find all allocations for an order)\nCREATE INDEX idx_allocations_order_id ON thread_allocations(order_id)","-- Filter by thread type (for type-specific allocation views)\nCREATE INDEX idx_allocations_thread_type ON thread_allocations(thread_type_id)","-- Filter by status (for status-based queries)\nCREATE INDEX idx_allocations_status ON thread_allocations(status)","-- Filter by priority level\nCREATE INDEX idx_allocations_priority ON thread_allocations(priority)","-- Order by priority score descending (highest priority first)\nCREATE INDEX idx_allocations_priority_score ON thread_allocations(priority_score DESC)","-- Filter by due date (for deadline-based queries)\nCREATE INDEX idx_allocations_due_date ON thread_allocations(due_date)","-- Partial index for pending allocations only (most common processing query)\n-- Includes PENDING and SOFT statuses that need processing\nCREATE INDEX idx_allocations_pending ON thread_allocations(status) \n    WHERE status IN ('PENDING', 'SOFT')","-- ============================================================================\n-- INDEXES: thread_allocation_cones - Optimize junction table queries\n-- ============================================================================\n\n-- Lookup cones for a given allocation\nCREATE INDEX idx_allocation_cones_allocation ON thread_allocation_cones(allocation_id)","-- Lookup allocations for a given cone (check if cone is allocated)\nCREATE INDEX idx_allocation_cones_cone ON thread_allocation_cones(cone_id)","-- ============================================================================\n-- CONSTRAINTS: Data validation\n-- ============================================================================\n\n-- Ensure requested_meters is positive\nALTER TABLE thread_allocations\nADD CONSTRAINT chk_allocations_requested_positive \nCHECK (requested_meters > 0)","-- Ensure allocated_meters is non-negative and doesn't exceed requested\nALTER TABLE thread_allocations\nADD CONSTRAINT chk_allocations_allocated_valid \nCHECK (allocated_meters >= 0 AND allocated_meters <= requested_meters)","-- Ensure allocation_cones allocated_meters is positive\nALTER TABLE thread_allocation_cones\nADD CONSTRAINT chk_allocation_cones_meters_positive \nCHECK (allocated_meters > 0)","-- ============================================================================\n-- END OF MIGRATION\n-- ============================================================================"}	thread_allocations
20240101000005	{"-- ============================================================================\n-- Thread Management System - Thread Movements Table\n-- Migration: 004_thread_movements.sql\n-- Description: Transaction log for all thread movement events (receive, issue, return, etc.)\n-- Dependencies: 002_thread_inventory.sql, 003_thread_allocations.sql\n-- ============================================================================\n\n-- ============================================================================\n-- ENUM: movement_type\n-- Represents the types of inventory movements\n-- ============================================================================\n\nCREATE TYPE movement_type AS ENUM (\n    'RECEIVE',       -- Nhap kho - Stock receipt into warehouse\n    'ISSUE',         -- Xuat kho - Issue to production\n    'RETURN',        -- Tra ve - Return from production\n    'TRANSFER',      -- Chuyen kho - Transfer between warehouses\n    'ADJUSTMENT',    -- Dieu chinh - Manual adjustment (correction)\n    'WRITE_OFF'      -- Xoa so - Write-off (damaged, lost, expired)\n)","-- Add enum comment\nCOMMENT ON TYPE movement_type IS 'Types of inventory movements - Cac loai di chuyen ton kho'","-- ============================================================================\n-- TABLE: thread_movements\n-- Transaction log for all thread movement events\n-- Provides full audit trail of inventory changes\n-- ============================================================================\n\nCREATE TABLE IF NOT EXISTS thread_movements (\n    -- Primary key\n    id SERIAL PRIMARY KEY,\n    \n    -- Foreign keys\n    cone_id INTEGER NOT NULL REFERENCES thread_inventory(id),\n    allocation_id INTEGER REFERENCES thread_allocations(id),\n    \n    -- =========================================================================\n    -- Movement Information\n    -- =========================================================================\n    \n    -- Type of movement\n    movement_type movement_type NOT NULL,\n    \n    -- Quantity moved (positive = add, negative = remove depending on type)\n    quantity_meters DECIMAL(12,4) NOT NULL,\n    \n    -- =========================================================================\n    -- Status Transition\n    -- Records the before/after status of the cone\n    -- =========================================================================\n    \n    -- Previous status of the cone before this movement\n    from_status VARCHAR(50),\n    \n    -- New status of the cone after this movement\n    to_status VARCHAR(50),\n    \n    -- =========================================================================\n    -- Reference Information\n    -- Links to external documents (PO, production order, etc.)\n    -- =========================================================================\n    \n    -- External reference ID (e.g., PO number, order ID)\n    reference_id VARCHAR(50),\n    \n    -- Type of external reference (e.g., 'PURCHASE_ORDER', 'PRODUCTION_ORDER')\n    reference_type VARCHAR(50),\n    \n    -- =========================================================================\n    -- Tracking\n    -- =========================================================================\n    \n    -- User who performed the movement\n    performed_by VARCHAR(100),\n    \n    -- Additional notes\n    notes TEXT,\n    \n    -- =========================================================================\n    -- Timestamp (no updated_at - movements are immutable)\n    -- =========================================================================\n    \n    created_at TIMESTAMPTZ DEFAULT NOW()\n)","-- Add table comment\nCOMMENT ON TABLE thread_movements IS 'Transaction log for inventory movements - Nhat ky giao dich di chuyen ton kho'","-- Add column comments\nCOMMENT ON COLUMN thread_movements.cone_id IS 'Reference to the affected cone - Cuon chi bi anh huong'","COMMENT ON COLUMN thread_movements.allocation_id IS 'Reference to allocation (for ISSUE/RETURN) - Lien ket phan bo'","COMMENT ON COLUMN thread_movements.movement_type IS 'Type of movement - Loai di chuyen'","COMMENT ON COLUMN thread_movements.quantity_meters IS 'Meters involved in movement - So met di chuyen'","COMMENT ON COLUMN thread_movements.from_status IS 'Cone status before movement - Trang thai truoc'","COMMENT ON COLUMN thread_movements.to_status IS 'Cone status after movement - Trang thai sau'","COMMENT ON COLUMN thread_movements.reference_id IS 'External document reference ID - Ma tham chieu ben ngoai'","COMMENT ON COLUMN thread_movements.reference_type IS 'Type of external reference - Loai tham chieu'","COMMENT ON COLUMN thread_movements.performed_by IS 'User who performed the movement - Nguoi thuc hien'","COMMENT ON COLUMN thread_movements.notes IS 'Additional notes - Ghi chu'","-- ============================================================================\n-- INDEXES: Optimize common query patterns\n-- ============================================================================\n\n-- Lookup by cone (find all movements for a specific cone)\nCREATE INDEX idx_movements_cone ON thread_movements(cone_id)","-- Lookup by allocation (find all movements related to an allocation)\nCREATE INDEX idx_movements_allocation ON thread_movements(allocation_id)","-- Filter by movement type (for type-specific reports)\nCREATE INDEX idx_movements_type ON thread_movements(movement_type)","-- Sort by created_at descending (most recent first for audit trail)\nCREATE INDEX idx_movements_created ON thread_movements(created_at DESC)","-- Lookup by reference (find movements for a specific external document)\nCREATE INDEX idx_movements_reference ON thread_movements(reference_type, reference_id)","-- ============================================================================\n-- CONSTRAINT: Ensure quantity_meters is valid\n-- Can be positive or negative depending on movement type context\n-- ============================================================================\n\nALTER TABLE thread_movements\nADD CONSTRAINT chk_thread_movements_quantity_not_zero \nCHECK (quantity_meters <> 0)","-- ============================================================================\n-- END OF MIGRATION\n-- ============================================================================"}	thread_movements
20240101000006	{"-- ============================================================================\n-- Thread Management System - Thread Recovery Table\n-- Migration: 005_thread_recovery.sql\n-- Description: Partial cone recovery workflow - tracking returned cones from production\n-- Dependencies: 002_thread_inventory.sql\n-- ============================================================================\n\n-- ============================================================================\n-- ENUM: recovery_status\n-- Represents the lifecycle states of a cone recovery process\n-- ============================================================================\n\nCREATE TYPE recovery_status AS ENUM (\n    'INITIATED',      -- Cong nhan khoi tao tra - Worker initiated return\n    'PENDING_WEIGH',  -- Cho can - Waiting for warehouse to weigh\n    'WEIGHED',        -- Da can - Weight recorded, awaiting confirmation\n    'CONFIRMED',      -- Da xac nhan - Recovery confirmed, cone back in inventory\n    'WRITTEN_OFF',    -- Xoa so - Written off (< 50g or supervisor decision)\n    'REJECTED'        -- Tu choi - Recovery rejected (quality issues, wrong cone)\n)","-- Add enum comment\nCOMMENT ON TYPE recovery_status IS 'Recovery workflow states - Trang thai quy trinh thu hoi cuon le'","-- ============================================================================\n-- TABLE: thread_recovery\n-- Tracks partial cone returns from production back to inventory\n-- Calculates consumption based on weight difference\n-- ============================================================================\n\nCREATE TABLE IF NOT EXISTS thread_recovery (\n    -- Primary key\n    id SERIAL PRIMARY KEY,\n    \n    -- Foreign key to the cone being recovered\n    cone_id INTEGER NOT NULL REFERENCES thread_inventory(id),\n    \n    -- =========================================================================\n    -- Quantity Tracking (Before/After)\n    -- =========================================================================\n    \n    -- Meters when the cone was issued to production\n    original_meters DECIMAL(12,4) NOT NULL,\n    \n    -- Weight when returned (measured by warehouse)\n    returned_weight_grams DECIMAL(10,2),\n    \n    -- Meters calculated from returned weight using density factor\n    -- Formula: (returned_weight_grams - tare_weight_grams) / density_factor * 1000\n    calculated_meters DECIMAL(12,4),\n    \n    -- Empty cone weight (default 10g, can be adjusted per cone type)\n    tare_weight_grams DECIMAL(10,2) DEFAULT 10,\n    \n    -- Consumption = original_meters - calculated_meters\n    consumption_meters DECIMAL(12,4),\n    \n    -- =========================================================================\n    -- Status Tracking\n    -- =========================================================================\n    \n    status recovery_status DEFAULT 'INITIATED',\n    \n    -- =========================================================================\n    -- Actors (Who performed each step)\n    -- =========================================================================\n    \n    -- Worker who started the return process (production worker)\n    initiated_by VARCHAR(100),\n    \n    -- Warehouse keeper who weighed the cone\n    weighed_by VARCHAR(100),\n    \n    -- Supervisor who confirmed the recovery (especially for write-offs)\n    confirmed_by VARCHAR(100),\n    \n    -- =========================================================================\n    -- Additional Information\n    -- =========================================================================\n    \n    -- Notes about the recovery (reason for write-off, etc.)\n    notes TEXT,\n    \n    -- Optional verification photo URL (for dispute resolution)\n    photo_url TEXT,\n    \n    -- =========================================================================\n    -- Timestamps\n    -- =========================================================================\n    \n    created_at TIMESTAMPTZ DEFAULT NOW(),\n    updated_at TIMESTAMPTZ DEFAULT NOW()\n)","-- Add table comment\nCOMMENT ON TABLE thread_recovery IS 'Partial cone recovery from production - Thu hoi cuon chi le tu san xuat'","-- Add column comments\nCOMMENT ON COLUMN thread_recovery.cone_id IS 'Reference to recovered cone - Cuon chi duoc thu hoi'","COMMENT ON COLUMN thread_recovery.original_meters IS 'Meters on cone when issued to production - So met khi xuat san xuat'","COMMENT ON COLUMN thread_recovery.returned_weight_grams IS 'Actual weight when returned (measured) - Khoi luong thuc te khi tra'","COMMENT ON COLUMN thread_recovery.calculated_meters IS 'Meters calculated from weight using density factor - So met tinh tu khoi luong'","COMMENT ON COLUMN thread_recovery.tare_weight_grams IS 'Empty cone weight (default 10g) - Khoi luong vo cuon'","COMMENT ON COLUMN thread_recovery.consumption_meters IS 'Meters consumed (original - calculated) - So met da su dung'","COMMENT ON COLUMN thread_recovery.status IS 'Current recovery status - Trang thai thu hoi'","COMMENT ON COLUMN thread_recovery.initiated_by IS 'Production worker who initiated return - Cong nhan khoi tao tra'","COMMENT ON COLUMN thread_recovery.weighed_by IS 'Warehouse keeper who weighed - Nguoi can'","COMMENT ON COLUMN thread_recovery.confirmed_by IS 'Supervisor who confirmed - Nguoi xac nhan'","COMMENT ON COLUMN thread_recovery.notes IS 'Additional notes or write-off reason - Ghi chu'","COMMENT ON COLUMN thread_recovery.photo_url IS 'Verification photo URL - Anh xac nhan'","-- ============================================================================\n-- TRIGGER: Auto-update updated_at on row modification\n-- Uses existing function from 001_thread_types.sql\n-- ============================================================================\n\nCREATE TRIGGER update_thread_recovery_updated_at\n    BEFORE UPDATE ON thread_recovery\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()","-- ============================================================================\n-- INDEXES: Optimize common query patterns\n-- ============================================================================\n\n-- Lookup by cone (most common - find recovery record for a specific cone)\nCREATE INDEX idx_recovery_cone ON thread_recovery(cone_id)","-- Filter by status (for status-based workflows)\nCREATE INDEX idx_recovery_status ON thread_recovery(status)","-- Partial index for pending recoveries (warehouse dashboard)\n-- These are the records that need attention\nCREATE INDEX idx_recovery_pending ON thread_recovery(status) \n    WHERE status IN ('INITIATED', 'PENDING_WEIGH', 'WEIGHED')","-- Sort by created_at descending (most recent first for lists)\nCREATE INDEX idx_recovery_created ON thread_recovery(created_at DESC)","-- ============================================================================\n-- CONSTRAINT: Ensure original_meters is positive\n-- ============================================================================\n\nALTER TABLE thread_recovery\nADD CONSTRAINT chk_thread_recovery_original_meters_positive \nCHECK (original_meters > 0)","-- ============================================================================\n-- CONSTRAINT: Ensure returned_weight_grams is non-negative when set\n-- ============================================================================\n\nALTER TABLE thread_recovery\nADD CONSTRAINT chk_thread_recovery_weight_non_negative \nCHECK (returned_weight_grams IS NULL OR returned_weight_grams >= 0)","-- ============================================================================\n-- CONSTRAINT: Ensure tare_weight_grams is non-negative\n-- ============================================================================\n\nALTER TABLE thread_recovery\nADD CONSTRAINT chk_thread_recovery_tare_non_negative \nCHECK (tare_weight_grams >= 0)","-- ============================================================================\n-- END OF MIGRATION\n-- ============================================================================"}	thread_recovery
20240101000007	{"-- ============================================================================\n-- Thread Management System - Thread Conflicts Table\n-- Migration: 006_thread_conflicts.sql\n-- Description: Allocation conflict tracking when demand exceeds supply\n-- Dependencies: 001_thread_types.sql, 003_thread_allocations.sql\n-- ============================================================================\n\n-- ============================================================================\n-- TABLE: thread_conflicts\n-- Tracks allocation conflicts when multiple orders compete for limited stock\n-- ============================================================================\n\nCREATE TABLE IF NOT EXISTS thread_conflicts (\n    -- Primary key\n    id SERIAL PRIMARY KEY,\n    \n    -- Foreign key to thread type with shortage\n    thread_type_id INTEGER NOT NULL REFERENCES thread_types(id),\n    \n    -- =========================================================================\n    -- Conflict Metrics\n    -- =========================================================================\n    \n    -- Total meters requested across all conflicting allocations\n    total_requested_meters DECIMAL(12,4) NOT NULL,\n    \n    -- Total meters currently available for this thread type\n    total_available_meters DECIMAL(12,4) NOT NULL,\n    \n    -- Shortage = requested - available (always positive for a conflict)\n    shortage_meters DECIMAL(12,4) NOT NULL,\n    \n    -- =========================================================================\n    -- Status Tracking\n    -- =========================================================================\n    \n    -- Conflict resolution status\n    -- PENDING: Conflict detected, needs resolution\n    -- RESOLVED: Conflict resolved (priorities adjusted, stock received, etc.)\n    -- ESCALATED: Conflict escalated to management\n    status VARCHAR(20) DEFAULT 'PENDING',\n    \n    -- =========================================================================\n    -- Resolution Information\n    -- =========================================================================\n    \n    -- Notes about how the conflict was resolved\n    resolution_notes TEXT,\n    \n    -- User who resolved the conflict\n    resolved_by VARCHAR(100),\n    \n    -- When the conflict was resolved\n    resolved_at TIMESTAMPTZ,\n    \n    -- =========================================================================\n    -- Timestamps\n    -- =========================================================================\n    \n    created_at TIMESTAMPTZ DEFAULT NOW(),\n    updated_at TIMESTAMPTZ DEFAULT NOW()\n)","-- Add table comment\nCOMMENT ON TABLE thread_conflicts IS 'Allocation conflicts when demand exceeds supply - Xung dot phan bo khi nhu cau vuot nguon cung'","-- Add column comments\nCOMMENT ON COLUMN thread_conflicts.thread_type_id IS 'Thread type with insufficient stock - Loai chi thieu ton'","COMMENT ON COLUMN thread_conflicts.total_requested_meters IS 'Total meters requested - Tong so met yeu cau'","COMMENT ON COLUMN thread_conflicts.total_available_meters IS 'Total meters available - Tong so met co san'","COMMENT ON COLUMN thread_conflicts.shortage_meters IS 'Shortage amount (requested - available) - So met thieu'","COMMENT ON COLUMN thread_conflicts.status IS 'Resolution status (PENDING/RESOLVED/ESCALATED) - Trang thai xu ly'","COMMENT ON COLUMN thread_conflicts.resolution_notes IS 'Notes on how conflict was resolved - Ghi chu giai quyet'","COMMENT ON COLUMN thread_conflicts.resolved_by IS 'User who resolved the conflict - Nguoi giai quyet'","COMMENT ON COLUMN thread_conflicts.resolved_at IS 'When conflict was resolved - Thoi gian giai quyet'","-- ============================================================================\n-- TABLE: thread_conflict_allocations\n-- Junction table linking conflicts to the affected allocations\n-- Tracks original and adjusted priority scores\n-- ============================================================================\n\nCREATE TABLE IF NOT EXISTS thread_conflict_allocations (\n    -- Primary key\n    id SERIAL PRIMARY KEY,\n    \n    -- Foreign keys\n    conflict_id INTEGER NOT NULL REFERENCES thread_conflicts(id) ON DELETE CASCADE,\n    allocation_id INTEGER NOT NULL REFERENCES thread_allocations(id),\n    \n    -- =========================================================================\n    -- Priority Tracking\n    -- Records priority before and after conflict resolution\n    -- =========================================================================\n    \n    -- Priority score at time of conflict detection\n    original_priority_score INTEGER,\n    \n    -- Priority score after adjustment during resolution\n    adjusted_priority_score INTEGER,\n    \n    -- Timestamp\n    created_at TIMESTAMPTZ DEFAULT NOW(),\n    \n    -- Ensure unique conflict-allocation pair\n    UNIQUE(conflict_id, allocation_id)\n)","-- Add table comment\nCOMMENT ON TABLE thread_conflict_allocations IS 'Junction table linking conflicts to allocations - Bang lien ket xung dot va phan bo'","-- Add column comments\nCOMMENT ON COLUMN thread_conflict_allocations.conflict_id IS 'Reference to the conflict - Tham chieu xung dot'","COMMENT ON COLUMN thread_conflict_allocations.allocation_id IS 'Reference to affected allocation - Tham chieu phan bo bi anh huong'","COMMENT ON COLUMN thread_conflict_allocations.original_priority_score IS 'Priority score at conflict detection - Diem uu tien ban dau'","COMMENT ON COLUMN thread_conflict_allocations.adjusted_priority_score IS 'Priority score after resolution - Diem uu tien sau dieu chinh'","-- ============================================================================\n-- TRIGGER: Auto-update updated_at on row modification\n-- Uses existing function from 001_thread_types.sql\n-- ============================================================================\n\nCREATE TRIGGER update_thread_conflicts_updated_at\n    BEFORE UPDATE ON thread_conflicts\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()","-- ============================================================================\n-- INDEXES: thread_conflicts - Optimize common query patterns\n-- ============================================================================\n\n-- Filter by thread type (find conflicts for a specific thread)\nCREATE INDEX idx_conflicts_thread_type ON thread_conflicts(thread_type_id)","-- Filter by status (for status-based dashboards)\nCREATE INDEX idx_conflicts_status ON thread_conflicts(status)","-- Partial index for pending conflicts (most common dashboard query)\nCREATE INDEX idx_conflicts_pending ON thread_conflicts(status) WHERE status = 'PENDING'","-- Sort by created_at descending (most recent conflicts first)\nCREATE INDEX idx_conflicts_created ON thread_conflicts(created_at DESC)","-- ============================================================================\n-- INDEXES: thread_conflict_allocations - Optimize junction table queries\n-- ============================================================================\n\n-- Lookup allocations for a given conflict\nCREATE INDEX idx_conflict_allocations_conflict ON thread_conflict_allocations(conflict_id)","-- Lookup conflicts for a given allocation\nCREATE INDEX idx_conflict_allocations_allocation ON thread_conflict_allocations(allocation_id)","-- ============================================================================\n-- CONSTRAINTS: Data validation\n-- ============================================================================\n\n-- Ensure total_requested_meters is positive\nALTER TABLE thread_conflicts\nADD CONSTRAINT chk_conflicts_requested_positive \nCHECK (total_requested_meters > 0)","-- Ensure total_available_meters is non-negative\nALTER TABLE thread_conflicts\nADD CONSTRAINT chk_conflicts_available_non_negative \nCHECK (total_available_meters >= 0)","-- Ensure shortage_meters is positive (no conflict if no shortage)\nALTER TABLE thread_conflicts\nADD CONSTRAINT chk_conflicts_shortage_positive \nCHECK (shortage_meters > 0)","-- Ensure status is one of the valid values\nALTER TABLE thread_conflicts\nADD CONSTRAINT chk_conflicts_status_valid \nCHECK (status IN ('PENDING', 'RESOLVED', 'ESCALATED'))","-- ============================================================================\n-- END OF MIGRATION\n-- ============================================================================"}	thread_conflicts
20240101000008	{"-- ============================================================================\n-- Thread Management System - Thread Audit Log + Triggers\n-- Migration: 007_thread_audit.sql\n-- Description: Audit log table for tracking changes to thread-related tables\n-- Dependencies: 001_thread_types.sql, 002_thread_inventory.sql, \n--               003_thread_allocations.sql, 005_thread_recovery.sql\n-- ============================================================================\n\n-- ============================================================================\n-- TABLE: thread_audit_log\n-- Central audit log tracking all changes to thread-related tables\n-- Stores old/new values as JSONB for flexible querying\n-- ============================================================================\n\nCREATE TABLE IF NOT EXISTS thread_audit_log (\n    -- Primary key\n    id SERIAL PRIMARY KEY,\n    \n    -- Reference information\n    table_name VARCHAR(50) NOT NULL,             -- Ten bang bi thay doi\n    record_id INTEGER NOT NULL,                   -- ID ban ghi bi thay doi\n    action VARCHAR(10) NOT NULL,                  -- Loai thao tac: INSERT, UPDATE, DELETE\n    \n    -- =========================================================================\n    -- Change Data Capture\n    -- =========================================================================\n    old_values JSONB,                             -- Gia tri cu (truoc thay doi)\n    new_values JSONB,                             -- Gia tri moi (sau thay doi)\n    changed_fields TEXT[],                        -- Danh sach cot da thay doi\n    \n    -- =========================================================================\n    -- Actor Information\n    -- =========================================================================\n    performed_by VARCHAR(100),                    -- Nguoi thuc hien\n    ip_address VARCHAR(45),                       -- Dia chi IP (IPv4/IPv6)\n    user_agent TEXT,                              -- Trinh duyet/ung dung\n    \n    -- =========================================================================\n    -- Timestamp\n    -- =========================================================================\n    created_at TIMESTAMPTZ DEFAULT NOW()\n)","-- Add table comment\nCOMMENT ON TABLE thread_audit_log IS 'Audit log for thread management tables - Nhat ky kiem toan cho cac bang quan ly chi'","-- Add column comments\nCOMMENT ON COLUMN thread_audit_log.table_name IS 'Name of the table that was changed - Ten bang bi thay doi'","COMMENT ON COLUMN thread_audit_log.record_id IS 'ID of the record that was changed - ID ban ghi bi thay doi'","COMMENT ON COLUMN thread_audit_log.action IS 'Type of action: INSERT, UPDATE, DELETE - Loai thao tac'","COMMENT ON COLUMN thread_audit_log.old_values IS 'Previous state as JSONB - Trang thai truoc dang JSONB'","COMMENT ON COLUMN thread_audit_log.new_values IS 'New state as JSONB - Trang thai moi dang JSONB'","COMMENT ON COLUMN thread_audit_log.changed_fields IS 'Array of column names that changed - Mang ten cot da thay doi'","COMMENT ON COLUMN thread_audit_log.performed_by IS 'User who performed the action - Nguoi thuc hien thao tac'","COMMENT ON COLUMN thread_audit_log.ip_address IS 'IP address of the actor (IPv4 or IPv6) - Dia chi IP'","COMMENT ON COLUMN thread_audit_log.user_agent IS 'Browser or application user agent - Trinh duyet/ung dung'","-- ============================================================================\n-- FUNCTION: thread_audit_trigger_func\n-- Generic audit trigger function that works for all tables\n-- Detects which columns changed and logs INSERT/UPDATE/DELETE\n-- ============================================================================\n\nCREATE OR REPLACE FUNCTION thread_audit_trigger_func()\nRETURNS TRIGGER AS $$\nBEGIN\n    IF TG_OP = 'DELETE' THEN\n        -- Log DELETE operation with old values only\n        INSERT INTO thread_audit_log (\n            table_name, \n            record_id, \n            action, \n            old_values\n        )\n        VALUES (\n            TG_TABLE_NAME, \n            OLD.id, \n            'DELETE', \n            to_jsonb(OLD)\n        );\n        RETURN OLD;\n        \n    ELSIF TG_OP = 'UPDATE' THEN\n        -- Log UPDATE operation with old values, new values, and changed fields\n        INSERT INTO thread_audit_log (\n            table_name, \n            record_id, \n            action, \n            old_values, \n            new_values, \n            changed_fields\n        )\n        VALUES (\n            TG_TABLE_NAME,\n            NEW.id,\n            'UPDATE',\n            to_jsonb(OLD),\n            to_jsonb(NEW),\n            -- Calculate which fields changed using JSON comparison\n            ARRAY(\n                SELECT key\n                FROM jsonb_each(to_jsonb(OLD)) old_kv\n                FULL OUTER JOIN jsonb_each(to_jsonb(NEW)) new_kv USING (key)\n                WHERE old_kv.value IS DISTINCT FROM new_kv.value\n            )\n        );\n        RETURN NEW;\n        \n    ELSIF TG_OP = 'INSERT' THEN\n        -- Log INSERT operation with new values only\n        INSERT INTO thread_audit_log (\n            table_name, \n            record_id, \n            action, \n            new_values\n        )\n        VALUES (\n            TG_TABLE_NAME, \n            NEW.id, \n            'INSERT', \n            to_jsonb(NEW)\n        );\n        RETURN NEW;\n    END IF;\n    \n    RETURN NULL;\nEND;\n$$ LANGUAGE plpgsql","-- Add function comment\nCOMMENT ON FUNCTION thread_audit_trigger_func() IS 'Generic audit trigger function for thread tables - Ham trigger kiem toan chung cho cac bang chi'","-- ============================================================================\n-- TRIGGERS: Attach audit function to thread tables\n-- Each trigger fires AFTER INSERT, UPDATE, or DELETE on the respective table\n-- ============================================================================\n\n-- Audit trigger for thread_types table\nCREATE TRIGGER audit_thread_types\n    AFTER INSERT OR UPDATE OR DELETE ON thread_types\n    FOR EACH ROW EXECUTE FUNCTION thread_audit_trigger_func()","-- Audit trigger for thread_inventory table\nCREATE TRIGGER audit_thread_inventory\n    AFTER INSERT OR UPDATE OR DELETE ON thread_inventory\n    FOR EACH ROW EXECUTE FUNCTION thread_audit_trigger_func()","-- Audit trigger for thread_allocations table\nCREATE TRIGGER audit_thread_allocations\n    AFTER INSERT OR UPDATE OR DELETE ON thread_allocations\n    FOR EACH ROW EXECUTE FUNCTION thread_audit_trigger_func()","-- Audit trigger for thread_recovery table\nCREATE TRIGGER audit_thread_recovery\n    AFTER INSERT OR UPDATE OR DELETE ON thread_recovery\n    FOR EACH ROW EXECUTE FUNCTION thread_audit_trigger_func()","-- Add trigger comments\nCOMMENT ON TRIGGER audit_thread_types ON thread_types IS 'Audit trigger for thread types - Trigger kiem toan loai chi'","COMMENT ON TRIGGER audit_thread_inventory ON thread_inventory IS 'Audit trigger for inventory - Trigger kiem toan ton kho'","COMMENT ON TRIGGER audit_thread_allocations ON thread_allocations IS 'Audit trigger for allocations - Trigger kiem toan phan bo'","COMMENT ON TRIGGER audit_thread_recovery ON thread_recovery IS 'Audit trigger for recovery - Trigger kiem toan thu hoi'","-- ============================================================================\n-- INDEXES: Optimize common query patterns for audit log\n-- ============================================================================\n\n-- Filter by table name (view audit history for specific table)\nCREATE INDEX idx_audit_table ON thread_audit_log(table_name)","-- Filter by table + record ID (view audit history for specific record)\nCREATE INDEX idx_audit_record ON thread_audit_log(table_name, record_id)","-- Filter by action type (view all INSERTs, UPDATEs, or DELETEs)\nCREATE INDEX idx_audit_action ON thread_audit_log(action)","-- Sort by creation time descending (most recent changes first)\nCREATE INDEX idx_audit_created ON thread_audit_log(created_at DESC)","-- Add index comments\nCOMMENT ON INDEX idx_audit_table IS 'Filter audit logs by table name - Loc theo ten bang'","COMMENT ON INDEX idx_audit_record IS 'Filter audit logs by table + record ID - Loc theo bang va ID'","COMMENT ON INDEX idx_audit_action IS 'Filter audit logs by action type - Loc theo loai thao tac'","COMMENT ON INDEX idx_audit_created IS 'Sort audit logs by creation time - Sap xep theo thoi gian'","-- ============================================================================\n-- END OF MIGRATION\n-- ============================================================================"}	thread_audit
20240101000009	{"-- ============================================================================\n-- Thread Management System - RPC Function: allocate_thread\n-- Migration: 009_rpc_allocate.sql\n-- Description: Atomic soft allocation with FEFO logic and conflict detection\n-- Dependencies: 002_thread_inventory.sql, 003_thread_allocations.sql, 006_thread_conflicts.sql\n-- ============================================================================\n\n-- ============================================================================\n-- FUNCTION: allocate_thread\n-- Purpose: Create soft allocation for a thread request with FEFO logic\n--\n-- Parameters:\n--   p_order_id: Production order ID\n--   p_order_reference: Order description/reference\n--   p_thread_type_id: Thread type to allocate\n--   p_requested_meters: Amount of thread needed\n--   p_priority: Priority level (LOW, NORMAL, HIGH, URGENT)\n--   p_due_date: Optional due date for production\n--   p_notes: Optional notes\n--   p_created_by: User who created the allocation\n--\n-- Returns: JSON object with allocation result\n--   {\n--     success: boolean,\n--     allocation_id: integer,\n--     allocated_meters: decimal,\n--     waitlisted_meters: decimal,\n--     conflict_id: integer | null,\n--     message: string (Vietnamese)\n--   }\n--\n-- Key Features:\n--   1. Uses FOR UPDATE SKIP LOCKED to prevent race conditions\n--   2. FEFO (First Expired First Out) with partial cone priority\n--   3. Creates conflict record when demand > supply\n--   4. Returns Vietnamese messages for UI display\n-- ============================================================================\n\nCREATE OR REPLACE FUNCTION allocate_thread(\n    p_order_id VARCHAR,\n    p_order_reference VARCHAR,\n    p_thread_type_id INTEGER,\n    p_requested_meters DECIMAL,\n    p_priority allocation_priority,\n    p_due_date DATE DEFAULT NULL,\n    p_notes TEXT DEFAULT NULL,\n    p_created_by VARCHAR DEFAULT NULL\n)\nRETURNS JSON AS $$\nDECLARE\n    v_allocation_id INTEGER;\n    v_allocated_meters DECIMAL := 0;\n    v_remaining_meters DECIMAL;\n    v_priority_score INTEGER;\n    v_available_total DECIMAL;\n    v_cone RECORD;\n    v_cone_allocate_meters DECIMAL;\n    v_conflict_id INTEGER := NULL;\n    v_status allocation_status;\nBEGIN\n    -- =========================================================================\n    -- STEP 1: Calculate priority score\n    -- Priority score = priority_level * 10 + age_days (age is 0 for new allocation)\n    -- Priority levels: LOW=10, NORMAL=20, HIGH=30, URGENT=40\n    -- =========================================================================\n    v_priority_score := CASE p_priority\n        WHEN 'URGENT' THEN 40\n        WHEN 'HIGH' THEN 30\n        WHEN 'NORMAL' THEN 20\n        WHEN 'LOW' THEN 10\n    END;\n    \n    -- =========================================================================\n    -- STEP 2: Check total available meters for this thread type\n    -- This is used for conflict detection later\n    -- =========================================================================\n    SELECT COALESCE(SUM(quantity_meters), 0) INTO v_available_total\n    FROM thread_inventory\n    WHERE thread_type_id = p_thread_type_id\n      AND status = 'AVAILABLE';\n    \n    -- =========================================================================\n    -- STEP 3: Create allocation record with PENDING status\n    -- We'll update the status after allocation attempt\n    -- =========================================================================\n    INSERT INTO thread_allocations (\n        order_id, \n        order_reference, \n        thread_type_id,\n        requested_meters, \n        allocated_meters,\n        status, \n        priority, \n        priority_score,\n        due_date, \n        notes, \n        created_by\n    ) VALUES (\n        p_order_id, \n        p_order_reference, \n        p_thread_type_id,\n        p_requested_meters, \n        0,\n        'PENDING', \n        p_priority, \n        v_priority_score,\n        p_due_date, \n        p_notes, \n        p_created_by\n    ) RETURNING id INTO v_allocation_id;\n    \n    v_remaining_meters := p_requested_meters;\n    \n    -- =========================================================================\n    -- STEP 4: FEFO allocation with row-level locks\n    -- \n    -- Allocation Order:\n    --   1. is_partial DESC: Partial cones first (use up remnants before full cones)\n    --   2. expiry_date ASC NULLS LAST: Earliest expiry first (no expiry = lowest priority)\n    --   3. received_date ASC: Oldest received first (FIFO as tiebreaker)\n    --\n    -- FOR UPDATE SKIP LOCKED:\n    --   - Locks selected rows to prevent concurrent modification\n    --   - SKIP LOCKED skips rows already locked by other transactions\n    --   - This prevents race conditions in concurrent allocation scenarios\n    -- =========================================================================\n    FOR v_cone IN\n        SELECT id, quantity_meters\n        FROM thread_inventory\n        WHERE thread_type_id = p_thread_type_id\n          AND status = 'AVAILABLE'\n        ORDER BY \n            is_partial DESC,              -- Partial cones first\n            expiry_date ASC NULLS LAST,   -- FEFO (First Expired First Out)\n            received_date ASC             -- Oldest received first\n        FOR UPDATE SKIP LOCKED            -- Lock rows, skip already locked\n    LOOP\n        -- Exit when we've allocated enough\n        EXIT WHEN v_remaining_meters <= 0;\n        \n        -- Calculate how much to allocate from this cone\n        -- Take the minimum of what's available and what's remaining to allocate\n        v_cone_allocate_meters := LEAST(v_cone.quantity_meters, v_remaining_meters);\n        \n        -- Update cone status to SOFT_ALLOCATED\n        UPDATE thread_inventory\n        SET status = 'SOFT_ALLOCATED',\n            updated_at = NOW()\n        WHERE id = v_cone.id;\n        \n        -- Create allocation-cone junction record\n        -- This links the allocation to the specific cone with the allocated amount\n        INSERT INTO thread_allocation_cones (\n            allocation_id, \n            cone_id, \n            allocated_meters\n        ) VALUES (\n            v_allocation_id, \n            v_cone.id, \n            v_cone_allocate_meters\n        );\n        \n        -- Update running totals\n        v_allocated_meters := v_allocated_meters + v_cone_allocate_meters;\n        v_remaining_meters := v_remaining_meters - v_cone_allocate_meters;\n    END LOOP;\n    \n    -- =========================================================================\n    -- STEP 5: Determine final status and handle conflicts\n    -- =========================================================================\n    IF v_allocated_meters >= p_requested_meters THEN\n        -- Fully allocated\n        v_status := 'SOFT';\n    ELSIF v_allocated_meters > 0 THEN\n        -- Partial allocation - some stock available but not enough\n        v_status := 'SOFT';\n        \n        -- Create conflict record for shortage\n        INSERT INTO thread_conflicts (\n            thread_type_id, \n            total_requested_meters, \n            total_available_meters, \n            shortage_meters,\n            status\n        ) VALUES (\n            p_thread_type_id, \n            p_requested_meters, \n            v_available_total, \n            p_requested_meters - v_allocated_meters,\n            'PENDING'\n        ) RETURNING id INTO v_conflict_id;\n        \n        -- Link allocation to conflict for tracking\n        INSERT INTO thread_conflict_allocations (\n            conflict_id, \n            allocation_id, \n            original_priority_score\n        ) VALUES (\n            v_conflict_id, \n            v_allocation_id, \n            v_priority_score\n        );\n    ELSE\n        -- No stock available at all - add to waitlist\n        v_status := 'WAITLISTED';\n        \n        -- Create conflict record for complete shortage\n        INSERT INTO thread_conflicts (\n            thread_type_id, \n            total_requested_meters, \n            total_available_meters, \n            shortage_meters,\n            status\n        ) VALUES (\n            p_thread_type_id, \n            p_requested_meters, \n            v_available_total, \n            p_requested_meters,\n            'PENDING'\n        ) RETURNING id INTO v_conflict_id;\n        \n        -- Link allocation to conflict\n        INSERT INTO thread_conflict_allocations (\n            conflict_id, \n            allocation_id, \n            original_priority_score\n        ) VALUES (\n            v_conflict_id, \n            v_allocation_id, \n            v_priority_score\n        );\n    END IF;\n    \n    -- =========================================================================\n    -- STEP 6: Update allocation with final values\n    -- =========================================================================\n    UPDATE thread_allocations\n    SET allocated_meters = v_allocated_meters,\n        status = v_status,\n        updated_at = NOW()\n    WHERE id = v_allocation_id;\n    \n    -- =========================================================================\n    -- STEP 7: Return result with Vietnamese messages\n    -- =========================================================================\n    RETURN json_build_object(\n        'success', true,\n        'allocation_id', v_allocation_id,\n        'allocated_meters', v_allocated_meters,\n        'waitlisted_meters', GREATEST(0, p_requested_meters - v_allocated_meters),\n        'conflict_id', v_conflict_id,\n        'message', CASE\n            WHEN v_allocated_meters >= p_requested_meters THEN 'Phn b thnh cng'\n            WHEN v_allocated_meters > 0 THEN 'Phn b mt phn - thiu hng'\n            ELSE 'Khng c hng -  thm vo danh sch ch'\n        END\n    );\n    \nEXCEPTION WHEN OTHERS THEN\n    -- =========================================================================\n    -- ERROR HANDLING\n    -- Return error information with Vietnamese message\n    -- =========================================================================\n    RETURN json_build_object(\n        'success', false,\n        'allocation_id', NULL,\n        'allocated_meters', 0,\n        'waitlisted_meters', 0,\n        'conflict_id', NULL,\n        'message', 'Li: ' || SQLERRM\n    );\nEND;\n$$ LANGUAGE plpgsql","-- Add function comment\nCOMMENT ON FUNCTION allocate_thread IS 'Atomic soft allocation with FEFO logic - Phan bo mem voi logic FEFO'","-- ============================================================================\n-- GRANT EXECUTE permission to authenticated users\n-- (Adjust based on your security requirements)\n-- ============================================================================\n-- GRANT EXECUTE ON FUNCTION allocate_thread TO authenticated;\n\n-- ============================================================================\n-- END OF MIGRATION\n-- ============================================================================"}	rpc_allocate
20240101000010	{"-- ============================================================================\n-- Thread Management System - RPC Function: issue_cone\n-- Migration: 010_rpc_issue.sql\n-- Description: Convert soft allocation to hard allocation (issue cones to production)\n-- Dependencies: 003_thread_allocations.sql, 004_thread_movements.sql\n-- ============================================================================\n\n-- ============================================================================\n-- FUNCTION: issue_cone\n-- Purpose: Convert soft allocation to hard allocation (issue to production)\n--\n-- Parameters:\n--   p_allocation_id: ID of the allocation to issue\n--   p_confirmed_by: Optional user who confirmed the issue\n--\n-- Returns: JSON object with issue result\n--   {\n--     success: boolean,\n--     movement_id: integer | null (first movement ID for reference),\n--     cone_ids: integer[],\n--     message: string (Vietnamese)\n--   }\n--\n-- Key Features:\n--   1. Validates allocation exists and status is SOFT\n--   2. Uses row-level locks to prevent concurrent modifications\n--   3. Updates all allocated cones to IN_PRODUCTION status\n--   4. Creates movement records for each cone\n--   5. Updates allocation status to ISSUED\n--   6. Returns Vietnamese messages for UI display\n--\n-- State Transitions:\n--   Allocation: SOFT -> ISSUED\n--   Cones: SOFT_ALLOCATED -> IN_PRODUCTION\n-- ============================================================================\n\nCREATE OR REPLACE FUNCTION issue_cone(\n    p_allocation_id INTEGER,\n    p_confirmed_by VARCHAR DEFAULT NULL\n)\nRETURNS JSON AS $$\nDECLARE\n    v_allocation RECORD;\n    v_cone RECORD;\n    v_movement_ids INTEGER[] := '{}';\n    v_movement_id INTEGER;\n    v_cone_ids INTEGER[] := '{}';\n    v_cones_processed INTEGER := 0;\nBEGIN\n    -- =========================================================================\n    -- STEP 1: Get allocation with lock to prevent concurrent modifications\n    -- =========================================================================\n    SELECT * INTO v_allocation\n    FROM thread_allocations\n    WHERE id = p_allocation_id\n    FOR UPDATE;\n    \n    IF NOT FOUND THEN\n        RETURN json_build_object(\n            'success', false,\n            'movement_id', NULL,\n            'cone_ids', '{}',\n            'message', 'Khng tm thy phn b'\n        );\n    END IF;\n    \n    -- =========================================================================\n    -- STEP 2: Validate allocation status is SOFT\n    -- Only SOFT allocations can be issued (converted to HARD/ISSUED)\n    -- =========================================================================\n    IF v_allocation.status != 'SOFT' THEN\n        RETURN json_build_object(\n            'success', false,\n            'movement_id', NULL,\n            'cone_ids', '{}',\n            'message', 'Phn b phi  trng thi \\" gi ch\\"  xut kho. Trng thi hin ti: ' || v_allocation.status::TEXT\n        );\n    END IF;\n    \n    -- =========================================================================\n    -- STEP 3: Process each allocated cone\n    -- Lock cones to prevent concurrent modifications\n    -- Update status and create movement records\n    -- =========================================================================\n    FOR v_cone IN\n        SELECT \n            ac.cone_id,\n            ac.allocated_meters,\n            ti.status AS current_status,\n            ti.quantity_meters\n        FROM thread_allocation_cones ac\n        JOIN thread_inventory ti ON ti.id = ac.cone_id\n        WHERE ac.allocation_id = p_allocation_id\n        FOR UPDATE OF ti\n    LOOP\n        -- Validate cone status (should be SOFT_ALLOCATED or AVAILABLE)\n        IF v_cone.current_status NOT IN ('SOFT_ALLOCATED', 'AVAILABLE') THEN\n            -- Skip cones that are not in valid state (might have been modified concurrently)\n            CONTINUE;\n        END IF;\n        \n        -- Update cone status to IN_PRODUCTION\n        UPDATE thread_inventory\n        SET status = 'IN_PRODUCTION',\n            updated_at = NOW()\n        WHERE id = v_cone.cone_id;\n        \n        -- Create movement record for this cone\n        INSERT INTO thread_movements (\n            cone_id,\n            allocation_id,\n            movement_type,\n            quantity_meters,\n            from_status,\n            to_status,\n            reference_type,\n            reference_id,\n            performed_by\n        ) VALUES (\n            v_cone.cone_id,\n            p_allocation_id,\n            'ISSUE',\n            v_cone.allocated_meters,\n            v_cone.current_status::VARCHAR,\n            'IN_PRODUCTION',\n            'ALLOCATION',\n            p_allocation_id::VARCHAR,\n            p_confirmed_by\n        ) RETURNING id INTO v_movement_id;\n        \n        -- Collect IDs for response\n        v_movement_ids := array_append(v_movement_ids, v_movement_id);\n        v_cone_ids := array_append(v_cone_ids, v_cone.cone_id);\n        v_cones_processed := v_cones_processed + 1;\n    END LOOP;\n    \n    -- =========================================================================\n    -- STEP 4: Check if any cones were processed\n    -- =========================================================================\n    IF v_cones_processed = 0 THEN\n        RETURN json_build_object(\n            'success', false,\n            'movement_id', NULL,\n            'cone_ids', '{}',\n            'message', 'Khng c cun ch no c xut kho - kim tra trng thi cun'\n        );\n    END IF;\n    \n    -- =========================================================================\n    -- STEP 5: Update allocation status to ISSUED\n    -- =========================================================================\n    UPDATE thread_allocations\n    SET status = 'ISSUED',\n        updated_at = NOW()\n    WHERE id = p_allocation_id;\n    \n    -- =========================================================================\n    -- STEP 6: Return success result with Vietnamese message\n    -- =========================================================================\n    RETURN json_build_object(\n        'success', true,\n        'movement_id', v_movement_ids[1],  -- First movement ID for reference\n        'cone_ids', v_cone_ids,\n        'message', 'Xut kho thnh cng - ' || v_cones_processed || ' cun'\n    );\n\nEXCEPTION WHEN OTHERS THEN\n    -- =========================================================================\n    -- ERROR HANDLING\n    -- Return error information with Vietnamese message\n    -- Transaction will be rolled back by caller\n    -- =========================================================================\n    RETURN json_build_object(\n        'success', false,\n        'movement_id', NULL,\n        'cone_ids', '{}',\n        'message', 'Li: ' || SQLERRM\n    );\nEND;\n$$ LANGUAGE plpgsql","-- Add function comment\nCOMMENT ON FUNCTION issue_cone IS 'Convert soft allocation to issued status - Xuat kho tu phan bo mem'","-- ============================================================================\n-- GRANT EXECUTE permission to authenticated users\n-- (Adjust based on your security requirements)\n-- ============================================================================\n-- GRANT EXECUTE ON FUNCTION issue_cone TO authenticated;\n\n-- ============================================================================\n-- END OF MIGRATION\n-- ============================================================================"}	rpc_issue
20240101000011	{"-- ============================================================================\n-- Thread Management System - RPC Function: recover_cone\n-- Migration: 011_rpc_recover.sql\n-- Description: Process partial cone recovery from production\n-- Dependencies: 002_thread_inventory.sql, 004_thread_movements.sql, 005_thread_recovery.sql\n-- ============================================================================\n\n-- ============================================================================\n-- FUNCTION: recover_cone\n-- Purpose: Record weight and calculate remaining meters for returned cones\n--\n-- Parameters:\n--   p_cone_id: ID of the cone being recovered (thread_inventory.id)\n--   p_returned_weight_grams: Actual weight measured at warehouse\n--   p_tare_weight_grams: Empty cone weight (default 10g)\n--   p_notes: Optional notes about the recovery\n--   p_weighed_by: Warehouse keeper who weighed\n--   p_confirmed_by: Supervisor who confirmed (for write-off)\n--\n-- Returns: JSON object with recovery result\n--   {\n--     success: boolean,\n--     recovery_id: integer,\n--     calculated_meters: decimal,\n--     is_write_off: boolean,\n--     message: string (Vietnamese)\n--   }\n--\n-- Key Features:\n--   1. Uses row-level lock to prevent concurrent modifications\n--   2. Calculates meters from weight using thread type density factor\n--   3. Automatic write-off for cones with < 50g net weight\n--   4. Creates recovery record and movement audit trail\n--   5. Updates cone status and marks as partial\n-- ============================================================================\n\nCREATE OR REPLACE FUNCTION recover_cone(\n    p_cone_id INTEGER,\n    p_returned_weight_grams DECIMAL,\n    p_tare_weight_grams DECIMAL DEFAULT 10,\n    p_notes TEXT DEFAULT NULL,\n    p_weighed_by VARCHAR DEFAULT NULL,\n    p_confirmed_by VARCHAR DEFAULT NULL\n)\nRETURNS JSON AS $$\nDECLARE\n    v_cone RECORD;\n    v_thread_type RECORD;\n    v_recovery_id INTEGER;\n    v_calculated_meters DECIMAL;\n    v_consumption_meters DECIMAL;\n    v_net_weight DECIMAL;\n    v_is_write_off BOOLEAN := FALSE;\n    v_new_status VARCHAR;\n    v_recovery_status recovery_status;\nBEGIN\n    -- =========================================================================\n    -- STEP 1: Get cone with lock to prevent concurrent modifications\n    -- FOR UPDATE ensures exclusive access during the recovery process\n    -- =========================================================================\n    SELECT * INTO v_cone\n    FROM thread_inventory\n    WHERE id = p_cone_id\n    FOR UPDATE;\n    \n    -- Check if cone exists\n    IF NOT FOUND THEN\n        RETURN json_build_object(\n            'success', false,\n            'recovery_id', NULL,\n            'calculated_meters', 0,\n            'is_write_off', false,\n            'message', 'Khng tm thy cun ch'\n        );\n    END IF;\n    \n    -- =========================================================================\n    -- STEP 2: Validate cone status\n    -- Only cones IN_PRODUCTION or PARTIAL_RETURN can be recovered\n    -- =========================================================================\n    IF v_cone.status NOT IN ('IN_PRODUCTION', 'PARTIAL_RETURN') THEN\n        RETURN json_build_object(\n            'success', false,\n            'recovery_id', NULL,\n            'calculated_meters', 0,\n            'is_write_off', false,\n            'message', 'Cun ch phi ang trong sn xut hoc ang thu hi'\n        );\n    END IF;\n    \n    -- =========================================================================\n    -- STEP 3: Get thread type for density factor\n    -- Density factor is used to convert weight to meters\n    -- Formula: meters = net_weight_grams / density_grams_per_meter\n    -- =========================================================================\n    SELECT * INTO v_thread_type\n    FROM thread_types\n    WHERE id = v_cone.thread_type_id;\n    \n    IF NOT FOUND THEN\n        RETURN json_build_object(\n            'success', false,\n            'recovery_id', NULL,\n            'calculated_meters', 0,\n            'is_write_off', false,\n            'message', 'Khng tm thy loi ch'\n        );\n    END IF;\n    \n    -- Validate density factor exists and is positive\n    IF v_thread_type.density_grams_per_meter IS NULL OR v_thread_type.density_grams_per_meter <= 0 THEN\n        RETURN json_build_object(\n            'success', false,\n            'recovery_id', NULL,\n            'calculated_meters', 0,\n            'is_write_off', false,\n            'message', 'H s mt  cha c cu hnh cho loi ch ny'\n        );\n    END IF;\n    \n    -- =========================================================================\n    -- STEP 4: Calculate net weight (subtract tare/empty cone weight)\n    -- Ensure net weight is never negative\n    -- =========================================================================\n    v_net_weight := GREATEST(0, p_returned_weight_grams - p_tare_weight_grams);\n    \n    -- =========================================================================\n    -- STEP 5: Calculate meters from weight using density factor\n    -- Formula: meters = net_weight_grams / density_grams_per_meter\n    -- Round to 4 decimal places for consistency with other quantity_meters columns\n    -- =========================================================================\n    v_calculated_meters := ROUND(\n        v_net_weight / v_thread_type.density_grams_per_meter,\n        4\n    );\n    \n    -- =========================================================================\n    -- STEP 6: Calculate consumption (how much thread was used)\n    -- Consumption = Original meters - Calculated remaining meters\n    -- =========================================================================\n    v_consumption_meters := v_cone.quantity_meters - v_calculated_meters;\n    \n    -- =========================================================================\n    -- STEP 7: Check for write-off condition\n    -- If net weight < 50g, cone is written off (too little to reuse)\n    -- =========================================================================\n    IF v_net_weight < 50 THEN\n        v_is_write_off := TRUE;\n        v_new_status := 'WRITTEN_OFF';\n        v_recovery_status := 'WRITTEN_OFF';\n    ELSE\n        v_new_status := 'AVAILABLE';\n        v_recovery_status := 'CONFIRMED';\n    END IF;\n    \n    -- =========================================================================\n    -- STEP 8: Create recovery record\n    -- This tracks the full recovery details for audit and reporting\n    -- =========================================================================\n    INSERT INTO thread_recovery (\n        cone_id,\n        original_meters,\n        returned_weight_grams,\n        calculated_meters,\n        tare_weight_grams,\n        consumption_meters,\n        status,\n        weighed_by,\n        confirmed_by,\n        notes\n    ) VALUES (\n        p_cone_id,\n        v_cone.quantity_meters,\n        p_returned_weight_grams,\n        v_calculated_meters,\n        p_tare_weight_grams,\n        v_consumption_meters,\n        v_recovery_status,\n        p_weighed_by,\n        p_confirmed_by,\n        p_notes\n    ) RETURNING id INTO v_recovery_id;\n    \n    -- =========================================================================\n    -- STEP 9: Update cone inventory\n    -- - Update status to AVAILABLE or WRITTEN_OFF\n    -- - Set new quantity_meters based on calculated value\n    -- - Set weight_grams to net weight\n    -- - Mark as partial (is_partial = TRUE)\n    -- =========================================================================\n    UPDATE thread_inventory\n    SET status = v_new_status::cone_status,\n        quantity_meters = v_calculated_meters,\n        weight_grams = v_net_weight,\n        is_partial = TRUE,\n        updated_at = NOW()\n    WHERE id = p_cone_id;\n    \n    -- =========================================================================\n    -- STEP 10: Create movement record for audit trail\n    -- Movement type: RETURN for normal recovery, WRITE_OFF for write-offs\n    -- Quantity is the consumption (how much was used)\n    -- =========================================================================\n    INSERT INTO thread_movements (\n        cone_id,\n        movement_type,\n        quantity_meters,\n        from_status,\n        to_status,\n        performed_by,\n        notes\n    ) VALUES (\n        p_cone_id,\n        CASE WHEN v_is_write_off THEN 'WRITE_OFF'::movement_type ELSE 'RETURN'::movement_type END,\n        v_consumption_meters,\n        v_cone.status::VARCHAR,\n        v_new_status,\n        p_confirmed_by,\n        CASE \n            WHEN v_is_write_off THEN 'Xa s - di 50g (' || v_net_weight || 'g)'\n            ELSE 'Thu hi cun l - ' || v_calculated_meters || ' mt cn li'\n        END\n    );\n    \n    -- =========================================================================\n    -- STEP 11: Return success response with Vietnamese messages\n    -- =========================================================================\n    RETURN json_build_object(\n        'success', true,\n        'recovery_id', v_recovery_id,\n        'calculated_meters', v_calculated_meters,\n        'is_write_off', v_is_write_off,\n        'message', CASE\n            WHEN v_is_write_off THEN 'Xa s thnh cng - di 50g cn li'\n            ELSE 'Thu hi thnh cng - ' || v_calculated_meters || ' mt cn li'\n        END\n    );\n\nEXCEPTION WHEN OTHERS THEN\n    -- =========================================================================\n    -- ERROR HANDLING\n    -- Return error information with Vietnamese message\n    -- Transaction will be rolled back automatically\n    -- =========================================================================\n    RETURN json_build_object(\n        'success', false,\n        'recovery_id', NULL,\n        'calculated_meters', 0,\n        'is_write_off', false,\n        'message', 'Li: ' || SQLERRM\n    );\nEND;\n$$ LANGUAGE plpgsql","-- Add function comment\nCOMMENT ON FUNCTION recover_cone IS 'Process partial cone recovery with weight-to-meters conversion - X l thu hi cun l vi chuyn i khi lng sang mt'","-- ============================================================================\n-- GRANT EXECUTE permission to authenticated users\n-- (Adjust based on your security requirements)\n-- ============================================================================\n-- GRANT EXECUTE ON FUNCTION recover_cone TO authenticated;\n\n-- ============================================================================\n-- END OF MIGRATION\n-- ============================================================================"}	rpc_recover
20240101000012	{"-- =============================================\n-- MIGRATION 013: Enable Realtime for Thread Management\n-- Description: Enable Supabase Realtime on key tables\n-- =============================================\n\n-- Enable realtime on thread_inventory for live stock updates\nALTER PUBLICATION supabase_realtime ADD TABLE thread_inventory","-- Enable realtime on thread_allocations for allocation status changes\nALTER PUBLICATION supabase_realtime ADD TABLE thread_allocations","-- Enable realtime on thread_recovery for recovery workflow updates\nALTER PUBLICATION supabase_realtime ADD TABLE thread_recovery","-- Enable realtime on thread_conflicts for conflict notifications\nALTER PUBLICATION supabase_realtime ADD TABLE thread_conflicts","-- Enable realtime on thread_movements for activity feed\nALTER PUBLICATION supabase_realtime ADD TABLE thread_movements","-- =============================================\n-- NOTES:\n-- 1. Realtime is enabled at table level\n-- 2. RLS policies still apply to realtime subscriptions\n-- 3. Use broadcast for app-wide notifications if needed\n-- 4. Consider channel-based subscriptions for mobile sync\n-- =============================================\n\nCOMMENT ON TABLE thread_inventory IS 'Realtime enabled for live stock updates'","COMMENT ON TABLE thread_allocations IS 'Realtime enabled for allocation tracking'","COMMENT ON TABLE thread_recovery IS 'Realtime enabled for recovery workflow'"}	realtime_enable
20240101000013	{"-- ============================================================================\n-- Thread Management System - RPC Function: split_allocation\n-- Migration: 013_rpc_split.sql\n-- Description: Split an allocation into two separate allocations\n-- Dependencies: 003_thread_allocations.sql, 002_thread_inventory.sql\n-- ============================================================================\n\n-- ============================================================================\n-- COLUMN: split_from_id\n-- Nullable FK to track split history\n-- ============================================================================\n\nALTER TABLE thread_allocations\nADD COLUMN IF NOT EXISTS split_from_id INTEGER REFERENCES thread_allocations(id)","COMMENT ON COLUMN thread_allocations.split_from_id IS 'Reference to original allocation if this was created from a split - Tham chieu phan bo goc neu la ket qua chia nho'","-- Index for tracking split relationships\nCREATE INDEX IF NOT EXISTS idx_allocations_split_from ON thread_allocations(split_from_id) WHERE split_from_id IS NOT NULL","-- ============================================================================\n-- FUNCTION: split_allocation\n-- Purpose: Split an existing allocation into two separate allocations\n--\n-- Parameters:\n--   p_allocation_id: ID of the allocation to split\n--   p_split_meters: Number of meters for the NEW allocation\n--   p_split_reason: Optional reason for the split\n--\n-- Returns: JSON object with split result\n--   {\n--     success: boolean,\n--     original_allocation_id: integer,\n--     new_allocation_id: integer,\n--     original_meters: decimal,\n--     split_meters: decimal,\n--     message: string (Vietnamese)\n--   }\n--\n-- Key Features:\n--   1. Uses FOR UPDATE to prevent race conditions\n--   2. Releases all allocated cones back to AVAILABLE\n--   3. Sets both allocations to PENDING with allocated_meters = 0\n--   4. Tracks split history via split_from_id\n-- ============================================================================\n\nCREATE OR REPLACE FUNCTION split_allocation(\n    p_allocation_id INTEGER,\n    p_split_meters DECIMAL,\n    p_split_reason TEXT DEFAULT NULL\n)\nRETURNS JSON AS $$\nDECLARE\n    v_allocation RECORD;\n    v_new_allocation_id INTEGER;\n    v_remaining_meters DECIMAL;\n    v_cone_ids INTEGER[];\n    v_notes TEXT;\nBEGIN\n    -- =========================================================================\n    -- STEP 1: Lock and fetch the original allocation\n    -- =========================================================================\n    SELECT \n        id, \n        order_id, \n        order_reference, \n        thread_type_id,\n        requested_meters, \n        allocated_meters,\n        status, \n        priority, \n        priority_score,\n        due_date, \n        notes, \n        created_by\n    INTO v_allocation\n    FROM thread_allocations\n    WHERE id = p_allocation_id\n    FOR UPDATE;\n    \n    IF NOT FOUND THEN\n        RETURN json_build_object(\n            'success', false,\n            'original_allocation_id', p_allocation_id,\n            'new_allocation_id', NULL,\n            'original_meters', 0,\n            'split_meters', 0,\n            'message', 'Khng tm thy phn b'\n        );\n    END IF;\n    \n    -- =========================================================================\n    -- STEP 2: Validate split parameters\n    -- =========================================================================\n    \n    -- Check status - only allow split for PENDING, SOFT, WAITLISTED\n    IF v_allocation.status NOT IN ('PENDING', 'SOFT', 'WAITLISTED') THEN\n        RETURN json_build_object(\n            'success', false,\n            'original_allocation_id', p_allocation_id,\n            'new_allocation_id', NULL,\n            'original_meters', v_allocation.requested_meters,\n            'split_meters', 0,\n            'message', 'Ch c th chia nh phn b ang ch x l,  phn b mm hoc trong danh sch ch'\n        );\n    END IF;\n    \n    -- Validate split_meters > 0\n    IF p_split_meters <= 0 THEN\n        RETURN json_build_object(\n            'success', false,\n            'original_allocation_id', p_allocation_id,\n            'new_allocation_id', NULL,\n            'original_meters', v_allocation.requested_meters,\n            'split_meters', 0,\n            'message', 'S mt chia phi ln hn 0'\n        );\n    END IF;\n    \n    -- Validate split_meters < requested_meters\n    IF p_split_meters >= v_allocation.requested_meters THEN\n        RETURN json_build_object(\n            'success', false,\n            'original_allocation_id', p_allocation_id,\n            'new_allocation_id', NULL,\n            'original_meters', v_allocation.requested_meters,\n            'split_meters', 0,\n            'message', 'S mt chia phi nh hn s mt yu cu ban u'\n        );\n    END IF;\n    \n    -- =========================================================================\n    -- STEP 3: Release all allocated cones back to AVAILABLE\n    -- =========================================================================\n    \n    -- Get cone IDs for this allocation\n    SELECT ARRAY_AGG(cone_id) INTO v_cone_ids\n    FROM thread_allocation_cones\n    WHERE allocation_id = p_allocation_id;\n    \n    -- Release cones if any exist\n    IF v_cone_ids IS NOT NULL AND array_length(v_cone_ids, 1) > 0 THEN\n        UPDATE thread_inventory\n        SET status = 'AVAILABLE',\n            updated_at = NOW()\n        WHERE id = ANY(v_cone_ids)\n          AND status IN ('SOFT_ALLOCATED', 'HARD_ALLOCATED');\n        \n        -- Delete cone allocation records\n        DELETE FROM thread_allocation_cones\n        WHERE allocation_id = p_allocation_id;\n    END IF;\n    \n    -- =========================================================================\n    -- STEP 4: Calculate remaining meters for original allocation\n    -- =========================================================================\n    v_remaining_meters := v_allocation.requested_meters - p_split_meters;\n    \n    -- =========================================================================\n    -- STEP 5: Update original allocation\n    -- =========================================================================\n    v_notes := COALESCE(v_allocation.notes, '');\n    IF p_split_reason IS NOT NULL THEN\n        v_notes := v_notes || E'\\\\n[Chia nh]: ' || p_split_reason;\n    ELSE\n        v_notes := v_notes || E'\\\\n[Chia nh]:  chia ' || p_split_meters || ' mt thnh phn b mi';\n    END IF;\n    \n    UPDATE thread_allocations\n    SET requested_meters = v_remaining_meters,\n        allocated_meters = 0,\n        status = 'PENDING',\n        notes = TRIM(v_notes),\n        updated_at = NOW()\n    WHERE id = p_allocation_id;\n    \n    -- =========================================================================\n    -- STEP 6: Create new allocation with split meters\n    -- =========================================================================\n    INSERT INTO thread_allocations (\n        order_id,\n        order_reference,\n        thread_type_id,\n        requested_meters,\n        allocated_meters,\n        status,\n        priority,\n        priority_score,\n        due_date,\n        notes,\n        created_by,\n        split_from_id\n    ) VALUES (\n        v_allocation.order_id,\n        v_allocation.order_reference,\n        v_allocation.thread_type_id,\n        p_split_meters,\n        0,\n        'PENDING',\n        v_allocation.priority,\n        v_allocation.priority_score,\n        v_allocation.due_date,\n        CASE \n            WHEN p_split_reason IS NOT NULL THEN '[T phn b #' || p_allocation_id || ']: ' || p_split_reason\n            ELSE '[T phn b #' || p_allocation_id || ']: c tch ra t phn b gc'\n        END,\n        v_allocation.created_by,\n        p_allocation_id\n    ) RETURNING id INTO v_new_allocation_id;\n    \n    -- =========================================================================\n    -- STEP 7: Return success result\n    -- =========================================================================\n    RETURN json_build_object(\n        'success', true,\n        'original_allocation_id', p_allocation_id,\n        'new_allocation_id', v_new_allocation_id,\n        'original_meters', v_remaining_meters,\n        'split_meters', p_split_meters,\n        'message', ' chia nh phn b thnh cng'\n    );\n    \nEXCEPTION WHEN OTHERS THEN\n    -- =========================================================================\n    -- ERROR HANDLING\n    -- =========================================================================\n    RETURN json_build_object(\n        'success', false,\n        'original_allocation_id', p_allocation_id,\n        'new_allocation_id', NULL,\n        'original_meters', 0,\n        'split_meters', 0,\n        'message', 'Li: ' || SQLERRM\n    );\nEND;\n$$ LANGUAGE plpgsql","-- Add function comment\nCOMMENT ON FUNCTION split_allocation IS 'Split an allocation into two separate allocations - Chia nho phan bo thanh hai phan bo rieng'","-- ============================================================================\n-- END OF MIGRATION\n-- ============================================================================"}	rpc_split
20240101000014	{"-- Migration: 20240101000014_warehouse_hierarchy.sql\n-- Description: Add hierarchy support to warehouses table (LOCATION -> STORAGE)\n-- Part of: Thread Management System - Warehouse Hierarchy Feature\n\n-- ============================================================================\n-- ADD HIERARCHY COLUMNS\n-- ============================================================================\n\n-- Add parent_id for self-referencing hierarchy (LOCATION has no parent, STORAGE has parent)\nALTER TABLE warehouses ADD COLUMN IF NOT EXISTS parent_id INTEGER","-- Add type column to distinguish LOCATION (site/a im) from STORAGE (kho lu tr)\nALTER TABLE warehouses ADD COLUMN IF NOT EXISTS type VARCHAR(20) DEFAULT 'STORAGE'","-- Add sort_order for custom ordering within same level\nALTER TABLE warehouses ADD COLUMN IF NOT EXISTS sort_order INTEGER DEFAULT 0","-- ============================================================================\n-- CONSTRAINTS\n-- ============================================================================\n\n-- Foreign key: parent_id references warehouses(id)\nALTER TABLE warehouses \n  ADD CONSTRAINT fk_warehouses_parent \n  FOREIGN KEY (parent_id) REFERENCES warehouses(id) ON DELETE SET NULL","-- Check constraint: type must be LOCATION or STORAGE\nALTER TABLE warehouses \n  ADD CONSTRAINT chk_warehouses_type \n  CHECK (type IN ('LOCATION', 'STORAGE'))","-- Check constraint: prevent self-reference (parent_id cannot equal id)\nALTER TABLE warehouses \n  ADD CONSTRAINT chk_warehouses_no_self_parent \n  CHECK (parent_id IS NULL OR parent_id != id)","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\n-- Index for parent_id lookups (find children of a location)\nCREATE INDEX IF NOT EXISTS idx_warehouses_parent ON warehouses(parent_id)","-- Index for type filtering (get only LOCATION or STORAGE)\nCREATE INDEX IF NOT EXISTS idx_warehouses_type ON warehouses(type)","-- Index for ordering within hierarchy\nCREATE INDEX IF NOT EXISTS idx_warehouses_sort ON warehouses(parent_id, sort_order)","-- ============================================================================\n-- UPDATE EXISTING DATA\n-- ============================================================================\n\n-- Set existing warehouses to STORAGE type (they are actual storage locations)\nUPDATE warehouses SET type = 'STORAGE' WHERE type IS NULL","-- ============================================================================\n-- COMMENTS\n-- ============================================================================\n\nCOMMENT ON COLUMN warehouses.parent_id IS 'Parent warehouse ID. NULL for LOCATION (top-level), references LOCATION for STORAGE'","COMMENT ON COLUMN warehouses.type IS 'Warehouse type: LOCATION (site/a im) or STORAGE (kho lu tr thc t)'","COMMENT ON COLUMN warehouses.sort_order IS 'Display order within same parent level (lower = first)'"}	warehouse_hierarchy
20250206110100	{"-- ============================================================================\n-- Migration: 20250206110100_create_styles.sql\n-- Description: Bang ma hang (Styles)\n-- Dependencies: None\n-- ============================================================================\n\n-- ============================================================================\n-- TABLE: styles\n-- ============================================================================\n\nCREATE TABLE styles (\n    id SERIAL PRIMARY KEY,\n    \n    -- Style information\n    style_code VARCHAR(50) NOT NULL UNIQUE,\n    style_name VARCHAR(255) NOT NULL,\n    description TEXT,\n    fabric_type VARCHAR(100),\n    \n    -- Timestamps\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","-- ============================================================================\n-- COMMENTS (Vietnamese + English)\n-- ============================================================================\n\nCOMMENT ON TABLE styles IS 'Bang ma hang san pham - Product Style Master Data'","COMMENT ON COLUMN styles.id IS 'Khoa chinh tu tang'","COMMENT ON COLUMN styles.style_code IS 'Ma hang (unique) - Style Code'","COMMENT ON COLUMN styles.style_name IS 'Ten ma hang - Style Name'","COMMENT ON COLUMN styles.description IS 'Mo ta ma hang - Description'","COMMENT ON COLUMN styles.fabric_type IS 'Loai vai - Fabric Type'","COMMENT ON COLUMN styles.created_at IS 'Thoi diem tao ban ghi'","COMMENT ON COLUMN styles.updated_at IS 'Thoi diem cap nhat gan nhat'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\nCREATE INDEX idx_styles_style_code ON styles(style_code)","CREATE INDEX idx_styles_style_name ON styles(style_name)","-- ============================================================================\n-- TRIGGER: Update updated_at on modification\n-- ============================================================================\n\nCREATE TRIGGER trigger_styles_updated_at\n    BEFORE UPDATE ON styles\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()"}	create_styles
20240101000016	{"-- ============================================================================\n-- Batch Tracking System - Lots Table\n-- Migration: 20240101000016_lots.sql\n-- Description: Lot entity for batch/lot lifecycle management\n-- Dependencies: thread_types, warehouses\n-- ============================================================================\n\n-- ============================================================================\n-- ENUM: lot_status\n-- Represents the lifecycle states of a lot\n-- ============================================================================\n\nCREATE TYPE lot_status AS ENUM (\n    'ACTIVE',       -- L ang hot ng - c cun available\n    'DEPLETED',     -- L  ht - khng cn cun available\n    'EXPIRED',      -- L  ht hn - qu expiry_date\n    'QUARANTINE'    -- L ang cch ly - c vn  QC\n)","COMMENT ON TYPE lot_status IS 'Lifecycle states for lots - Trng thi vng i ca l hng'","-- ============================================================================\n-- TABLE: lots\n-- Lot entity for tracking batch/lot information\n-- ============================================================================\n\nCREATE TABLE lots (\n    id SERIAL PRIMARY KEY,\n    \n    -- Lot identification\n    lot_number VARCHAR(50) UNIQUE NOT NULL,           -- M l (e.g., LOT-2026-001)\n    \n    -- References\n    thread_type_id INTEGER NOT NULL REFERENCES thread_types(id),\n    warehouse_id INTEGER NOT NULL REFERENCES warehouses(id),\n    \n    -- Lot metadata\n    production_date DATE,                              -- Ngy sn xut\n    expiry_date DATE,                                  -- Ngy ht hn\n    supplier VARCHAR(200),                             -- Nh cung cp\n    \n    -- Quantities (denormalized for performance)\n    total_cones INTEGER NOT NULL DEFAULT 0,            -- Tng s cun trong l\n    available_cones INTEGER NOT NULL DEFAULT 0,        -- S cun cn available\n    \n    -- Status\n    status lot_status NOT NULL DEFAULT 'ACTIVE',\n    \n    -- Additional info\n    notes TEXT,\n    \n    -- Timestamps\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","-- Add column comments (Vietnamese)\nCOMMENT ON TABLE lots IS 'Bng qun l l hng ch - theo di vng i t nhp n xut kho'","COMMENT ON COLUMN lots.id IS 'Kha chnh t tng'","COMMENT ON COLUMN lots.lot_number IS 'M l duy nht (VD: LOT-2026-001)'","COMMENT ON COLUMN lots.thread_type_id IS 'Tham chiu n loi ch trong bng thread_types'","COMMENT ON COLUMN lots.warehouse_id IS 'Kho hin ti ang cha l hng'","COMMENT ON COLUMN lots.production_date IS 'Ngy sn xut ca l hng'","COMMENT ON COLUMN lots.expiry_date IS 'Ngy ht hn s dng'","COMMENT ON COLUMN lots.supplier IS 'Tn nh cung cp'","COMMENT ON COLUMN lots.total_cones IS 'Tng s cun trong l (denormalized  tng hiu sut)'","COMMENT ON COLUMN lots.available_cones IS 'S cun cn sn sng s dng (cha xut kho)'","COMMENT ON COLUMN lots.status IS 'Trng thi l: ACTIVE=ang dng, DEPLETED= ht, EXPIRED=ht hn, QUARANTINE=cch ly'","COMMENT ON COLUMN lots.notes IS 'Ghi ch thm v l hng'","COMMENT ON COLUMN lots.created_at IS 'Thi im to bn ghi'","COMMENT ON COLUMN lots.updated_at IS 'Thi im cp nht gn nht'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\nCREATE INDEX idx_lots_lot_number ON lots(lot_number)","CREATE INDEX idx_lots_status ON lots(status)","CREATE INDEX idx_lots_warehouse_id ON lots(warehouse_id)","CREATE INDEX idx_lots_thread_type_id ON lots(thread_type_id)","CREATE INDEX idx_lots_created_at ON lots(created_at DESC)","-- ============================================================================\n-- TRIGGER: Update updated_at on modification\n-- ============================================================================\n\nCREATE OR REPLACE FUNCTION update_lots_updated_at()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW();\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql","CREATE TRIGGER trigger_lots_updated_at\n    BEFORE UPDATE ON lots\n    FOR EACH ROW\n    EXECUTE FUNCTION update_lots_updated_at()"}	lots
20240101000017	{"-- ============================================================================\n-- Batch Tracking System - Batch Transactions Table\n-- Migration: 20240101000017_batch_transactions.sql\n-- Description: Audit log for batch operations (receive, transfer, issue, return)\n-- Dependencies: lots, warehouses\n-- ============================================================================\n\n-- ============================================================================\n-- ENUM: batch_operation_type\n-- Types of batch operations\n-- ============================================================================\n\nCREATE TYPE batch_operation_type AS ENUM (\n    'RECEIVE',      -- Nhp kho hng lot\n    'TRANSFER',     -- Chuyn kho hng lot\n    'ISSUE',        -- Xut kho hng lot\n    'RETURN'        -- Tr li hng lot\n)","COMMENT ON TYPE batch_operation_type IS 'Types of batch operations - Loi thao tc hng lot'","-- ============================================================================\n-- TABLE: batch_transactions\n-- Audit log for all batch operations\n-- ============================================================================\n\nCREATE TABLE batch_transactions (\n    id SERIAL PRIMARY KEY,\n    \n    -- Operation type\n    operation_type batch_operation_type NOT NULL,\n    \n    -- References\n    lot_id INTEGER REFERENCES lots(id),\n    from_warehouse_id INTEGER REFERENCES warehouses(id),\n    to_warehouse_id INTEGER REFERENCES warehouses(id),\n    \n    -- What was moved\n    cone_ids INTEGER[] NOT NULL,                       -- Array of cone IDs in batch\n    cone_count INTEGER NOT NULL,                       -- Count for quick reference\n    \n    -- Context\n    reference_number VARCHAR(50),                      -- PO number, DO number, etc.\n    recipient VARCHAR(200),                            -- Ngi nhn (for ISSUE)\n    notes TEXT,\n    \n    -- Audit\n    performed_by VARCHAR(100),\n    performed_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","-- Add column comments (Vietnamese)\nCOMMENT ON TABLE batch_transactions IS 'Bng lu lch s cc thao tc hng lot (nhp/xut/chuyn kho)'","COMMENT ON COLUMN batch_transactions.id IS 'Kha chnh t tng'","COMMENT ON COLUMN batch_transactions.operation_type IS 'Loi thao tc: RECEIVE=nhp kho, TRANSFER=chuyn kho, ISSUE=xut kho, RETURN=tr li'","COMMENT ON COLUMN batch_transactions.lot_id IS 'L hng lin quan (nu c)'","COMMENT ON COLUMN batch_transactions.from_warehouse_id IS 'Kho ngun (cho chuyn/xut kho)'","COMMENT ON COLUMN batch_transactions.to_warehouse_id IS 'Kho ch (cho nhp/chuyn kho)'","COMMENT ON COLUMN batch_transactions.cone_ids IS 'Mng ID cc cun trong thao tc ny'","COMMENT ON COLUMN batch_transactions.cone_count IS 'S lng cun ( truy vn nhanh)'","COMMENT ON COLUMN batch_transactions.reference_number IS 'S tham chiu bn ngoi (s PO, phiu xut kho, v.v.)'","COMMENT ON COLUMN batch_transactions.recipient IS 'Ngi nhn hng (cho thao tc xut kho)'","COMMENT ON COLUMN batch_transactions.notes IS 'Ghi ch thm v thao tc'","COMMENT ON COLUMN batch_transactions.performed_by IS 'Ngi thc hin thao tc'","COMMENT ON COLUMN batch_transactions.performed_at IS 'Thi im thc hin thao tc'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\nCREATE INDEX idx_batch_transactions_lot_id ON batch_transactions(lot_id)","CREATE INDEX idx_batch_transactions_operation_type ON batch_transactions(operation_type)","CREATE INDEX idx_batch_transactions_performed_at ON batch_transactions(performed_at DESC)","CREATE INDEX idx_batch_transactions_from_warehouse ON batch_transactions(from_warehouse_id)","CREATE INDEX idx_batch_transactions_to_warehouse ON batch_transactions(to_warehouse_id)","CREATE INDEX idx_batch_transactions_reference ON batch_transactions(reference_number) WHERE reference_number IS NOT NULL"}	batch_transactions
20240101000018	{"-- ============================================================================\n-- Batch Tracking System - Add lot_id to thread_inventory\n-- Migration: 20240101000018_inventory_lot_id.sql\n-- Description: Add lot_id FK column to thread_inventory for lot linking\n-- Dependencies: lots, thread_inventory\n-- ============================================================================\n\n-- ============================================================================\n-- ADD lot_id COLUMN\n-- Nullable FK to allow gradual migration of existing data\n-- ============================================================================\n\nALTER TABLE thread_inventory \n    ADD COLUMN lot_id INTEGER REFERENCES lots(id)","COMMENT ON COLUMN thread_inventory.lot_id IS 'Tham chiu n l hng trong bng lots (nullable  h tr d liu c)'","-- ============================================================================\n-- INDEX for lot_id lookups\n-- ============================================================================\n\nCREATE INDEX idx_thread_inventory_lot_id ON thread_inventory(lot_id) WHERE lot_id IS NOT NULL"}	inventory_lot_id
20240101000019	{"-- ============================================================================\n-- Data Migration: Migrate existing lot_number data to lots table\n-- Migration: 20240101000019_migrate_lot_data.sql\n-- Description: Create lot records from existing cone data and link cones to lots\n-- Dependencies: 20240101000016_lots.sql, 20240101000018_inventory_lot_id.sql\n-- ============================================================================\n\n-- ============================================================================\n-- STEP 1: Create lot records from existing distinct lot_number combinations\n-- For each unique (lot_number, thread_type_id) pair, create a lot record\n-- Uses the most common warehouse_id found for that combination\n-- ============================================================================\n\nINSERT INTO lots (\n    lot_number,\n    thread_type_id,\n    warehouse_id,\n    production_date,\n    expiry_date,\n    supplier,\n    total_cones,\n    available_cones,\n    status,\n    notes,\n    created_at\n)\nSELECT \n    ti.lot_number,\n    ti.thread_type_id,\n    -- Use the most common warehouse for this lot\n    (\n        SELECT warehouse_id \n        FROM thread_inventory ti2 \n        WHERE ti2.lot_number = ti.lot_number \n          AND ti2.thread_type_id = ti.thread_type_id\n        GROUP BY warehouse_id \n        ORDER BY COUNT(*) DESC \n        LIMIT 1\n    ) AS warehouse_id,\n    -- Use the earliest received date as production date estimate\n    MIN(ti.received_date) AS production_date,\n    -- Use the earliest expiry date from this lot\n    MIN(ti.expiry_date) AS expiry_date,\n    -- Supplier unknown for migrated data\n    NULL AS supplier,\n    -- Count total cones in this lot\n    COUNT(*) AS total_cones,\n    -- Count available cones in this lot\n    COUNT(*) FILTER (WHERE ti.status = 'AVAILABLE') AS available_cones,\n    -- Determine status based on available cones\n    CASE \n        WHEN COUNT(*) FILTER (WHERE ti.status = 'AVAILABLE') > 0 THEN 'ACTIVE'::lot_status\n        ELSE 'DEPLETED'::lot_status\n    END AS status,\n    -- Add migration note\n    'Migrated from existing lot_number data' AS notes,\n    -- Use earliest cone creation date\n    MIN(ti.created_at) AS created_at\nFROM thread_inventory ti\nWHERE ti.lot_number IS NOT NULL \n  AND ti.lot_number != ''\n  AND ti.lot_id IS NULL  -- Only migrate cones not yet linked to lots\nGROUP BY ti.lot_number, ti.thread_type_id\nON CONFLICT (lot_number) DO NOTHING","-- Skip if lot already exists\n\n-- ============================================================================\n-- STEP 2: Update thread_inventory with lot_id FK\n-- Link each cone to its corresponding lot based on lot_number match\n-- ============================================================================\n\nUPDATE thread_inventory ti\nSET lot_id = lots.id\nFROM lots\nWHERE ti.lot_number = lots.lot_number\n  AND ti.thread_type_id = lots.thread_type_id\n  AND ti.lot_id IS NULL","-- Only update cones not yet linked\n\n-- ============================================================================\n-- STEP 3: Verify migration results\n-- Log counts for verification\n-- ============================================================================\n\nDO $$\nDECLARE\n    total_lots_created INTEGER;\n    total_cones_linked INTEGER;\n    cones_without_lot INTEGER;\nBEGIN\n    -- Count lots created\n    SELECT COUNT(*) INTO total_lots_created \n    FROM lots \n    WHERE notes = 'Migrated from existing lot_number data';\n    \n    -- Count cones linked to lots\n    SELECT COUNT(*) INTO total_cones_linked \n    FROM thread_inventory \n    WHERE lot_id IS NOT NULL;\n    \n    -- Count cones still without lot (null lot_number)\n    SELECT COUNT(*) INTO cones_without_lot \n    FROM thread_inventory \n    WHERE lot_id IS NULL;\n    \n    RAISE NOTICE '=== Migration Results ===';\n    RAISE NOTICE 'Lots created from migration: %', total_lots_created;\n    RAISE NOTICE 'Cones linked to lots: %', total_cones_linked;\n    RAISE NOTICE 'Cones without lot_id (null lot_number): %', cones_without_lot;\nEND $$","-- ============================================================================\n-- OPTIONAL STEP 4: Update lot cone counts (in case of discrepancies)\n-- This ensures total_cones and available_cones are accurate\n-- ============================================================================\n\nUPDATE lots l\nSET \n    total_cones = (\n        SELECT COUNT(*) \n        FROM thread_inventory ti \n        WHERE ti.lot_id = l.id\n    ),\n    available_cones = (\n        SELECT COUNT(*) \n        FROM thread_inventory ti \n        WHERE ti.lot_id = l.id \n          AND ti.status = 'AVAILABLE'\n    ),\n    status = CASE \n        WHEN (\n            SELECT COUNT(*) \n            FROM thread_inventory ti \n            WHERE ti.lot_id = l.id \n              AND ti.status = 'AVAILABLE'\n        ) > 0 THEN 'ACTIVE'::lot_status\n        ELSE 'DEPLETED'::lot_status\n    END\nWHERE l.notes = 'Migrated from existing lot_number data'","-- ============================================================================\n-- END OF MIGRATION\n-- ============================================================================"}	migrate_lot_data
20240101000020	{"-- ============================================================================\n-- Thread Restructure Phase 1 - Colors Master Table\n-- Migration: 20240101000020_colors.sql\n-- Description: Master data table for standardized color definitions\n-- Dependencies: update_updated_at_column() function from thread_types migration\n-- ============================================================================\n\n-- ============================================================================\n-- TABLE: colors\n-- Master data for standardized color definitions with optional industry codes\n-- ============================================================================\n\nCREATE TABLE colors (\n    id SERIAL PRIMARY KEY,\n    \n    name VARCHAR(100) NOT NULL UNIQUE,\n    hex_code VARCHAR(7) NOT NULL,\n    pantone_code VARCHAR(20),\n    ral_code VARCHAR(20),\n    is_active BOOLEAN NOT NULL DEFAULT TRUE,\n    \n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","-- ============================================================================\n-- COMMENTS (Vietnamese)\n-- ============================================================================\n\nCOMMENT ON TABLE colors IS 'Bng danh mc mu sc chun - Colors master data'","COMMENT ON COLUMN colors.id IS 'Kha chnh t tng'","COMMENT ON COLUMN colors.name IS 'Tn mu (unique) - VD: , Xanh dng'","COMMENT ON COLUMN colors.hex_code IS 'M mu Hex (#RRGGBB) - VD: #FF0000'","COMMENT ON COLUMN colors.pantone_code IS 'M mu Pantone (ty chn) - VD: 186C'","COMMENT ON COLUMN colors.ral_code IS 'M mu RAL (ty chn) - VD: RAL 3020'","COMMENT ON COLUMN colors.is_active IS 'Trng thi hot ng - TRUE=ang dng, FALSE=ngng dng'","COMMENT ON COLUMN colors.created_at IS 'Thi im to bn ghi'","COMMENT ON COLUMN colors.updated_at IS 'Thi im cp nht gn nht'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\nCREATE INDEX idx_colors_name ON colors(name)","CREATE INDEX idx_colors_is_active ON colors(is_active) WHERE is_active = TRUE","-- ============================================================================\n-- TRIGGER: Update updated_at on modification\n-- Uses existing update_updated_at_column() from thread_types migration\n-- ============================================================================\n\nCREATE TRIGGER trigger_colors_updated_at\n    BEFORE UPDATE ON colors\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()"}	colors
20240101000021	{"-- ============================================================================\n-- Thread Restructure Phase 1 - Suppliers Master Table\n-- Migration: 20240101000021_suppliers.sql\n-- Description: Master data table for supplier information\n-- Dependencies: update_updated_at_column() function from thread_types migration\n-- ============================================================================\n\n-- ============================================================================\n-- TABLE: suppliers\n-- Master data for supplier information with contact details\n-- ============================================================================\n\nCREATE TABLE suppliers (\n    id SERIAL PRIMARY KEY,\n    \n    code VARCHAR(50) NOT NULL UNIQUE,\n    name VARCHAR(200) NOT NULL,\n    contact_name VARCHAR(100),\n    phone VARCHAR(20),\n    email VARCHAR(100),\n    address TEXT,\n    lead_time_days INTEGER DEFAULT 7,\n    is_active BOOLEAN NOT NULL DEFAULT TRUE,\n    \n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","-- ============================================================================\n-- COMMENTS (Vietnamese)\n-- ============================================================================\n\nCOMMENT ON TABLE suppliers IS 'Bng danh mc nh cung cp - Suppliers master data'","COMMENT ON COLUMN suppliers.id IS 'Kha chnh t tng'","COMMENT ON COLUMN suppliers.code IS 'M nh cung cp (unique) - VD: SUP-001, NCC-ABC'","COMMENT ON COLUMN suppliers.name IS 'Tn y  nh cung cp'","COMMENT ON COLUMN suppliers.contact_name IS 'Tn ngi lin h'","COMMENT ON COLUMN suppliers.phone IS 'S in thoi lin h'","COMMENT ON COLUMN suppliers.email IS 'Email lin h'","COMMENT ON COLUMN suppliers.address IS 'a ch nh cung cp'","COMMENT ON COLUMN suppliers.lead_time_days IS 'Thi gian giao hng tiu chun (ngy)'","COMMENT ON COLUMN suppliers.is_active IS 'Trng thi hot ng - TRUE=ang hp tc, FALSE=ngng hp tc'","COMMENT ON COLUMN suppliers.created_at IS 'Thi im to bn ghi'","COMMENT ON COLUMN suppliers.updated_at IS 'Thi im cp nht gn nht'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\nCREATE INDEX idx_suppliers_code ON suppliers(code)","CREATE INDEX idx_suppliers_name ON suppliers(name)","CREATE INDEX idx_suppliers_is_active ON suppliers(is_active) WHERE is_active = TRUE","-- ============================================================================\n-- TRIGGER: Update updated_at on modification\n-- Uses existing update_updated_at_column() from thread_types migration\n-- ============================================================================\n\nCREATE TRIGGER trigger_suppliers_updated_at\n    BEFORE UPDATE ON suppliers\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()"}	suppliers
20240101000022	{"-- ============================================================================\n-- Thread Restructure Phase 1 - Color-Supplier Junction Table\n-- Migration: 20240101000022_color_supplier.sql\n-- Description: Junction table for many-to-many color-supplier relationship with pricing\n-- Dependencies: colors, suppliers tables\n-- ============================================================================\n\n-- ============================================================================\n-- TABLE: color_supplier\n-- Junction table linking colors to suppliers with pricing information\n-- ============================================================================\n\nCREATE TABLE color_supplier (\n    id SERIAL PRIMARY KEY,\n    \n    color_id INTEGER NOT NULL REFERENCES colors(id) ON DELETE RESTRICT,\n    supplier_id INTEGER NOT NULL REFERENCES suppliers(id) ON DELETE RESTRICT,\n    price_per_kg DECIMAL(10,2),\n    min_order_qty INTEGER,\n    is_active BOOLEAN NOT NULL DEFAULT TRUE,\n    \n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    \n    UNIQUE(color_id, supplier_id)\n)","-- ============================================================================\n-- COMMENTS (Vietnamese)\n-- ============================================================================\n\nCOMMENT ON TABLE color_supplier IS 'Bng lin kt mu-nh cung cp vi thng tin gi - Color-Supplier junction with pricing'","COMMENT ON COLUMN color_supplier.id IS 'Kha chnh t tng'","COMMENT ON COLUMN color_supplier.color_id IS 'FK n bng colors - m mu'","COMMENT ON COLUMN color_supplier.supplier_id IS 'FK n bng suppliers - m nh cung cp'","COMMENT ON COLUMN color_supplier.price_per_kg IS 'Gi mi kg (VND)'","COMMENT ON COLUMN color_supplier.min_order_qty IS 'S lng t ti thiu (kg)'","COMMENT ON COLUMN color_supplier.is_active IS 'Trng thi hot ng - TRUE=ang cung cp, FALSE=ngng cung cp'","COMMENT ON COLUMN color_supplier.created_at IS 'Thi im to bn ghi'","COMMENT ON COLUMN color_supplier.updated_at IS 'Thi im cp nht gn nht'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\nCREATE INDEX idx_color_supplier_color_id ON color_supplier(color_id)","CREATE INDEX idx_color_supplier_supplier_id ON color_supplier(supplier_id)","CREATE INDEX idx_color_supplier_is_active ON color_supplier(is_active) WHERE is_active = TRUE","-- ============================================================================\n-- TRIGGER: Update updated_at on modification\n-- Uses existing update_updated_at_column() from thread_types migration\n-- ============================================================================\n\nCREATE TRIGGER trigger_color_supplier_updated_at\n    BEFORE UPDATE ON color_supplier\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()"}	color_supplier
20240101000023	{"-- ============================================================================\n-- Thread Restructure Phase 1 - Add FK Columns to thread_types and lots\n-- Migration: 20240101000023_thread_types_fks.sql\n-- Description: Add nullable FK columns for expand-contract migration pattern\n-- Dependencies: colors, suppliers, color_supplier tables\n-- ============================================================================\n\n-- ============================================================================\n-- ADD FK COLUMNS TO thread_types\n-- Nullable during migration period to allow gradual backfill\n-- Existing color and supplier VARCHAR columns kept for dual-write\n-- ============================================================================\n\nALTER TABLE thread_types \n    ADD COLUMN color_id INTEGER REFERENCES colors(id) ON DELETE SET NULL,\n    ADD COLUMN supplier_id INTEGER REFERENCES suppliers(id) ON DELETE SET NULL,\n    ADD COLUMN color_supplier_id INTEGER REFERENCES color_supplier(id) ON DELETE SET NULL","-- ============================================================================\n-- ADD FK COLUMN TO lots\n-- Nullable during migration period to allow gradual backfill\n-- Existing supplier VARCHAR column kept for dual-write\n-- ============================================================================\n\nALTER TABLE lots\n    ADD COLUMN supplier_id INTEGER REFERENCES suppliers(id) ON DELETE SET NULL","-- ============================================================================\n-- COMMENTS (Vietnamese)\n-- ============================================================================\n\nCOMMENT ON COLUMN thread_types.color_id IS 'FK n bng colors (normalized) - nullable trong giai on migration'","COMMENT ON COLUMN thread_types.supplier_id IS 'FK n bng suppliers (normalized) - nullable trong giai on migration'","COMMENT ON COLUMN thread_types.color_supplier_id IS 'FK n bng color_supplier - tham chiu gi mu-NCC (ty chn)'","COMMENT ON COLUMN lots.supplier_id IS 'FK n bng suppliers (normalized) - nullable trong giai on migration'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\nCREATE INDEX idx_thread_types_color_id ON thread_types(color_id)","CREATE INDEX idx_thread_types_supplier_id ON thread_types(supplier_id)","CREATE INDEX idx_thread_types_color_supplier_id ON thread_types(color_supplier_id)","CREATE INDEX idx_lots_supplier_id ON lots(supplier_id)"}	thread_types_fks
20240101000024	{"-- ============================================================================\n-- Thread Restructure Phase 1 - Populate Normalized Data\n-- Migration: 20240101000024_populate_normalized_data.sql\n-- Description: Backfill existing data into normalized tables\n-- Dependencies: colors, suppliers, color_supplier, thread_types, lots tables\n-- ============================================================================\n\n-- ============================================================================\n-- STEP 1: Extract distinct colors from thread_types\n-- ============================================================================\n\nINSERT INTO colors (name, hex_code)\nSELECT DISTINCT \n    COALESCE(NULLIF(TRIM(color), ''), 'Khng xc nh') as name,\n    COALESCE(NULLIF(TRIM(color_code), ''), '#808080') as hex_code\nFROM thread_types\nWHERE color IS NOT NULL OR color_code IS NOT NULL\nON CONFLICT (name) DO NOTHING","-- ============================================================================\n-- STEP 2: Extract distinct suppliers from both thread_types and lots\n-- ============================================================================\n\nINSERT INTO suppliers (code, name)\nSELECT DISTINCT \n    UPPER(REPLACE(REPLACE(TRIM(supplier), ' ', '-'), '.', '')) as code,\n    TRIM(supplier) as name\nFROM (\n    SELECT supplier FROM thread_types WHERE supplier IS NOT NULL AND TRIM(supplier) != ''\n    UNION\n    SELECT supplier FROM lots WHERE supplier IS NOT NULL AND TRIM(supplier) != ''\n) all_suppliers\nWHERE supplier IS NOT NULL AND TRIM(supplier) != ''\nON CONFLICT (code) DO NOTHING","-- ============================================================================\n-- STEP 3: Backfill thread_types.color_id by matching color name\n-- ============================================================================\n\nUPDATE thread_types tt\nSET color_id = c.id\nFROM colors c\nWHERE (\n    LOWER(TRIM(tt.color)) = LOWER(c.name) \n    OR TRIM(tt.color_code) = c.hex_code\n)\nAND tt.color_id IS NULL","-- ============================================================================\n-- STEP 4: Backfill thread_types.supplier_id by matching supplier name\n-- ============================================================================\n\nUPDATE thread_types tt\nSET supplier_id = s.id\nFROM suppliers s\nWHERE LOWER(TRIM(tt.supplier)) = LOWER(s.name)\nAND tt.supplier_id IS NULL","-- ============================================================================\n-- STEP 5: Backfill lots.supplier_id by matching supplier name\n-- ============================================================================\n\nUPDATE lots l\nSET supplier_id = s.id\nFROM suppliers s\nWHERE LOWER(TRIM(l.supplier)) = LOWER(s.name)\nAND l.supplier_id IS NULL","-- ============================================================================\n-- STEP 6: Create color_supplier junction records from existing combinations\n-- ============================================================================\n\nINSERT INTO color_supplier (color_id, supplier_id)\nSELECT DISTINCT color_id, supplier_id\nFROM thread_types\nWHERE color_id IS NOT NULL AND supplier_id IS NOT NULL\nON CONFLICT (color_id, supplier_id) DO NOTHING","-- ============================================================================\n-- STEP 7: Verification queries\n-- ============================================================================\n\nDO $$\nDECLARE\n    total_colors INTEGER;\n    total_suppliers INTEGER;\n    total_color_supplier INTEGER;\n    unmapped_tt_colors INTEGER;\n    unmapped_tt_suppliers INTEGER;\n    unmapped_lot_suppliers INTEGER;\nBEGIN\n    SELECT COUNT(*) INTO total_colors FROM colors;\n    SELECT COUNT(*) INTO total_suppliers FROM suppliers;\n    SELECT COUNT(*) INTO total_color_supplier FROM color_supplier;\n    \n    SELECT COUNT(*) INTO unmapped_tt_colors \n    FROM thread_types \n    WHERE color IS NOT NULL AND TRIM(color) != '' AND color_id IS NULL;\n    \n    SELECT COUNT(*) INTO unmapped_tt_suppliers \n    FROM thread_types \n    WHERE supplier IS NOT NULL AND TRIM(supplier) != '' AND supplier_id IS NULL;\n    \n    SELECT COUNT(*) INTO unmapped_lot_suppliers \n    FROM lots \n    WHERE supplier IS NOT NULL AND TRIM(supplier) != '' AND supplier_id IS NULL;\n    \n    RAISE NOTICE '========================================';\n    RAISE NOTICE 'Migration Results:';\n    RAISE NOTICE '========================================';\n    RAISE NOTICE 'Total colors created: %', total_colors;\n    RAISE NOTICE 'Total suppliers created: %', total_suppliers;\n    RAISE NOTICE 'Total color_supplier records: %', total_color_supplier;\n    RAISE NOTICE '----------------------------------------';\n    RAISE NOTICE 'Unmapped thread_types colors: %', unmapped_tt_colors;\n    RAISE NOTICE 'Unmapped thread_types suppliers: %', unmapped_tt_suppliers;\n    RAISE NOTICE 'Unmapped lots suppliers: %', unmapped_lot_suppliers;\n    RAISE NOTICE '========================================';\n    \n    IF unmapped_tt_colors > 0 OR unmapped_tt_suppliers > 0 OR unmapped_lot_suppliers > 0 THEN\n        RAISE WARNING 'Some records could not be mapped. Review data manually.';\n    ELSE\n        RAISE NOTICE 'SUCCESS: All records mapped successfully!';\n    END IF;\nEND $$"}	populate_normalized_data
20240101000025	{"-- ============================================\n-- AUTH & PERMISSIONS SYSTEM MIGRATION\n-- ============================================\n\n-- ============================================\n-- EXTEND EMPLOYEES TABLE FOR AUTHENTICATION\n-- ============================================\n\n-- Add authentication columns if not exist\nALTER TABLE employees ADD COLUMN IF NOT EXISTS password_hash TEXT","ALTER TABLE employees ADD COLUMN IF NOT EXISTS must_change_password BOOLEAN DEFAULT false","ALTER TABLE employees ADD COLUMN IF NOT EXISTS password_changed_at TIMESTAMPTZ","ALTER TABLE employees ADD COLUMN IF NOT EXISTS failed_login_attempts INTEGER DEFAULT 0","ALTER TABLE employees ADD COLUMN IF NOT EXISTS locked_until TIMESTAMPTZ","ALTER TABLE employees ADD COLUMN IF NOT EXISTS last_login_at TIMESTAMPTZ","ALTER TABLE employees ADD COLUMN IF NOT EXISTS refresh_token TEXT","ALTER TABLE employees ADD COLUMN IF NOT EXISTS refresh_token_expires_at TIMESTAMPTZ","-- Index for login lookup\nCREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id)","CREATE INDEX IF NOT EXISTS idx_employees_refresh_token ON employees(refresh_token)","-- ============================================\n-- ENUM TYPES\n-- ============================================\n\n-- Permission actions\nDO $$ BEGIN\n  CREATE TYPE permission_action AS ENUM ('view', 'create', 'edit', 'delete', 'manage');\nEXCEPTION\n  WHEN duplicate_object THEN null;\nEND $$","-- ============================================\n-- PERMISSIONS TABLE\n-- Defines all available permissions in the system\n-- Each permission maps to a page/feature + action\n-- ============================================\nCREATE TABLE IF NOT EXISTS permissions (\n  id SERIAL PRIMARY KEY,\n  code VARCHAR(100) UNIQUE NOT NULL,  -- e.g., 'thread.recovery.view'\n  name VARCHAR(255) NOT NULL,          -- Vietnamese display name\n  description TEXT,\n  module VARCHAR(50) NOT NULL,         -- e.g., 'thread', 'employee', 'admin'\n  resource VARCHAR(50) NOT NULL,       -- e.g., 'recovery', 'inventory', 'users'\n  action permission_action NOT NULL,\n  route_path VARCHAR(255),             -- Associated route path, e.g., '/thread/recovery'\n  is_page_access BOOLEAN DEFAULT false,-- True if this grants access to a page\n  sort_order INTEGER DEFAULT 0,\n  created_at TIMESTAMPTZ DEFAULT NOW(),\n  updated_at TIMESTAMPTZ DEFAULT NOW()\n)","-- Create index for faster lookups\nCREATE INDEX IF NOT EXISTS idx_permissions_code ON permissions(code)","CREATE INDEX IF NOT EXISTS idx_permissions_module ON permissions(module)","CREATE INDEX IF NOT EXISTS idx_permissions_route ON permissions(route_path)","-- ============================================\n-- ROLES TABLE\n-- Groups of permissions for convenience\n-- ============================================\nCREATE TABLE IF NOT EXISTS roles (\n  id SERIAL PRIMARY KEY,\n  code VARCHAR(50) UNIQUE NOT NULL,   -- e.g., 'root', 'admin', 'warehouse_manager'\n  name VARCHAR(100) NOT NULL,          -- Vietnamese display name\n  description TEXT,\n  level INTEGER DEFAULT 99,            -- Hierarchy level (0 = highest, ROOT)\n  is_system BOOLEAN DEFAULT false,     -- System roles cannot be deleted\n  is_active BOOLEAN DEFAULT true,\n  created_at TIMESTAMPTZ DEFAULT NOW(),\n  updated_at TIMESTAMPTZ DEFAULT NOW()\n)","-- ============================================\n-- ROLE_PERMISSIONS TABLE\n-- Many-to-many: roles <-> permissions\n-- Note: ROOT role doesn't need entries - it bypasses checks\n-- ============================================\nCREATE TABLE IF NOT EXISTS role_permissions (\n  id SERIAL PRIMARY KEY,\n  role_id INTEGER NOT NULL REFERENCES roles(id) ON DELETE CASCADE,\n  permission_id INTEGER NOT NULL REFERENCES permissions(id) ON DELETE CASCADE,\n  created_at TIMESTAMPTZ DEFAULT NOW(),\n  UNIQUE(role_id, permission_id)\n)","CREATE INDEX IF NOT EXISTS idx_role_permissions_role ON role_permissions(role_id)","CREATE INDEX IF NOT EXISTS idx_role_permissions_permission ON role_permissions(permission_id)","-- ============================================\n-- EMPLOYEE_ROLES TABLE\n-- Many-to-many: employees <-> roles\n-- Uses employees table instead of separate users table\n-- ============================================\nCREATE TABLE IF NOT EXISTS employee_roles (\n  id SERIAL PRIMARY KEY,\n  employee_id INTEGER NOT NULL REFERENCES employees(id) ON DELETE CASCADE,\n  role_id INTEGER NOT NULL REFERENCES roles(id) ON DELETE CASCADE,\n  assigned_by INTEGER REFERENCES employees(id),\n  assigned_at TIMESTAMPTZ DEFAULT NOW(),\n  UNIQUE(employee_id, role_id)\n)","CREATE INDEX IF NOT EXISTS idx_employee_roles_employee ON employee_roles(employee_id)","CREATE INDEX IF NOT EXISTS idx_employee_roles_role ON employee_roles(role_id)","-- ============================================\n-- EMPLOYEE_PERMISSIONS TABLE\n-- Direct employee-permission assignment (overrides/additions to role)\n-- Enables granular page-level access per employee\n-- ============================================\nCREATE TABLE IF NOT EXISTS employee_permissions (\n  id SERIAL PRIMARY KEY,\n  employee_id INTEGER NOT NULL REFERENCES employees(id) ON DELETE CASCADE,\n  permission_id INTEGER NOT NULL REFERENCES permissions(id) ON DELETE CASCADE,\n  granted BOOLEAN DEFAULT true,  -- false = explicitly deny (override role)\n  assigned_by INTEGER REFERENCES employees(id),\n  assigned_at TIMESTAMPTZ DEFAULT NOW(),\n  expires_at TIMESTAMPTZ,        -- Optional expiration\n  UNIQUE(employee_id, permission_id)\n)","CREATE INDEX IF NOT EXISTS idx_employee_permissions_employee ON employee_permissions(employee_id)","CREATE INDEX IF NOT EXISTS idx_employee_permissions_permission ON employee_permissions(permission_id)","-- ============================================\n-- AUTHORIZATION HELPER FUNCTIONS\n-- Used by backend, NOT for RLS (we're using custom JWT, not Supabase Auth)\n-- ============================================\n\n-- Check if employee has ROOT role (bypasses ALL permission checks)\nCREATE OR REPLACE FUNCTION public.is_root(p_employee_id INTEGER)\nRETURNS BOOLEAN AS $$\nBEGIN\n  RETURN EXISTS (\n    SELECT 1 FROM employee_roles er\n    JOIN roles r ON er.role_id = r.id\n    WHERE er.employee_id = p_employee_id\n      AND r.code = 'root'\n  );\nEND;\n$$ LANGUAGE plpgsql STABLE SECURITY DEFINER","-- Check if employee is admin\nCREATE OR REPLACE FUNCTION public.is_admin(p_employee_id INTEGER)\nRETURNS BOOLEAN AS $$\nBEGIN\n  RETURN EXISTS (\n    SELECT 1 FROM employee_roles er\n    JOIN roles r ON er.role_id = r.id\n    WHERE er.employee_id = p_employee_id\n      AND r.code IN ('root', 'admin')  -- ROOT is also considered admin\n  );\nEND;\n$$ LANGUAGE plpgsql STABLE SECURITY DEFINER","-- Check if employee has a specific permission\n-- Returns TRUE immediately if employee has ROOT role (bypasses check)\nCREATE OR REPLACE FUNCTION public.has_permission(p_employee_id INTEGER, requested_permission TEXT)\nRETURNS BOOLEAN AS $$\nDECLARE\n  has_perm BOOLEAN := false;\nBEGIN\n  -- ROOT bypasses ALL permission checks\n  IF public.is_root(p_employee_id) THEN\n    RETURN true;\n  END IF;\n  \n  -- Check direct employee permission (explicit grant/deny)\n  SELECT granted INTO has_perm\n  FROM employee_permissions ep\n  JOIN permissions p ON ep.permission_id = p.id\n  WHERE ep.employee_id = p_employee_id \n    AND p.code = requested_permission\n    AND (ep.expires_at IS NULL OR ep.expires_at > NOW());\n  \n  IF has_perm IS NOT NULL THEN\n    RETURN has_perm;  -- Return explicit grant/deny\n  END IF;\n  \n  -- Check role-based permission\n  SELECT EXISTS (\n    SELECT 1 \n    FROM employee_roles er\n    JOIN role_permissions rp ON er.role_id = rp.role_id\n    JOIN permissions p ON rp.permission_id = p.id\n    WHERE er.employee_id = p_employee_id \n      AND p.code = requested_permission\n  ) INTO has_perm;\n  \n  RETURN COALESCE(has_perm, false);\nEND;\n$$ LANGUAGE plpgsql STABLE SECURITY DEFINER","-- Check if employee has any of the given permissions\nCREATE OR REPLACE FUNCTION public.has_any_permission(p_employee_id INTEGER, requested_permissions TEXT[])\nRETURNS BOOLEAN AS $$\nBEGIN\n  -- ROOT bypasses ALL permission checks\n  IF public.is_root(p_employee_id) THEN\n    RETURN true;\n  END IF;\n\n  RETURN EXISTS (\n    SELECT 1 FROM unnest(requested_permissions) AS perm\n    WHERE public.has_permission(p_employee_id, perm)\n  );\nEND;\n$$ LANGUAGE plpgsql STABLE SECURITY DEFINER","-- Get all permissions for an employee\n-- If ROOT, returns special '*' indicator\nCREATE OR REPLACE FUNCTION public.get_employee_permissions(p_employee_id INTEGER)\nRETURNS TABLE(permission_code TEXT, granted BOOLEAN) AS $$\nBEGIN\n  -- ROOT has ALL permissions (return special indicator)\n  IF public.is_root(p_employee_id) THEN\n    RETURN QUERY SELECT '*'::TEXT, true;\n    RETURN;\n  END IF;\n  \n  -- Combine role permissions + direct permissions\n  RETURN QUERY\n  WITH role_perms AS (\n    SELECT DISTINCT p.code, true as granted\n    FROM employee_roles er\n    JOIN role_permissions rp ON er.role_id = rp.role_id\n    JOIN permissions p ON rp.permission_id = p.id\n    WHERE er.employee_id = p_employee_id\n  ),\n  direct_perms AS (\n    SELECT p.code, ep.granted\n    FROM employee_permissions ep\n    JOIN permissions p ON ep.permission_id = p.id\n    WHERE ep.employee_id = p_employee_id\n      AND (ep.expires_at IS NULL OR ep.expires_at > NOW())\n  )\n  SELECT COALESCE(dp.code, rp.code), COALESCE(dp.granted, rp.granted)\n  FROM role_perms rp\n  FULL OUTER JOIN direct_perms dp ON rp.code = dp.code\n  WHERE COALESCE(dp.granted, rp.granted) = true;\nEND;\n$$ LANGUAGE plpgsql STABLE SECURITY DEFINER","-- Get all roles for an employee\nCREATE OR REPLACE FUNCTION public.get_employee_roles(p_employee_id INTEGER)\nRETURNS TABLE(role_code TEXT, role_name TEXT, role_level INTEGER) AS $$\nBEGIN\n  RETURN QUERY\n  SELECT r.code, r.name, r.level\n  FROM employee_roles er\n  JOIN roles r ON er.role_id = r.id\n  WHERE er.employee_id = p_employee_id\n    AND r.is_active = true\n  ORDER BY r.level;\nEND;\n$$ LANGUAGE plpgsql STABLE SECURITY DEFINER","-- Check if actor can manage target (based on role hierarchy)\n-- Lower level = higher privilege. ROOT (level 0) can manage everyone.\nCREATE OR REPLACE FUNCTION public.can_manage_employee(actor_id INTEGER, target_id INTEGER)\nRETURNS BOOLEAN AS $$\nDECLARE\n  actor_min_level INTEGER;\n  target_min_level INTEGER;\nBEGIN\n  -- Cannot manage yourself\n  IF actor_id = target_id THEN\n    RETURN false;\n  END IF;\n  \n  -- Get actor's minimum (highest privilege) level\n  SELECT MIN(r.level) INTO actor_min_level\n  FROM employee_roles er\n  JOIN roles r ON er.role_id = r.id\n  WHERE er.employee_id = actor_id;\n  \n  -- Get target's minimum level\n  SELECT MIN(r.level) INTO target_min_level\n  FROM employee_roles er\n  JOIN roles r ON er.role_id = r.id\n  WHERE er.employee_id = target_id;\n  \n  -- No roles = level 99 (lowest privilege)\n  actor_min_level := COALESCE(actor_min_level, 99);\n  target_min_level := COALESCE(target_min_level, 99);\n  \n  -- Can manage if actor's level is strictly lower (higher privilege)\n  -- Exception: ROOT (level 0) can manage anyone including other ROOTs\n  IF actor_min_level = 0 THEN\n    RETURN true;\n  END IF;\n  \n  RETURN actor_min_level < target_min_level;\nEND;\n$$ LANGUAGE plpgsql STABLE SECURITY DEFINER","-- ============================================\n-- SEED DATA: PERMISSIONS\n-- ============================================\n\nINSERT INTO permissions (code, name, description, module, resource, action, route_path, is_page_access, sort_order) VALUES\n-- Dashboard\n('dashboard.view', 'Xem Dashboard', 'Quyn xem trang tng quan', 'dashboard', 'main', 'view', '/', true, 1),\n\n-- Thread Management\n('thread.types.view', 'Xem Loi Ch', 'Quyn xem danh sch loi ch', 'thread', 'types', 'view', '/thread', true, 10),\n('thread.types.create', 'Thm Loi Ch', 'Quyn thm loi ch mi', 'thread', 'types', 'create', NULL, false, 11),\n('thread.types.edit', 'Sa Loi Ch', 'Quyn chnh sa loi ch', 'thread', 'types', 'edit', NULL, false, 12),\n('thread.types.delete', 'Xa Loi Ch', 'Quyn xa loi ch', 'thread', 'types', 'delete', NULL, false, 13),\n\n('thread.colors.view', 'Xem Mu Ch', 'Quyn xem danh sch mu ch', 'thread', 'colors', 'view', '/thread/colors', true, 20),\n('thread.colors.manage', 'Qun l Mu Ch', 'Quyn thm/sa/xa mu ch', 'thread', 'colors', 'manage', NULL, false, 21),\n\n('thread.suppliers.view', 'Xem Nh Cung Cp', 'Quyn xem danh sch NCC', 'thread', 'suppliers', 'view', '/thread/suppliers', true, 30),\n('thread.suppliers.manage', 'Qun l NCC', 'Quyn thm/sa/xa NCC', 'thread', 'suppliers', 'manage', NULL, false, 31),\n\n('thread.inventory.view', 'Xem Tn Kho', 'Quyn xem tn kho ch', 'thread', 'inventory', 'view', '/thread/inventory', true, 40),\n('thread.inventory.edit', 'Chnh sa Tn Kho', 'Quyn chnh sa tn kho', 'thread', 'inventory', 'edit', NULL, false, 41),\n\n('thread.lots.view', 'Xem L Hng', 'Quyn xem danh sch l', 'thread', 'lots', 'view', '/thread/lots', true, 50),\n('thread.lots.manage', 'Qun l L Hng', 'Quyn thm/sa l hng', 'thread', 'lots', 'manage', NULL, false, 51),\n\n('thread.allocations.view', 'Xem Phn B', 'Quyn xem phn b ch', 'thread', 'allocations', 'view', '/thread/allocations', true, 60),\n('thread.allocations.manage', 'Qun l Phn B', 'Quyn to/duyt phn b', 'thread', 'allocations', 'manage', NULL, false, 61),\n\n('thread.recovery.view', 'Xem Hon Tr', 'Quyn xem hon tr ch', 'thread', 'recovery', 'view', '/thread/recovery', true, 70),\n('thread.recovery.manage', 'Qun l Hon Tr', 'Quyn x l hon tr', 'thread', 'recovery', 'manage', NULL, false, 71),\n\n('thread.dashboard.view', 'Xem Thread Dashboard', 'Quyn xem dashboard ch', 'thread', 'dashboard', 'view', '/thread/dashboard', true, 80),\n\n-- Batch Operations\n('thread.batch.receive', 'Nhp Kho', 'Quyn nhp kho ch', 'thread', 'batch', 'create', '/thread/batch/receive', true, 90),\n('thread.batch.issue', 'Xut Kho', 'Quyn xut kho ch', 'thread', 'batch', 'create', '/thread/batch/issue', true, 91),\n('thread.batch.transfer', 'Chuyn Kho', 'Quyn chuyn kho ni b', 'thread', 'batch', 'create', '/thread/batch/transfer', true, 92),\n\n-- Mobile Operations\n('thread.mobile.receive', 'Nhp Kho Mobile', 'Quyn nhp kho trn mobile', 'thread', 'mobile', 'create', '/thread/mobile/receive', true, 100),\n('thread.mobile.issue', 'Xut Kho Mobile', 'Quyn xut kho trn mobile', 'thread', 'mobile', 'create', '/thread/mobile/issue', true, 101),\n('thread.mobile.recovery', 'Hon Tr Mobile', 'Quyn hon tr trn mobile', 'thread', 'mobile', 'create', '/thread/mobile/recovery', true, 102),\n\n-- Stocktake\n('thread.stocktake.view', 'Kim K', 'Quyn thc hin kim k', 'thread', 'stocktake', 'view', '/thread/stocktake', true, 110),\n\n-- Reports\n('reports.view', 'Xem Bo Co', 'Quyn xem cc bo co', 'reports', 'main', 'view', '/reports', true, 200),\n\n-- Employee Management\n('employees.view', 'Xem Nhn Vin', 'Quyn xem danh sch nhn vin', 'employees', 'main', 'view', '/employees', true, 300),\n('employees.create', 'Thm Nhn Vin', 'Quyn thm nhn vin', 'employees', 'main', 'create', NULL, false, 301),\n('employees.edit', 'Sa Nhn Vin', 'Quyn chnh sa nhn vin', 'employees', 'main', 'edit', NULL, false, 302),\n('employees.delete', 'Xa Nhn Vin', 'Quyn xa nhn vin', 'employees', 'main', 'delete', NULL, false, 303),\n\n-- Admin\n('admin.users.view', 'Xem Ngi Dng', 'Quyn xem danh sch ngi dng', 'admin', 'users', 'view', '/admin/users', true, 900),\n('admin.users.manage', 'Qun l Ngi Dng', 'Quyn thm/sa/xa ngi dng', 'admin', 'users', 'manage', NULL, false, 901),\n('admin.roles.view', 'Xem Vai Tr', 'Quyn xem danh sch vai tr', 'admin', 'roles', 'view', '/admin/roles', true, 910),\n('admin.roles.manage', 'Qun l Vai Tr', 'Quyn thm/sa/xa vai tr', 'admin', 'roles', 'manage', NULL, false, 911),\n('admin.permissions.view', 'Xem Quyn', 'Quyn xem danh sch quyn', 'admin', 'permissions', 'view', '/admin/permissions', true, 920)\nON CONFLICT (code) DO NOTHING","-- ============================================\n-- SEED DATA: ROLES (with hierarchy levels)\n-- ============================================\n\nINSERT INTO roles (code, name, description, level, is_system) VALUES\n('root', 'ROOT', 'Quyn cao nht - bypass mi kim tra. Khng th xa.', 0, true),\n('admin', 'Qun tr vin', 'Ton quyn truy cp h thng (tr qun l ROOT)', 1, true),\n('warehouse_manager', 'Qun l Kho', 'Qun l tn kho, nhp/xut/chuyn kho', 2, false),\n('planning', 'K hoch', 'Phn b ch cho sn xut', 2, false),\n('warehouse_staff', 'Nhn vin Kho', 'Thao tc nhp/xut kho c bn', 3, false),\n('production', 'Sn xut', 'Xem tn kho v nhn ch', 3, false),\n('viewer', 'Xem bo co', 'Ch xem bo co v dashboard', 4, false)\nON CONFLICT (code) DO NOTHING","-- ============================================\n-- SEED DATA: ROLE_PERMISSIONS\n-- ============================================\n\n-- Admin: All permissions\nINSERT INTO role_permissions (role_id, permission_id)\nSELECT r.id, p.id FROM roles r, permissions p WHERE r.code = 'admin'\nON CONFLICT (role_id, permission_id) DO NOTHING","-- Warehouse Manager: Thread management + batch operations\nINSERT INTO role_permissions (role_id, permission_id)\nSELECT r.id, p.id FROM roles r, permissions p \nWHERE r.code = 'warehouse_manager' \n  AND p.module IN ('thread', 'dashboard')\n  AND p.code NOT LIKE 'thread.allocations.manage'\nON CONFLICT (role_id, permission_id) DO NOTHING","-- Warehouse Staff: Basic operations\nINSERT INTO role_permissions (role_id, permission_id)\nSELECT r.id, p.id FROM roles r, permissions p \nWHERE r.code = 'warehouse_staff' \n  AND p.code IN (\n    'dashboard.view',\n    'thread.inventory.view',\n    'thread.batch.receive',\n    'thread.batch.issue',\n    'thread.mobile.receive',\n    'thread.mobile.issue',\n    'thread.recovery.view',\n    'thread.mobile.recovery'\n  )\nON CONFLICT (role_id, permission_id) DO NOTHING","-- Planning: Allocations + view\nINSERT INTO role_permissions (role_id, permission_id)\nSELECT r.id, p.id FROM roles r, permissions p \nWHERE r.code = 'planning' \n  AND p.code IN (\n    'dashboard.view',\n    'thread.inventory.view',\n    'thread.allocations.view',\n    'thread.allocations.manage',\n    'thread.dashboard.view',\n    'reports.view'\n  )\nON CONFLICT (role_id, permission_id) DO NOTHING","-- Production: View only\nINSERT INTO role_permissions (role_id, permission_id)\nSELECT r.id, p.id FROM roles r, permissions p \nWHERE r.code = 'production' \n  AND p.code IN (\n    'dashboard.view',\n    'thread.inventory.view',\n    'thread.allocations.view'\n  )\nON CONFLICT (role_id, permission_id) DO NOTHING","-- Viewer: Dashboard + Reports\nINSERT INTO role_permissions (role_id, permission_id)\nSELECT r.id, p.id FROM roles r, permissions p \nWHERE r.code = 'viewer' \n  AND p.code IN ('dashboard.view', 'thread.dashboard.view', 'reports.view')\nON CONFLICT (role_id, permission_id) DO NOTHING","-- ============================================\n-- SEED DATA: DEFAULT ROOT USER\n-- ============================================\n\n-- First, ensure there's an employee for ROOT (or use existing)\n-- bcrypt hash of 'ChangeMe123!' - MUST be changed on first login\nINSERT INTO employees (employee_id, full_name, department, chuc_vu, is_active, password_hash, must_change_password)\nVALUES ('ROOT', 'System Administrator', 'IT', 'Root', true, \n        '$2b$10$rQdR3YmH8V5RzKVX.J0.QeQ8HnVGVnELRVN4WvM0HVr5vX5xJQz7S', \n        true)\nON CONFLICT (employee_id) DO UPDATE SET\n  password_hash = EXCLUDED.password_hash,\n  must_change_password = EXCLUDED.must_change_password","-- Assign ROOT role to the ROOT employee\nINSERT INTO employee_roles (employee_id, role_id)\nSELECT e.id, r.id \nFROM employees e, roles r \nWHERE e.employee_id = 'ROOT' AND r.code = 'root'\nON CONFLICT (employee_id, role_id) DO NOTHING","-- ============================================\n-- EMPLOYEE REFRESH TOKENS TABLE\n-- Stores hashed refresh tokens for token revocation\n-- ============================================\nCREATE TABLE IF NOT EXISTS employee_refresh_tokens (\n  id SERIAL PRIMARY KEY,\n  employee_id INTEGER NOT NULL REFERENCES employees(id) ON DELETE CASCADE,\n  token_hash TEXT NOT NULL,\n  expires_at TIMESTAMPTZ NOT NULL,\n  created_at TIMESTAMPTZ DEFAULT NOW()\n)","CREATE INDEX IF NOT EXISTS idx_refresh_tokens_employee ON employee_refresh_tokens(employee_id)","CREATE INDEX IF NOT EXISTS idx_refresh_tokens_expires ON employee_refresh_tokens(expires_at)","-- Cleanup expired tokens periodically (can be called by cron job or app)\nCREATE OR REPLACE FUNCTION public.cleanup_expired_refresh_tokens()\nRETURNS INTEGER AS $$\nDECLARE\n  deleted_count INTEGER;\nBEGIN\n  DELETE FROM employee_refresh_tokens WHERE expires_at < NOW();\n  GET DIAGNOSTICS deleted_count = ROW_COUNT;\n  RETURN deleted_count;\nEND;\n$$ LANGUAGE plpgsql SECURITY DEFINER"}	auth_permissions
20240101000026	{"-- ============================================================================\n-- Thread Type - Supplier Junction Table\n-- Migration: 20240101000026_thread_type_supplier.sql\n-- Description: Junction table for many-to-many thread_type-supplier relationship\n--              Each thread type can be sourced from multiple suppliers,\n--              each with their own supplier_item_code and unit_price\n-- Dependencies: thread_types, suppliers tables\n-- ============================================================================\n\n-- ============================================================================\n-- TABLE: thread_type_supplier\n-- Junction table linking thread types to suppliers with supplier-specific info\n-- ============================================================================\n\nCREATE TABLE thread_type_supplier (\n    id SERIAL PRIMARY KEY,\n    \n    -- Foreign Keys\n    thread_type_id INTEGER NOT NULL REFERENCES thread_types(id) ON DELETE CASCADE,\n    supplier_id INTEGER NOT NULL REFERENCES suppliers(id) ON DELETE RESTRICT,\n    \n    -- Supplier-specific data\n    supplier_item_code VARCHAR(100) NOT NULL,  -- M hng ca NCC (e.g., Astra-9700, Perma-9700)\n    unit_price DECIMAL(12,4),                  -- Gi mi n v (c th USD hoc VND)\n    \n    -- Metadata\n    is_active BOOLEAN NOT NULL DEFAULT TRUE,\n    notes TEXT,                                -- Ghi ch thm\n    \n    -- Timestamps\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    \n    -- Constraints\n    UNIQUE(thread_type_id, supplier_id),       -- Mi cp thread_type-supplier ch c 1 bn ghi\n    UNIQUE(supplier_id, supplier_item_code)    -- M hng ca NCC phi unique trong NCC \n)","-- ============================================================================\n-- COMMENTS (Vietnamese + English)\n-- ============================================================================\n\nCOMMENT ON TABLE thread_type_supplier IS 'Bng lin kt loi ch - nh cung cp vi m hng v gi ring - Thread Type-Supplier junction with supplier-specific item codes and pricing'","COMMENT ON COLUMN thread_type_supplier.id IS 'Kha chnh t tng'","COMMENT ON COLUMN thread_type_supplier.thread_type_id IS 'FK n bng thread_types - m loi ch'","COMMENT ON COLUMN thread_type_supplier.supplier_id IS 'FK n bng suppliers - m nh cung cp'","COMMENT ON COLUMN thread_type_supplier.supplier_item_code IS 'M hng ring ca NCC (vd: Astra-9700, Perma-9700) - Supplier-specific item code'","COMMENT ON COLUMN thread_type_supplier.unit_price IS 'Gi mi n v theo NCC ny - Unit price from this supplier'","COMMENT ON COLUMN thread_type_supplier.is_active IS 'Trng thi hot ng - TRUE=ang cung cp, FALSE=ngng cung cp'","COMMENT ON COLUMN thread_type_supplier.notes IS 'Ghi ch thm v mi quan h NCC-loi ch ny'","COMMENT ON COLUMN thread_type_supplier.created_at IS 'Thi im to bn ghi'","COMMENT ON COLUMN thread_type_supplier.updated_at IS 'Thi im cp nht gn nht'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\n-- Index for looking up suppliers of a thread type\nCREATE INDEX idx_thread_type_supplier_thread_type_id ON thread_type_supplier(thread_type_id)","-- Index for looking up thread types of a supplier\nCREATE INDEX idx_thread_type_supplier_supplier_id ON thread_type_supplier(supplier_id)","-- Index for active records only (partial index)\nCREATE INDEX idx_thread_type_supplier_is_active ON thread_type_supplier(is_active) WHERE is_active = TRUE","-- Index for searching by supplier item code\nCREATE INDEX idx_thread_type_supplier_item_code ON thread_type_supplier(supplier_item_code)","-- ============================================================================\n-- TRIGGER: Update updated_at on modification\n-- Uses existing update_updated_at_column() from thread_types migration\n-- ============================================================================\n\nCREATE TRIGGER trigger_thread_type_supplier_updated_at\n    BEFORE UPDATE ON thread_type_supplier\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()"}	thread_type_supplier
20250206110000	{"-- ============================================================================\n-- Migration: 20250206110000_create_purchase_orders.sql\n-- Description: Bang don hang (Purchase Orders)\n-- Dependencies: None\n-- ============================================================================\n\n-- ============================================================================\n-- TABLE: purchase_orders\n-- ============================================================================\n\nCREATE TABLE purchase_orders (\n    id SERIAL PRIMARY KEY,\n    \n    -- Order information\n    po_number VARCHAR(50) NOT NULL UNIQUE,\n    customer_name VARCHAR(255),\n    \n    -- Dates\n    order_date TIMESTAMPTZ,\n    delivery_date TIMESTAMPTZ,\n    \n    -- Status and priority\n    status VARCHAR(20) DEFAULT 'pending',\n    priority VARCHAR(10) DEFAULT 'normal',\n    \n    -- Additional info\n    notes TEXT,\n    \n    -- Timestamps\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","-- ============================================================================\n-- COMMENTS (Vietnamese + English)\n-- ============================================================================\n\nCOMMENT ON TABLE purchase_orders IS 'Bang don hang tu khach hang - Purchase Orders from customers'","COMMENT ON COLUMN purchase_orders.id IS 'Khoa chinh tu tang'","COMMENT ON COLUMN purchase_orders.po_number IS 'So hieu don hang - PO Number'","COMMENT ON COLUMN purchase_orders.customer_name IS 'Ten khach hang - Customer Name'","COMMENT ON COLUMN purchase_orders.order_date IS 'Ngay dat hang - Order Date'","COMMENT ON COLUMN purchase_orders.delivery_date IS 'Ngay giao hang du kien - Expected Delivery Date'","COMMENT ON COLUMN purchase_orders.status IS 'Trang thai don hang - Order Status'","COMMENT ON COLUMN purchase_orders.priority IS 'Muc do uu tien - Priority Level'","COMMENT ON COLUMN purchase_orders.notes IS 'Ghi chu - Notes'","COMMENT ON COLUMN purchase_orders.created_at IS 'Thoi diem tao ban ghi'","COMMENT ON COLUMN purchase_orders.updated_at IS 'Thoi diem cap nhat gan nhat'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\nCREATE INDEX idx_purchase_orders_po_number ON purchase_orders(po_number)","CREATE INDEX idx_purchase_orders_status ON purchase_orders(status)","CREATE INDEX idx_purchase_orders_customer_name ON purchase_orders(customer_name)","CREATE INDEX idx_purchase_orders_order_date ON purchase_orders(order_date)","-- ============================================================================\n-- TRIGGER: Update updated_at on modification\n-- ============================================================================\n\nCREATE TRIGGER trigger_purchase_orders_updated_at\n    BEFORE UPDATE ON purchase_orders\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()"}	create_purchase_orders
20250206110200	{"-- ============================================================================\n-- Migration: 20250206110200_create_po_items.sql\n-- Description: Bang chi tiet don hang (PO Items) - Junction PO va Style\n-- Dependencies: purchase_orders, styles\n-- ============================================================================\n\n-- ============================================================================\n-- TABLE: po_items\n-- ============================================================================\n\nCREATE TABLE po_items (\n    id SERIAL PRIMARY KEY,\n    \n    -- Foreign Keys\n    po_id INTEGER NOT NULL REFERENCES purchase_orders(id) ON DELETE CASCADE,\n    style_id INTEGER NOT NULL REFERENCES styles(id) ON DELETE RESTRICT,\n    \n    -- Quantity and notes\n    quantity INTEGER NOT NULL DEFAULT 0,\n    notes TEXT,\n    \n    -- Timestamps\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","-- ============================================================================\n-- COMMENTS (Vietnamese + English)\n-- ============================================================================\n\nCOMMENT ON TABLE po_items IS 'Bang chi tiet don hang - Lien ket PO va Style - PO Items junction table'","COMMENT ON COLUMN po_items.id IS 'Khoa chinh tu tang'","COMMENT ON COLUMN po_items.po_id IS 'FK den bang purchase_orders - Ma don hang'","COMMENT ON COLUMN po_items.style_id IS 'FK den bang styles - Ma hang san pham'","COMMENT ON COLUMN po_items.quantity IS 'So luong dat hang'","COMMENT ON COLUMN po_items.notes IS 'Ghi chu'","COMMENT ON COLUMN po_items.created_at IS 'Thoi diem tao ban ghi'","COMMENT ON COLUMN po_items.updated_at IS 'Thoi diem cap nhat gan nhat'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\nCREATE INDEX idx_po_items_po_id ON po_items(po_id)","CREATE INDEX idx_po_items_style_id ON po_items(style_id)","-- ============================================================================\n-- TRIGGER: Update updated_at on modification\n-- ============================================================================\n\nCREATE TRIGGER trigger_po_items_updated_at\n    BEFORE UPDATE ON po_items\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()"}	create_po_items
20250206110300	{"-- ============================================================================\n-- Migration: 20250206110300_create_skus.sql\n-- Description: Bang SKU - Chi tiet Style + Color + Size\n-- Dependencies: po_items, colors\n-- ============================================================================\n\n-- ============================================================================\n-- TABLE: skus\n-- ============================================================================\n\nCREATE TABLE skus (\n    id SERIAL PRIMARY KEY,\n    \n    -- Foreign Keys\n    po_item_id INTEGER NOT NULL REFERENCES po_items(id) ON DELETE CASCADE,\n    color_id INTEGER NOT NULL REFERENCES colors(id) ON DELETE RESTRICT,\n    \n    -- SKU details\n    size VARCHAR(50),\n    quantity INTEGER NOT NULL DEFAULT 0,\n    \n    -- Timestamps\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","-- ============================================================================\n-- COMMENTS (Vietnamese + English)\n-- ============================================================================\n\nCOMMENT ON TABLE skus IS 'Bang SKU - Chi tiet Style + Mau + Size - SKU details table'","COMMENT ON COLUMN skus.id IS 'Khoa chinh tu tang'","COMMENT ON COLUMN skus.po_item_id IS 'FK den bang po_items - Ma chi tiet don hang'","COMMENT ON COLUMN skus.color_id IS 'FK den bang colors - Ma mau sac'","COMMENT ON COLUMN skus.size IS 'Kich thuoc (Size)'","COMMENT ON COLUMN skus.quantity IS 'So luong'","COMMENT ON COLUMN skus.created_at IS 'Thoi diem tao ban ghi'","COMMENT ON COLUMN skus.updated_at IS 'Thoi diem cap nhat gan nhat'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\nCREATE INDEX idx_skus_po_item_id ON skus(po_item_id)","CREATE INDEX idx_skus_color_id ON skus(color_id)","-- ============================================================================\n-- TRIGGER: Update updated_at on modification\n-- ============================================================================\n\nCREATE TRIGGER trigger_skus_updated_at\n    BEFORE UPDATE ON skus\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()"}	create_skus
20250206110400	{"-- ============================================================================\n-- Migration: 20250206110400_create_style_thread_specs.sql\n-- Description: Bang dinh muc chi template - Template thread specs per style\n-- Dependencies: styles, suppliers, thread_types\n-- ============================================================================\n\n-- ============================================================================\n-- TABLE: style_thread_specs\n-- ============================================================================\n\nCREATE TABLE style_thread_specs (\n    id SERIAL PRIMARY KEY,\n    \n    -- Foreign Keys\n    style_id INTEGER NOT NULL REFERENCES styles(id) ON DELETE CASCADE,\n    supplier_id INTEGER NOT NULL REFERENCES suppliers(id) ON DELETE RESTRICT,\n    \n    -- Specification details\n    process_name VARCHAR(255) NOT NULL,\n    tex_id INTEGER REFERENCES thread_types(id) ON DELETE SET NULL,\n    meters_per_unit DECIMAL(10,2) NOT NULL DEFAULT 0,\n    notes TEXT,\n    \n    -- Timestamps\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","-- ============================================================================\n-- COMMENTS (Vietnamese + English)\n-- ============================================================================\n\nCOMMENT ON TABLE style_thread_specs IS 'Bang dinh muc chi template - Template thread specs per style'","COMMENT ON COLUMN style_thread_specs.id IS 'Khoa chinh tu tang'","COMMENT ON COLUMN style_thread_specs.style_id IS 'FK den bang styles - Ma hang san pham'","COMMENT ON COLUMN style_thread_specs.supplier_id IS 'FK den bang suppliers - Ma nha cung cap'","COMMENT ON COLUMN style_thread_specs.process_name IS 'Ten cong doan (vd: May than, May tay, v.v.)'","COMMENT ON COLUMN style_thread_specs.tex_id IS 'FK den bang thread_types - Loai chi (Tex)'","COMMENT ON COLUMN style_thread_specs.meters_per_unit IS 'Dinh muc met chi / 1 san pham'","COMMENT ON COLUMN style_thread_specs.notes IS 'Ghi chu'","COMMENT ON COLUMN style_thread_specs.created_at IS 'Thoi diem tao ban ghi'","COMMENT ON COLUMN style_thread_specs.updated_at IS 'Thoi diem cap nhat gan nhat'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\nCREATE INDEX idx_style_thread_specs_style_id ON style_thread_specs(style_id)","CREATE INDEX idx_style_thread_specs_supplier_id ON style_thread_specs(supplier_id)","CREATE INDEX idx_style_thread_specs_tex_id ON style_thread_specs(tex_id)","-- ============================================================================\n-- TRIGGER: Update updated_at on modification\n-- ============================================================================\n\nCREATE TRIGGER trigger_style_thread_specs_updated_at\n    BEFORE UPDATE ON style_thread_specs\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()"}	create_style_thread_specs
20250206110500	{"-- ============================================================================\n-- Migration: 20250206110500_create_style_color_thread_specs.sql\n-- Description: Bang dinh muc chi chi tiet theo mau - Color-specific thread specs\n-- Dependencies: style_thread_specs, colors, thread_types\n-- ============================================================================\n\n-- ============================================================================\n-- TABLE: style_color_thread_specs\n-- ============================================================================\n\nCREATE TABLE style_color_thread_specs (\n    id SERIAL PRIMARY KEY,\n    \n    -- Foreign Keys\n    style_thread_spec_id INTEGER NOT NULL REFERENCES style_thread_specs(id) ON DELETE CASCADE,\n    color_id INTEGER NOT NULL REFERENCES colors(id) ON DELETE RESTRICT,\n    thread_type_id INTEGER NOT NULL REFERENCES thread_types(id) ON DELETE RESTRICT,\n    \n    -- Additional notes\n    notes TEXT,\n    \n    -- Timestamps\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    \n    -- Constraints\n    UNIQUE(style_thread_spec_id, color_id)\n)","-- ============================================================================\n-- COMMENTS (Vietnamese + English)\n-- ============================================================================\n\nCOMMENT ON TABLE style_color_thread_specs IS 'Bang dinh muc chi chi tiet theo mau - Color-specific thread specs'","COMMENT ON COLUMN style_color_thread_specs.id IS 'Khoa chinh tu tang'","COMMENT ON COLUMN style_color_thread_specs.style_thread_spec_id IS 'FK den bang style_thread_specs - Template dinh muc'","COMMENT ON COLUMN style_color_thread_specs.color_id IS 'FK den bang colors - Ma mau chi cu the'","COMMENT ON COLUMN style_color_thread_specs.thread_type_id IS 'FK den bang thread_types - Loai chi day du (NCC + Tex + Mau)'","COMMENT ON COLUMN style_color_thread_specs.notes IS 'Ghi chu'","COMMENT ON COLUMN style_color_thread_specs.created_at IS 'Thoi diem tao ban ghi'","COMMENT ON COLUMN style_color_thread_specs.updated_at IS 'Thoi diem cap nhat gan nhat'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\nCREATE INDEX idx_style_color_thread_specs_spec_id ON style_color_thread_specs(style_thread_spec_id)","CREATE INDEX idx_style_color_thread_specs_color_id ON style_color_thread_specs(color_id)","CREATE INDEX idx_style_color_thread_specs_thread_type_id ON style_color_thread_specs(thread_type_id)","-- ============================================================================\n-- TRIGGER: Update updated_at on modification\n-- ============================================================================\n\nCREATE TRIGGER trigger_style_color_thread_specs_updated_at\n    BEFORE UPDATE ON style_color_thread_specs\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()"}	create_style_color_thread_specs
20260206215302	{"-- Migration: 20260206215302_add_display_order_to_style_thread_specs.sql\n-- Description: Add display_order column for persistent row ordering\n-- Author: OpenSpec\n\n-- Step 1: Add column with default value\nALTER TABLE style_thread_specs \nADD COLUMN IF NOT EXISTS display_order INTEGER NOT NULL DEFAULT 0","-- Step 2: Populate existing rows with sequential display_order per style_id\n-- Rows are ordered by created_at DESC (newest first gets display_order=0)\n-- This preserves the current visual order\nWITH ranked AS (\n  SELECT \n    id,\n    ROW_NUMBER() OVER (PARTITION BY style_id ORDER BY created_at DESC) - 1 AS new_order\n  FROM style_thread_specs\n)\nUPDATE style_thread_specs \nSET display_order = ranked.new_order\nFROM ranked \nWHERE style_thread_specs.id = ranked.id","-- Step 3: Add index for efficient ordering queries\nCREATE INDEX IF NOT EXISTS idx_style_thread_specs_display_order \nON style_thread_specs(style_id, display_order)","-- Comments\nCOMMENT ON COLUMN style_thread_specs.display_order IS 'Display order within same style (lower = higher in list, 0 = first)'"}	add_display_order_to_style_thread_specs
20260208	{"-- ============================================================================\n-- Migration: 20260208_create_weekly_thread_orders.sql\n-- Description: Tao bang dat chi theo tuan - Weekly thread ordering tables\n-- Dependencies: styles, colors\n-- ============================================================================\n\n-- ============================================================================\n-- TABLE: thread_order_weeks\n-- Tuan dat chi - Each record represents one ordering week\n-- ============================================================================\n\nCREATE TABLE thread_order_weeks (\n    id SERIAL PRIMARY KEY,\n\n    -- Week information\n    week_name VARCHAR(50) NOT NULL,\n    start_date DATE,\n    end_date DATE,\n    status VARCHAR(20) NOT NULL DEFAULT 'draft',\n    notes TEXT,\n    created_by VARCHAR(50),\n\n    -- Timestamps\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW()\n)","-- ============================================================================\n-- COMMENTS\n-- ============================================================================\n\nCOMMENT ON TABLE thread_order_weeks IS 'Tuan dat chi - Weekly thread order periods'","COMMENT ON COLUMN thread_order_weeks.id IS 'Khoa chinh tu tang'","COMMENT ON COLUMN thread_order_weeks.week_name IS 'Ten tuan (vd: Tuan 6 - 2026)'","COMMENT ON COLUMN thread_order_weeks.start_date IS 'Ngay bat dau tuan'","COMMENT ON COLUMN thread_order_weeks.end_date IS 'Ngay ket thuc tuan'","COMMENT ON COLUMN thread_order_weeks.status IS 'Trang thai: draft, confirmed, calculated, closed'","COMMENT ON COLUMN thread_order_weeks.notes IS 'Ghi chu'","COMMENT ON COLUMN thread_order_weeks.created_by IS 'Nguoi tao'","COMMENT ON COLUMN thread_order_weeks.created_at IS 'Thoi diem tao ban ghi'","COMMENT ON COLUMN thread_order_weeks.updated_at IS 'Thoi diem cap nhat gan nhat'","-- ============================================================================\n-- TRIGGER: Update updated_at on modification\n-- ============================================================================\n\nCREATE TRIGGER trigger_thread_order_weeks_updated_at\n    BEFORE UPDATE ON thread_order_weeks\n    FOR EACH ROW\n    EXECUTE FUNCTION update_updated_at_column()","-- ============================================================================\n-- TABLE: thread_order_items\n-- Chi tiet don dat chi theo tuan - Items per week (style + color + quantity)\n-- ============================================================================\n\nCREATE TABLE thread_order_items (\n    id SERIAL PRIMARY KEY,\n\n    -- Foreign Keys\n    week_id INTEGER NOT NULL REFERENCES thread_order_weeks(id) ON DELETE CASCADE,\n    style_id INTEGER NOT NULL REFERENCES styles(id) ON DELETE RESTRICT,\n    color_id INTEGER NOT NULL REFERENCES colors(id) ON DELETE RESTRICT,\n\n    -- Order detail\n    quantity INTEGER NOT NULL CHECK (quantity > 0),\n\n    -- Timestamps\n    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n\n    -- Unique constraint: one entry per style+color per week\n    UNIQUE(week_id, style_id, color_id)\n)","-- ============================================================================\n-- COMMENTS\n-- ============================================================================\n\nCOMMENT ON TABLE thread_order_items IS 'Chi tiet don dat chi - Order items per week (style + color + quantity)'","COMMENT ON COLUMN thread_order_items.id IS 'Khoa chinh tu tang'","COMMENT ON COLUMN thread_order_items.week_id IS 'FK den bang thread_order_weeks - Tuan dat chi'","COMMENT ON COLUMN thread_order_items.style_id IS 'FK den bang styles - Ma hang san pham'","COMMENT ON COLUMN thread_order_items.color_id IS 'FK den bang colors - Mau sac'","COMMENT ON COLUMN thread_order_items.quantity IS 'So luong san pham can dat chi (phai > 0)'","COMMENT ON COLUMN thread_order_items.created_at IS 'Thoi diem tao ban ghi'","-- ============================================================================\n-- TABLE: thread_order_results\n-- Ket qua tinh toan chi cho tuan - Calculation results stored as JSON\n-- ============================================================================\n\nCREATE TABLE thread_order_results (\n    id SERIAL PRIMARY KEY,\n\n    -- Foreign Key\n    week_id INTEGER NOT NULL REFERENCES thread_order_weeks(id) ON DELETE CASCADE,\n\n    -- Result data\n    calculation_data JSONB NOT NULL,\n    summary_data JSONB NOT NULL,\n\n    -- Timestamps\n    calculated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),\n\n    -- One result set per week\n    UNIQUE(week_id)\n)","-- ============================================================================\n-- COMMENTS\n-- ============================================================================\n\nCOMMENT ON TABLE thread_order_results IS 'Ket qua tinh toan chi - Thread calculation results per week'","COMMENT ON COLUMN thread_order_results.id IS 'Khoa chinh tu tang'","COMMENT ON COLUMN thread_order_results.week_id IS 'FK den bang thread_order_weeks - Tuan dat chi'","COMMENT ON COLUMN thread_order_results.calculation_data IS 'Du lieu tinh toan chi tiet (JSONB)'","COMMENT ON COLUMN thread_order_results.summary_data IS 'Du lieu tong hop (JSONB)'","COMMENT ON COLUMN thread_order_results.calculated_at IS 'Thoi diem tinh toan'","-- ============================================================================\n-- INDEXES\n-- ============================================================================\n\nCREATE INDEX idx_thread_order_items_week_id ON thread_order_items(week_id)","CREATE INDEX idx_thread_order_items_style_id ON thread_order_items(style_id)","CREATE INDEX idx_thread_order_weeks_status ON thread_order_weeks(status)"}	create_weekly_thread_orders
20260209	{"-- ============================================================================\n-- Migration: 20260209_add_po_id_to_thread_order_items.sql\n-- Description: Them cot po_id vao thread_order_items de lien ket voi PO\n-- Dependencies: purchase_orders, thread_order_items\n-- ============================================================================\n\n-- Them cot po_id\nALTER TABLE thread_order_items\n  ADD COLUMN po_id INTEGER REFERENCES purchase_orders(id) ON DELETE RESTRICT","-- Xoa constraint cu (week_id, style_id, color_id)\nALTER TABLE thread_order_items\n  DROP CONSTRAINT thread_order_items_week_id_style_id_color_id_key","-- Them constraint moi bao gom po_id\nALTER TABLE thread_order_items\n  ADD CONSTRAINT thread_order_items_week_po_style_color_key\n  UNIQUE(week_id, po_id, style_id, color_id)","-- Index cho po_id\nCREATE INDEX idx_thread_order_items_po_id ON thread_order_items(po_id)","-- Comment\nCOMMENT ON COLUMN thread_order_items.po_id IS 'FK den bang purchase_orders - Don hang (PO)'"}	add_po_id_to_thread_order_items
\.


--
-- Data for Name: secrets; Type: TABLE DATA; Schema: vault; Owner: supabase_admin
--

COPY vault.secrets (id, name, description, secret, key_id, nonce, created_at, updated_at) FROM stdin;
\.


--
-- Name: refresh_tokens_id_seq; Type: SEQUENCE SET; Schema: auth; Owner: supabase_auth_admin
--

SELECT pg_catalog.setval('auth.refresh_tokens_id_seq', 1, false);


--
-- Name: batch_transactions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.batch_transactions_id_seq', 1, false);


--
-- Name: color_supplier_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.color_supplier_id_seq', 1, false);


--
-- Name: colors_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.colors_id_seq', 25, true);


--
-- Name: employee_permissions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.employee_permissions_id_seq', 1, false);


--
-- Name: employee_refresh_tokens_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.employee_refresh_tokens_id_seq', 2, true);


--
-- Name: employee_roles_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.employee_roles_id_seq', 1, true);


--
-- Name: employees_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.employees_id_seq', 18, true);


--
-- Name: lots_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.lots_id_seq', 1, false);


--
-- Name: permissions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.permissions_id_seq', 35, true);


--
-- Name: po_items_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.po_items_id_seq', 23, true);


--
-- Name: purchase_orders_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.purchase_orders_id_seq', 20, true);


--
-- Name: role_permissions_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.role_permissions_id_seq', 79, true);


--
-- Name: roles_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.roles_id_seq', 7, true);


--
-- Name: skus_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.skus_id_seq', 22, true);


--
-- Name: style_color_thread_specs_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.style_color_thread_specs_id_seq', 85, true);


--
-- Name: style_thread_specs_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.style_thread_specs_id_seq', 64, true);


--
-- Name: styles_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.styles_id_seq', 20, true);


--
-- Name: suppliers_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.suppliers_id_seq', 12, true);


--
-- Name: system_settings_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.system_settings_id_seq', 1, true);


--
-- Name: thread_allocation_cones_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_allocation_cones_id_seq', 1, false);


--
-- Name: thread_allocations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_allocations_id_seq', 26, true);


--
-- Name: thread_audit_log_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_audit_log_id_seq', 348, true);


--
-- Name: thread_conflict_allocations_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_conflict_allocations_id_seq', 1, false);


--
-- Name: thread_conflicts_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_conflicts_id_seq', 1, false);


--
-- Name: thread_inventory_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_inventory_id_seq', 2714, true);


--
-- Name: thread_issue_items_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_issue_items_id_seq', 1, false);


--
-- Name: thread_issue_lines_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_issue_lines_id_seq', 10, true);


--
-- Name: thread_issue_requests_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_issue_requests_id_seq', 1, true);


--
-- Name: thread_issue_returns_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_issue_returns_id_seq', 1, false);


--
-- Name: thread_issues_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_issues_id_seq', 21, true);


--
-- Name: thread_movements_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_movements_id_seq', 1, false);


--
-- Name: thread_order_deliveries_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_order_deliveries_id_seq', 6, true);


--
-- Name: thread_order_items_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_order_items_id_seq', 11, true);


--
-- Name: thread_order_results_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_order_results_id_seq', 4, true);


--
-- Name: thread_order_weeks_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_order_weeks_id_seq', 2, true);


--
-- Name: thread_recovery_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_recovery_id_seq', 1, false);


--
-- Name: thread_stock_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_stock_id_seq', 1, false);


--
-- Name: thread_type_supplier_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_type_supplier_id_seq', 1, true);


--
-- Name: thread_types_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.thread_types_id_seq', 50, true);


--
-- Name: warehouses_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.warehouses_id_seq', 6, true);


--
-- Name: subscription_id_seq; Type: SEQUENCE SET; Schema: realtime; Owner: supabase_admin
--

SELECT pg_catalog.setval('realtime.subscription_id_seq', 1, false);


--
-- Name: hooks_id_seq; Type: SEQUENCE SET; Schema: supabase_functions; Owner: supabase_functions_admin
--

SELECT pg_catalog.setval('supabase_functions.hooks_id_seq', 1, false);


--
-- Name: extensions extensions_pkey; Type: CONSTRAINT; Schema: _realtime; Owner: supabase_admin
--

ALTER TABLE ONLY _realtime.extensions
    ADD CONSTRAINT extensions_pkey PRIMARY KEY (id);


--
-- Name: schema_migrations schema_migrations_pkey; Type: CONSTRAINT; Schema: _realtime; Owner: supabase_admin
--

ALTER TABLE ONLY _realtime.schema_migrations
    ADD CONSTRAINT schema_migrations_pkey PRIMARY KEY (version);


--
-- Name: tenants tenants_pkey; Type: CONSTRAINT; Schema: _realtime; Owner: supabase_admin
--

ALTER TABLE ONLY _realtime.tenants
    ADD CONSTRAINT tenants_pkey PRIMARY KEY (id);


--
-- Name: mfa_amr_claims amr_id_pk; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.mfa_amr_claims
    ADD CONSTRAINT amr_id_pk PRIMARY KEY (id);


--
-- Name: audit_log_entries audit_log_entries_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.audit_log_entries
    ADD CONSTRAINT audit_log_entries_pkey PRIMARY KEY (id);


--
-- Name: flow_state flow_state_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.flow_state
    ADD CONSTRAINT flow_state_pkey PRIMARY KEY (id);


--
-- Name: identities identities_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.identities
    ADD CONSTRAINT identities_pkey PRIMARY KEY (id);


--
-- Name: identities identities_provider_id_provider_unique; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.identities
    ADD CONSTRAINT identities_provider_id_provider_unique UNIQUE (provider_id, provider);


--
-- Name: instances instances_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.instances
    ADD CONSTRAINT instances_pkey PRIMARY KEY (id);


--
-- Name: mfa_amr_claims mfa_amr_claims_session_id_authentication_method_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.mfa_amr_claims
    ADD CONSTRAINT mfa_amr_claims_session_id_authentication_method_pkey UNIQUE (session_id, authentication_method);


--
-- Name: mfa_challenges mfa_challenges_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.mfa_challenges
    ADD CONSTRAINT mfa_challenges_pkey PRIMARY KEY (id);


--
-- Name: mfa_factors mfa_factors_last_challenged_at_key; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.mfa_factors
    ADD CONSTRAINT mfa_factors_last_challenged_at_key UNIQUE (last_challenged_at);


--
-- Name: mfa_factors mfa_factors_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.mfa_factors
    ADD CONSTRAINT mfa_factors_pkey PRIMARY KEY (id);


--
-- Name: oauth_authorizations oauth_authorizations_authorization_code_key; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.oauth_authorizations
    ADD CONSTRAINT oauth_authorizations_authorization_code_key UNIQUE (authorization_code);


--
-- Name: oauth_authorizations oauth_authorizations_authorization_id_key; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.oauth_authorizations
    ADD CONSTRAINT oauth_authorizations_authorization_id_key UNIQUE (authorization_id);


--
-- Name: oauth_authorizations oauth_authorizations_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.oauth_authorizations
    ADD CONSTRAINT oauth_authorizations_pkey PRIMARY KEY (id);


--
-- Name: oauth_client_states oauth_client_states_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.oauth_client_states
    ADD CONSTRAINT oauth_client_states_pkey PRIMARY KEY (id);


--
-- Name: oauth_clients oauth_clients_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.oauth_clients
    ADD CONSTRAINT oauth_clients_pkey PRIMARY KEY (id);


--
-- Name: oauth_consents oauth_consents_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.oauth_consents
    ADD CONSTRAINT oauth_consents_pkey PRIMARY KEY (id);


--
-- Name: oauth_consents oauth_consents_user_client_unique; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.oauth_consents
    ADD CONSTRAINT oauth_consents_user_client_unique UNIQUE (user_id, client_id);


--
-- Name: one_time_tokens one_time_tokens_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.one_time_tokens
    ADD CONSTRAINT one_time_tokens_pkey PRIMARY KEY (id);


--
-- Name: refresh_tokens refresh_tokens_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.refresh_tokens
    ADD CONSTRAINT refresh_tokens_pkey PRIMARY KEY (id);


--
-- Name: refresh_tokens refresh_tokens_token_unique; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.refresh_tokens
    ADD CONSTRAINT refresh_tokens_token_unique UNIQUE (token);


--
-- Name: saml_providers saml_providers_entity_id_key; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.saml_providers
    ADD CONSTRAINT saml_providers_entity_id_key UNIQUE (entity_id);


--
-- Name: saml_providers saml_providers_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.saml_providers
    ADD CONSTRAINT saml_providers_pkey PRIMARY KEY (id);


--
-- Name: saml_relay_states saml_relay_states_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.saml_relay_states
    ADD CONSTRAINT saml_relay_states_pkey PRIMARY KEY (id);


--
-- Name: schema_migrations schema_migrations_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.schema_migrations
    ADD CONSTRAINT schema_migrations_pkey PRIMARY KEY (version);


--
-- Name: sessions sessions_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.sessions
    ADD CONSTRAINT sessions_pkey PRIMARY KEY (id);


--
-- Name: sso_domains sso_domains_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.sso_domains
    ADD CONSTRAINT sso_domains_pkey PRIMARY KEY (id);


--
-- Name: sso_providers sso_providers_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.sso_providers
    ADD CONSTRAINT sso_providers_pkey PRIMARY KEY (id);


--
-- Name: users users_phone_key; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.users
    ADD CONSTRAINT users_phone_key UNIQUE (phone);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: batch_transactions batch_transactions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.batch_transactions
    ADD CONSTRAINT batch_transactions_pkey PRIMARY KEY (id);


--
-- Name: color_supplier color_supplier_color_id_supplier_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.color_supplier
    ADD CONSTRAINT color_supplier_color_id_supplier_id_key UNIQUE (color_id, supplier_id);


--
-- Name: color_supplier color_supplier_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.color_supplier
    ADD CONSTRAINT color_supplier_pkey PRIMARY KEY (id);


--
-- Name: colors colors_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.colors
    ADD CONSTRAINT colors_name_key UNIQUE (name);


--
-- Name: colors colors_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.colors
    ADD CONSTRAINT colors_pkey PRIMARY KEY (id);


--
-- Name: employee_permissions employee_permissions_employee_id_permission_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_permissions
    ADD CONSTRAINT employee_permissions_employee_id_permission_id_key UNIQUE (employee_id, permission_id);


--
-- Name: employee_permissions employee_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_permissions
    ADD CONSTRAINT employee_permissions_pkey PRIMARY KEY (id);


--
-- Name: employee_refresh_tokens employee_refresh_tokens_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_refresh_tokens
    ADD CONSTRAINT employee_refresh_tokens_pkey PRIMARY KEY (id);


--
-- Name: employee_roles employee_roles_employee_id_role_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_roles
    ADD CONSTRAINT employee_roles_employee_id_role_id_key UNIQUE (employee_id, role_id);


--
-- Name: employee_roles employee_roles_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_roles
    ADD CONSTRAINT employee_roles_pkey PRIMARY KEY (id);


--
-- Name: employees employees_employee_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employees
    ADD CONSTRAINT employees_employee_id_key UNIQUE (employee_id);


--
-- Name: employees employees_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employees
    ADD CONSTRAINT employees_pkey PRIMARY KEY (id);


--
-- Name: lots lots_lot_number_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.lots
    ADD CONSTRAINT lots_lot_number_key UNIQUE (lot_number);


--
-- Name: lots lots_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.lots
    ADD CONSTRAINT lots_pkey PRIMARY KEY (id);


--
-- Name: permissions permissions_code_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.permissions
    ADD CONSTRAINT permissions_code_key UNIQUE (code);


--
-- Name: permissions permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.permissions
    ADD CONSTRAINT permissions_pkey PRIMARY KEY (id);


--
-- Name: po_items po_items_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.po_items
    ADD CONSTRAINT po_items_pkey PRIMARY KEY (id);


--
-- Name: purchase_orders purchase_orders_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.purchase_orders
    ADD CONSTRAINT purchase_orders_pkey PRIMARY KEY (id);


--
-- Name: purchase_orders purchase_orders_po_number_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.purchase_orders
    ADD CONSTRAINT purchase_orders_po_number_key UNIQUE (po_number);


--
-- Name: role_permissions role_permissions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.role_permissions
    ADD CONSTRAINT role_permissions_pkey PRIMARY KEY (id);


--
-- Name: role_permissions role_permissions_role_id_permission_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.role_permissions
    ADD CONSTRAINT role_permissions_role_id_permission_id_key UNIQUE (role_id, permission_id);


--
-- Name: roles roles_code_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_code_key UNIQUE (code);


--
-- Name: roles roles_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.roles
    ADD CONSTRAINT roles_pkey PRIMARY KEY (id);


--
-- Name: skus skus_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.skus
    ADD CONSTRAINT skus_pkey PRIMARY KEY (id);


--
-- Name: style_color_thread_specs style_color_thread_specs_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.style_color_thread_specs
    ADD CONSTRAINT style_color_thread_specs_pkey PRIMARY KEY (id);


--
-- Name: style_color_thread_specs style_color_thread_specs_style_thread_spec_id_color_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.style_color_thread_specs
    ADD CONSTRAINT style_color_thread_specs_style_thread_spec_id_color_id_key UNIQUE (style_thread_spec_id, color_id);


--
-- Name: style_thread_specs style_thread_specs_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.style_thread_specs
    ADD CONSTRAINT style_thread_specs_pkey PRIMARY KEY (id);


--
-- Name: styles styles_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.styles
    ADD CONSTRAINT styles_pkey PRIMARY KEY (id);


--
-- Name: styles styles_style_code_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.styles
    ADD CONSTRAINT styles_style_code_key UNIQUE (style_code);


--
-- Name: suppliers suppliers_code_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.suppliers
    ADD CONSTRAINT suppliers_code_key UNIQUE (code);


--
-- Name: suppliers suppliers_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.suppliers
    ADD CONSTRAINT suppliers_pkey PRIMARY KEY (id);


--
-- Name: system_settings system_settings_key_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.system_settings
    ADD CONSTRAINT system_settings_key_key UNIQUE (key);


--
-- Name: system_settings system_settings_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.system_settings
    ADD CONSTRAINT system_settings_pkey PRIMARY KEY (id);


--
-- Name: thread_allocation_cones thread_allocation_cones_allocation_id_cone_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_allocation_cones
    ADD CONSTRAINT thread_allocation_cones_allocation_id_cone_id_key UNIQUE (allocation_id, cone_id);


--
-- Name: thread_allocation_cones thread_allocation_cones_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_allocation_cones
    ADD CONSTRAINT thread_allocation_cones_pkey PRIMARY KEY (id);


--
-- Name: thread_allocations thread_allocations_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_allocations
    ADD CONSTRAINT thread_allocations_pkey PRIMARY KEY (id);


--
-- Name: thread_audit_log thread_audit_log_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_audit_log
    ADD CONSTRAINT thread_audit_log_pkey PRIMARY KEY (id);


--
-- Name: thread_conflict_allocations thread_conflict_allocations_conflict_id_allocation_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_conflict_allocations
    ADD CONSTRAINT thread_conflict_allocations_conflict_id_allocation_id_key UNIQUE (conflict_id, allocation_id);


--
-- Name: thread_conflict_allocations thread_conflict_allocations_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_conflict_allocations
    ADD CONSTRAINT thread_conflict_allocations_pkey PRIMARY KEY (id);


--
-- Name: thread_conflicts thread_conflicts_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_conflicts
    ADD CONSTRAINT thread_conflicts_pkey PRIMARY KEY (id);


--
-- Name: thread_inventory thread_inventory_cone_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_inventory
    ADD CONSTRAINT thread_inventory_cone_id_key UNIQUE (cone_id);


--
-- Name: thread_inventory thread_inventory_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_inventory
    ADD CONSTRAINT thread_inventory_pkey PRIMARY KEY (id);


--
-- Name: thread_issue_items thread_issue_items_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_items
    ADD CONSTRAINT thread_issue_items_pkey PRIMARY KEY (id);


--
-- Name: thread_issue_lines thread_issue_lines_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_lines
    ADD CONSTRAINT thread_issue_lines_pkey PRIMARY KEY (id);


--
-- Name: thread_issue_requests thread_issue_requests_issue_code_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_requests
    ADD CONSTRAINT thread_issue_requests_issue_code_key UNIQUE (issue_code);


--
-- Name: thread_issue_requests thread_issue_requests_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_requests
    ADD CONSTRAINT thread_issue_requests_pkey PRIMARY KEY (id);


--
-- Name: thread_issue_returns thread_issue_returns_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_returns
    ADD CONSTRAINT thread_issue_returns_pkey PRIMARY KEY (id);


--
-- Name: thread_issues thread_issues_issue_code_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issues
    ADD CONSTRAINT thread_issues_issue_code_key UNIQUE (issue_code);


--
-- Name: thread_issues thread_issues_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issues
    ADD CONSTRAINT thread_issues_pkey PRIMARY KEY (id);


--
-- Name: thread_movements thread_movements_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_movements
    ADD CONSTRAINT thread_movements_pkey PRIMARY KEY (id);


--
-- Name: thread_order_deliveries thread_order_deliveries_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_deliveries
    ADD CONSTRAINT thread_order_deliveries_pkey PRIMARY KEY (id);


--
-- Name: thread_order_deliveries thread_order_deliveries_week_id_thread_type_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_deliveries
    ADD CONSTRAINT thread_order_deliveries_week_id_thread_type_id_key UNIQUE (week_id, thread_type_id);


--
-- Name: thread_order_items thread_order_items_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_items
    ADD CONSTRAINT thread_order_items_pkey PRIMARY KEY (id);


--
-- Name: thread_order_items thread_order_items_week_po_style_color_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_items
    ADD CONSTRAINT thread_order_items_week_po_style_color_key UNIQUE (week_id, po_id, style_id, color_id);


--
-- Name: thread_order_results thread_order_results_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_results
    ADD CONSTRAINT thread_order_results_pkey PRIMARY KEY (id);


--
-- Name: thread_order_results thread_order_results_week_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_results
    ADD CONSTRAINT thread_order_results_week_id_key UNIQUE (week_id);


--
-- Name: thread_order_weeks thread_order_weeks_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_weeks
    ADD CONSTRAINT thread_order_weeks_pkey PRIMARY KEY (id);


--
-- Name: thread_recovery thread_recovery_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_recovery
    ADD CONSTRAINT thread_recovery_pkey PRIMARY KEY (id);


--
-- Name: thread_stock thread_stock_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_stock
    ADD CONSTRAINT thread_stock_pkey PRIMARY KEY (id);


--
-- Name: thread_type_supplier thread_type_supplier_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_type_supplier
    ADD CONSTRAINT thread_type_supplier_pkey PRIMARY KEY (id);


--
-- Name: thread_type_supplier thread_type_supplier_supplier_id_supplier_item_code_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_type_supplier
    ADD CONSTRAINT thread_type_supplier_supplier_id_supplier_item_code_key UNIQUE (supplier_id, supplier_item_code);


--
-- Name: thread_type_supplier thread_type_supplier_thread_type_id_supplier_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_type_supplier
    ADD CONSTRAINT thread_type_supplier_thread_type_id_supplier_id_key UNIQUE (thread_type_id, supplier_id);


--
-- Name: thread_types thread_types_code_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_types
    ADD CONSTRAINT thread_types_code_key UNIQUE (code);


--
-- Name: thread_types thread_types_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_types
    ADD CONSTRAINT thread_types_pkey PRIMARY KEY (id);


--
-- Name: thread_stock uq_thread_stock_type_warehouse_lot; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_stock
    ADD CONSTRAINT uq_thread_stock_type_warehouse_lot UNIQUE (thread_type_id, warehouse_id, lot_number);


--
-- Name: warehouses warehouses_code_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.warehouses
    ADD CONSTRAINT warehouses_code_key UNIQUE (code);


--
-- Name: warehouses warehouses_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.warehouses
    ADD CONSTRAINT warehouses_pkey PRIMARY KEY (id);


--
-- Name: messages messages_pkey; Type: CONSTRAINT; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER TABLE ONLY realtime.messages
    ADD CONSTRAINT messages_pkey PRIMARY KEY (id, inserted_at);


--
-- Name: messages_2026_02_09 messages_2026_02_09_pkey; Type: CONSTRAINT; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages_2026_02_09
    ADD CONSTRAINT messages_2026_02_09_pkey PRIMARY KEY (id, inserted_at);


--
-- Name: messages_2026_02_10 messages_2026_02_10_pkey; Type: CONSTRAINT; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages_2026_02_10
    ADD CONSTRAINT messages_2026_02_10_pkey PRIMARY KEY (id, inserted_at);


--
-- Name: messages_2026_02_11 messages_2026_02_11_pkey; Type: CONSTRAINT; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages_2026_02_11
    ADD CONSTRAINT messages_2026_02_11_pkey PRIMARY KEY (id, inserted_at);


--
-- Name: messages_2026_02_12 messages_2026_02_12_pkey; Type: CONSTRAINT; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages_2026_02_12
    ADD CONSTRAINT messages_2026_02_12_pkey PRIMARY KEY (id, inserted_at);


--
-- Name: messages_2026_02_13 messages_2026_02_13_pkey; Type: CONSTRAINT; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages_2026_02_13
    ADD CONSTRAINT messages_2026_02_13_pkey PRIMARY KEY (id, inserted_at);


--
-- Name: messages_2026_02_14 messages_2026_02_14_pkey; Type: CONSTRAINT; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages_2026_02_14
    ADD CONSTRAINT messages_2026_02_14_pkey PRIMARY KEY (id, inserted_at);


--
-- Name: messages_2026_02_15 messages_2026_02_15_pkey; Type: CONSTRAINT; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.messages_2026_02_15
    ADD CONSTRAINT messages_2026_02_15_pkey PRIMARY KEY (id, inserted_at);


--
-- Name: subscription pk_subscription; Type: CONSTRAINT; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.subscription
    ADD CONSTRAINT pk_subscription PRIMARY KEY (id);


--
-- Name: schema_migrations schema_migrations_pkey; Type: CONSTRAINT; Schema: realtime; Owner: supabase_admin
--

ALTER TABLE ONLY realtime.schema_migrations
    ADD CONSTRAINT schema_migrations_pkey PRIMARY KEY (version);


--
-- Name: buckets_analytics buckets_analytics_pkey; Type: CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.buckets_analytics
    ADD CONSTRAINT buckets_analytics_pkey PRIMARY KEY (id);


--
-- Name: buckets buckets_pkey; Type: CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.buckets
    ADD CONSTRAINT buckets_pkey PRIMARY KEY (id);


--
-- Name: buckets_vectors buckets_vectors_pkey; Type: CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.buckets_vectors
    ADD CONSTRAINT buckets_vectors_pkey PRIMARY KEY (id);


--
-- Name: iceberg_namespaces iceberg_namespaces_pkey; Type: CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.iceberg_namespaces
    ADD CONSTRAINT iceberg_namespaces_pkey PRIMARY KEY (id);


--
-- Name: iceberg_tables iceberg_tables_pkey; Type: CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.iceberg_tables
    ADD CONSTRAINT iceberg_tables_pkey PRIMARY KEY (id);


--
-- Name: migrations migrations_name_key; Type: CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.migrations
    ADD CONSTRAINT migrations_name_key UNIQUE (name);


--
-- Name: migrations migrations_pkey; Type: CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.migrations
    ADD CONSTRAINT migrations_pkey PRIMARY KEY (id);


--
-- Name: objects objects_pkey; Type: CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.objects
    ADD CONSTRAINT objects_pkey PRIMARY KEY (id);


--
-- Name: s3_multipart_uploads_parts s3_multipart_uploads_parts_pkey; Type: CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.s3_multipart_uploads_parts
    ADD CONSTRAINT s3_multipart_uploads_parts_pkey PRIMARY KEY (id);


--
-- Name: s3_multipart_uploads s3_multipart_uploads_pkey; Type: CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.s3_multipart_uploads
    ADD CONSTRAINT s3_multipart_uploads_pkey PRIMARY KEY (id);


--
-- Name: vector_indexes vector_indexes_pkey; Type: CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.vector_indexes
    ADD CONSTRAINT vector_indexes_pkey PRIMARY KEY (id);


--
-- Name: hooks hooks_pkey; Type: CONSTRAINT; Schema: supabase_functions; Owner: supabase_functions_admin
--

ALTER TABLE ONLY supabase_functions.hooks
    ADD CONSTRAINT hooks_pkey PRIMARY KEY (id);


--
-- Name: migrations migrations_pkey; Type: CONSTRAINT; Schema: supabase_functions; Owner: supabase_functions_admin
--

ALTER TABLE ONLY supabase_functions.migrations
    ADD CONSTRAINT migrations_pkey PRIMARY KEY (version);


--
-- Name: schema_migrations schema_migrations_pkey; Type: CONSTRAINT; Schema: supabase_migrations; Owner: postgres
--

ALTER TABLE ONLY supabase_migrations.schema_migrations
    ADD CONSTRAINT schema_migrations_pkey PRIMARY KEY (version);


--
-- Name: extensions_tenant_external_id_index; Type: INDEX; Schema: _realtime; Owner: supabase_admin
--

CREATE INDEX extensions_tenant_external_id_index ON _realtime.extensions USING btree (tenant_external_id);


--
-- Name: extensions_tenant_external_id_type_index; Type: INDEX; Schema: _realtime; Owner: supabase_admin
--

CREATE UNIQUE INDEX extensions_tenant_external_id_type_index ON _realtime.extensions USING btree (tenant_external_id, type);


--
-- Name: tenants_external_id_index; Type: INDEX; Schema: _realtime; Owner: supabase_admin
--

CREATE UNIQUE INDEX tenants_external_id_index ON _realtime.tenants USING btree (external_id);


--
-- Name: audit_logs_instance_id_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX audit_logs_instance_id_idx ON auth.audit_log_entries USING btree (instance_id);


--
-- Name: confirmation_token_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE UNIQUE INDEX confirmation_token_idx ON auth.users USING btree (confirmation_token) WHERE ((confirmation_token)::text !~ '^[0-9 ]*$'::text);


--
-- Name: email_change_token_current_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE UNIQUE INDEX email_change_token_current_idx ON auth.users USING btree (email_change_token_current) WHERE ((email_change_token_current)::text !~ '^[0-9 ]*$'::text);


--
-- Name: email_change_token_new_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE UNIQUE INDEX email_change_token_new_idx ON auth.users USING btree (email_change_token_new) WHERE ((email_change_token_new)::text !~ '^[0-9 ]*$'::text);


--
-- Name: factor_id_created_at_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX factor_id_created_at_idx ON auth.mfa_factors USING btree (user_id, created_at);


--
-- Name: flow_state_created_at_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX flow_state_created_at_idx ON auth.flow_state USING btree (created_at DESC);


--
-- Name: identities_email_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX identities_email_idx ON auth.identities USING btree (email text_pattern_ops);


--
-- Name: INDEX identities_email_idx; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON INDEX auth.identities_email_idx IS 'Auth: Ensures indexed queries on the email column';


--
-- Name: identities_user_id_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX identities_user_id_idx ON auth.identities USING btree (user_id);


--
-- Name: idx_auth_code; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX idx_auth_code ON auth.flow_state USING btree (auth_code);


--
-- Name: idx_oauth_client_states_created_at; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX idx_oauth_client_states_created_at ON auth.oauth_client_states USING btree (created_at);


--
-- Name: idx_user_id_auth_method; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX idx_user_id_auth_method ON auth.flow_state USING btree (user_id, authentication_method);


--
-- Name: mfa_challenge_created_at_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX mfa_challenge_created_at_idx ON auth.mfa_challenges USING btree (created_at DESC);


--
-- Name: mfa_factors_user_friendly_name_unique; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE UNIQUE INDEX mfa_factors_user_friendly_name_unique ON auth.mfa_factors USING btree (friendly_name, user_id) WHERE (TRIM(BOTH FROM friendly_name) <> ''::text);


--
-- Name: mfa_factors_user_id_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX mfa_factors_user_id_idx ON auth.mfa_factors USING btree (user_id);


--
-- Name: oauth_auth_pending_exp_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX oauth_auth_pending_exp_idx ON auth.oauth_authorizations USING btree (expires_at) WHERE (status = 'pending'::auth.oauth_authorization_status);


--
-- Name: oauth_clients_deleted_at_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX oauth_clients_deleted_at_idx ON auth.oauth_clients USING btree (deleted_at);


--
-- Name: oauth_consents_active_client_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX oauth_consents_active_client_idx ON auth.oauth_consents USING btree (client_id) WHERE (revoked_at IS NULL);


--
-- Name: oauth_consents_active_user_client_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX oauth_consents_active_user_client_idx ON auth.oauth_consents USING btree (user_id, client_id) WHERE (revoked_at IS NULL);


--
-- Name: oauth_consents_user_order_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX oauth_consents_user_order_idx ON auth.oauth_consents USING btree (user_id, granted_at DESC);


--
-- Name: one_time_tokens_relates_to_hash_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX one_time_tokens_relates_to_hash_idx ON auth.one_time_tokens USING hash (relates_to);


--
-- Name: one_time_tokens_token_hash_hash_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX one_time_tokens_token_hash_hash_idx ON auth.one_time_tokens USING hash (token_hash);


--
-- Name: one_time_tokens_user_id_token_type_key; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE UNIQUE INDEX one_time_tokens_user_id_token_type_key ON auth.one_time_tokens USING btree (user_id, token_type);


--
-- Name: reauthentication_token_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE UNIQUE INDEX reauthentication_token_idx ON auth.users USING btree (reauthentication_token) WHERE ((reauthentication_token)::text !~ '^[0-9 ]*$'::text);


--
-- Name: recovery_token_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE UNIQUE INDEX recovery_token_idx ON auth.users USING btree (recovery_token) WHERE ((recovery_token)::text !~ '^[0-9 ]*$'::text);


--
-- Name: refresh_tokens_instance_id_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX refresh_tokens_instance_id_idx ON auth.refresh_tokens USING btree (instance_id);


--
-- Name: refresh_tokens_instance_id_user_id_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX refresh_tokens_instance_id_user_id_idx ON auth.refresh_tokens USING btree (instance_id, user_id);


--
-- Name: refresh_tokens_parent_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX refresh_tokens_parent_idx ON auth.refresh_tokens USING btree (parent);


--
-- Name: refresh_tokens_session_id_revoked_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX refresh_tokens_session_id_revoked_idx ON auth.refresh_tokens USING btree (session_id, revoked);


--
-- Name: refresh_tokens_updated_at_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX refresh_tokens_updated_at_idx ON auth.refresh_tokens USING btree (updated_at DESC);


--
-- Name: saml_providers_sso_provider_id_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX saml_providers_sso_provider_id_idx ON auth.saml_providers USING btree (sso_provider_id);


--
-- Name: saml_relay_states_created_at_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX saml_relay_states_created_at_idx ON auth.saml_relay_states USING btree (created_at DESC);


--
-- Name: saml_relay_states_for_email_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX saml_relay_states_for_email_idx ON auth.saml_relay_states USING btree (for_email);


--
-- Name: saml_relay_states_sso_provider_id_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX saml_relay_states_sso_provider_id_idx ON auth.saml_relay_states USING btree (sso_provider_id);


--
-- Name: sessions_not_after_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX sessions_not_after_idx ON auth.sessions USING btree (not_after DESC);


--
-- Name: sessions_oauth_client_id_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX sessions_oauth_client_id_idx ON auth.sessions USING btree (oauth_client_id);


--
-- Name: sessions_user_id_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX sessions_user_id_idx ON auth.sessions USING btree (user_id);


--
-- Name: sso_domains_domain_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE UNIQUE INDEX sso_domains_domain_idx ON auth.sso_domains USING btree (lower(domain));


--
-- Name: sso_domains_sso_provider_id_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX sso_domains_sso_provider_id_idx ON auth.sso_domains USING btree (sso_provider_id);


--
-- Name: sso_providers_resource_id_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE UNIQUE INDEX sso_providers_resource_id_idx ON auth.sso_providers USING btree (lower(resource_id));


--
-- Name: sso_providers_resource_id_pattern_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX sso_providers_resource_id_pattern_idx ON auth.sso_providers USING btree (resource_id text_pattern_ops);


--
-- Name: unique_phone_factor_per_user; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE UNIQUE INDEX unique_phone_factor_per_user ON auth.mfa_factors USING btree (user_id, phone);


--
-- Name: user_id_created_at_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX user_id_created_at_idx ON auth.sessions USING btree (user_id, created_at);


--
-- Name: users_email_partial_key; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE UNIQUE INDEX users_email_partial_key ON auth.users USING btree (email) WHERE (is_sso_user = false);


--
-- Name: INDEX users_email_partial_key; Type: COMMENT; Schema: auth; Owner: supabase_auth_admin
--

COMMENT ON INDEX auth.users_email_partial_key IS 'Auth: A partial unique index that applies only when is_sso_user is false';


--
-- Name: users_instance_id_email_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX users_instance_id_email_idx ON auth.users USING btree (instance_id, lower((email)::text));


--
-- Name: users_instance_id_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX users_instance_id_idx ON auth.users USING btree (instance_id);


--
-- Name: users_is_anonymous_idx; Type: INDEX; Schema: auth; Owner: supabase_auth_admin
--

CREATE INDEX users_is_anonymous_idx ON auth.users USING btree (is_anonymous);


--
-- Name: idx_allocation_cones_allocation; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_allocation_cones_allocation ON public.thread_allocation_cones USING btree (allocation_id);


--
-- Name: idx_allocation_cones_cone; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_allocation_cones_cone ON public.thread_allocation_cones USING btree (cone_id);


--
-- Name: idx_allocations_due_date; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_allocations_due_date ON public.thread_allocations USING btree (due_date);


--
-- Name: idx_allocations_order_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_allocations_order_id ON public.thread_allocations USING btree (order_id);


--
-- Name: idx_allocations_pending; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_allocations_pending ON public.thread_allocations USING btree (status) WHERE (status = ANY (ARRAY['PENDING'::public.allocation_status, 'SOFT'::public.allocation_status]));


--
-- Name: idx_allocations_priority; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_allocations_priority ON public.thread_allocations USING btree (priority);


--
-- Name: idx_allocations_priority_score; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_allocations_priority_score ON public.thread_allocations USING btree (priority_score DESC);


--
-- Name: idx_allocations_split_from; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_allocations_split_from ON public.thread_allocations USING btree (split_from_id) WHERE (split_from_id IS NOT NULL);


--
-- Name: idx_allocations_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_allocations_status ON public.thread_allocations USING btree (status);


--
-- Name: idx_allocations_thread_type; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_allocations_thread_type ON public.thread_allocations USING btree (thread_type_id);


--
-- Name: idx_audit_action; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_audit_action ON public.thread_audit_log USING btree (action);


--
-- Name: INDEX idx_audit_action; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON INDEX public.idx_audit_action IS 'Filter audit logs by action type - Loc theo loai thao tac';


--
-- Name: idx_audit_created; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_audit_created ON public.thread_audit_log USING btree (created_at DESC);


--
-- Name: INDEX idx_audit_created; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON INDEX public.idx_audit_created IS 'Sort audit logs by creation time - Sap xep theo thoi gian';


--
-- Name: idx_audit_record; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_audit_record ON public.thread_audit_log USING btree (table_name, record_id);


--
-- Name: INDEX idx_audit_record; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON INDEX public.idx_audit_record IS 'Filter audit logs by table + record ID - Loc theo bang va ID';


--
-- Name: idx_audit_table; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_audit_table ON public.thread_audit_log USING btree (table_name);


--
-- Name: INDEX idx_audit_table; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON INDEX public.idx_audit_table IS 'Filter audit logs by table name - Loc theo ten bang';


--
-- Name: idx_batch_transactions_from_warehouse; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_batch_transactions_from_warehouse ON public.batch_transactions USING btree (from_warehouse_id);


--
-- Name: idx_batch_transactions_lot_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_batch_transactions_lot_id ON public.batch_transactions USING btree (lot_id);


--
-- Name: idx_batch_transactions_operation_type; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_batch_transactions_operation_type ON public.batch_transactions USING btree (operation_type);


--
-- Name: idx_batch_transactions_performed_at; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_batch_transactions_performed_at ON public.batch_transactions USING btree (performed_at DESC);


--
-- Name: idx_batch_transactions_reference; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_batch_transactions_reference ON public.batch_transactions USING btree (reference_number) WHERE (reference_number IS NOT NULL);


--
-- Name: idx_batch_transactions_to_warehouse; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_batch_transactions_to_warehouse ON public.batch_transactions USING btree (to_warehouse_id);


--
-- Name: idx_color_supplier_color_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_color_supplier_color_id ON public.color_supplier USING btree (color_id);


--
-- Name: idx_color_supplier_is_active; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_color_supplier_is_active ON public.color_supplier USING btree (is_active) WHERE (is_active = true);


--
-- Name: idx_color_supplier_supplier_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_color_supplier_supplier_id ON public.color_supplier USING btree (supplier_id);


--
-- Name: idx_colors_is_active; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_colors_is_active ON public.colors USING btree (is_active) WHERE (is_active = true);


--
-- Name: idx_colors_name; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_colors_name ON public.colors USING btree (name);


--
-- Name: idx_conflict_allocations_allocation; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_conflict_allocations_allocation ON public.thread_conflict_allocations USING btree (allocation_id);


--
-- Name: idx_conflict_allocations_conflict; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_conflict_allocations_conflict ON public.thread_conflict_allocations USING btree (conflict_id);


--
-- Name: idx_conflicts_created; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_conflicts_created ON public.thread_conflicts USING btree (created_at DESC);


--
-- Name: idx_conflicts_pending; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_conflicts_pending ON public.thread_conflicts USING btree (status) WHERE ((status)::text = 'PENDING'::text);


--
-- Name: idx_conflicts_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_conflicts_status ON public.thread_conflicts USING btree (status);


--
-- Name: idx_conflicts_thread_type; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_conflicts_thread_type ON public.thread_conflicts USING btree (thread_type_id);


--
-- Name: idx_employee_permissions_employee; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_employee_permissions_employee ON public.employee_permissions USING btree (employee_id);


--
-- Name: idx_employee_permissions_permission; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_employee_permissions_permission ON public.employee_permissions USING btree (permission_id);


--
-- Name: idx_employee_roles_employee; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_employee_roles_employee ON public.employee_roles USING btree (employee_id);


--
-- Name: idx_employee_roles_role; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_employee_roles_role ON public.employee_roles USING btree (role_id);


--
-- Name: idx_employees_department; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_employees_department ON public.employees USING btree (department);


--
-- Name: idx_employees_employee_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_employees_employee_id ON public.employees USING btree (employee_id);


--
-- Name: idx_employees_is_active; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_employees_is_active ON public.employees USING btree (is_active);


--
-- Name: idx_employees_refresh_token; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_employees_refresh_token ON public.employees USING btree (refresh_token);


--
-- Name: idx_issue_items_cone; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_issue_items_cone ON public.thread_issue_items USING btree (cone_id);


--
-- Name: idx_issue_items_request; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_issue_items_request ON public.thread_issue_items USING btree (issue_request_id);


--
-- Name: idx_issue_requests_created_at; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_issue_requests_created_at ON public.thread_issue_requests USING btree (created_at);


--
-- Name: idx_issue_requests_issue_code; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_issue_requests_issue_code ON public.thread_issue_requests USING btree (issue_code);


--
-- Name: idx_issue_requests_po_style_color_thread; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_issue_requests_po_style_color_thread ON public.thread_issue_requests USING btree (po_id, style_id, color_id, thread_type_id);


--
-- Name: idx_issue_requests_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_issue_requests_status ON public.thread_issue_requests USING btree (status);


--
-- Name: idx_issue_returns_item; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_issue_returns_item ON public.thread_issue_returns USING btree (issue_item_id);


--
-- Name: idx_lots_created_at; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_lots_created_at ON public.lots USING btree (created_at DESC);


--
-- Name: idx_lots_lot_number; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_lots_lot_number ON public.lots USING btree (lot_number);


--
-- Name: idx_lots_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_lots_status ON public.lots USING btree (status);


--
-- Name: idx_lots_supplier_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_lots_supplier_id ON public.lots USING btree (supplier_id);


--
-- Name: idx_lots_thread_type_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_lots_thread_type_id ON public.lots USING btree (thread_type_id);


--
-- Name: idx_lots_warehouse_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_lots_warehouse_id ON public.lots USING btree (warehouse_id);


--
-- Name: idx_movements_allocation; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_movements_allocation ON public.thread_movements USING btree (allocation_id);


--
-- Name: idx_movements_cone; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_movements_cone ON public.thread_movements USING btree (cone_id);


--
-- Name: idx_movements_created; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_movements_created ON public.thread_movements USING btree (created_at DESC);


--
-- Name: idx_movements_reference; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_movements_reference ON public.thread_movements USING btree (reference_type, reference_id);


--
-- Name: idx_movements_type; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_movements_type ON public.thread_movements USING btree (movement_type);


--
-- Name: idx_permissions_code; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_permissions_code ON public.permissions USING btree (code);


--
-- Name: idx_permissions_module; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_permissions_module ON public.permissions USING btree (module);


--
-- Name: idx_permissions_route; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_permissions_route ON public.permissions USING btree (route_path);


--
-- Name: idx_po_items_po_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_po_items_po_id ON public.po_items USING btree (po_id);


--
-- Name: idx_po_items_style_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_po_items_style_id ON public.po_items USING btree (style_id);


--
-- Name: idx_purchase_orders_customer_name; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_purchase_orders_customer_name ON public.purchase_orders USING btree (customer_name);


--
-- Name: idx_purchase_orders_order_date; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_purchase_orders_order_date ON public.purchase_orders USING btree (order_date);


--
-- Name: idx_purchase_orders_po_number; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_purchase_orders_po_number ON public.purchase_orders USING btree (po_number);


--
-- Name: idx_purchase_orders_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_purchase_orders_status ON public.purchase_orders USING btree (status);


--
-- Name: idx_recovery_cone; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_recovery_cone ON public.thread_recovery USING btree (cone_id);


--
-- Name: idx_recovery_created; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_recovery_created ON public.thread_recovery USING btree (created_at DESC);


--
-- Name: idx_recovery_pending; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_recovery_pending ON public.thread_recovery USING btree (status) WHERE (status = ANY (ARRAY['INITIATED'::public.recovery_status, 'PENDING_WEIGH'::public.recovery_status, 'WEIGHED'::public.recovery_status]));


--
-- Name: idx_recovery_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_recovery_status ON public.thread_recovery USING btree (status);


--
-- Name: idx_refresh_tokens_employee; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_refresh_tokens_employee ON public.employee_refresh_tokens USING btree (employee_id);


--
-- Name: idx_refresh_tokens_expires; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_refresh_tokens_expires ON public.employee_refresh_tokens USING btree (expires_at);


--
-- Name: idx_role_permissions_permission; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_role_permissions_permission ON public.role_permissions USING btree (permission_id);


--
-- Name: idx_role_permissions_role; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_role_permissions_role ON public.role_permissions USING btree (role_id);


--
-- Name: idx_skus_color_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_skus_color_id ON public.skus USING btree (color_id);


--
-- Name: idx_skus_po_item_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_skus_po_item_id ON public.skus USING btree (po_item_id);


--
-- Name: idx_style_color_thread_specs_color_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_style_color_thread_specs_color_id ON public.style_color_thread_specs USING btree (color_id);


--
-- Name: idx_style_color_thread_specs_spec_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_style_color_thread_specs_spec_id ON public.style_color_thread_specs USING btree (style_thread_spec_id);


--
-- Name: idx_style_color_thread_specs_thread_type_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_style_color_thread_specs_thread_type_id ON public.style_color_thread_specs USING btree (thread_type_id);


--
-- Name: idx_style_thread_specs_display_order; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_style_thread_specs_display_order ON public.style_thread_specs USING btree (style_id, display_order);


--
-- Name: idx_style_thread_specs_style_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_style_thread_specs_style_id ON public.style_thread_specs USING btree (style_id);


--
-- Name: idx_style_thread_specs_supplier_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_style_thread_specs_supplier_id ON public.style_thread_specs USING btree (supplier_id);


--
-- Name: idx_style_thread_specs_tex_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_style_thread_specs_tex_id ON public.style_thread_specs USING btree (tex_id);


--
-- Name: idx_styles_style_code; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_styles_style_code ON public.styles USING btree (style_code);


--
-- Name: idx_styles_style_name; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_styles_style_name ON public.styles USING btree (style_name);


--
-- Name: idx_suppliers_code; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_suppliers_code ON public.suppliers USING btree (code);


--
-- Name: idx_suppliers_is_active; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_suppliers_is_active ON public.suppliers USING btree (is_active) WHERE (is_active = true);


--
-- Name: idx_suppliers_name; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_suppliers_name ON public.suppliers USING btree (name);


--
-- Name: idx_thread_inventory_available; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_inventory_available ON public.thread_inventory USING btree (status) WHERE (status = 'AVAILABLE'::public.cone_status);


--
-- Name: idx_thread_inventory_cone_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_inventory_cone_id ON public.thread_inventory USING btree (cone_id);


--
-- Name: idx_thread_inventory_expiry; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_inventory_expiry ON public.thread_inventory USING btree (expiry_date) WHERE (expiry_date IS NOT NULL);


--
-- Name: idx_thread_inventory_fefo; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_inventory_fefo ON public.thread_inventory USING btree (is_partial DESC, expiry_date, received_date) WHERE (status = 'AVAILABLE'::public.cone_status);


--
-- Name: INDEX idx_thread_inventory_fefo; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON INDEX public.idx_thread_inventory_fefo IS 'FEFO composite index for allocation - partial cones first, then by expiry, then by received date';


--
-- Name: idx_thread_inventory_is_partial; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_inventory_is_partial ON public.thread_inventory USING btree (is_partial) WHERE (is_partial = true);


--
-- Name: idx_thread_inventory_lot_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_inventory_lot_id ON public.thread_inventory USING btree (lot_id) WHERE (lot_id IS NOT NULL);


--
-- Name: idx_thread_inventory_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_inventory_status ON public.thread_inventory USING btree (status);


--
-- Name: idx_thread_inventory_thread_type; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_inventory_thread_type ON public.thread_inventory USING btree (thread_type_id);


--
-- Name: idx_thread_inventory_warehouse; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_inventory_warehouse ON public.thread_inventory USING btree (warehouse_id);


--
-- Name: idx_thread_issue_lines_color_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_issue_lines_color_id ON public.thread_issue_lines USING btree (color_id);


--
-- Name: idx_thread_issue_lines_issue_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_issue_lines_issue_id ON public.thread_issue_lines USING btree (issue_id);


--
-- Name: idx_thread_issue_lines_po_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_issue_lines_po_id ON public.thread_issue_lines USING btree (po_id);


--
-- Name: idx_thread_issue_lines_style_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_issue_lines_style_id ON public.thread_issue_lines USING btree (style_id);


--
-- Name: idx_thread_issue_lines_thread_type_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_issue_lines_thread_type_id ON public.thread_issue_lines USING btree (thread_type_id);


--
-- Name: idx_thread_issues_created_at; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_issues_created_at ON public.thread_issues USING btree (created_at);


--
-- Name: idx_thread_issues_department; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_issues_department ON public.thread_issues USING btree (department);


--
-- Name: idx_thread_issues_issue_code; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_issues_issue_code ON public.thread_issues USING btree (issue_code);


--
-- Name: idx_thread_issues_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_issues_status ON public.thread_issues USING btree (status);


--
-- Name: idx_thread_order_deliveries_delivery_date; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_order_deliveries_delivery_date ON public.thread_order_deliveries USING btree (delivery_date);


--
-- Name: idx_thread_order_deliveries_inventory_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_order_deliveries_inventory_status ON public.thread_order_deliveries USING btree (inventory_status);


--
-- Name: idx_thread_order_deliveries_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_order_deliveries_status ON public.thread_order_deliveries USING btree (status);


--
-- Name: idx_thread_order_deliveries_week_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_order_deliveries_week_id ON public.thread_order_deliveries USING btree (week_id);


--
-- Name: idx_thread_order_items_po_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_order_items_po_id ON public.thread_order_items USING btree (po_id);


--
-- Name: idx_thread_order_items_style_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_order_items_style_id ON public.thread_order_items USING btree (style_id);


--
-- Name: idx_thread_order_items_week_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_order_items_week_id ON public.thread_order_items USING btree (week_id);


--
-- Name: idx_thread_order_weeks_status; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_order_weeks_status ON public.thread_order_weeks USING btree (status);


--
-- Name: idx_thread_stock_expiry_date; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_stock_expiry_date ON public.thread_stock USING btree (expiry_date);


--
-- Name: idx_thread_stock_lot_number; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_stock_lot_number ON public.thread_stock USING btree (lot_number);


--
-- Name: idx_thread_stock_thread_type_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_stock_thread_type_id ON public.thread_stock USING btree (thread_type_id);


--
-- Name: idx_thread_stock_warehouse_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_stock_warehouse_id ON public.thread_stock USING btree (warehouse_id);


--
-- Name: idx_thread_type_supplier_is_active; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_type_supplier_is_active ON public.thread_type_supplier USING btree (is_active) WHERE (is_active = true);


--
-- Name: idx_thread_type_supplier_item_code; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_type_supplier_item_code ON public.thread_type_supplier USING btree (supplier_item_code);


--
-- Name: idx_thread_type_supplier_supplier_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_type_supplier_supplier_id ON public.thread_type_supplier USING btree (supplier_id);


--
-- Name: idx_thread_type_supplier_thread_type_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_type_supplier_thread_type_id ON public.thread_type_supplier USING btree (thread_type_id);


--
-- Name: idx_thread_types_active; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_types_active ON public.thread_types USING btree (is_active) WHERE (is_active = true);


--
-- Name: idx_thread_types_code; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_types_code ON public.thread_types USING btree (code);


--
-- Name: idx_thread_types_color; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_types_color ON public.thread_types USING btree (color);


--
-- Name: idx_thread_types_color_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_types_color_id ON public.thread_types USING btree (color_id);


--
-- Name: idx_thread_types_color_supplier_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_types_color_supplier_id ON public.thread_types USING btree (color_supplier_id);


--
-- Name: idx_thread_types_material; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_types_material ON public.thread_types USING btree (material);


--
-- Name: idx_thread_types_supplier; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_types_supplier ON public.thread_types USING btree (supplier);


--
-- Name: idx_thread_types_supplier_id; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_thread_types_supplier_id ON public.thread_types USING btree (supplier_id);


--
-- Name: idx_warehouses_active; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_warehouses_active ON public.warehouses USING btree (is_active);


--
-- Name: idx_warehouses_code; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_warehouses_code ON public.warehouses USING btree (code);


--
-- Name: idx_warehouses_parent; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_warehouses_parent ON public.warehouses USING btree (parent_id);


--
-- Name: idx_warehouses_sort; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_warehouses_sort ON public.warehouses USING btree (parent_id, sort_order);


--
-- Name: idx_warehouses_type; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX idx_warehouses_type ON public.warehouses USING btree (type);


--
-- Name: ix_realtime_subscription_entity; Type: INDEX; Schema: realtime; Owner: supabase_admin
--

CREATE INDEX ix_realtime_subscription_entity ON realtime.subscription USING btree (entity);


--
-- Name: messages_inserted_at_topic_index; Type: INDEX; Schema: realtime; Owner: supabase_realtime_admin
--

CREATE INDEX messages_inserted_at_topic_index ON ONLY realtime.messages USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE));


--
-- Name: messages_2026_02_09_inserted_at_topic_idx; Type: INDEX; Schema: realtime; Owner: supabase_admin
--

CREATE INDEX messages_2026_02_09_inserted_at_topic_idx ON realtime.messages_2026_02_09 USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE));


--
-- Name: messages_2026_02_10_inserted_at_topic_idx; Type: INDEX; Schema: realtime; Owner: supabase_admin
--

CREATE INDEX messages_2026_02_10_inserted_at_topic_idx ON realtime.messages_2026_02_10 USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE));


--
-- Name: messages_2026_02_11_inserted_at_topic_idx; Type: INDEX; Schema: realtime; Owner: supabase_admin
--

CREATE INDEX messages_2026_02_11_inserted_at_topic_idx ON realtime.messages_2026_02_11 USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE));


--
-- Name: messages_2026_02_12_inserted_at_topic_idx; Type: INDEX; Schema: realtime; Owner: supabase_admin
--

CREATE INDEX messages_2026_02_12_inserted_at_topic_idx ON realtime.messages_2026_02_12 USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE));


--
-- Name: messages_2026_02_13_inserted_at_topic_idx; Type: INDEX; Schema: realtime; Owner: supabase_admin
--

CREATE INDEX messages_2026_02_13_inserted_at_topic_idx ON realtime.messages_2026_02_13 USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE));


--
-- Name: messages_2026_02_14_inserted_at_topic_idx; Type: INDEX; Schema: realtime; Owner: supabase_admin
--

CREATE INDEX messages_2026_02_14_inserted_at_topic_idx ON realtime.messages_2026_02_14 USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE));


--
-- Name: messages_2026_02_15_inserted_at_topic_idx; Type: INDEX; Schema: realtime; Owner: supabase_admin
--

CREATE INDEX messages_2026_02_15_inserted_at_topic_idx ON realtime.messages_2026_02_15 USING btree (inserted_at DESC, topic) WHERE ((extension = 'broadcast'::text) AND (private IS TRUE));


--
-- Name: subscription_subscription_id_entity_filters_action_filter_key; Type: INDEX; Schema: realtime; Owner: supabase_admin
--

CREATE UNIQUE INDEX subscription_subscription_id_entity_filters_action_filter_key ON realtime.subscription USING btree (subscription_id, entity, filters, action_filter);


--
-- Name: bname; Type: INDEX; Schema: storage; Owner: supabase_storage_admin
--

CREATE UNIQUE INDEX bname ON storage.buckets USING btree (name);


--
-- Name: bucketid_objname; Type: INDEX; Schema: storage; Owner: supabase_storage_admin
--

CREATE UNIQUE INDEX bucketid_objname ON storage.objects USING btree (bucket_id, name);


--
-- Name: buckets_analytics_unique_name_idx; Type: INDEX; Schema: storage; Owner: supabase_storage_admin
--

CREATE UNIQUE INDEX buckets_analytics_unique_name_idx ON storage.buckets_analytics USING btree (name) WHERE (deleted_at IS NULL);


--
-- Name: idx_iceberg_namespaces_bucket_id; Type: INDEX; Schema: storage; Owner: supabase_storage_admin
--

CREATE UNIQUE INDEX idx_iceberg_namespaces_bucket_id ON storage.iceberg_namespaces USING btree (catalog_id, name);


--
-- Name: idx_iceberg_tables_location; Type: INDEX; Schema: storage; Owner: supabase_storage_admin
--

CREATE UNIQUE INDEX idx_iceberg_tables_location ON storage.iceberg_tables USING btree (location);


--
-- Name: idx_iceberg_tables_namespace_id; Type: INDEX; Schema: storage; Owner: supabase_storage_admin
--

CREATE UNIQUE INDEX idx_iceberg_tables_namespace_id ON storage.iceberg_tables USING btree (catalog_id, namespace_id, name);


--
-- Name: idx_multipart_uploads_list; Type: INDEX; Schema: storage; Owner: supabase_storage_admin
--

CREATE INDEX idx_multipart_uploads_list ON storage.s3_multipart_uploads USING btree (bucket_id, key, created_at);


--
-- Name: idx_objects_bucket_id_name; Type: INDEX; Schema: storage; Owner: supabase_storage_admin
--

CREATE INDEX idx_objects_bucket_id_name ON storage.objects USING btree (bucket_id, name COLLATE "C");


--
-- Name: idx_objects_bucket_id_name_lower; Type: INDEX; Schema: storage; Owner: supabase_storage_admin
--

CREATE INDEX idx_objects_bucket_id_name_lower ON storage.objects USING btree (bucket_id, lower(name) COLLATE "C");


--
-- Name: name_prefix_search; Type: INDEX; Schema: storage; Owner: supabase_storage_admin
--

CREATE INDEX name_prefix_search ON storage.objects USING btree (name text_pattern_ops);


--
-- Name: vector_indexes_name_bucket_id_idx; Type: INDEX; Schema: storage; Owner: supabase_storage_admin
--

CREATE UNIQUE INDEX vector_indexes_name_bucket_id_idx ON storage.vector_indexes USING btree (name, bucket_id);


--
-- Name: supabase_functions_hooks_h_table_id_h_name_idx; Type: INDEX; Schema: supabase_functions; Owner: supabase_functions_admin
--

CREATE INDEX supabase_functions_hooks_h_table_id_h_name_idx ON supabase_functions.hooks USING btree (hook_table_id, hook_name);


--
-- Name: supabase_functions_hooks_request_id_idx; Type: INDEX; Schema: supabase_functions; Owner: supabase_functions_admin
--

CREATE INDEX supabase_functions_hooks_request_id_idx ON supabase_functions.hooks USING btree (request_id);


--
-- Name: messages_2026_02_09_inserted_at_topic_idx; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_inserted_at_topic_index ATTACH PARTITION realtime.messages_2026_02_09_inserted_at_topic_idx;


--
-- Name: messages_2026_02_09_pkey; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_pkey ATTACH PARTITION realtime.messages_2026_02_09_pkey;


--
-- Name: messages_2026_02_10_inserted_at_topic_idx; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_inserted_at_topic_index ATTACH PARTITION realtime.messages_2026_02_10_inserted_at_topic_idx;


--
-- Name: messages_2026_02_10_pkey; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_pkey ATTACH PARTITION realtime.messages_2026_02_10_pkey;


--
-- Name: messages_2026_02_11_inserted_at_topic_idx; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_inserted_at_topic_index ATTACH PARTITION realtime.messages_2026_02_11_inserted_at_topic_idx;


--
-- Name: messages_2026_02_11_pkey; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_pkey ATTACH PARTITION realtime.messages_2026_02_11_pkey;


--
-- Name: messages_2026_02_12_inserted_at_topic_idx; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_inserted_at_topic_index ATTACH PARTITION realtime.messages_2026_02_12_inserted_at_topic_idx;


--
-- Name: messages_2026_02_12_pkey; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_pkey ATTACH PARTITION realtime.messages_2026_02_12_pkey;


--
-- Name: messages_2026_02_13_inserted_at_topic_idx; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_inserted_at_topic_index ATTACH PARTITION realtime.messages_2026_02_13_inserted_at_topic_idx;


--
-- Name: messages_2026_02_13_pkey; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_pkey ATTACH PARTITION realtime.messages_2026_02_13_pkey;


--
-- Name: messages_2026_02_14_inserted_at_topic_idx; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_inserted_at_topic_index ATTACH PARTITION realtime.messages_2026_02_14_inserted_at_topic_idx;


--
-- Name: messages_2026_02_14_pkey; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_pkey ATTACH PARTITION realtime.messages_2026_02_14_pkey;


--
-- Name: messages_2026_02_15_inserted_at_topic_idx; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_inserted_at_topic_index ATTACH PARTITION realtime.messages_2026_02_15_inserted_at_topic_idx;


--
-- Name: messages_2026_02_15_pkey; Type: INDEX ATTACH; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER INDEX realtime.messages_pkey ATTACH PARTITION realtime.messages_2026_02_15_pkey;


--
-- Name: thread_allocations audit_thread_allocations; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER audit_thread_allocations AFTER INSERT OR DELETE OR UPDATE ON public.thread_allocations FOR EACH ROW EXECUTE FUNCTION public.thread_audit_trigger_func();


--
-- Name: TRIGGER audit_thread_allocations ON thread_allocations; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TRIGGER audit_thread_allocations ON public.thread_allocations IS 'Audit trigger for allocations - Trigger kiem toan phan bo';


--
-- Name: thread_inventory audit_thread_inventory; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER audit_thread_inventory AFTER INSERT OR DELETE OR UPDATE ON public.thread_inventory FOR EACH ROW EXECUTE FUNCTION public.thread_audit_trigger_func();


--
-- Name: TRIGGER audit_thread_inventory ON thread_inventory; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TRIGGER audit_thread_inventory ON public.thread_inventory IS 'Audit trigger for inventory - Trigger kiem toan ton kho';


--
-- Name: thread_recovery audit_thread_recovery; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER audit_thread_recovery AFTER INSERT OR DELETE OR UPDATE ON public.thread_recovery FOR EACH ROW EXECUTE FUNCTION public.thread_audit_trigger_func();


--
-- Name: TRIGGER audit_thread_recovery ON thread_recovery; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TRIGGER audit_thread_recovery ON public.thread_recovery IS 'Audit trigger for recovery - Trigger kiem toan thu hoi';


--
-- Name: thread_types audit_thread_types; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER audit_thread_types AFTER INSERT OR DELETE OR UPDATE ON public.thread_types FOR EACH ROW EXECUTE FUNCTION public.thread_audit_trigger_func();


--
-- Name: TRIGGER audit_thread_types ON thread_types; Type: COMMENT; Schema: public; Owner: postgres
--

COMMENT ON TRIGGER audit_thread_types ON public.thread_types IS 'Audit trigger for thread types - Trigger kiem toan loai chi';


--
-- Name: color_supplier trigger_color_supplier_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_color_supplier_updated_at BEFORE UPDATE ON public.color_supplier FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: colors trigger_colors_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_colors_updated_at BEFORE UPDATE ON public.colors FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: lots trigger_lots_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_lots_updated_at BEFORE UPDATE ON public.lots FOR EACH ROW EXECUTE FUNCTION public.update_lots_updated_at();


--
-- Name: po_items trigger_po_items_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_po_items_updated_at BEFORE UPDATE ON public.po_items FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: purchase_orders trigger_purchase_orders_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_purchase_orders_updated_at BEFORE UPDATE ON public.purchase_orders FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: skus trigger_skus_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_skus_updated_at BEFORE UPDATE ON public.skus FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: style_color_thread_specs trigger_style_color_thread_specs_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_style_color_thread_specs_updated_at BEFORE UPDATE ON public.style_color_thread_specs FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: style_thread_specs trigger_style_thread_specs_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_style_thread_specs_updated_at BEFORE UPDATE ON public.style_thread_specs FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: styles trigger_styles_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_styles_updated_at BEFORE UPDATE ON public.styles FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: suppliers trigger_suppliers_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_suppliers_updated_at BEFORE UPDATE ON public.suppliers FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: system_settings trigger_system_settings_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_system_settings_updated_at BEFORE UPDATE ON public.system_settings FOR EACH ROW EXECUTE FUNCTION public.fn_update_system_settings_timestamp();


--
-- Name: thread_issue_requests trigger_thread_issue_requests_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_thread_issue_requests_updated_at BEFORE UPDATE ON public.thread_issue_requests FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: thread_issues trigger_thread_issues_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_thread_issues_updated_at BEFORE UPDATE ON public.thread_issues FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: thread_order_deliveries trigger_thread_order_deliveries_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_thread_order_deliveries_updated_at BEFORE UPDATE ON public.thread_order_deliveries FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: thread_order_weeks trigger_thread_order_weeks_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_thread_order_weeks_updated_at BEFORE UPDATE ON public.thread_order_weeks FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: thread_stock trigger_thread_stock_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_thread_stock_updated_at BEFORE UPDATE ON public.thread_stock FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: thread_type_supplier trigger_thread_type_supplier_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_thread_type_supplier_updated_at BEFORE UPDATE ON public.thread_type_supplier FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: thread_issue_items trigger_update_issue_request_issued_meters; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_update_issue_request_issued_meters AFTER INSERT OR DELETE ON public.thread_issue_items FOR EACH ROW EXECUTE FUNCTION public.fn_update_issue_request_issued_meters();


--
-- Name: thread_issue_requests trigger_update_issue_request_status; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trigger_update_issue_request_status BEFORE UPDATE ON public.thread_issue_requests FOR EACH ROW EXECUTE FUNCTION public.fn_update_issue_request_status();


--
-- Name: employees update_employees_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_employees_updated_at BEFORE UPDATE ON public.employees FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: thread_allocations update_thread_allocations_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_thread_allocations_updated_at BEFORE UPDATE ON public.thread_allocations FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: thread_conflicts update_thread_conflicts_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_thread_conflicts_updated_at BEFORE UPDATE ON public.thread_conflicts FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: thread_inventory update_thread_inventory_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_thread_inventory_updated_at BEFORE UPDATE ON public.thread_inventory FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: thread_recovery update_thread_recovery_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_thread_recovery_updated_at BEFORE UPDATE ON public.thread_recovery FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: thread_types update_thread_types_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_thread_types_updated_at BEFORE UPDATE ON public.thread_types FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: warehouses update_warehouses_updated_at; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER update_warehouses_updated_at BEFORE UPDATE ON public.warehouses FOR EACH ROW EXECUTE FUNCTION public.update_updated_at_column();


--
-- Name: subscription tr_check_filters; Type: TRIGGER; Schema: realtime; Owner: supabase_admin
--

CREATE TRIGGER tr_check_filters BEFORE INSERT OR UPDATE ON realtime.subscription FOR EACH ROW EXECUTE FUNCTION realtime.subscription_check_filters();


--
-- Name: buckets enforce_bucket_name_length_trigger; Type: TRIGGER; Schema: storage; Owner: supabase_storage_admin
--

CREATE TRIGGER enforce_bucket_name_length_trigger BEFORE INSERT OR UPDATE OF name ON storage.buckets FOR EACH ROW EXECUTE FUNCTION storage.enforce_bucket_name_length();


--
-- Name: buckets protect_buckets_delete; Type: TRIGGER; Schema: storage; Owner: supabase_storage_admin
--

CREATE TRIGGER protect_buckets_delete BEFORE DELETE ON storage.buckets FOR EACH STATEMENT EXECUTE FUNCTION storage.protect_delete();


--
-- Name: objects protect_objects_delete; Type: TRIGGER; Schema: storage; Owner: supabase_storage_admin
--

CREATE TRIGGER protect_objects_delete BEFORE DELETE ON storage.objects FOR EACH STATEMENT EXECUTE FUNCTION storage.protect_delete();


--
-- Name: objects update_objects_updated_at; Type: TRIGGER; Schema: storage; Owner: supabase_storage_admin
--

CREATE TRIGGER update_objects_updated_at BEFORE UPDATE ON storage.objects FOR EACH ROW EXECUTE FUNCTION storage.update_updated_at_column();


--
-- Name: extensions extensions_tenant_external_id_fkey; Type: FK CONSTRAINT; Schema: _realtime; Owner: supabase_admin
--

ALTER TABLE ONLY _realtime.extensions
    ADD CONSTRAINT extensions_tenant_external_id_fkey FOREIGN KEY (tenant_external_id) REFERENCES _realtime.tenants(external_id) ON DELETE CASCADE;


--
-- Name: identities identities_user_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.identities
    ADD CONSTRAINT identities_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE;


--
-- Name: mfa_amr_claims mfa_amr_claims_session_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.mfa_amr_claims
    ADD CONSTRAINT mfa_amr_claims_session_id_fkey FOREIGN KEY (session_id) REFERENCES auth.sessions(id) ON DELETE CASCADE;


--
-- Name: mfa_challenges mfa_challenges_auth_factor_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.mfa_challenges
    ADD CONSTRAINT mfa_challenges_auth_factor_id_fkey FOREIGN KEY (factor_id) REFERENCES auth.mfa_factors(id) ON DELETE CASCADE;


--
-- Name: mfa_factors mfa_factors_user_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.mfa_factors
    ADD CONSTRAINT mfa_factors_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE;


--
-- Name: oauth_authorizations oauth_authorizations_client_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.oauth_authorizations
    ADD CONSTRAINT oauth_authorizations_client_id_fkey FOREIGN KEY (client_id) REFERENCES auth.oauth_clients(id) ON DELETE CASCADE;


--
-- Name: oauth_authorizations oauth_authorizations_user_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.oauth_authorizations
    ADD CONSTRAINT oauth_authorizations_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE;


--
-- Name: oauth_consents oauth_consents_client_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.oauth_consents
    ADD CONSTRAINT oauth_consents_client_id_fkey FOREIGN KEY (client_id) REFERENCES auth.oauth_clients(id) ON DELETE CASCADE;


--
-- Name: oauth_consents oauth_consents_user_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.oauth_consents
    ADD CONSTRAINT oauth_consents_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE;


--
-- Name: one_time_tokens one_time_tokens_user_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.one_time_tokens
    ADD CONSTRAINT one_time_tokens_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE;


--
-- Name: refresh_tokens refresh_tokens_session_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.refresh_tokens
    ADD CONSTRAINT refresh_tokens_session_id_fkey FOREIGN KEY (session_id) REFERENCES auth.sessions(id) ON DELETE CASCADE;


--
-- Name: saml_providers saml_providers_sso_provider_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.saml_providers
    ADD CONSTRAINT saml_providers_sso_provider_id_fkey FOREIGN KEY (sso_provider_id) REFERENCES auth.sso_providers(id) ON DELETE CASCADE;


--
-- Name: saml_relay_states saml_relay_states_flow_state_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.saml_relay_states
    ADD CONSTRAINT saml_relay_states_flow_state_id_fkey FOREIGN KEY (flow_state_id) REFERENCES auth.flow_state(id) ON DELETE CASCADE;


--
-- Name: saml_relay_states saml_relay_states_sso_provider_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.saml_relay_states
    ADD CONSTRAINT saml_relay_states_sso_provider_id_fkey FOREIGN KEY (sso_provider_id) REFERENCES auth.sso_providers(id) ON DELETE CASCADE;


--
-- Name: sessions sessions_oauth_client_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.sessions
    ADD CONSTRAINT sessions_oauth_client_id_fkey FOREIGN KEY (oauth_client_id) REFERENCES auth.oauth_clients(id) ON DELETE CASCADE;


--
-- Name: sessions sessions_user_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.sessions
    ADD CONSTRAINT sessions_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id) ON DELETE CASCADE;


--
-- Name: sso_domains sso_domains_sso_provider_id_fkey; Type: FK CONSTRAINT; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE ONLY auth.sso_domains
    ADD CONSTRAINT sso_domains_sso_provider_id_fkey FOREIGN KEY (sso_provider_id) REFERENCES auth.sso_providers(id) ON DELETE CASCADE;


--
-- Name: batch_transactions batch_transactions_from_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.batch_transactions
    ADD CONSTRAINT batch_transactions_from_warehouse_id_fkey FOREIGN KEY (from_warehouse_id) REFERENCES public.warehouses(id);


--
-- Name: batch_transactions batch_transactions_lot_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.batch_transactions
    ADD CONSTRAINT batch_transactions_lot_id_fkey FOREIGN KEY (lot_id) REFERENCES public.lots(id);


--
-- Name: batch_transactions batch_transactions_to_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.batch_transactions
    ADD CONSTRAINT batch_transactions_to_warehouse_id_fkey FOREIGN KEY (to_warehouse_id) REFERENCES public.warehouses(id);


--
-- Name: color_supplier color_supplier_color_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.color_supplier
    ADD CONSTRAINT color_supplier_color_id_fkey FOREIGN KEY (color_id) REFERENCES public.colors(id) ON DELETE RESTRICT;


--
-- Name: color_supplier color_supplier_supplier_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.color_supplier
    ADD CONSTRAINT color_supplier_supplier_id_fkey FOREIGN KEY (supplier_id) REFERENCES public.suppliers(id) ON DELETE RESTRICT;


--
-- Name: employee_permissions employee_permissions_assigned_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_permissions
    ADD CONSTRAINT employee_permissions_assigned_by_fkey FOREIGN KEY (assigned_by) REFERENCES public.employees(id);


--
-- Name: employee_permissions employee_permissions_employee_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_permissions
    ADD CONSTRAINT employee_permissions_employee_id_fkey FOREIGN KEY (employee_id) REFERENCES public.employees(id) ON DELETE CASCADE;


--
-- Name: employee_permissions employee_permissions_permission_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_permissions
    ADD CONSTRAINT employee_permissions_permission_id_fkey FOREIGN KEY (permission_id) REFERENCES public.permissions(id) ON DELETE CASCADE;


--
-- Name: employee_refresh_tokens employee_refresh_tokens_employee_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_refresh_tokens
    ADD CONSTRAINT employee_refresh_tokens_employee_id_fkey FOREIGN KEY (employee_id) REFERENCES public.employees(id) ON DELETE CASCADE;


--
-- Name: employee_roles employee_roles_assigned_by_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_roles
    ADD CONSTRAINT employee_roles_assigned_by_fkey FOREIGN KEY (assigned_by) REFERENCES public.employees(id);


--
-- Name: employee_roles employee_roles_employee_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_roles
    ADD CONSTRAINT employee_roles_employee_id_fkey FOREIGN KEY (employee_id) REFERENCES public.employees(id) ON DELETE CASCADE;


--
-- Name: employee_roles employee_roles_role_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.employee_roles
    ADD CONSTRAINT employee_roles_role_id_fkey FOREIGN KEY (role_id) REFERENCES public.roles(id) ON DELETE CASCADE;


--
-- Name: warehouses fk_warehouses_parent; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.warehouses
    ADD CONSTRAINT fk_warehouses_parent FOREIGN KEY (parent_id) REFERENCES public.warehouses(id) ON DELETE SET NULL;


--
-- Name: lots lots_supplier_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.lots
    ADD CONSTRAINT lots_supplier_id_fkey FOREIGN KEY (supplier_id) REFERENCES public.suppliers(id) ON DELETE SET NULL;


--
-- Name: lots lots_thread_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.lots
    ADD CONSTRAINT lots_thread_type_id_fkey FOREIGN KEY (thread_type_id) REFERENCES public.thread_types(id);


--
-- Name: lots lots_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.lots
    ADD CONSTRAINT lots_warehouse_id_fkey FOREIGN KEY (warehouse_id) REFERENCES public.warehouses(id);


--
-- Name: po_items po_items_po_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.po_items
    ADD CONSTRAINT po_items_po_id_fkey FOREIGN KEY (po_id) REFERENCES public.purchase_orders(id) ON DELETE CASCADE;


--
-- Name: po_items po_items_style_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.po_items
    ADD CONSTRAINT po_items_style_id_fkey FOREIGN KEY (style_id) REFERENCES public.styles(id) ON DELETE RESTRICT;


--
-- Name: role_permissions role_permissions_permission_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.role_permissions
    ADD CONSTRAINT role_permissions_permission_id_fkey FOREIGN KEY (permission_id) REFERENCES public.permissions(id) ON DELETE CASCADE;


--
-- Name: role_permissions role_permissions_role_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.role_permissions
    ADD CONSTRAINT role_permissions_role_id_fkey FOREIGN KEY (role_id) REFERENCES public.roles(id) ON DELETE CASCADE;


--
-- Name: skus skus_color_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.skus
    ADD CONSTRAINT skus_color_id_fkey FOREIGN KEY (color_id) REFERENCES public.colors(id) ON DELETE RESTRICT;


--
-- Name: skus skus_po_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.skus
    ADD CONSTRAINT skus_po_item_id_fkey FOREIGN KEY (po_item_id) REFERENCES public.po_items(id) ON DELETE CASCADE;


--
-- Name: style_color_thread_specs style_color_thread_specs_color_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.style_color_thread_specs
    ADD CONSTRAINT style_color_thread_specs_color_id_fkey FOREIGN KEY (color_id) REFERENCES public.colors(id) ON DELETE RESTRICT;


--
-- Name: style_color_thread_specs style_color_thread_specs_style_thread_spec_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.style_color_thread_specs
    ADD CONSTRAINT style_color_thread_specs_style_thread_spec_id_fkey FOREIGN KEY (style_thread_spec_id) REFERENCES public.style_thread_specs(id) ON DELETE CASCADE;


--
-- Name: style_color_thread_specs style_color_thread_specs_thread_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.style_color_thread_specs
    ADD CONSTRAINT style_color_thread_specs_thread_type_id_fkey FOREIGN KEY (thread_type_id) REFERENCES public.thread_types(id) ON DELETE RESTRICT;


--
-- Name: style_thread_specs style_thread_specs_style_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.style_thread_specs
    ADD CONSTRAINT style_thread_specs_style_id_fkey FOREIGN KEY (style_id) REFERENCES public.styles(id) ON DELETE CASCADE;


--
-- Name: style_thread_specs style_thread_specs_supplier_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.style_thread_specs
    ADD CONSTRAINT style_thread_specs_supplier_id_fkey FOREIGN KEY (supplier_id) REFERENCES public.suppliers(id) ON DELETE RESTRICT;


--
-- Name: style_thread_specs style_thread_specs_tex_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.style_thread_specs
    ADD CONSTRAINT style_thread_specs_tex_id_fkey FOREIGN KEY (tex_id) REFERENCES public.thread_types(id) ON DELETE SET NULL;


--
-- Name: thread_allocation_cones thread_allocation_cones_allocation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_allocation_cones
    ADD CONSTRAINT thread_allocation_cones_allocation_id_fkey FOREIGN KEY (allocation_id) REFERENCES public.thread_allocations(id) ON DELETE CASCADE;


--
-- Name: thread_allocation_cones thread_allocation_cones_cone_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_allocation_cones
    ADD CONSTRAINT thread_allocation_cones_cone_id_fkey FOREIGN KEY (cone_id) REFERENCES public.thread_inventory(id);


--
-- Name: thread_allocations thread_allocations_split_from_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_allocations
    ADD CONSTRAINT thread_allocations_split_from_id_fkey FOREIGN KEY (split_from_id) REFERENCES public.thread_allocations(id);


--
-- Name: thread_allocations thread_allocations_thread_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_allocations
    ADD CONSTRAINT thread_allocations_thread_type_id_fkey FOREIGN KEY (thread_type_id) REFERENCES public.thread_types(id);


--
-- Name: thread_conflict_allocations thread_conflict_allocations_allocation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_conflict_allocations
    ADD CONSTRAINT thread_conflict_allocations_allocation_id_fkey FOREIGN KEY (allocation_id) REFERENCES public.thread_allocations(id);


--
-- Name: thread_conflict_allocations thread_conflict_allocations_conflict_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_conflict_allocations
    ADD CONSTRAINT thread_conflict_allocations_conflict_id_fkey FOREIGN KEY (conflict_id) REFERENCES public.thread_conflicts(id) ON DELETE CASCADE;


--
-- Name: thread_conflicts thread_conflicts_thread_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_conflicts
    ADD CONSTRAINT thread_conflicts_thread_type_id_fkey FOREIGN KEY (thread_type_id) REFERENCES public.thread_types(id);


--
-- Name: thread_inventory thread_inventory_lot_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_inventory
    ADD CONSTRAINT thread_inventory_lot_id_fkey FOREIGN KEY (lot_id) REFERENCES public.lots(id);


--
-- Name: thread_inventory thread_inventory_thread_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_inventory
    ADD CONSTRAINT thread_inventory_thread_type_id_fkey FOREIGN KEY (thread_type_id) REFERENCES public.thread_types(id);


--
-- Name: thread_inventory thread_inventory_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_inventory
    ADD CONSTRAINT thread_inventory_warehouse_id_fkey FOREIGN KEY (warehouse_id) REFERENCES public.warehouses(id);


--
-- Name: thread_issue_items thread_issue_items_allocation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_items
    ADD CONSTRAINT thread_issue_items_allocation_id_fkey FOREIGN KEY (allocation_id) REFERENCES public.thread_allocations(id);


--
-- Name: thread_issue_items thread_issue_items_cone_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_items
    ADD CONSTRAINT thread_issue_items_cone_id_fkey FOREIGN KEY (cone_id) REFERENCES public.thread_inventory(id);


--
-- Name: thread_issue_items thread_issue_items_issue_request_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_items
    ADD CONSTRAINT thread_issue_items_issue_request_id_fkey FOREIGN KEY (issue_request_id) REFERENCES public.thread_issue_requests(id) ON DELETE CASCADE;


--
-- Name: thread_issue_lines thread_issue_lines_color_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_lines
    ADD CONSTRAINT thread_issue_lines_color_id_fkey FOREIGN KEY (color_id) REFERENCES public.colors(id);


--
-- Name: thread_issue_lines thread_issue_lines_issue_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_lines
    ADD CONSTRAINT thread_issue_lines_issue_id_fkey FOREIGN KEY (issue_id) REFERENCES public.thread_issues(id) ON DELETE CASCADE;


--
-- Name: thread_issue_lines thread_issue_lines_po_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_lines
    ADD CONSTRAINT thread_issue_lines_po_id_fkey FOREIGN KEY (po_id) REFERENCES public.purchase_orders(id);


--
-- Name: thread_issue_lines thread_issue_lines_style_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_lines
    ADD CONSTRAINT thread_issue_lines_style_id_fkey FOREIGN KEY (style_id) REFERENCES public.styles(id);


--
-- Name: thread_issue_lines thread_issue_lines_thread_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_lines
    ADD CONSTRAINT thread_issue_lines_thread_type_id_fkey FOREIGN KEY (thread_type_id) REFERENCES public.thread_types(id);


--
-- Name: thread_issue_requests thread_issue_requests_color_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_requests
    ADD CONSTRAINT thread_issue_requests_color_id_fkey FOREIGN KEY (color_id) REFERENCES public.colors(id);


--
-- Name: thread_issue_requests thread_issue_requests_po_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_requests
    ADD CONSTRAINT thread_issue_requests_po_id_fkey FOREIGN KEY (po_id) REFERENCES public.purchase_orders(id);


--
-- Name: thread_issue_requests thread_issue_requests_style_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_requests
    ADD CONSTRAINT thread_issue_requests_style_id_fkey FOREIGN KEY (style_id) REFERENCES public.styles(id);


--
-- Name: thread_issue_requests thread_issue_requests_thread_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_requests
    ADD CONSTRAINT thread_issue_requests_thread_type_id_fkey FOREIGN KEY (thread_type_id) REFERENCES public.thread_types(id);


--
-- Name: thread_issue_returns thread_issue_returns_cone_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_returns
    ADD CONSTRAINT thread_issue_returns_cone_id_fkey FOREIGN KEY (cone_id) REFERENCES public.thread_inventory(id);


--
-- Name: thread_issue_returns thread_issue_returns_issue_item_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_issue_returns
    ADD CONSTRAINT thread_issue_returns_issue_item_id_fkey FOREIGN KEY (issue_item_id) REFERENCES public.thread_issue_items(id) ON DELETE CASCADE;


--
-- Name: thread_movements thread_movements_allocation_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_movements
    ADD CONSTRAINT thread_movements_allocation_id_fkey FOREIGN KEY (allocation_id) REFERENCES public.thread_allocations(id);


--
-- Name: thread_movements thread_movements_cone_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_movements
    ADD CONSTRAINT thread_movements_cone_id_fkey FOREIGN KEY (cone_id) REFERENCES public.thread_inventory(id);


--
-- Name: thread_order_deliveries thread_order_deliveries_supplier_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_deliveries
    ADD CONSTRAINT thread_order_deliveries_supplier_id_fkey FOREIGN KEY (supplier_id) REFERENCES public.suppliers(id);


--
-- Name: thread_order_deliveries thread_order_deliveries_thread_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_deliveries
    ADD CONSTRAINT thread_order_deliveries_thread_type_id_fkey FOREIGN KEY (thread_type_id) REFERENCES public.thread_types(id);


--
-- Name: thread_order_deliveries thread_order_deliveries_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_deliveries
    ADD CONSTRAINT thread_order_deliveries_warehouse_id_fkey FOREIGN KEY (warehouse_id) REFERENCES public.warehouses(id);


--
-- Name: thread_order_deliveries thread_order_deliveries_week_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_deliveries
    ADD CONSTRAINT thread_order_deliveries_week_id_fkey FOREIGN KEY (week_id) REFERENCES public.thread_order_weeks(id) ON DELETE CASCADE;


--
-- Name: thread_order_items thread_order_items_color_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_items
    ADD CONSTRAINT thread_order_items_color_id_fkey FOREIGN KEY (color_id) REFERENCES public.colors(id) ON DELETE RESTRICT;


--
-- Name: thread_order_items thread_order_items_po_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_items
    ADD CONSTRAINT thread_order_items_po_id_fkey FOREIGN KEY (po_id) REFERENCES public.purchase_orders(id) ON DELETE RESTRICT;


--
-- Name: thread_order_items thread_order_items_style_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_items
    ADD CONSTRAINT thread_order_items_style_id_fkey FOREIGN KEY (style_id) REFERENCES public.styles(id) ON DELETE RESTRICT;


--
-- Name: thread_order_items thread_order_items_week_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_items
    ADD CONSTRAINT thread_order_items_week_id_fkey FOREIGN KEY (week_id) REFERENCES public.thread_order_weeks(id) ON DELETE CASCADE;


--
-- Name: thread_order_results thread_order_results_week_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_order_results
    ADD CONSTRAINT thread_order_results_week_id_fkey FOREIGN KEY (week_id) REFERENCES public.thread_order_weeks(id) ON DELETE CASCADE;


--
-- Name: thread_recovery thread_recovery_cone_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_recovery
    ADD CONSTRAINT thread_recovery_cone_id_fkey FOREIGN KEY (cone_id) REFERENCES public.thread_inventory(id);


--
-- Name: thread_stock thread_stock_thread_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_stock
    ADD CONSTRAINT thread_stock_thread_type_id_fkey FOREIGN KEY (thread_type_id) REFERENCES public.thread_types(id) ON DELETE RESTRICT;


--
-- Name: thread_stock thread_stock_warehouse_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_stock
    ADD CONSTRAINT thread_stock_warehouse_id_fkey FOREIGN KEY (warehouse_id) REFERENCES public.warehouses(id) ON DELETE RESTRICT;


--
-- Name: thread_type_supplier thread_type_supplier_supplier_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_type_supplier
    ADD CONSTRAINT thread_type_supplier_supplier_id_fkey FOREIGN KEY (supplier_id) REFERENCES public.suppliers(id) ON DELETE RESTRICT;


--
-- Name: thread_type_supplier thread_type_supplier_thread_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_type_supplier
    ADD CONSTRAINT thread_type_supplier_thread_type_id_fkey FOREIGN KEY (thread_type_id) REFERENCES public.thread_types(id) ON DELETE CASCADE;


--
-- Name: thread_types thread_types_color_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_types
    ADD CONSTRAINT thread_types_color_id_fkey FOREIGN KEY (color_id) REFERENCES public.colors(id) ON DELETE SET NULL;


--
-- Name: thread_types thread_types_color_supplier_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_types
    ADD CONSTRAINT thread_types_color_supplier_id_fkey FOREIGN KEY (color_supplier_id) REFERENCES public.color_supplier(id) ON DELETE SET NULL;


--
-- Name: thread_types thread_types_supplier_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.thread_types
    ADD CONSTRAINT thread_types_supplier_id_fkey FOREIGN KEY (supplier_id) REFERENCES public.suppliers(id) ON DELETE SET NULL;


--
-- Name: iceberg_namespaces iceberg_namespaces_catalog_id_fkey; Type: FK CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.iceberg_namespaces
    ADD CONSTRAINT iceberg_namespaces_catalog_id_fkey FOREIGN KEY (catalog_id) REFERENCES storage.buckets_analytics(id) ON DELETE CASCADE;


--
-- Name: iceberg_tables iceberg_tables_catalog_id_fkey; Type: FK CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.iceberg_tables
    ADD CONSTRAINT iceberg_tables_catalog_id_fkey FOREIGN KEY (catalog_id) REFERENCES storage.buckets_analytics(id) ON DELETE CASCADE;


--
-- Name: iceberg_tables iceberg_tables_namespace_id_fkey; Type: FK CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.iceberg_tables
    ADD CONSTRAINT iceberg_tables_namespace_id_fkey FOREIGN KEY (namespace_id) REFERENCES storage.iceberg_namespaces(id) ON DELETE CASCADE;


--
-- Name: objects objects_bucketId_fkey; Type: FK CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.objects
    ADD CONSTRAINT "objects_bucketId_fkey" FOREIGN KEY (bucket_id) REFERENCES storage.buckets(id);


--
-- Name: s3_multipart_uploads s3_multipart_uploads_bucket_id_fkey; Type: FK CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.s3_multipart_uploads
    ADD CONSTRAINT s3_multipart_uploads_bucket_id_fkey FOREIGN KEY (bucket_id) REFERENCES storage.buckets(id);


--
-- Name: s3_multipart_uploads_parts s3_multipart_uploads_parts_bucket_id_fkey; Type: FK CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.s3_multipart_uploads_parts
    ADD CONSTRAINT s3_multipart_uploads_parts_bucket_id_fkey FOREIGN KEY (bucket_id) REFERENCES storage.buckets(id);


--
-- Name: s3_multipart_uploads_parts s3_multipart_uploads_parts_upload_id_fkey; Type: FK CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.s3_multipart_uploads_parts
    ADD CONSTRAINT s3_multipart_uploads_parts_upload_id_fkey FOREIGN KEY (upload_id) REFERENCES storage.s3_multipart_uploads(id) ON DELETE CASCADE;


--
-- Name: vector_indexes vector_indexes_bucket_id_fkey; Type: FK CONSTRAINT; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE ONLY storage.vector_indexes
    ADD CONSTRAINT vector_indexes_bucket_id_fkey FOREIGN KEY (bucket_id) REFERENCES storage.buckets_vectors(id);


--
-- Name: audit_log_entries; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.audit_log_entries ENABLE ROW LEVEL SECURITY;

--
-- Name: flow_state; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.flow_state ENABLE ROW LEVEL SECURITY;

--
-- Name: identities; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.identities ENABLE ROW LEVEL SECURITY;

--
-- Name: instances; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.instances ENABLE ROW LEVEL SECURITY;

--
-- Name: mfa_amr_claims; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.mfa_amr_claims ENABLE ROW LEVEL SECURITY;

--
-- Name: mfa_challenges; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.mfa_challenges ENABLE ROW LEVEL SECURITY;

--
-- Name: mfa_factors; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.mfa_factors ENABLE ROW LEVEL SECURITY;

--
-- Name: one_time_tokens; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.one_time_tokens ENABLE ROW LEVEL SECURITY;

--
-- Name: refresh_tokens; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.refresh_tokens ENABLE ROW LEVEL SECURITY;

--
-- Name: saml_providers; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.saml_providers ENABLE ROW LEVEL SECURITY;

--
-- Name: saml_relay_states; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.saml_relay_states ENABLE ROW LEVEL SECURITY;

--
-- Name: schema_migrations; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.schema_migrations ENABLE ROW LEVEL SECURITY;

--
-- Name: sessions; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.sessions ENABLE ROW LEVEL SECURITY;

--
-- Name: sso_domains; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.sso_domains ENABLE ROW LEVEL SECURITY;

--
-- Name: sso_providers; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.sso_providers ENABLE ROW LEVEL SECURITY;

--
-- Name: users; Type: ROW SECURITY; Schema: auth; Owner: supabase_auth_admin
--

ALTER TABLE auth.users ENABLE ROW LEVEL SECURITY;

--
-- Name: messages; Type: ROW SECURITY; Schema: realtime; Owner: supabase_realtime_admin
--

ALTER TABLE realtime.messages ENABLE ROW LEVEL SECURITY;

--
-- Name: buckets; Type: ROW SECURITY; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE storage.buckets ENABLE ROW LEVEL SECURITY;

--
-- Name: buckets_analytics; Type: ROW SECURITY; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE storage.buckets_analytics ENABLE ROW LEVEL SECURITY;

--
-- Name: buckets_vectors; Type: ROW SECURITY; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE storage.buckets_vectors ENABLE ROW LEVEL SECURITY;

--
-- Name: iceberg_namespaces; Type: ROW SECURITY; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE storage.iceberg_namespaces ENABLE ROW LEVEL SECURITY;

--
-- Name: iceberg_tables; Type: ROW SECURITY; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE storage.iceberg_tables ENABLE ROW LEVEL SECURITY;

--
-- Name: migrations; Type: ROW SECURITY; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE storage.migrations ENABLE ROW LEVEL SECURITY;

--
-- Name: objects; Type: ROW SECURITY; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE storage.objects ENABLE ROW LEVEL SECURITY;

--
-- Name: s3_multipart_uploads; Type: ROW SECURITY; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE storage.s3_multipart_uploads ENABLE ROW LEVEL SECURITY;

--
-- Name: s3_multipart_uploads_parts; Type: ROW SECURITY; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE storage.s3_multipart_uploads_parts ENABLE ROW LEVEL SECURITY;

--
-- Name: vector_indexes; Type: ROW SECURITY; Schema: storage; Owner: supabase_storage_admin
--

ALTER TABLE storage.vector_indexes ENABLE ROW LEVEL SECURITY;

--
-- Name: supabase_realtime; Type: PUBLICATION; Schema: -; Owner: postgres
--

CREATE PUBLICATION supabase_realtime WITH (publish = 'insert, update, delete, truncate');


ALTER PUBLICATION supabase_realtime OWNER TO postgres;

--
-- Name: supabase_realtime_messages_publication; Type: PUBLICATION; Schema: -; Owner: supabase_admin
--

CREATE PUBLICATION supabase_realtime_messages_publication WITH (publish = 'insert, update, delete, truncate');


ALTER PUBLICATION supabase_realtime_messages_publication OWNER TO supabase_admin;

--
-- Name: supabase_realtime thread_allocations; Type: PUBLICATION TABLE; Schema: public; Owner: postgres
--

ALTER PUBLICATION supabase_realtime ADD TABLE ONLY public.thread_allocations;


--
-- Name: supabase_realtime thread_conflicts; Type: PUBLICATION TABLE; Schema: public; Owner: postgres
--

ALTER PUBLICATION supabase_realtime ADD TABLE ONLY public.thread_conflicts;


--
-- Name: supabase_realtime thread_inventory; Type: PUBLICATION TABLE; Schema: public; Owner: postgres
--

ALTER PUBLICATION supabase_realtime ADD TABLE ONLY public.thread_inventory;


--
-- Name: supabase_realtime thread_movements; Type: PUBLICATION TABLE; Schema: public; Owner: postgres
--

ALTER PUBLICATION supabase_realtime ADD TABLE ONLY public.thread_movements;


--
-- Name: supabase_realtime thread_recovery; Type: PUBLICATION TABLE; Schema: public; Owner: postgres
--

ALTER PUBLICATION supabase_realtime ADD TABLE ONLY public.thread_recovery;


--
-- Name: supabase_realtime_messages_publication messages; Type: PUBLICATION TABLE; Schema: realtime; Owner: supabase_admin
--

ALTER PUBLICATION supabase_realtime_messages_publication ADD TABLE ONLY realtime.messages;


--
-- Name: SCHEMA auth; Type: ACL; Schema: -; Owner: supabase_admin
--

GRANT USAGE ON SCHEMA auth TO anon;
GRANT USAGE ON SCHEMA auth TO authenticated;
GRANT USAGE ON SCHEMA auth TO service_role;
GRANT ALL ON SCHEMA auth TO supabase_auth_admin;
GRANT ALL ON SCHEMA auth TO dashboard_user;
GRANT USAGE ON SCHEMA auth TO postgres;


--
-- Name: SCHEMA extensions; Type: ACL; Schema: -; Owner: postgres
--

GRANT USAGE ON SCHEMA extensions TO anon;
GRANT USAGE ON SCHEMA extensions TO authenticated;
GRANT USAGE ON SCHEMA extensions TO service_role;
GRANT ALL ON SCHEMA extensions TO dashboard_user;


--
-- Name: SCHEMA net; Type: ACL; Schema: -; Owner: supabase_admin
--

GRANT USAGE ON SCHEMA net TO supabase_functions_admin;
GRANT USAGE ON SCHEMA net TO postgres;
GRANT USAGE ON SCHEMA net TO anon;
GRANT USAGE ON SCHEMA net TO authenticated;
GRANT USAGE ON SCHEMA net TO service_role;


--
-- Name: SCHEMA public; Type: ACL; Schema: -; Owner: pg_database_owner
--

GRANT USAGE ON SCHEMA public TO postgres;
GRANT USAGE ON SCHEMA public TO anon;
GRANT USAGE ON SCHEMA public TO authenticated;
GRANT USAGE ON SCHEMA public TO service_role;


--
-- Name: SCHEMA realtime; Type: ACL; Schema: -; Owner: supabase_admin
--

GRANT USAGE ON SCHEMA realtime TO postgres;
GRANT USAGE ON SCHEMA realtime TO anon;
GRANT USAGE ON SCHEMA realtime TO authenticated;
GRANT USAGE ON SCHEMA realtime TO service_role;
GRANT ALL ON SCHEMA realtime TO supabase_realtime_admin;


--
-- Name: SCHEMA storage; Type: ACL; Schema: -; Owner: supabase_admin
--

GRANT USAGE ON SCHEMA storage TO postgres WITH GRANT OPTION;
GRANT USAGE ON SCHEMA storage TO anon;
GRANT USAGE ON SCHEMA storage TO authenticated;
GRANT USAGE ON SCHEMA storage TO service_role;
GRANT ALL ON SCHEMA storage TO supabase_storage_admin WITH GRANT OPTION;
GRANT ALL ON SCHEMA storage TO dashboard_user;


--
-- Name: SCHEMA supabase_functions; Type: ACL; Schema: -; Owner: supabase_admin
--

GRANT USAGE ON SCHEMA supabase_functions TO postgres;
GRANT USAGE ON SCHEMA supabase_functions TO anon;
GRANT USAGE ON SCHEMA supabase_functions TO authenticated;
GRANT USAGE ON SCHEMA supabase_functions TO service_role;
GRANT ALL ON SCHEMA supabase_functions TO supabase_functions_admin;


--
-- Name: SCHEMA vault; Type: ACL; Schema: -; Owner: supabase_admin
--

GRANT USAGE ON SCHEMA vault TO postgres WITH GRANT OPTION;
GRANT USAGE ON SCHEMA vault TO service_role;


--
-- Name: FUNCTION email(); Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT ALL ON FUNCTION auth.email() TO dashboard_user;


--
-- Name: FUNCTION jwt(); Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT ALL ON FUNCTION auth.jwt() TO postgres;
GRANT ALL ON FUNCTION auth.jwt() TO dashboard_user;


--
-- Name: FUNCTION role(); Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT ALL ON FUNCTION auth.role() TO dashboard_user;


--
-- Name: FUNCTION uid(); Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT ALL ON FUNCTION auth.uid() TO dashboard_user;


--
-- Name: FUNCTION armor(bytea); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.armor(bytea) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.armor(bytea) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION armor(bytea, text[], text[]); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.armor(bytea, text[], text[]) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.armor(bytea, text[], text[]) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION crypt(text, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.crypt(text, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.crypt(text, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION dearmor(text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.dearmor(text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.dearmor(text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION decrypt(bytea, bytea, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.decrypt(bytea, bytea, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.decrypt(bytea, bytea, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION decrypt_iv(bytea, bytea, bytea, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.decrypt_iv(bytea, bytea, bytea, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.decrypt_iv(bytea, bytea, bytea, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION digest(bytea, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.digest(bytea, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.digest(bytea, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION digest(text, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.digest(text, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.digest(text, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION encrypt(bytea, bytea, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.encrypt(bytea, bytea, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.encrypt(bytea, bytea, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION encrypt_iv(bytea, bytea, bytea, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.encrypt_iv(bytea, bytea, bytea, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.encrypt_iv(bytea, bytea, bytea, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION gen_random_bytes(integer); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.gen_random_bytes(integer) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.gen_random_bytes(integer) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION gen_random_uuid(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.gen_random_uuid() TO dashboard_user;
GRANT ALL ON FUNCTION extensions.gen_random_uuid() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION gen_salt(text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.gen_salt(text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.gen_salt(text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION gen_salt(text, integer); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.gen_salt(text, integer) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.gen_salt(text, integer) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION grant_pg_cron_access(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

REVOKE ALL ON FUNCTION extensions.grant_pg_cron_access() FROM supabase_admin;
GRANT ALL ON FUNCTION extensions.grant_pg_cron_access() TO supabase_admin WITH GRANT OPTION;
GRANT ALL ON FUNCTION extensions.grant_pg_cron_access() TO dashboard_user;


--
-- Name: FUNCTION grant_pg_graphql_access(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.grant_pg_graphql_access() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION grant_pg_net_access(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

REVOKE ALL ON FUNCTION extensions.grant_pg_net_access() FROM supabase_admin;
GRANT ALL ON FUNCTION extensions.grant_pg_net_access() TO supabase_admin WITH GRANT OPTION;
GRANT ALL ON FUNCTION extensions.grant_pg_net_access() TO dashboard_user;


--
-- Name: FUNCTION hmac(bytea, bytea, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.hmac(bytea, bytea, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.hmac(bytea, bytea, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION hmac(text, text, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.hmac(text, text, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.hmac(text, text, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pg_stat_statements(showtext boolean, OUT userid oid, OUT dbid oid, OUT toplevel boolean, OUT queryid bigint, OUT query text, OUT plans bigint, OUT total_plan_time double precision, OUT min_plan_time double precision, OUT max_plan_time double precision, OUT mean_plan_time double precision, OUT stddev_plan_time double precision, OUT calls bigint, OUT total_exec_time double precision, OUT min_exec_time double precision, OUT max_exec_time double precision, OUT mean_exec_time double precision, OUT stddev_exec_time double precision, OUT rows bigint, OUT shared_blks_hit bigint, OUT shared_blks_read bigint, OUT shared_blks_dirtied bigint, OUT shared_blks_written bigint, OUT local_blks_hit bigint, OUT local_blks_read bigint, OUT local_blks_dirtied bigint, OUT local_blks_written bigint, OUT temp_blks_read bigint, OUT temp_blks_written bigint, OUT shared_blk_read_time double precision, OUT shared_blk_write_time double precision, OUT local_blk_read_time double precision, OUT local_blk_write_time double precision, OUT temp_blk_read_time double precision, OUT temp_blk_write_time double precision, OUT wal_records bigint, OUT wal_fpi bigint, OUT wal_bytes numeric, OUT jit_functions bigint, OUT jit_generation_time double precision, OUT jit_inlining_count bigint, OUT jit_inlining_time double precision, OUT jit_optimization_count bigint, OUT jit_optimization_time double precision, OUT jit_emission_count bigint, OUT jit_emission_time double precision, OUT jit_deform_count bigint, OUT jit_deform_time double precision, OUT stats_since timestamp with time zone, OUT minmax_stats_since timestamp with time zone); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pg_stat_statements(showtext boolean, OUT userid oid, OUT dbid oid, OUT toplevel boolean, OUT queryid bigint, OUT query text, OUT plans bigint, OUT total_plan_time double precision, OUT min_plan_time double precision, OUT max_plan_time double precision, OUT mean_plan_time double precision, OUT stddev_plan_time double precision, OUT calls bigint, OUT total_exec_time double precision, OUT min_exec_time double precision, OUT max_exec_time double precision, OUT mean_exec_time double precision, OUT stddev_exec_time double precision, OUT rows bigint, OUT shared_blks_hit bigint, OUT shared_blks_read bigint, OUT shared_blks_dirtied bigint, OUT shared_blks_written bigint, OUT local_blks_hit bigint, OUT local_blks_read bigint, OUT local_blks_dirtied bigint, OUT local_blks_written bigint, OUT temp_blks_read bigint, OUT temp_blks_written bigint, OUT shared_blk_read_time double precision, OUT shared_blk_write_time double precision, OUT local_blk_read_time double precision, OUT local_blk_write_time double precision, OUT temp_blk_read_time double precision, OUT temp_blk_write_time double precision, OUT wal_records bigint, OUT wal_fpi bigint, OUT wal_bytes numeric, OUT jit_functions bigint, OUT jit_generation_time double precision, OUT jit_inlining_count bigint, OUT jit_inlining_time double precision, OUT jit_optimization_count bigint, OUT jit_optimization_time double precision, OUT jit_emission_count bigint, OUT jit_emission_time double precision, OUT jit_deform_count bigint, OUT jit_deform_time double precision, OUT stats_since timestamp with time zone, OUT minmax_stats_since timestamp with time zone) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pg_stat_statements_info(OUT dealloc bigint, OUT stats_reset timestamp with time zone); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pg_stat_statements_info(OUT dealloc bigint, OUT stats_reset timestamp with time zone) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pg_stat_statements_reset(userid oid, dbid oid, queryid bigint, minmax_only boolean); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pg_stat_statements_reset(userid oid, dbid oid, queryid bigint, minmax_only boolean) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_armor_headers(text, OUT key text, OUT value text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_armor_headers(text, OUT key text, OUT value text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_armor_headers(text, OUT key text, OUT value text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_key_id(bytea); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_key_id(bytea) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_key_id(bytea) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_pub_decrypt(bytea, bytea); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_pub_decrypt(bytea, bytea) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_pub_decrypt(bytea, bytea) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_pub_decrypt(bytea, bytea, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_pub_decrypt(bytea, bytea, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_pub_decrypt(bytea, bytea, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_pub_decrypt(bytea, bytea, text, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_pub_decrypt(bytea, bytea, text, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_pub_decrypt(bytea, bytea, text, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_pub_decrypt_bytea(bytea, bytea); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_pub_decrypt_bytea(bytea, bytea) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_pub_decrypt_bytea(bytea, bytea) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_pub_decrypt_bytea(bytea, bytea, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_pub_decrypt_bytea(bytea, bytea, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_pub_decrypt_bytea(bytea, bytea, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_pub_decrypt_bytea(bytea, bytea, text, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_pub_decrypt_bytea(bytea, bytea, text, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_pub_decrypt_bytea(bytea, bytea, text, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_pub_encrypt(text, bytea); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_pub_encrypt(text, bytea) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_pub_encrypt(text, bytea) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_pub_encrypt(text, bytea, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_pub_encrypt(text, bytea, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_pub_encrypt(text, bytea, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_pub_encrypt_bytea(bytea, bytea); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_pub_encrypt_bytea(bytea, bytea) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_pub_encrypt_bytea(bytea, bytea) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_pub_encrypt_bytea(bytea, bytea, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_pub_encrypt_bytea(bytea, bytea, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_pub_encrypt_bytea(bytea, bytea, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_sym_decrypt(bytea, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_sym_decrypt(bytea, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_sym_decrypt(bytea, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_sym_decrypt(bytea, text, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_sym_decrypt(bytea, text, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_sym_decrypt(bytea, text, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_sym_decrypt_bytea(bytea, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_sym_decrypt_bytea(bytea, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_sym_decrypt_bytea(bytea, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_sym_decrypt_bytea(bytea, text, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_sym_decrypt_bytea(bytea, text, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_sym_decrypt_bytea(bytea, text, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_sym_encrypt(text, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_sym_encrypt(text, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_sym_encrypt(text, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_sym_encrypt(text, text, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_sym_encrypt(text, text, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_sym_encrypt(text, text, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_sym_encrypt_bytea(bytea, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_sym_encrypt_bytea(bytea, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_sym_encrypt_bytea(bytea, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgp_sym_encrypt_bytea(bytea, text, text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgp_sym_encrypt_bytea(bytea, text, text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.pgp_sym_encrypt_bytea(bytea, text, text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgrst_ddl_watch(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgrst_ddl_watch() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION pgrst_drop_watch(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.pgrst_drop_watch() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION set_graphql_placeholder(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.set_graphql_placeholder() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION uuid_generate_v1(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.uuid_generate_v1() TO dashboard_user;
GRANT ALL ON FUNCTION extensions.uuid_generate_v1() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION uuid_generate_v1mc(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.uuid_generate_v1mc() TO dashboard_user;
GRANT ALL ON FUNCTION extensions.uuid_generate_v1mc() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION uuid_generate_v3(namespace uuid, name text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.uuid_generate_v3(namespace uuid, name text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.uuid_generate_v3(namespace uuid, name text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION uuid_generate_v4(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.uuid_generate_v4() TO dashboard_user;
GRANT ALL ON FUNCTION extensions.uuid_generate_v4() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION uuid_generate_v5(namespace uuid, name text); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.uuid_generate_v5(namespace uuid, name text) TO dashboard_user;
GRANT ALL ON FUNCTION extensions.uuid_generate_v5(namespace uuid, name text) TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION uuid_nil(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.uuid_nil() TO dashboard_user;
GRANT ALL ON FUNCTION extensions.uuid_nil() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION uuid_ns_dns(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.uuid_ns_dns() TO dashboard_user;
GRANT ALL ON FUNCTION extensions.uuid_ns_dns() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION uuid_ns_oid(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.uuid_ns_oid() TO dashboard_user;
GRANT ALL ON FUNCTION extensions.uuid_ns_oid() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION uuid_ns_url(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.uuid_ns_url() TO dashboard_user;
GRANT ALL ON FUNCTION extensions.uuid_ns_url() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION uuid_ns_x500(); Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON FUNCTION extensions.uuid_ns_x500() TO dashboard_user;
GRANT ALL ON FUNCTION extensions.uuid_ns_x500() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION graphql("operationName" text, query text, variables jsonb, extensions jsonb); Type: ACL; Schema: graphql_public; Owner: supabase_admin
--

GRANT ALL ON FUNCTION graphql_public.graphql("operationName" text, query text, variables jsonb, extensions jsonb) TO postgres;
GRANT ALL ON FUNCTION graphql_public.graphql("operationName" text, query text, variables jsonb, extensions jsonb) TO anon;
GRANT ALL ON FUNCTION graphql_public.graphql("operationName" text, query text, variables jsonb, extensions jsonb) TO authenticated;
GRANT ALL ON FUNCTION graphql_public.graphql("operationName" text, query text, variables jsonb, extensions jsonb) TO service_role;


--
-- Name: FUNCTION http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer); Type: ACL; Schema: net; Owner: supabase_admin
--

REVOKE ALL ON FUNCTION net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) FROM PUBLIC;
GRANT ALL ON FUNCTION net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) TO supabase_functions_admin;
GRANT ALL ON FUNCTION net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) TO postgres;
GRANT ALL ON FUNCTION net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) TO anon;
GRANT ALL ON FUNCTION net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) TO authenticated;
GRANT ALL ON FUNCTION net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) TO service_role;


--
-- Name: FUNCTION http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer); Type: ACL; Schema: net; Owner: supabase_admin
--

REVOKE ALL ON FUNCTION net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) FROM PUBLIC;
GRANT ALL ON FUNCTION net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) TO supabase_functions_admin;
GRANT ALL ON FUNCTION net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) TO postgres;
GRANT ALL ON FUNCTION net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) TO anon;
GRANT ALL ON FUNCTION net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) TO authenticated;
GRANT ALL ON FUNCTION net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) TO service_role;


--
-- Name: FUNCTION pg_reload_conf(); Type: ACL; Schema: pg_catalog; Owner: supabase_admin
--

GRANT ALL ON FUNCTION pg_catalog.pg_reload_conf() TO postgres WITH GRANT OPTION;


--
-- Name: FUNCTION get_auth(p_usename text); Type: ACL; Schema: pgbouncer; Owner: supabase_admin
--

REVOKE ALL ON FUNCTION pgbouncer.get_auth(p_usename text) FROM PUBLIC;
GRANT ALL ON FUNCTION pgbouncer.get_auth(p_usename text) TO pgbouncer;


--
-- Name: FUNCTION allocate_thread(p_order_id character varying, p_order_reference character varying, p_thread_type_id integer, p_requested_meters numeric, p_priority public.allocation_priority, p_due_date date, p_notes text, p_created_by character varying); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.allocate_thread(p_order_id character varying, p_order_reference character varying, p_thread_type_id integer, p_requested_meters numeric, p_priority public.allocation_priority, p_due_date date, p_notes text, p_created_by character varying) TO anon;
GRANT ALL ON FUNCTION public.allocate_thread(p_order_id character varying, p_order_reference character varying, p_thread_type_id integer, p_requested_meters numeric, p_priority public.allocation_priority, p_due_date date, p_notes text, p_created_by character varying) TO authenticated;
GRANT ALL ON FUNCTION public.allocate_thread(p_order_id character varying, p_order_reference character varying, p_thread_type_id integer, p_requested_meters numeric, p_priority public.allocation_priority, p_due_date date, p_notes text, p_created_by character varying) TO service_role;


--
-- Name: FUNCTION can_manage_employee(actor_id integer, target_id integer); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.can_manage_employee(actor_id integer, target_id integer) TO anon;
GRANT ALL ON FUNCTION public.can_manage_employee(actor_id integer, target_id integer) TO authenticated;
GRANT ALL ON FUNCTION public.can_manage_employee(actor_id integer, target_id integer) TO service_role;


--
-- Name: FUNCTION cleanup_expired_refresh_tokens(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.cleanup_expired_refresh_tokens() TO anon;
GRANT ALL ON FUNCTION public.cleanup_expired_refresh_tokens() TO authenticated;
GRANT ALL ON FUNCTION public.cleanup_expired_refresh_tokens() TO service_role;


--
-- Name: FUNCTION fn_calculate_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.fn_calculate_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer) TO anon;
GRANT ALL ON FUNCTION public.fn_calculate_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer) TO authenticated;
GRANT ALL ON FUNCTION public.fn_calculate_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer) TO service_role;


--
-- Name: FUNCTION fn_check_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.fn_check_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer) TO anon;
GRANT ALL ON FUNCTION public.fn_check_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer) TO authenticated;
GRANT ALL ON FUNCTION public.fn_check_quota(p_po_id integer, p_style_id integer, p_color_id integer, p_thread_type_id integer) TO service_role;


--
-- Name: FUNCTION fn_generate_issue_code(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.fn_generate_issue_code() TO anon;
GRANT ALL ON FUNCTION public.fn_generate_issue_code() TO authenticated;
GRANT ALL ON FUNCTION public.fn_generate_issue_code() TO service_role;


--
-- Name: FUNCTION fn_get_partial_cone_ratio(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.fn_get_partial_cone_ratio() TO anon;
GRANT ALL ON FUNCTION public.fn_get_partial_cone_ratio() TO authenticated;
GRANT ALL ON FUNCTION public.fn_get_partial_cone_ratio() TO service_role;


--
-- Name: FUNCTION fn_migrate_inventory_to_stock(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.fn_migrate_inventory_to_stock() TO anon;
GRANT ALL ON FUNCTION public.fn_migrate_inventory_to_stock() TO authenticated;
GRANT ALL ON FUNCTION public.fn_migrate_inventory_to_stock() TO service_role;


--
-- Name: FUNCTION fn_update_issue_request_issued_meters(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.fn_update_issue_request_issued_meters() TO anon;
GRANT ALL ON FUNCTION public.fn_update_issue_request_issued_meters() TO authenticated;
GRANT ALL ON FUNCTION public.fn_update_issue_request_issued_meters() TO service_role;


--
-- Name: FUNCTION fn_update_issue_request_status(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.fn_update_issue_request_status() TO anon;
GRANT ALL ON FUNCTION public.fn_update_issue_request_status() TO authenticated;
GRANT ALL ON FUNCTION public.fn_update_issue_request_status() TO service_role;


--
-- Name: FUNCTION fn_update_system_settings_timestamp(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.fn_update_system_settings_timestamp() TO anon;
GRANT ALL ON FUNCTION public.fn_update_system_settings_timestamp() TO authenticated;
GRANT ALL ON FUNCTION public.fn_update_system_settings_timestamp() TO service_role;


--
-- Name: FUNCTION get_employee_permissions(p_employee_id integer); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.get_employee_permissions(p_employee_id integer) TO anon;
GRANT ALL ON FUNCTION public.get_employee_permissions(p_employee_id integer) TO authenticated;
GRANT ALL ON FUNCTION public.get_employee_permissions(p_employee_id integer) TO service_role;


--
-- Name: FUNCTION get_employee_roles(p_employee_id integer); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.get_employee_roles(p_employee_id integer) TO anon;
GRANT ALL ON FUNCTION public.get_employee_roles(p_employee_id integer) TO authenticated;
GRANT ALL ON FUNCTION public.get_employee_roles(p_employee_id integer) TO service_role;


--
-- Name: FUNCTION has_any_permission(p_employee_id integer, requested_permissions text[]); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.has_any_permission(p_employee_id integer, requested_permissions text[]) TO anon;
GRANT ALL ON FUNCTION public.has_any_permission(p_employee_id integer, requested_permissions text[]) TO authenticated;
GRANT ALL ON FUNCTION public.has_any_permission(p_employee_id integer, requested_permissions text[]) TO service_role;


--
-- Name: FUNCTION has_permission(p_employee_id integer, requested_permission text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.has_permission(p_employee_id integer, requested_permission text) TO anon;
GRANT ALL ON FUNCTION public.has_permission(p_employee_id integer, requested_permission text) TO authenticated;
GRANT ALL ON FUNCTION public.has_permission(p_employee_id integer, requested_permission text) TO service_role;


--
-- Name: FUNCTION is_admin(p_employee_id integer); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.is_admin(p_employee_id integer) TO anon;
GRANT ALL ON FUNCTION public.is_admin(p_employee_id integer) TO authenticated;
GRANT ALL ON FUNCTION public.is_admin(p_employee_id integer) TO service_role;


--
-- Name: FUNCTION is_root(p_employee_id integer); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.is_root(p_employee_id integer) TO anon;
GRANT ALL ON FUNCTION public.is_root(p_employee_id integer) TO authenticated;
GRANT ALL ON FUNCTION public.is_root(p_employee_id integer) TO service_role;


--
-- Name: FUNCTION issue_cone(p_allocation_id integer, p_confirmed_by character varying); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.issue_cone(p_allocation_id integer, p_confirmed_by character varying) TO anon;
GRANT ALL ON FUNCTION public.issue_cone(p_allocation_id integer, p_confirmed_by character varying) TO authenticated;
GRANT ALL ON FUNCTION public.issue_cone(p_allocation_id integer, p_confirmed_by character varying) TO service_role;


--
-- Name: FUNCTION recover_cone(p_cone_id integer, p_returned_weight_grams numeric, p_tare_weight_grams numeric, p_notes text, p_weighed_by character varying, p_confirmed_by character varying); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.recover_cone(p_cone_id integer, p_returned_weight_grams numeric, p_tare_weight_grams numeric, p_notes text, p_weighed_by character varying, p_confirmed_by character varying) TO anon;
GRANT ALL ON FUNCTION public.recover_cone(p_cone_id integer, p_returned_weight_grams numeric, p_tare_weight_grams numeric, p_notes text, p_weighed_by character varying, p_confirmed_by character varying) TO authenticated;
GRANT ALL ON FUNCTION public.recover_cone(p_cone_id integer, p_returned_weight_grams numeric, p_tare_weight_grams numeric, p_notes text, p_weighed_by character varying, p_confirmed_by character varying) TO service_role;


--
-- Name: FUNCTION split_allocation(p_allocation_id integer, p_split_meters numeric, p_split_reason text); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.split_allocation(p_allocation_id integer, p_split_meters numeric, p_split_reason text) TO anon;
GRANT ALL ON FUNCTION public.split_allocation(p_allocation_id integer, p_split_meters numeric, p_split_reason text) TO authenticated;
GRANT ALL ON FUNCTION public.split_allocation(p_allocation_id integer, p_split_meters numeric, p_split_reason text) TO service_role;


--
-- Name: FUNCTION thread_audit_trigger_func(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.thread_audit_trigger_func() TO anon;
GRANT ALL ON FUNCTION public.thread_audit_trigger_func() TO authenticated;
GRANT ALL ON FUNCTION public.thread_audit_trigger_func() TO service_role;


--
-- Name: FUNCTION update_lots_updated_at(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.update_lots_updated_at() TO anon;
GRANT ALL ON FUNCTION public.update_lots_updated_at() TO authenticated;
GRANT ALL ON FUNCTION public.update_lots_updated_at() TO service_role;


--
-- Name: FUNCTION update_updated_at_column(); Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON FUNCTION public.update_updated_at_column() TO anon;
GRANT ALL ON FUNCTION public.update_updated_at_column() TO authenticated;
GRANT ALL ON FUNCTION public.update_updated_at_column() TO service_role;


--
-- Name: FUNCTION apply_rls(wal jsonb, max_record_bytes integer); Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON FUNCTION realtime.apply_rls(wal jsonb, max_record_bytes integer) TO postgres;
GRANT ALL ON FUNCTION realtime.apply_rls(wal jsonb, max_record_bytes integer) TO dashboard_user;
GRANT ALL ON FUNCTION realtime.apply_rls(wal jsonb, max_record_bytes integer) TO anon;
GRANT ALL ON FUNCTION realtime.apply_rls(wal jsonb, max_record_bytes integer) TO authenticated;
GRANT ALL ON FUNCTION realtime.apply_rls(wal jsonb, max_record_bytes integer) TO service_role;
GRANT ALL ON FUNCTION realtime.apply_rls(wal jsonb, max_record_bytes integer) TO supabase_realtime_admin;


--
-- Name: FUNCTION broadcast_changes(topic_name text, event_name text, operation text, table_name text, table_schema text, new record, old record, level text); Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON FUNCTION realtime.broadcast_changes(topic_name text, event_name text, operation text, table_name text, table_schema text, new record, old record, level text) TO postgres;
GRANT ALL ON FUNCTION realtime.broadcast_changes(topic_name text, event_name text, operation text, table_name text, table_schema text, new record, old record, level text) TO dashboard_user;


--
-- Name: FUNCTION build_prepared_statement_sql(prepared_statement_name text, entity regclass, columns realtime.wal_column[]); Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON FUNCTION realtime.build_prepared_statement_sql(prepared_statement_name text, entity regclass, columns realtime.wal_column[]) TO postgres;
GRANT ALL ON FUNCTION realtime.build_prepared_statement_sql(prepared_statement_name text, entity regclass, columns realtime.wal_column[]) TO dashboard_user;
GRANT ALL ON FUNCTION realtime.build_prepared_statement_sql(prepared_statement_name text, entity regclass, columns realtime.wal_column[]) TO anon;
GRANT ALL ON FUNCTION realtime.build_prepared_statement_sql(prepared_statement_name text, entity regclass, columns realtime.wal_column[]) TO authenticated;
GRANT ALL ON FUNCTION realtime.build_prepared_statement_sql(prepared_statement_name text, entity regclass, columns realtime.wal_column[]) TO service_role;
GRANT ALL ON FUNCTION realtime.build_prepared_statement_sql(prepared_statement_name text, entity regclass, columns realtime.wal_column[]) TO supabase_realtime_admin;


--
-- Name: FUNCTION "cast"(val text, type_ regtype); Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON FUNCTION realtime."cast"(val text, type_ regtype) TO postgres;
GRANT ALL ON FUNCTION realtime."cast"(val text, type_ regtype) TO dashboard_user;
GRANT ALL ON FUNCTION realtime."cast"(val text, type_ regtype) TO anon;
GRANT ALL ON FUNCTION realtime."cast"(val text, type_ regtype) TO authenticated;
GRANT ALL ON FUNCTION realtime."cast"(val text, type_ regtype) TO service_role;
GRANT ALL ON FUNCTION realtime."cast"(val text, type_ regtype) TO supabase_realtime_admin;


--
-- Name: FUNCTION check_equality_op(op realtime.equality_op, type_ regtype, val_1 text, val_2 text); Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON FUNCTION realtime.check_equality_op(op realtime.equality_op, type_ regtype, val_1 text, val_2 text) TO postgres;
GRANT ALL ON FUNCTION realtime.check_equality_op(op realtime.equality_op, type_ regtype, val_1 text, val_2 text) TO dashboard_user;
GRANT ALL ON FUNCTION realtime.check_equality_op(op realtime.equality_op, type_ regtype, val_1 text, val_2 text) TO anon;
GRANT ALL ON FUNCTION realtime.check_equality_op(op realtime.equality_op, type_ regtype, val_1 text, val_2 text) TO authenticated;
GRANT ALL ON FUNCTION realtime.check_equality_op(op realtime.equality_op, type_ regtype, val_1 text, val_2 text) TO service_role;
GRANT ALL ON FUNCTION realtime.check_equality_op(op realtime.equality_op, type_ regtype, val_1 text, val_2 text) TO supabase_realtime_admin;


--
-- Name: FUNCTION is_visible_through_filters(columns realtime.wal_column[], filters realtime.user_defined_filter[]); Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON FUNCTION realtime.is_visible_through_filters(columns realtime.wal_column[], filters realtime.user_defined_filter[]) TO postgres;
GRANT ALL ON FUNCTION realtime.is_visible_through_filters(columns realtime.wal_column[], filters realtime.user_defined_filter[]) TO dashboard_user;
GRANT ALL ON FUNCTION realtime.is_visible_through_filters(columns realtime.wal_column[], filters realtime.user_defined_filter[]) TO anon;
GRANT ALL ON FUNCTION realtime.is_visible_through_filters(columns realtime.wal_column[], filters realtime.user_defined_filter[]) TO authenticated;
GRANT ALL ON FUNCTION realtime.is_visible_through_filters(columns realtime.wal_column[], filters realtime.user_defined_filter[]) TO service_role;
GRANT ALL ON FUNCTION realtime.is_visible_through_filters(columns realtime.wal_column[], filters realtime.user_defined_filter[]) TO supabase_realtime_admin;


--
-- Name: FUNCTION list_changes(publication name, slot_name name, max_changes integer, max_record_bytes integer); Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON FUNCTION realtime.list_changes(publication name, slot_name name, max_changes integer, max_record_bytes integer) TO postgres;
GRANT ALL ON FUNCTION realtime.list_changes(publication name, slot_name name, max_changes integer, max_record_bytes integer) TO dashboard_user;
GRANT ALL ON FUNCTION realtime.list_changes(publication name, slot_name name, max_changes integer, max_record_bytes integer) TO anon;
GRANT ALL ON FUNCTION realtime.list_changes(publication name, slot_name name, max_changes integer, max_record_bytes integer) TO authenticated;
GRANT ALL ON FUNCTION realtime.list_changes(publication name, slot_name name, max_changes integer, max_record_bytes integer) TO service_role;
GRANT ALL ON FUNCTION realtime.list_changes(publication name, slot_name name, max_changes integer, max_record_bytes integer) TO supabase_realtime_admin;


--
-- Name: FUNCTION quote_wal2json(entity regclass); Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON FUNCTION realtime.quote_wal2json(entity regclass) TO postgres;
GRANT ALL ON FUNCTION realtime.quote_wal2json(entity regclass) TO dashboard_user;
GRANT ALL ON FUNCTION realtime.quote_wal2json(entity regclass) TO anon;
GRANT ALL ON FUNCTION realtime.quote_wal2json(entity regclass) TO authenticated;
GRANT ALL ON FUNCTION realtime.quote_wal2json(entity regclass) TO service_role;
GRANT ALL ON FUNCTION realtime.quote_wal2json(entity regclass) TO supabase_realtime_admin;


--
-- Name: FUNCTION send(payload jsonb, event text, topic text, private boolean); Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON FUNCTION realtime.send(payload jsonb, event text, topic text, private boolean) TO postgres;
GRANT ALL ON FUNCTION realtime.send(payload jsonb, event text, topic text, private boolean) TO dashboard_user;


--
-- Name: FUNCTION subscription_check_filters(); Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON FUNCTION realtime.subscription_check_filters() TO postgres;
GRANT ALL ON FUNCTION realtime.subscription_check_filters() TO dashboard_user;
GRANT ALL ON FUNCTION realtime.subscription_check_filters() TO anon;
GRANT ALL ON FUNCTION realtime.subscription_check_filters() TO authenticated;
GRANT ALL ON FUNCTION realtime.subscription_check_filters() TO service_role;
GRANT ALL ON FUNCTION realtime.subscription_check_filters() TO supabase_realtime_admin;


--
-- Name: FUNCTION to_regrole(role_name text); Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON FUNCTION realtime.to_regrole(role_name text) TO postgres;
GRANT ALL ON FUNCTION realtime.to_regrole(role_name text) TO dashboard_user;
GRANT ALL ON FUNCTION realtime.to_regrole(role_name text) TO anon;
GRANT ALL ON FUNCTION realtime.to_regrole(role_name text) TO authenticated;
GRANT ALL ON FUNCTION realtime.to_regrole(role_name text) TO service_role;
GRANT ALL ON FUNCTION realtime.to_regrole(role_name text) TO supabase_realtime_admin;


--
-- Name: FUNCTION topic(); Type: ACL; Schema: realtime; Owner: supabase_realtime_admin
--

GRANT ALL ON FUNCTION realtime.topic() TO postgres;
GRANT ALL ON FUNCTION realtime.topic() TO dashboard_user;


--
-- Name: FUNCTION http_request(); Type: ACL; Schema: supabase_functions; Owner: supabase_functions_admin
--

REVOKE ALL ON FUNCTION supabase_functions.http_request() FROM PUBLIC;
GRANT ALL ON FUNCTION supabase_functions.http_request() TO postgres;
GRANT ALL ON FUNCTION supabase_functions.http_request() TO anon;
GRANT ALL ON FUNCTION supabase_functions.http_request() TO authenticated;
GRANT ALL ON FUNCTION supabase_functions.http_request() TO service_role;


--
-- Name: FUNCTION _crypto_aead_det_decrypt(message bytea, additional bytea, key_id bigint, context bytea, nonce bytea); Type: ACL; Schema: vault; Owner: supabase_admin
--

GRANT ALL ON FUNCTION vault._crypto_aead_det_decrypt(message bytea, additional bytea, key_id bigint, context bytea, nonce bytea) TO postgres WITH GRANT OPTION;
GRANT ALL ON FUNCTION vault._crypto_aead_det_decrypt(message bytea, additional bytea, key_id bigint, context bytea, nonce bytea) TO service_role;


--
-- Name: FUNCTION create_secret(new_secret text, new_name text, new_description text, new_key_id uuid); Type: ACL; Schema: vault; Owner: supabase_admin
--

GRANT ALL ON FUNCTION vault.create_secret(new_secret text, new_name text, new_description text, new_key_id uuid) TO postgres WITH GRANT OPTION;
GRANT ALL ON FUNCTION vault.create_secret(new_secret text, new_name text, new_description text, new_key_id uuid) TO service_role;


--
-- Name: FUNCTION update_secret(secret_id uuid, new_secret text, new_name text, new_description text, new_key_id uuid); Type: ACL; Schema: vault; Owner: supabase_admin
--

GRANT ALL ON FUNCTION vault.update_secret(secret_id uuid, new_secret text, new_name text, new_description text, new_key_id uuid) TO postgres WITH GRANT OPTION;
GRANT ALL ON FUNCTION vault.update_secret(secret_id uuid, new_secret text, new_name text, new_description text, new_key_id uuid) TO service_role;


--
-- Name: TABLE audit_log_entries; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT ALL ON TABLE auth.audit_log_entries TO dashboard_user;
GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.audit_log_entries TO postgres;
GRANT SELECT ON TABLE auth.audit_log_entries TO postgres WITH GRANT OPTION;


--
-- Name: TABLE flow_state; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.flow_state TO postgres;
GRANT SELECT ON TABLE auth.flow_state TO postgres WITH GRANT OPTION;
GRANT ALL ON TABLE auth.flow_state TO dashboard_user;


--
-- Name: TABLE identities; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.identities TO postgres;
GRANT SELECT ON TABLE auth.identities TO postgres WITH GRANT OPTION;
GRANT ALL ON TABLE auth.identities TO dashboard_user;


--
-- Name: TABLE instances; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT ALL ON TABLE auth.instances TO dashboard_user;
GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.instances TO postgres;
GRANT SELECT ON TABLE auth.instances TO postgres WITH GRANT OPTION;


--
-- Name: TABLE mfa_amr_claims; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.mfa_amr_claims TO postgres;
GRANT SELECT ON TABLE auth.mfa_amr_claims TO postgres WITH GRANT OPTION;
GRANT ALL ON TABLE auth.mfa_amr_claims TO dashboard_user;


--
-- Name: TABLE mfa_challenges; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.mfa_challenges TO postgres;
GRANT SELECT ON TABLE auth.mfa_challenges TO postgres WITH GRANT OPTION;
GRANT ALL ON TABLE auth.mfa_challenges TO dashboard_user;


--
-- Name: TABLE mfa_factors; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.mfa_factors TO postgres;
GRANT SELECT ON TABLE auth.mfa_factors TO postgres WITH GRANT OPTION;
GRANT ALL ON TABLE auth.mfa_factors TO dashboard_user;


--
-- Name: TABLE oauth_authorizations; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT ALL ON TABLE auth.oauth_authorizations TO postgres;
GRANT ALL ON TABLE auth.oauth_authorizations TO dashboard_user;


--
-- Name: TABLE oauth_client_states; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT ALL ON TABLE auth.oauth_client_states TO postgres;
GRANT ALL ON TABLE auth.oauth_client_states TO dashboard_user;


--
-- Name: TABLE oauth_clients; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT ALL ON TABLE auth.oauth_clients TO postgres;
GRANT ALL ON TABLE auth.oauth_clients TO dashboard_user;


--
-- Name: TABLE oauth_consents; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT ALL ON TABLE auth.oauth_consents TO postgres;
GRANT ALL ON TABLE auth.oauth_consents TO dashboard_user;


--
-- Name: TABLE one_time_tokens; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.one_time_tokens TO postgres;
GRANT SELECT ON TABLE auth.one_time_tokens TO postgres WITH GRANT OPTION;
GRANT ALL ON TABLE auth.one_time_tokens TO dashboard_user;


--
-- Name: TABLE refresh_tokens; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT ALL ON TABLE auth.refresh_tokens TO dashboard_user;
GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.refresh_tokens TO postgres;
GRANT SELECT ON TABLE auth.refresh_tokens TO postgres WITH GRANT OPTION;


--
-- Name: SEQUENCE refresh_tokens_id_seq; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT ALL ON SEQUENCE auth.refresh_tokens_id_seq TO dashboard_user;
GRANT ALL ON SEQUENCE auth.refresh_tokens_id_seq TO postgres;


--
-- Name: TABLE saml_providers; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.saml_providers TO postgres;
GRANT SELECT ON TABLE auth.saml_providers TO postgres WITH GRANT OPTION;
GRANT ALL ON TABLE auth.saml_providers TO dashboard_user;


--
-- Name: TABLE saml_relay_states; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.saml_relay_states TO postgres;
GRANT SELECT ON TABLE auth.saml_relay_states TO postgres WITH GRANT OPTION;
GRANT ALL ON TABLE auth.saml_relay_states TO dashboard_user;


--
-- Name: TABLE schema_migrations; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT SELECT ON TABLE auth.schema_migrations TO postgres WITH GRANT OPTION;


--
-- Name: TABLE sessions; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.sessions TO postgres;
GRANT SELECT ON TABLE auth.sessions TO postgres WITH GRANT OPTION;
GRANT ALL ON TABLE auth.sessions TO dashboard_user;


--
-- Name: TABLE sso_domains; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.sso_domains TO postgres;
GRANT SELECT ON TABLE auth.sso_domains TO postgres WITH GRANT OPTION;
GRANT ALL ON TABLE auth.sso_domains TO dashboard_user;


--
-- Name: TABLE sso_providers; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.sso_providers TO postgres;
GRANT SELECT ON TABLE auth.sso_providers TO postgres WITH GRANT OPTION;
GRANT ALL ON TABLE auth.sso_providers TO dashboard_user;


--
-- Name: TABLE users; Type: ACL; Schema: auth; Owner: supabase_auth_admin
--

GRANT ALL ON TABLE auth.users TO dashboard_user;
GRANT INSERT,REFERENCES,DELETE,TRIGGER,TRUNCATE,MAINTAIN,UPDATE ON TABLE auth.users TO postgres;
GRANT SELECT ON TABLE auth.users TO postgres WITH GRANT OPTION;


--
-- Name: TABLE pg_stat_statements; Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON TABLE extensions.pg_stat_statements TO postgres WITH GRANT OPTION;


--
-- Name: TABLE pg_stat_statements_info; Type: ACL; Schema: extensions; Owner: supabase_admin
--

GRANT ALL ON TABLE extensions.pg_stat_statements_info TO postgres WITH GRANT OPTION;


--
-- Name: TABLE batch_transactions; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.batch_transactions TO anon;
GRANT ALL ON TABLE public.batch_transactions TO authenticated;
GRANT ALL ON TABLE public.batch_transactions TO service_role;


--
-- Name: SEQUENCE batch_transactions_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.batch_transactions_id_seq TO anon;
GRANT ALL ON SEQUENCE public.batch_transactions_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.batch_transactions_id_seq TO service_role;


--
-- Name: TABLE color_supplier; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.color_supplier TO anon;
GRANT ALL ON TABLE public.color_supplier TO authenticated;
GRANT ALL ON TABLE public.color_supplier TO service_role;


--
-- Name: SEQUENCE color_supplier_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.color_supplier_id_seq TO anon;
GRANT ALL ON SEQUENCE public.color_supplier_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.color_supplier_id_seq TO service_role;


--
-- Name: TABLE colors; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.colors TO anon;
GRANT ALL ON TABLE public.colors TO authenticated;
GRANT ALL ON TABLE public.colors TO service_role;


--
-- Name: SEQUENCE colors_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.colors_id_seq TO anon;
GRANT ALL ON SEQUENCE public.colors_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.colors_id_seq TO service_role;


--
-- Name: TABLE employee_permissions; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.employee_permissions TO anon;
GRANT ALL ON TABLE public.employee_permissions TO authenticated;
GRANT ALL ON TABLE public.employee_permissions TO service_role;


--
-- Name: SEQUENCE employee_permissions_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.employee_permissions_id_seq TO anon;
GRANT ALL ON SEQUENCE public.employee_permissions_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.employee_permissions_id_seq TO service_role;


--
-- Name: TABLE employee_refresh_tokens; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.employee_refresh_tokens TO anon;
GRANT ALL ON TABLE public.employee_refresh_tokens TO authenticated;
GRANT ALL ON TABLE public.employee_refresh_tokens TO service_role;


--
-- Name: SEQUENCE employee_refresh_tokens_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.employee_refresh_tokens_id_seq TO anon;
GRANT ALL ON SEQUENCE public.employee_refresh_tokens_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.employee_refresh_tokens_id_seq TO service_role;


--
-- Name: TABLE employee_roles; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.employee_roles TO anon;
GRANT ALL ON TABLE public.employee_roles TO authenticated;
GRANT ALL ON TABLE public.employee_roles TO service_role;


--
-- Name: SEQUENCE employee_roles_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.employee_roles_id_seq TO anon;
GRANT ALL ON SEQUENCE public.employee_roles_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.employee_roles_id_seq TO service_role;


--
-- Name: TABLE employees; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.employees TO anon;
GRANT ALL ON TABLE public.employees TO authenticated;
GRANT ALL ON TABLE public.employees TO service_role;


--
-- Name: SEQUENCE employees_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.employees_id_seq TO anon;
GRANT ALL ON SEQUENCE public.employees_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.employees_id_seq TO service_role;


--
-- Name: TABLE lots; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.lots TO anon;
GRANT ALL ON TABLE public.lots TO authenticated;
GRANT ALL ON TABLE public.lots TO service_role;


--
-- Name: SEQUENCE lots_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.lots_id_seq TO anon;
GRANT ALL ON SEQUENCE public.lots_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.lots_id_seq TO service_role;


--
-- Name: TABLE permissions; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.permissions TO anon;
GRANT ALL ON TABLE public.permissions TO authenticated;
GRANT ALL ON TABLE public.permissions TO service_role;


--
-- Name: SEQUENCE permissions_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.permissions_id_seq TO anon;
GRANT ALL ON SEQUENCE public.permissions_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.permissions_id_seq TO service_role;


--
-- Name: TABLE po_items; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.po_items TO anon;
GRANT ALL ON TABLE public.po_items TO authenticated;
GRANT ALL ON TABLE public.po_items TO service_role;


--
-- Name: SEQUENCE po_items_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.po_items_id_seq TO anon;
GRANT ALL ON SEQUENCE public.po_items_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.po_items_id_seq TO service_role;


--
-- Name: TABLE purchase_orders; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.purchase_orders TO anon;
GRANT ALL ON TABLE public.purchase_orders TO authenticated;
GRANT ALL ON TABLE public.purchase_orders TO service_role;


--
-- Name: SEQUENCE purchase_orders_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.purchase_orders_id_seq TO anon;
GRANT ALL ON SEQUENCE public.purchase_orders_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.purchase_orders_id_seq TO service_role;


--
-- Name: TABLE role_permissions; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.role_permissions TO anon;
GRANT ALL ON TABLE public.role_permissions TO authenticated;
GRANT ALL ON TABLE public.role_permissions TO service_role;


--
-- Name: SEQUENCE role_permissions_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.role_permissions_id_seq TO anon;
GRANT ALL ON SEQUENCE public.role_permissions_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.role_permissions_id_seq TO service_role;


--
-- Name: TABLE roles; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.roles TO anon;
GRANT ALL ON TABLE public.roles TO authenticated;
GRANT ALL ON TABLE public.roles TO service_role;


--
-- Name: SEQUENCE roles_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.roles_id_seq TO anon;
GRANT ALL ON SEQUENCE public.roles_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.roles_id_seq TO service_role;


--
-- Name: TABLE skus; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.skus TO anon;
GRANT ALL ON TABLE public.skus TO authenticated;
GRANT ALL ON TABLE public.skus TO service_role;


--
-- Name: SEQUENCE skus_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.skus_id_seq TO anon;
GRANT ALL ON SEQUENCE public.skus_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.skus_id_seq TO service_role;


--
-- Name: TABLE style_color_thread_specs; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.style_color_thread_specs TO anon;
GRANT ALL ON TABLE public.style_color_thread_specs TO authenticated;
GRANT ALL ON TABLE public.style_color_thread_specs TO service_role;


--
-- Name: SEQUENCE style_color_thread_specs_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.style_color_thread_specs_id_seq TO anon;
GRANT ALL ON SEQUENCE public.style_color_thread_specs_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.style_color_thread_specs_id_seq TO service_role;


--
-- Name: TABLE style_thread_specs; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.style_thread_specs TO anon;
GRANT ALL ON TABLE public.style_thread_specs TO authenticated;
GRANT ALL ON TABLE public.style_thread_specs TO service_role;


--
-- Name: SEQUENCE style_thread_specs_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.style_thread_specs_id_seq TO anon;
GRANT ALL ON SEQUENCE public.style_thread_specs_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.style_thread_specs_id_seq TO service_role;


--
-- Name: TABLE styles; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.styles TO anon;
GRANT ALL ON TABLE public.styles TO authenticated;
GRANT ALL ON TABLE public.styles TO service_role;


--
-- Name: SEQUENCE styles_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.styles_id_seq TO anon;
GRANT ALL ON SEQUENCE public.styles_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.styles_id_seq TO service_role;


--
-- Name: TABLE suppliers; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.suppliers TO anon;
GRANT ALL ON TABLE public.suppliers TO authenticated;
GRANT ALL ON TABLE public.suppliers TO service_role;


--
-- Name: SEQUENCE suppliers_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.suppliers_id_seq TO anon;
GRANT ALL ON SEQUENCE public.suppliers_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.suppliers_id_seq TO service_role;


--
-- Name: TABLE system_settings; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.system_settings TO anon;
GRANT ALL ON TABLE public.system_settings TO authenticated;
GRANT ALL ON TABLE public.system_settings TO service_role;


--
-- Name: SEQUENCE system_settings_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.system_settings_id_seq TO anon;
GRANT ALL ON SEQUENCE public.system_settings_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.system_settings_id_seq TO service_role;


--
-- Name: TABLE thread_allocation_cones; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_allocation_cones TO anon;
GRANT ALL ON TABLE public.thread_allocation_cones TO authenticated;
GRANT ALL ON TABLE public.thread_allocation_cones TO service_role;


--
-- Name: SEQUENCE thread_allocation_cones_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_allocation_cones_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_allocation_cones_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_allocation_cones_id_seq TO service_role;


--
-- Name: TABLE thread_allocations; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_allocations TO anon;
GRANT ALL ON TABLE public.thread_allocations TO authenticated;
GRANT ALL ON TABLE public.thread_allocations TO service_role;


--
-- Name: SEQUENCE thread_allocations_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_allocations_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_allocations_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_allocations_id_seq TO service_role;


--
-- Name: TABLE thread_audit_log; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_audit_log TO anon;
GRANT ALL ON TABLE public.thread_audit_log TO authenticated;
GRANT ALL ON TABLE public.thread_audit_log TO service_role;


--
-- Name: SEQUENCE thread_audit_log_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_audit_log_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_audit_log_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_audit_log_id_seq TO service_role;


--
-- Name: TABLE thread_conflict_allocations; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_conflict_allocations TO anon;
GRANT ALL ON TABLE public.thread_conflict_allocations TO authenticated;
GRANT ALL ON TABLE public.thread_conflict_allocations TO service_role;


--
-- Name: SEQUENCE thread_conflict_allocations_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_conflict_allocations_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_conflict_allocations_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_conflict_allocations_id_seq TO service_role;


--
-- Name: TABLE thread_conflicts; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_conflicts TO anon;
GRANT ALL ON TABLE public.thread_conflicts TO authenticated;
GRANT ALL ON TABLE public.thread_conflicts TO service_role;


--
-- Name: SEQUENCE thread_conflicts_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_conflicts_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_conflicts_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_conflicts_id_seq TO service_role;


--
-- Name: TABLE thread_inventory; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_inventory TO anon;
GRANT ALL ON TABLE public.thread_inventory TO authenticated;
GRANT ALL ON TABLE public.thread_inventory TO service_role;


--
-- Name: SEQUENCE thread_inventory_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_inventory_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_inventory_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_inventory_id_seq TO service_role;


--
-- Name: TABLE thread_issue_items; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_issue_items TO anon;
GRANT ALL ON TABLE public.thread_issue_items TO authenticated;
GRANT ALL ON TABLE public.thread_issue_items TO service_role;


--
-- Name: SEQUENCE thread_issue_items_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_issue_items_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_issue_items_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_issue_items_id_seq TO service_role;


--
-- Name: TABLE thread_issue_lines; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_issue_lines TO anon;
GRANT ALL ON TABLE public.thread_issue_lines TO authenticated;
GRANT ALL ON TABLE public.thread_issue_lines TO service_role;


--
-- Name: SEQUENCE thread_issue_lines_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_issue_lines_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_issue_lines_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_issue_lines_id_seq TO service_role;


--
-- Name: TABLE thread_issue_requests; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_issue_requests TO anon;
GRANT ALL ON TABLE public.thread_issue_requests TO authenticated;
GRANT ALL ON TABLE public.thread_issue_requests TO service_role;


--
-- Name: SEQUENCE thread_issue_requests_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_issue_requests_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_issue_requests_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_issue_requests_id_seq TO service_role;


--
-- Name: TABLE thread_issue_returns; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_issue_returns TO anon;
GRANT ALL ON TABLE public.thread_issue_returns TO authenticated;
GRANT ALL ON TABLE public.thread_issue_returns TO service_role;


--
-- Name: SEQUENCE thread_issue_returns_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_issue_returns_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_issue_returns_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_issue_returns_id_seq TO service_role;


--
-- Name: TABLE thread_issues; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_issues TO anon;
GRANT ALL ON TABLE public.thread_issues TO authenticated;
GRANT ALL ON TABLE public.thread_issues TO service_role;


--
-- Name: SEQUENCE thread_issues_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_issues_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_issues_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_issues_id_seq TO service_role;


--
-- Name: TABLE thread_movements; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_movements TO anon;
GRANT ALL ON TABLE public.thread_movements TO authenticated;
GRANT ALL ON TABLE public.thread_movements TO service_role;


--
-- Name: SEQUENCE thread_movements_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_movements_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_movements_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_movements_id_seq TO service_role;


--
-- Name: TABLE thread_order_deliveries; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_order_deliveries TO anon;
GRANT ALL ON TABLE public.thread_order_deliveries TO authenticated;
GRANT ALL ON TABLE public.thread_order_deliveries TO service_role;


--
-- Name: SEQUENCE thread_order_deliveries_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_order_deliveries_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_order_deliveries_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_order_deliveries_id_seq TO service_role;


--
-- Name: TABLE thread_order_items; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_order_items TO anon;
GRANT ALL ON TABLE public.thread_order_items TO authenticated;
GRANT ALL ON TABLE public.thread_order_items TO service_role;


--
-- Name: SEQUENCE thread_order_items_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_order_items_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_order_items_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_order_items_id_seq TO service_role;


--
-- Name: TABLE thread_order_results; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_order_results TO anon;
GRANT ALL ON TABLE public.thread_order_results TO authenticated;
GRANT ALL ON TABLE public.thread_order_results TO service_role;


--
-- Name: SEQUENCE thread_order_results_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_order_results_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_order_results_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_order_results_id_seq TO service_role;


--
-- Name: TABLE thread_order_weeks; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_order_weeks TO anon;
GRANT ALL ON TABLE public.thread_order_weeks TO authenticated;
GRANT ALL ON TABLE public.thread_order_weeks TO service_role;


--
-- Name: SEQUENCE thread_order_weeks_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_order_weeks_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_order_weeks_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_order_weeks_id_seq TO service_role;


--
-- Name: TABLE thread_recovery; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_recovery TO anon;
GRANT ALL ON TABLE public.thread_recovery TO authenticated;
GRANT ALL ON TABLE public.thread_recovery TO service_role;


--
-- Name: SEQUENCE thread_recovery_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_recovery_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_recovery_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_recovery_id_seq TO service_role;


--
-- Name: TABLE thread_stock; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_stock TO anon;
GRANT ALL ON TABLE public.thread_stock TO authenticated;
GRANT ALL ON TABLE public.thread_stock TO service_role;


--
-- Name: SEQUENCE thread_stock_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_stock_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_stock_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_stock_id_seq TO service_role;


--
-- Name: TABLE thread_type_supplier; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_type_supplier TO anon;
GRANT ALL ON TABLE public.thread_type_supplier TO authenticated;
GRANT ALL ON TABLE public.thread_type_supplier TO service_role;


--
-- Name: SEQUENCE thread_type_supplier_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_type_supplier_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_type_supplier_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_type_supplier_id_seq TO service_role;


--
-- Name: TABLE thread_types; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.thread_types TO anon;
GRANT ALL ON TABLE public.thread_types TO authenticated;
GRANT ALL ON TABLE public.thread_types TO service_role;


--
-- Name: SEQUENCE thread_types_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.thread_types_id_seq TO anon;
GRANT ALL ON SEQUENCE public.thread_types_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.thread_types_id_seq TO service_role;


--
-- Name: TABLE v_issue_reconciliation; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.v_issue_reconciliation TO anon;
GRANT ALL ON TABLE public.v_issue_reconciliation TO authenticated;
GRANT ALL ON TABLE public.v_issue_reconciliation TO service_role;


--
-- Name: TABLE v_issue_reconciliation_v2; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.v_issue_reconciliation_v2 TO anon;
GRANT ALL ON TABLE public.v_issue_reconciliation_v2 TO authenticated;
GRANT ALL ON TABLE public.v_issue_reconciliation_v2 TO service_role;


--
-- Name: TABLE warehouses; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.warehouses TO anon;
GRANT ALL ON TABLE public.warehouses TO authenticated;
GRANT ALL ON TABLE public.warehouses TO service_role;


--
-- Name: TABLE v_stock_summary; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON TABLE public.v_stock_summary TO anon;
GRANT ALL ON TABLE public.v_stock_summary TO authenticated;
GRANT ALL ON TABLE public.v_stock_summary TO service_role;


--
-- Name: SEQUENCE warehouses_id_seq; Type: ACL; Schema: public; Owner: postgres
--

GRANT ALL ON SEQUENCE public.warehouses_id_seq TO anon;
GRANT ALL ON SEQUENCE public.warehouses_id_seq TO authenticated;
GRANT ALL ON SEQUENCE public.warehouses_id_seq TO service_role;


--
-- Name: TABLE messages; Type: ACL; Schema: realtime; Owner: supabase_realtime_admin
--

GRANT ALL ON TABLE realtime.messages TO postgres;
GRANT ALL ON TABLE realtime.messages TO dashboard_user;
GRANT SELECT,INSERT,UPDATE ON TABLE realtime.messages TO anon;
GRANT SELECT,INSERT,UPDATE ON TABLE realtime.messages TO authenticated;
GRANT SELECT,INSERT,UPDATE ON TABLE realtime.messages TO service_role;


--
-- Name: TABLE messages_2026_02_09; Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON TABLE realtime.messages_2026_02_09 TO postgres;
GRANT ALL ON TABLE realtime.messages_2026_02_09 TO dashboard_user;


--
-- Name: TABLE messages_2026_02_10; Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON TABLE realtime.messages_2026_02_10 TO postgres;
GRANT ALL ON TABLE realtime.messages_2026_02_10 TO dashboard_user;


--
-- Name: TABLE messages_2026_02_11; Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON TABLE realtime.messages_2026_02_11 TO postgres;
GRANT ALL ON TABLE realtime.messages_2026_02_11 TO dashboard_user;


--
-- Name: TABLE messages_2026_02_12; Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON TABLE realtime.messages_2026_02_12 TO postgres;
GRANT ALL ON TABLE realtime.messages_2026_02_12 TO dashboard_user;


--
-- Name: TABLE messages_2026_02_13; Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON TABLE realtime.messages_2026_02_13 TO postgres;
GRANT ALL ON TABLE realtime.messages_2026_02_13 TO dashboard_user;


--
-- Name: TABLE messages_2026_02_14; Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON TABLE realtime.messages_2026_02_14 TO postgres;
GRANT ALL ON TABLE realtime.messages_2026_02_14 TO dashboard_user;


--
-- Name: TABLE messages_2026_02_15; Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON TABLE realtime.messages_2026_02_15 TO postgres;
GRANT ALL ON TABLE realtime.messages_2026_02_15 TO dashboard_user;


--
-- Name: TABLE schema_migrations; Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON TABLE realtime.schema_migrations TO postgres;
GRANT ALL ON TABLE realtime.schema_migrations TO dashboard_user;
GRANT SELECT ON TABLE realtime.schema_migrations TO anon;
GRANT SELECT ON TABLE realtime.schema_migrations TO authenticated;
GRANT SELECT ON TABLE realtime.schema_migrations TO service_role;
GRANT ALL ON TABLE realtime.schema_migrations TO supabase_realtime_admin;


--
-- Name: TABLE subscription; Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON TABLE realtime.subscription TO postgres;
GRANT ALL ON TABLE realtime.subscription TO dashboard_user;
GRANT SELECT ON TABLE realtime.subscription TO anon;
GRANT SELECT ON TABLE realtime.subscription TO authenticated;
GRANT SELECT ON TABLE realtime.subscription TO service_role;
GRANT ALL ON TABLE realtime.subscription TO supabase_realtime_admin;


--
-- Name: SEQUENCE subscription_id_seq; Type: ACL; Schema: realtime; Owner: supabase_admin
--

GRANT ALL ON SEQUENCE realtime.subscription_id_seq TO postgres;
GRANT ALL ON SEQUENCE realtime.subscription_id_seq TO dashboard_user;
GRANT USAGE ON SEQUENCE realtime.subscription_id_seq TO anon;
GRANT USAGE ON SEQUENCE realtime.subscription_id_seq TO authenticated;
GRANT USAGE ON SEQUENCE realtime.subscription_id_seq TO service_role;
GRANT ALL ON SEQUENCE realtime.subscription_id_seq TO supabase_realtime_admin;


--
-- Name: TABLE buckets; Type: ACL; Schema: storage; Owner: supabase_storage_admin
--

GRANT ALL ON TABLE storage.buckets TO postgres WITH GRANT OPTION;
GRANT ALL ON TABLE storage.buckets TO service_role;
GRANT ALL ON TABLE storage.buckets TO authenticated;
GRANT ALL ON TABLE storage.buckets TO anon;


--
-- Name: TABLE buckets_analytics; Type: ACL; Schema: storage; Owner: supabase_storage_admin
--

GRANT ALL ON TABLE storage.buckets_analytics TO service_role;
GRANT ALL ON TABLE storage.buckets_analytics TO authenticated;
GRANT ALL ON TABLE storage.buckets_analytics TO anon;


--
-- Name: TABLE buckets_vectors; Type: ACL; Schema: storage; Owner: supabase_storage_admin
--

GRANT SELECT ON TABLE storage.buckets_vectors TO service_role;
GRANT SELECT ON TABLE storage.buckets_vectors TO authenticated;
GRANT SELECT ON TABLE storage.buckets_vectors TO anon;


--
-- Name: TABLE iceberg_namespaces; Type: ACL; Schema: storage; Owner: supabase_storage_admin
--

GRANT ALL ON TABLE storage.iceberg_namespaces TO service_role;
GRANT SELECT ON TABLE storage.iceberg_namespaces TO authenticated;
GRANT SELECT ON TABLE storage.iceberg_namespaces TO anon;


--
-- Name: TABLE iceberg_tables; Type: ACL; Schema: storage; Owner: supabase_storage_admin
--

GRANT ALL ON TABLE storage.iceberg_tables TO service_role;
GRANT SELECT ON TABLE storage.iceberg_tables TO authenticated;
GRANT SELECT ON TABLE storage.iceberg_tables TO anon;


--
-- Name: TABLE objects; Type: ACL; Schema: storage; Owner: supabase_storage_admin
--

GRANT ALL ON TABLE storage.objects TO postgres WITH GRANT OPTION;
GRANT ALL ON TABLE storage.objects TO service_role;
GRANT ALL ON TABLE storage.objects TO authenticated;
GRANT ALL ON TABLE storage.objects TO anon;


--
-- Name: TABLE s3_multipart_uploads; Type: ACL; Schema: storage; Owner: supabase_storage_admin
--

GRANT ALL ON TABLE storage.s3_multipart_uploads TO service_role;
GRANT SELECT ON TABLE storage.s3_multipart_uploads TO authenticated;
GRANT SELECT ON TABLE storage.s3_multipart_uploads TO anon;


--
-- Name: TABLE s3_multipart_uploads_parts; Type: ACL; Schema: storage; Owner: supabase_storage_admin
--

GRANT ALL ON TABLE storage.s3_multipart_uploads_parts TO service_role;
GRANT SELECT ON TABLE storage.s3_multipart_uploads_parts TO authenticated;
GRANT SELECT ON TABLE storage.s3_multipart_uploads_parts TO anon;


--
-- Name: TABLE vector_indexes; Type: ACL; Schema: storage; Owner: supabase_storage_admin
--

GRANT SELECT ON TABLE storage.vector_indexes TO service_role;
GRANT SELECT ON TABLE storage.vector_indexes TO authenticated;
GRANT SELECT ON TABLE storage.vector_indexes TO anon;


--
-- Name: TABLE hooks; Type: ACL; Schema: supabase_functions; Owner: supabase_functions_admin
--

GRANT ALL ON TABLE supabase_functions.hooks TO postgres;
GRANT ALL ON TABLE supabase_functions.hooks TO anon;
GRANT ALL ON TABLE supabase_functions.hooks TO authenticated;
GRANT ALL ON TABLE supabase_functions.hooks TO service_role;


--
-- Name: SEQUENCE hooks_id_seq; Type: ACL; Schema: supabase_functions; Owner: supabase_functions_admin
--

GRANT ALL ON SEQUENCE supabase_functions.hooks_id_seq TO postgres;
GRANT ALL ON SEQUENCE supabase_functions.hooks_id_seq TO anon;
GRANT ALL ON SEQUENCE supabase_functions.hooks_id_seq TO authenticated;
GRANT ALL ON SEQUENCE supabase_functions.hooks_id_seq TO service_role;


--
-- Name: TABLE migrations; Type: ACL; Schema: supabase_functions; Owner: supabase_functions_admin
--

GRANT ALL ON TABLE supabase_functions.migrations TO postgres;
GRANT ALL ON TABLE supabase_functions.migrations TO anon;
GRANT ALL ON TABLE supabase_functions.migrations TO authenticated;
GRANT ALL ON TABLE supabase_functions.migrations TO service_role;


--
-- Name: TABLE secrets; Type: ACL; Schema: vault; Owner: supabase_admin
--

GRANT SELECT,REFERENCES,DELETE,TRUNCATE ON TABLE vault.secrets TO postgres WITH GRANT OPTION;
GRANT SELECT,DELETE ON TABLE vault.secrets TO service_role;


--
-- Name: TABLE decrypted_secrets; Type: ACL; Schema: vault; Owner: supabase_admin
--

GRANT SELECT,REFERENCES,DELETE,TRUNCATE ON TABLE vault.decrypted_secrets TO postgres WITH GRANT OPTION;
GRANT SELECT,DELETE ON TABLE vault.decrypted_secrets TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR SEQUENCES; Type: DEFAULT ACL; Schema: auth; Owner: supabase_auth_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_auth_admin IN SCHEMA auth GRANT ALL ON SEQUENCES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_auth_admin IN SCHEMA auth GRANT ALL ON SEQUENCES TO dashboard_user;


--
-- Name: DEFAULT PRIVILEGES FOR FUNCTIONS; Type: DEFAULT ACL; Schema: auth; Owner: supabase_auth_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_auth_admin IN SCHEMA auth GRANT ALL ON FUNCTIONS TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_auth_admin IN SCHEMA auth GRANT ALL ON FUNCTIONS TO dashboard_user;


--
-- Name: DEFAULT PRIVILEGES FOR TABLES; Type: DEFAULT ACL; Schema: auth; Owner: supabase_auth_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_auth_admin IN SCHEMA auth GRANT ALL ON TABLES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_auth_admin IN SCHEMA auth GRANT ALL ON TABLES TO dashboard_user;


--
-- Name: DEFAULT PRIVILEGES FOR SEQUENCES; Type: DEFAULT ACL; Schema: extensions; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA extensions GRANT ALL ON SEQUENCES TO postgres WITH GRANT OPTION;


--
-- Name: DEFAULT PRIVILEGES FOR FUNCTIONS; Type: DEFAULT ACL; Schema: extensions; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA extensions GRANT ALL ON FUNCTIONS TO postgres WITH GRANT OPTION;


--
-- Name: DEFAULT PRIVILEGES FOR TABLES; Type: DEFAULT ACL; Schema: extensions; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA extensions GRANT ALL ON TABLES TO postgres WITH GRANT OPTION;


--
-- Name: DEFAULT PRIVILEGES FOR SEQUENCES; Type: DEFAULT ACL; Schema: graphql; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql GRANT ALL ON SEQUENCES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql GRANT ALL ON SEQUENCES TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql GRANT ALL ON SEQUENCES TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql GRANT ALL ON SEQUENCES TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR FUNCTIONS; Type: DEFAULT ACL; Schema: graphql; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql GRANT ALL ON FUNCTIONS TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql GRANT ALL ON FUNCTIONS TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql GRANT ALL ON FUNCTIONS TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql GRANT ALL ON FUNCTIONS TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR TABLES; Type: DEFAULT ACL; Schema: graphql; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql GRANT ALL ON TABLES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql GRANT ALL ON TABLES TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql GRANT ALL ON TABLES TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql GRANT ALL ON TABLES TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR SEQUENCES; Type: DEFAULT ACL; Schema: graphql_public; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql_public GRANT ALL ON SEQUENCES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql_public GRANT ALL ON SEQUENCES TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql_public GRANT ALL ON SEQUENCES TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql_public GRANT ALL ON SEQUENCES TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR FUNCTIONS; Type: DEFAULT ACL; Schema: graphql_public; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql_public GRANT ALL ON FUNCTIONS TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql_public GRANT ALL ON FUNCTIONS TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql_public GRANT ALL ON FUNCTIONS TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql_public GRANT ALL ON FUNCTIONS TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR TABLES; Type: DEFAULT ACL; Schema: graphql_public; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql_public GRANT ALL ON TABLES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql_public GRANT ALL ON TABLES TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql_public GRANT ALL ON TABLES TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA graphql_public GRANT ALL ON TABLES TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR SEQUENCES; Type: DEFAULT ACL; Schema: public; Owner: postgres
--

ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA public GRANT ALL ON SEQUENCES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA public GRANT ALL ON SEQUENCES TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA public GRANT ALL ON SEQUENCES TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA public GRANT ALL ON SEQUENCES TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR SEQUENCES; Type: DEFAULT ACL; Schema: public; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA public GRANT ALL ON SEQUENCES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA public GRANT ALL ON SEQUENCES TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA public GRANT ALL ON SEQUENCES TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA public GRANT ALL ON SEQUENCES TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR FUNCTIONS; Type: DEFAULT ACL; Schema: public; Owner: postgres
--

ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA public GRANT ALL ON FUNCTIONS TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA public GRANT ALL ON FUNCTIONS TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA public GRANT ALL ON FUNCTIONS TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA public GRANT ALL ON FUNCTIONS TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR FUNCTIONS; Type: DEFAULT ACL; Schema: public; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA public GRANT ALL ON FUNCTIONS TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA public GRANT ALL ON FUNCTIONS TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA public GRANT ALL ON FUNCTIONS TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA public GRANT ALL ON FUNCTIONS TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR TABLES; Type: DEFAULT ACL; Schema: public; Owner: postgres
--

ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA public GRANT ALL ON TABLES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA public GRANT ALL ON TABLES TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA public GRANT ALL ON TABLES TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA public GRANT ALL ON TABLES TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR TABLES; Type: DEFAULT ACL; Schema: public; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA public GRANT ALL ON TABLES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA public GRANT ALL ON TABLES TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA public GRANT ALL ON TABLES TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA public GRANT ALL ON TABLES TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR SEQUENCES; Type: DEFAULT ACL; Schema: realtime; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA realtime GRANT ALL ON SEQUENCES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA realtime GRANT ALL ON SEQUENCES TO dashboard_user;


--
-- Name: DEFAULT PRIVILEGES FOR FUNCTIONS; Type: DEFAULT ACL; Schema: realtime; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA realtime GRANT ALL ON FUNCTIONS TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA realtime GRANT ALL ON FUNCTIONS TO dashboard_user;


--
-- Name: DEFAULT PRIVILEGES FOR TABLES; Type: DEFAULT ACL; Schema: realtime; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA realtime GRANT ALL ON TABLES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA realtime GRANT ALL ON TABLES TO dashboard_user;


--
-- Name: DEFAULT PRIVILEGES FOR SEQUENCES; Type: DEFAULT ACL; Schema: storage; Owner: postgres
--

ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA storage GRANT ALL ON SEQUENCES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA storage GRANT ALL ON SEQUENCES TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA storage GRANT ALL ON SEQUENCES TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA storage GRANT ALL ON SEQUENCES TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR FUNCTIONS; Type: DEFAULT ACL; Schema: storage; Owner: postgres
--

ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA storage GRANT ALL ON FUNCTIONS TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA storage GRANT ALL ON FUNCTIONS TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA storage GRANT ALL ON FUNCTIONS TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA storage GRANT ALL ON FUNCTIONS TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR TABLES; Type: DEFAULT ACL; Schema: storage; Owner: postgres
--

ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA storage GRANT ALL ON TABLES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA storage GRANT ALL ON TABLES TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA storage GRANT ALL ON TABLES TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA storage GRANT ALL ON TABLES TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR SEQUENCES; Type: DEFAULT ACL; Schema: supabase_functions; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA supabase_functions GRANT ALL ON SEQUENCES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA supabase_functions GRANT ALL ON SEQUENCES TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA supabase_functions GRANT ALL ON SEQUENCES TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA supabase_functions GRANT ALL ON SEQUENCES TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR FUNCTIONS; Type: DEFAULT ACL; Schema: supabase_functions; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA supabase_functions GRANT ALL ON FUNCTIONS TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA supabase_functions GRANT ALL ON FUNCTIONS TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA supabase_functions GRANT ALL ON FUNCTIONS TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA supabase_functions GRANT ALL ON FUNCTIONS TO service_role;


--
-- Name: DEFAULT PRIVILEGES FOR TABLES; Type: DEFAULT ACL; Schema: supabase_functions; Owner: supabase_admin
--

ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA supabase_functions GRANT ALL ON TABLES TO postgres;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA supabase_functions GRANT ALL ON TABLES TO anon;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA supabase_functions GRANT ALL ON TABLES TO authenticated;
ALTER DEFAULT PRIVILEGES FOR ROLE supabase_admin IN SCHEMA supabase_functions GRANT ALL ON TABLES TO service_role;


--
-- Name: issue_graphql_placeholder; Type: EVENT TRIGGER; Schema: -; Owner: supabase_admin
--

CREATE EVENT TRIGGER issue_graphql_placeholder ON sql_drop
         WHEN TAG IN ('DROP EXTENSION')
   EXECUTE FUNCTION extensions.set_graphql_placeholder();


ALTER EVENT TRIGGER issue_graphql_placeholder OWNER TO supabase_admin;

--
-- Name: issue_pg_cron_access; Type: EVENT TRIGGER; Schema: -; Owner: supabase_admin
--

CREATE EVENT TRIGGER issue_pg_cron_access ON ddl_command_end
         WHEN TAG IN ('CREATE EXTENSION')
   EXECUTE FUNCTION extensions.grant_pg_cron_access();


ALTER EVENT TRIGGER issue_pg_cron_access OWNER TO supabase_admin;

--
-- Name: issue_pg_graphql_access; Type: EVENT TRIGGER; Schema: -; Owner: supabase_admin
--

CREATE EVENT TRIGGER issue_pg_graphql_access ON ddl_command_end
         WHEN TAG IN ('CREATE FUNCTION')
   EXECUTE FUNCTION extensions.grant_pg_graphql_access();


ALTER EVENT TRIGGER issue_pg_graphql_access OWNER TO supabase_admin;

--
-- Name: issue_pg_net_access; Type: EVENT TRIGGER; Schema: -; Owner: supabase_admin
--

CREATE EVENT TRIGGER issue_pg_net_access ON ddl_command_end
         WHEN TAG IN ('CREATE EXTENSION')
   EXECUTE FUNCTION extensions.grant_pg_net_access();


ALTER EVENT TRIGGER issue_pg_net_access OWNER TO supabase_admin;

--
-- Name: pgrst_ddl_watch; Type: EVENT TRIGGER; Schema: -; Owner: supabase_admin
--

CREATE EVENT TRIGGER pgrst_ddl_watch ON ddl_command_end
   EXECUTE FUNCTION extensions.pgrst_ddl_watch();


ALTER EVENT TRIGGER pgrst_ddl_watch OWNER TO supabase_admin;

--
-- Name: pgrst_drop_watch; Type: EVENT TRIGGER; Schema: -; Owner: supabase_admin
--

CREATE EVENT TRIGGER pgrst_drop_watch ON sql_drop
   EXECUTE FUNCTION extensions.pgrst_drop_watch();


ALTER EVENT TRIGGER pgrst_drop_watch OWNER TO supabase_admin;

--
-- PostgreSQL database dump complete
--

\unrestrict uZiVC3jxUInbFt04EeJimgEVveTtdZq1gr00xb6deCZc6HZs1U6h2eFiy6LE3zP

